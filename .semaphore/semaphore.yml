version: v1.0
name: CODSEN
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
# The "Stop" fail-fast strategy (not "Cancel")
fail_fast:
  stop:
    when: "true"
execution_time_limit:
  hours: 2
blocks:
  - name: "Set things up"
    task:
      jobs:
        - name: Bootstrap
          commands:
            - checkout
            - nvm install node
            - node --version
            - npm --version
            - npm run bootstrap
            # dump freshly-bootstrapped ./packages/ into cache
            - cache store raw-packages-folder packages
            - cache store node_modules-folder node_modules
  # "Fan-in and Fan-out"
  - name: "Unit-test everything"
    task:
      prologue:
        commands:
          - checkout
          - cache restore raw-packages-folder
          - cache restore node_modules-folder
      jobs:
        - name: "test all-named-html-entities"
          commands:
            - cd packages/all-named-html-entities
            - npm run test
            - cd ...
            - cache store all-named-html-entities-cache-1 packages/all-named-html-entities
        - name: "test array-group-str-omit-num-char"
          commands:
            - cd packages/array-group-str-omit-num-char
            - npm run test
            - cd ...
            - cache store array-group-str-omit-num-char-cache-1 packages/array-group-str-omit-num-char
        - name: "test array-includes-with-glob"
          commands:
            - cd packages/array-includes-with-glob
            - npm run test
            - cd ...
            - cache store array-includes-with-glob-cache-1 packages/array-includes-with-glob
        - name: "test array-of-arrays-into-ast"
          commands:
            - cd packages/array-of-arrays-into-ast
            - npm run test
            - cd ...
            - cache store array-of-arrays-into-ast-cache-1 packages/array-of-arrays-into-ast
        - name: "test array-of-arrays-sort-by-col"
          commands:
            - cd packages/array-of-arrays-sort-by-col
            - npm run test
            - cd ...
            - cache store array-of-arrays-sort-by-col-cache-1 packages/array-of-arrays-sort-by-col
        - name: "test array-pull-all-with-glob"
          commands:
            - cd packages/array-pull-all-with-glob
            - npm run test
            - cd ...
            - cache store array-pull-all-with-glob-cache-1 packages/array-pull-all-with-glob
        - name: "test arrayiffy-if-string"
          commands:
            - cd packages/arrayiffy-if-string
            - npm run test
            - cd ...
            - cache store arrayiffy-if-string-cache-1 packages/arrayiffy-if-string
        - name: "test ast-compare"
          commands:
            - cd packages/ast-compare
            - npm run test
            - cd ...
            - cache store ast-compare-cache-1 packages/ast-compare
        - name: "test ast-contains-only-empty-space"
          commands:
            - cd packages/ast-contains-only-empty-space
            - npm run test
            - cd ...
            - cache store ast-contains-only-empty-space-cache-1 packages/ast-contains-only-empty-space
        - name: "test ast-deep-contains"
          commands:
            - cd packages/ast-deep-contains
            - npm run test
            - cd ...
            - cache store ast-deep-contains-cache-1 packages/ast-deep-contains
        - name: "test ast-delete-object"
          commands:
            - cd packages/ast-delete-object
            - npm run test
            - cd ...
            - cache store ast-delete-object-cache-1 packages/ast-delete-object
        - name: "test ast-get-object"
          commands:
            - cd packages/ast-get-object
            - npm run test
            - cd ...
            - cache store ast-get-object-cache-1 packages/ast-get-object
        - name: "test ast-get-values-by-key"
          commands:
            - cd packages/ast-get-values-by-key
            - npm run test
            - cd ...
            - cache store ast-get-values-by-key-cache-1 packages/ast-get-values-by-key
        - name: "test ast-is-empty"
          commands:
            - cd packages/ast-is-empty
            - npm run test
            - cd ...
            - cache store ast-is-empty-cache-1 packages/ast-is-empty
        - name: "test ast-loose-compare"
          commands:
            - cd packages/ast-loose-compare
            - npm run test
            - cd ...
            - cache store ast-loose-compare-cache-1 packages/ast-loose-compare
        - name: "test ast-monkey"
          commands:
            - cd packages/ast-monkey
            - npm run test
            - cd ...
            - cache store ast-monkey-cache-1 packages/ast-monkey
        - name: "test ast-monkey-traverse"
          commands:
            - cd packages/ast-monkey-traverse
            - npm run test
            - cd ...
            - cache store ast-monkey-traverse-cache-1 packages/ast-monkey-traverse
        - name: "test ast-monkey-traverse-with-lookahead"
          commands:
            - cd packages/ast-monkey-traverse-with-lookahead
            - npm run test
            - cd ...
            - cache store ast-monkey-traverse-with-lookahead-cache-1 packages/ast-monkey-traverse-with-lookahead
        - name: "test ast-monkey-util"
          commands:
            - cd packages/ast-monkey-util
            - npm run test
            - cd ...
            - cache store ast-monkey-util-cache-1 packages/ast-monkey-util
        - name: "test bitbucket-slug"
          commands:
            - cd packages/bitbucket-slug
            - npm run test
            - cd ...
            - cache store bitbucket-slug-cache-1 packages/bitbucket-slug
        - name: "test charcode-is-valid-xml-name-character"
          commands:
            - cd packages/charcode-is-valid-xml-name-character
            - npm run test
            - cd ...
            - cache store charcode-is-valid-xml-name-character-cache-1 packages/charcode-is-valid-xml-name-character
        - name: "test check-types-mini"
          commands:
            - cd packages/check-types-mini
            - npm run test
            - cd ...
            - cache store check-types-mini-cache-1 packages/check-types-mini
        - name: "test codsen-parser"
          commands:
            - cd packages/codsen-parser
            - npm run test
            - cd ...
            - cache store codsen-parser-cache-1 packages/codsen-parser
        - name: "test codsen-tokenizer"
          commands:
            - cd packages/codsen-tokenizer
            - npm run test
            - cd ...
            - cache store codsen-tokenizer-cache-1 packages/codsen-tokenizer
        - name: "test color-shorthand-hex-to-six-digit"
          commands:
            - cd packages/color-shorthand-hex-to-six-digit
            - npm run test
            - cd ...
            - cache store color-shorthand-hex-to-six-digit-cache-1 packages/color-shorthand-hex-to-six-digit
        - name: "test csv-sort"
          commands:
            - cd packages/csv-sort
            - npm run test
            - cd ...
            - cache store csv-sort-cache-1 packages/csv-sort
        - name: "test csv-sort-cli"
          commands:
            - cd packages/csv-sort-cli
            - npm run test
            - cd ...
            - cache store csv-sort-cli-cache-1 packages/csv-sort-cli
        - name: "test csv-split-easy"
          commands:
            - cd packages/csv-split-easy
            - npm run test
            - cd ...
            - cache store csv-split-easy-cache-1 packages/csv-split-easy
        - name: "test detect-is-it-html-or-xhtml"
          commands:
            - cd packages/detect-is-it-html-or-xhtml
            - npm run test
            - cd ...
            - cache store detect-is-it-html-or-xhtml-cache-1 packages/detect-is-it-html-or-xhtml
        - name: "test detect-templating-language"
          commands:
            - cd packages/detect-templating-language
            - npm run test
            - cd ...
            - cache store detect-templating-language-cache-1 packages/detect-templating-language
        - name: "test detergent"
          commands:
            - cd packages/detergent
            - npm run test
            - cd ...
            - cache store detergent-cache-1 packages/detergent
        - name: "test easy-replace"
          commands:
            - cd packages/easy-replace
            - npm run test
            - cd ...
            - cache store easy-replace-cache-1 packages/easy-replace
        - name: "test edit-package-json"
          commands:
            - cd packages/edit-package-json
            - npm run test
            - cd ...
            - cache store edit-package-json-cache-1 packages/edit-package-json
        - name: "test email-all-chars-within-ascii"
          commands:
            - cd packages/email-all-chars-within-ascii
            - npm run test
            - cd ...
            - cache store email-all-chars-within-ascii-cache-1 packages/email-all-chars-within-ascii
        - name: "test email-all-chars-within-ascii-cli"
          commands:
            - cd packages/email-all-chars-within-ascii-cli
            - npm run test
            - cd ...
            - cache store email-all-chars-within-ascii-cli-cache-1 packages/email-all-chars-within-ascii-cli
        - name: "test email-comb"
          commands:
            - cd packages/email-comb
            - npm run test
            - cd ...
            - cache store email-comb-cache-1 packages/email-comb
        - name: "test email-homey"
          commands:
            - cd packages/email-homey
            - npm run test
            - cd ...
            - cache store email-homey-cache-1 packages/email-homey
        - name: "test emlint"
          commands:
            - cd packages/emlint
            - npm run test
            - cd ...
            - cache store emlint-cache-1 packages/emlint
        - name: "test eslint-plugin-row-num"
          commands:
            - cd packages/eslint-plugin-row-num
            - npm run test
            - cd ...
            - cache store eslint-plugin-row-num-cache-1 packages/eslint-plugin-row-num
        - name: "test eslint-plugin-test-num"
          commands:
            - cd packages/eslint-plugin-test-num
            - npm run test
            - cd ...
            - cache store eslint-plugin-test-num-cache-1 packages/eslint-plugin-test-num
        - name: "test generate-atomic-css"
          commands:
            - cd packages/generate-atomic-css
            - npm run test
            - cd ...
            - cache store generate-atomic-css-cache-1 packages/generate-atomic-css
        - name: "test generate-atomic-css-cli"
          commands:
            - cd packages/generate-atomic-css-cli
            - npm run test
            - cd ...
            - cache store generate-atomic-css-cli-cache-1 packages/generate-atomic-css-cli
        - name: "test gulp-email-remove-unused-css"
          commands:
            - cd packages/gulp-email-remove-unused-css
            - npm run test
            - cd ...
            - cache store gulp-email-remove-unused-css-cache-1 packages/gulp-email-remove-unused-css
        - name: "test helga"
          commands:
            - cd packages/helga
            - npm run test
            - cd ...
            - cache store helga-cache-1 packages/helga
        - name: "test html-all-known-attributes"
          commands:
            - cd packages/html-all-known-attributes
            - npm run test
            - cd ...
            - cache store html-all-known-attributes-cache-1 packages/html-all-known-attributes
        - name: "test html-crush"
          commands:
            - cd packages/html-crush
            - npm run test
            - cd ...
            - cache store html-crush-cache-1 packages/html-crush
        - name: "test html-entities-not-email-friendly"
          commands:
            - cd packages/html-entities-not-email-friendly
            - npm run test
            - cd ...
            - cache store html-entities-not-email-friendly-cache-1 packages/html-entities-not-email-friendly
        - name: "test html-img-alt"
          commands:
            - cd packages/html-img-alt
            - npm run test
            - cd ...
            - cache store html-img-alt-cache-1 packages/html-img-alt
        - name: "test html-table-patcher"
          commands:
            - cd packages/html-table-patcher
            - npm run test
            - cd ...
            - cache store html-table-patcher-cache-1 packages/html-table-patcher
        - name: "test is-char-suitable-for-html-attr-name"
          commands:
            - cd packages/is-char-suitable-for-html-attr-name
            - npm run test
            - cd ...
            - cache store is-char-suitable-for-html-attr-name-cache-1 packages/is-char-suitable-for-html-attr-name
        - name: "test is-html-attribute-closing"
          commands:
            - cd packages/is-html-attribute-closing
            - npm run test
            - cd ...
            - cache store is-html-attribute-closing-cache-1 packages/is-html-attribute-closing
        - name: "test is-html-tag-opening"
          commands:
            - cd packages/is-html-tag-opening
            - npm run test
            - cd ...
            - cache store is-html-tag-opening-cache-1 packages/is-html-tag-opening
        - name: "test is-language-code"
          commands:
            - cd packages/is-language-code
            - npm run test
            - cd ...
            - cache store is-language-code-cache-1 packages/is-language-code
        - name: "test is-media-descriptor"
          commands:
            - cd packages/is-media-descriptor
            - npm run test
            - cd ...
            - cache store is-media-descriptor-cache-1 packages/is-media-descriptor
        - name: "test is-relative-uri"
          commands:
            - cd packages/is-relative-uri
            - npm run test
            - cd ...
            - cache store is-relative-uri-cache-1 packages/is-relative-uri
        - name: "test js-row-num"
          commands:
            - cd packages/js-row-num
            - npm run test
            - cd ...
            - cache store js-row-num-cache-1 packages/js-row-num
        - name: "test js-row-num-cli"
          commands:
            - cd packages/js-row-num-cli
            - npm run test
            - cd ...
            - cache store js-row-num-cli-cache-1 packages/js-row-num-cli
        - name: "test json-comb"
          commands:
            - cd packages/json-comb
            - npm run test
            - cd ...
            - cache store json-comb-cache-1 packages/json-comb
        - name: "test json-comb-core"
          commands:
            - cd packages/json-comb-core
            - npm run test
            - cd ...
            - cache store json-comb-core-cache-1 packages/json-comb-core
        - name: "test json-sort-cli"
          commands:
            - cd packages/json-sort-cli
            - npm run test
            - cd ...
            - cache store json-sort-cli-cache-1 packages/json-sort-cli
        - name: "test json-variables"
          commands:
            - cd packages/json-variables
            - npm run test
            - cd ...
            - cache store json-variables-cache-1 packages/json-variables
        - name: "test lect"
          commands:
            - cd packages/lect
            - npm run test
            - cd ...
            - cache store lect-cache-1 packages/lect
        - name: "test lerna-clean-changelogs"
          commands:
            - cd packages/lerna-clean-changelogs
            - npm run test
            - cd ...
            - cache store lerna-clean-changelogs-cache-1 packages/lerna-clean-changelogs
        - name: "test lerna-clean-changelogs-cli"
          commands:
            - cd packages/lerna-clean-changelogs-cli
            - npm run test
            - cd ...
            - cache store lerna-clean-changelogs-cli-cache-1 packages/lerna-clean-changelogs-cli
        - name: "test lerna-link-dep"
          commands:
            - cd packages/lerna-link-dep
            - npm run test
            - cd ...
            - cache store lerna-link-dep-cache-1 packages/lerna-link-dep
        - name: "test line-column-mini"
          commands:
            - cd packages/line-column-mini
            - npm run test
            - cd ...
            - cache store line-column-mini-cache-1 packages/line-column-mini
        - name: "test object-all-values-equal-to"
          commands:
            - cd packages/object-all-values-equal-to
            - npm run test
            - cd ...
            - cache store object-all-values-equal-to-cache-1 packages/object-all-values-equal-to
        - name: "test object-boolean-combinations"
          commands:
            - cd packages/object-boolean-combinations
            - npm run test
            - cd ...
            - cache store object-boolean-combinations-cache-1 packages/object-boolean-combinations
        - name: "test object-delete-key"
          commands:
            - cd packages/object-delete-key
            - npm run test
            - cd ...
            - cache store object-delete-key-cache-1 packages/object-delete-key
        - name: "test object-fill-missing-keys"
          commands:
            - cd packages/object-fill-missing-keys
            - npm run test
            - cd ...
            - cache store object-fill-missing-keys-cache-1 packages/object-fill-missing-keys
        - name: "test object-flatten-all-arrays"
          commands:
            - cd packages/object-flatten-all-arrays
            - npm run test
            - cd ...
            - cache store object-flatten-all-arrays-cache-1 packages/object-flatten-all-arrays
        - name: "test object-flatten-referencing"
          commands:
            - cd packages/object-flatten-referencing
            - npm run test
            - cd ...
            - cache store object-flatten-referencing-cache-1 packages/object-flatten-referencing
        - name: "test object-merge-advanced"
          commands:
            - cd packages/object-merge-advanced
            - npm run test
            - cd ...
            - cache store object-merge-advanced-cache-1 packages/object-merge-advanced
        - name: "test object-no-new-keys"
          commands:
            - cd packages/object-no-new-keys
            - npm run test
            - cd ...
            - cache store object-no-new-keys-cache-1 packages/object-no-new-keys
        - name: "test object-set-all-values-to"
          commands:
            - cd packages/object-set-all-values-to
            - npm run test
            - cd ...
            - cache store object-set-all-values-to-cache-1 packages/object-set-all-values-to
        - name: "test ranges-apply"
          commands:
            - cd packages/ranges-apply
            - npm run test
            - cd ...
            - cache store ranges-apply-cache-1 packages/ranges-apply
        - name: "test ranges-crop"
          commands:
            - cd packages/ranges-crop
            - npm run test
            - cd ...
            - cache store ranges-crop-cache-1 packages/ranges-crop
        - name: "test ranges-ent-decode"
          commands:
            - cd packages/ranges-ent-decode
            - npm run test
            - cd ...
            - cache store ranges-ent-decode-cache-1 packages/ranges-ent-decode
        - name: "test ranges-invert"
          commands:
            - cd packages/ranges-invert
            - npm run test
            - cd ...
            - cache store ranges-invert-cache-1 packages/ranges-invert
        - name: "test ranges-is-index-within"
          commands:
            - cd packages/ranges-is-index-within
            - npm run test
            - cd ...
            - cache store ranges-is-index-within-cache-1 packages/ranges-is-index-within
        - name: "test ranges-iterate"
          commands:
            - cd packages/ranges-iterate
            - npm run test
            - cd ...
            - cache store ranges-iterate-cache-1 packages/ranges-iterate
        - name: "test ranges-merge"
          commands:
            - cd packages/ranges-merge
            - npm run test
            - cd ...
            - cache store ranges-merge-cache-1 packages/ranges-merge
        - name: "test ranges-offset"
          commands:
            - cd packages/ranges-offset
            - npm run test
            - cd ...
            - cache store ranges-offset-cache-1 packages/ranges-offset
        - name: "test ranges-process-outside"
          commands:
            - cd packages/ranges-process-outside
            - npm run test
            - cd ...
            - cache store ranges-process-outside-cache-1 packages/ranges-process-outside
        - name: "test ranges-push"
          commands:
            - cd packages/ranges-push
            - npm run test
            - cd ...
            - cache store ranges-push-cache-1 packages/ranges-push
        - name: "test ranges-regex"
          commands:
            - cd packages/ranges-regex
            - npm run test
            - cd ...
            - cache store ranges-regex-cache-1 packages/ranges-regex
        - name: "test ranges-sort"
          commands:
            - cd packages/ranges-sort
            - npm run test
            - cd ...
            - cache store ranges-sort-cache-1 packages/ranges-sort
        - name: "test regex-empty-conditional-comments"
          commands:
            - cd packages/regex-empty-conditional-comments
            - npm run test
            - cd ...
            - cache store regex-empty-conditional-comments-cache-1 packages/regex-empty-conditional-comments
        - name: "test regex-is-jinja-nunjucks"
          commands:
            - cd packages/regex-is-jinja-nunjucks
            - npm run test
            - cd ...
            - cache store regex-is-jinja-nunjucks-cache-1 packages/regex-is-jinja-nunjucks
        - name: "test regex-is-jsp"
          commands:
            - cd packages/regex-is-jsp
            - npm run test
            - cd ...
            - cache store regex-is-jsp-cache-1 packages/regex-is-jsp
        - name: "test regex-jinja-specific"
          commands:
            - cd packages/regex-jinja-specific
            - npm run test
            - cd ...
            - cache store regex-jinja-specific-cache-1 packages/regex-jinja-specific
        - name: "test str-indexes-of-plus"
          commands:
            - cd packages/str-indexes-of-plus
            - npm run test
            - cd ...
            - cache store str-indexes-of-plus-cache-1 packages/str-indexes-of-plus
        - name: "test string-apostrophes"
          commands:
            - cd packages/string-apostrophes
            - npm run test
            - cd ...
            - cache store string-apostrophes-cache-1 packages/string-apostrophes
        - name: "test string-character-is-astral-surrogate"
          commands:
            - cd packages/string-character-is-astral-surrogate
            - npm run test
            - cd ...
            - cache store string-character-is-astral-surrogate-cache-1 packages/string-character-is-astral-surrogate
        - name: "test string-collapse-leading-whitespace"
          commands:
            - cd packages/string-collapse-leading-whitespace
            - npm run test
            - cd ...
            - cache store string-collapse-leading-whitespace-cache-1 packages/string-collapse-leading-whitespace
        - name: "test string-collapse-white-space"
          commands:
            - cd packages/string-collapse-white-space
            - npm run test
            - cd ...
            - cache store string-collapse-white-space-cache-1 packages/string-collapse-white-space
        - name: "test string-convert-indexes"
          commands:
            - cd packages/string-convert-indexes
            - npm run test
            - cd ...
            - cache store string-convert-indexes-cache-1 packages/string-convert-indexes
        - name: "test string-extract-class-names"
          commands:
            - cd packages/string-extract-class-names
            - npm run test
            - cd ...
            - cache store string-extract-class-names-cache-1 packages/string-extract-class-names
        - name: "test string-extract-sass-vars"
          commands:
            - cd packages/string-extract-sass-vars
            - npm run test
            - cd ...
            - cache store string-extract-sass-vars-cache-1 packages/string-extract-sass-vars
        - name: "test string-find-heads-tails"
          commands:
            - cd packages/string-find-heads-tails
            - npm run test
            - cd ...
            - cache store string-find-heads-tails-cache-1 packages/string-find-heads-tails
        - name: "test string-find-malformed"
          commands:
            - cd packages/string-find-malformed
            - npm run test
            - cd ...
            - cache store string-find-malformed-cache-1 packages/string-find-malformed
        - name: "test string-fix-broken-named-entities"
          commands:
            - cd packages/string-fix-broken-named-entities
            - npm run test
            - cd ...
            - cache store string-fix-broken-named-entities-cache-1 packages/string-fix-broken-named-entities
        - name: "test string-left-right"
          commands:
            - cd packages/string-left-right
            - npm run test
            - cd ...
            - cache store string-left-right-cache-1 packages/string-left-right
        - name: "test string-match-left-right"
          commands:
            - cd packages/string-match-left-right
            - npm run test
            - cd ...
            - cache store string-match-left-right-cache-1 packages/string-match-left-right
        - name: "test string-overlap-one-on-another"
          commands:
            - cd packages/string-overlap-one-on-another
            - npm run test
            - cd ...
            - cache store string-overlap-one-on-another-cache-1 packages/string-overlap-one-on-another
        - name: "test string-process-comma-separated"
          commands:
            - cd packages/string-process-comma-separated
            - npm run test
            - cd ...
            - cache store string-process-comma-separated-cache-1 packages/string-process-comma-separated
        - name: "test string-range-expander"
          commands:
            - cd packages/string-range-expander
            - npm run test
            - cd ...
            - cache store string-range-expander-cache-1 packages/string-range-expander
        - name: "test string-remove-duplicate-heads-tails"
          commands:
            - cd packages/string-remove-duplicate-heads-tails
            - npm run test
            - cd ...
            - cache store string-remove-duplicate-heads-tails-cache-1 packages/string-remove-duplicate-heads-tails
        - name: "test string-remove-thousand-separators"
          commands:
            - cd packages/string-remove-thousand-separators
            - npm run test
            - cd ...
            - cache store string-remove-thousand-separators-cache-1 packages/string-remove-thousand-separators
        - name: "test string-remove-widows"
          commands:
            - cd packages/string-remove-widows
            - npm run test
            - cd ...
            - cache store string-remove-widows-cache-1 packages/string-remove-widows
        - name: "test string-split-by-whitespace"
          commands:
            - cd packages/string-split-by-whitespace
            - npm run test
            - cd ...
            - cache store string-split-by-whitespace-cache-1 packages/string-split-by-whitespace
        - name: "test string-strip-html"
          commands:
            - cd packages/string-strip-html
            - npm run test
            - cd ...
            - cache store string-strip-html-cache-1 packages/string-strip-html
        - name: "test string-trim-spaces-only"
          commands:
            - cd packages/string-trim-spaces-only
            - npm run test
            - cd ...
            - cache store string-trim-spaces-only-cache-1 packages/string-trim-spaces-only
        - name: "test string-uglify"
          commands:
            - cd packages/string-uglify
            - npm run test
            - cd ...
            - cache store string-uglify-cache-1 packages/string-uglify
        - name: "test string-unfancy"
          commands:
            - cd packages/string-unfancy
            - npm run test
            - cd ...
            - cache store string-unfancy-cache-1 packages/string-unfancy
        - name: "test stristri"
          commands:
            - cd packages/stristri
            - npm run test
            - cd ...
            - cache store stristri-cache-1 packages/stristri
        - name: "test tap-parse-string-to-object"
          commands:
            - cd packages/tap-parse-string-to-object
            - npm run test
            - cd ...
            - cache store tap-parse-string-to-object-cache-1 packages/tap-parse-string-to-object
        - name: "test test-mixer"
          commands:
            - cd packages/test-mixer
            - npm run test
            - cd ...
            - cache store test-mixer-cache-1 packages/test-mixer
        - name: "test update-versions"
          commands:
            - cd packages/update-versions
            - npm run test
            - cd ...
            - cache store update-versions-cache-1 packages/update-versions
        - name: "test util-array-object-or-both"
          commands:
            - cd packages/util-array-object-or-both
            - npm run test
            - cd ...
            - cache store util-array-object-or-both-cache-1 packages/util-array-object-or-both
        - name: "test util-nonempty"
          commands:
            - cd packages/util-nonempty
            - npm run test
            - cd ...
            - cache store util-nonempty-cache-1 packages/util-nonempty
  - name: "Bump versions"
    task:
      secrets:
        - name: GIT setup
      prologue:
        commands:
          - checkout
          - cache restore all-named-html-entities-cache-1
          - cache restore array-group-str-omit-num-char-cache-1
          - cache restore array-includes-with-glob-cache-1
          - cache restore array-of-arrays-into-ast-cache-1
          - cache restore array-of-arrays-sort-by-col-cache-1
          - cache restore array-pull-all-with-glob-cache-1
          - cache restore arrayiffy-if-string-cache-1
          - cache restore ast-compare-cache-1
          - cache restore ast-contains-only-empty-space-cache-1
          - cache restore ast-deep-contains-cache-1
          - cache restore ast-delete-object-cache-1
          - cache restore ast-get-object-cache-1
          - cache restore ast-get-values-by-key-cache-1
          - cache restore ast-is-empty-cache-1
          - cache restore ast-loose-compare-cache-1
          - cache restore ast-monkey-cache-1
          - cache restore ast-monkey-traverse-cache-1
          - cache restore ast-monkey-traverse-with-lookahead-cache-1
          - cache restore ast-monkey-util-cache-1
          - cache restore bitbucket-slug-cache-1
          - cache restore charcode-is-valid-xml-name-character-cache-1
          - cache restore check-types-mini-cache-1
          - cache restore codsen-parser-cache-1
          - cache restore codsen-tokenizer-cache-1
          - cache restore color-shorthand-hex-to-six-digit-cache-1
          - cache restore csv-sort-cache-1
          - cache restore csv-sort-cli-cache-1
          - cache restore csv-split-easy-cache-1
          - cache restore detect-is-it-html-or-xhtml-cache-1
          - cache restore detect-templating-language-cache-1
          - cache restore detergent-cache-1
          - cache restore easy-replace-cache-1
          - cache restore edit-package-json-cache-1
          - cache restore email-all-chars-within-ascii-cache-1
          - cache restore email-all-chars-within-ascii-cli-cache-1
          - cache restore email-comb-cache-1
          - cache restore email-homey-cache-1
          - cache restore emlint-cache-1
          - cache restore eslint-plugin-row-num-cache-1
          - cache restore eslint-plugin-test-num-cache-1
          - cache restore generate-atomic-css-cache-1
          - cache restore generate-atomic-css-cli-cache-1
          - cache restore gulp-email-remove-unused-css-cache-1
          - cache restore helga-cache-1
          - cache restore html-all-known-attributes-cache-1
          - cache restore html-crush-cache-1
          - cache restore html-entities-not-email-friendly-cache-1
          - cache restore html-img-alt-cache-1
          - cache restore html-table-patcher-cache-1
          - cache restore is-char-suitable-for-html-attr-name-cache-1
          - cache restore is-html-attribute-closing-cache-1
          - cache restore is-html-tag-opening-cache-1
          - cache restore is-language-code-cache-1
          - cache restore is-media-descriptor-cache-1
          - cache restore is-relative-uri-cache-1
          - cache restore js-row-num-cache-1
          - cache restore js-row-num-cli-cache-1
          - cache restore json-comb-cache-1
          - cache restore json-comb-core-cache-1
          - cache restore json-sort-cli-cache-1
          - cache restore json-variables-cache-1
          - cache restore lect-cache-1
          - cache restore lerna-clean-changelogs-cache-1
          - cache restore lerna-clean-changelogs-cli-cache-1
          - cache restore lerna-link-dep-cache-1
          - cache restore line-column-mini-cache-1
          - cache restore object-all-values-equal-to-cache-1
          - cache restore object-boolean-combinations-cache-1
          - cache restore object-delete-key-cache-1
          - cache restore object-fill-missing-keys-cache-1
          - cache restore object-flatten-all-arrays-cache-1
          - cache restore object-flatten-referencing-cache-1
          - cache restore object-merge-advanced-cache-1
          - cache restore object-no-new-keys-cache-1
          - cache restore object-set-all-values-to-cache-1
          - cache restore ranges-apply-cache-1
          - cache restore ranges-crop-cache-1
          - cache restore ranges-ent-decode-cache-1
          - cache restore ranges-invert-cache-1
          - cache restore ranges-is-index-within-cache-1
          - cache restore ranges-iterate-cache-1
          - cache restore ranges-merge-cache-1
          - cache restore ranges-offset-cache-1
          - cache restore ranges-process-outside-cache-1
          - cache restore ranges-push-cache-1
          - cache restore ranges-regex-cache-1
          - cache restore ranges-sort-cache-1
          - cache restore regex-empty-conditional-comments-cache-1
          - cache restore regex-is-jinja-nunjucks-cache-1
          - cache restore regex-is-jsp-cache-1
          - cache restore regex-jinja-specific-cache-1
          - cache restore str-indexes-of-plus-cache-1
          - cache restore string-apostrophes-cache-1
          - cache restore string-character-is-astral-surrogate-cache-1
          - cache restore string-collapse-leading-whitespace-cache-1
          - cache restore string-collapse-white-space-cache-1
          - cache restore string-convert-indexes-cache-1
          - cache restore string-extract-class-names-cache-1
          - cache restore string-extract-sass-vars-cache-1
          - cache restore string-find-heads-tails-cache-1
          - cache restore string-find-malformed-cache-1
          - cache restore string-fix-broken-named-entities-cache-1
          - cache restore string-left-right-cache-1
          - cache restore string-match-left-right-cache-1
          - cache restore string-overlap-one-on-another-cache-1
          - cache restore string-process-comma-separated-cache-1
          - cache restore string-range-expander-cache-1
          - cache restore string-remove-duplicate-heads-tails-cache-1
          - cache restore string-remove-thousand-separators-cache-1
          - cache restore string-remove-widows-cache-1
          - cache restore string-split-by-whitespace-cache-1
          - cache restore string-strip-html-cache-1
          - cache restore string-trim-spaces-only-cache-1
          - cache restore string-uglify-cache-1
          - cache restore string-unfancy-cache-1
          - cache restore stristri-cache-1
          - cache restore tap-parse-string-to-object-cache-1
          - cache restore test-mixer-cache-1
          - cache restore update-versions-cache-1
          - cache restore util-array-object-or-both-cache-1
          - cache restore util-nonempty-cache-1
          - cache restore node_modules-folder
          - git config --global user.email "${USER_EMAIL}"
          - git config --global user.name "${YOUR_NAME_SURNAME}"
          - git config user.name
          - git remote -v
      jobs:
        - name: Bump semver
          commands:
            - npm run info
            - cache store stats-folder stats
            - npm run readme:generate
            - git status
            - git add packages
            - git add stats
            - git add README.md
            - "git diff-index --quiet HEAD || git commit -m 'chore: automated build tasks [skip ci]' --no-verify"
            - npm run pub:vers
            - git status
            - git add packages
            - git add README.md
            - git status
            - "git commit -m 'chore: automated build tasks [skip ci]' --no-verify"
            - git push
            - cache store bumped-packages-folder packages
  - name: "Publish to npm"
    task:
      secrets:
        - name: GIT setup
        - name: NPM setup
      prologue:
        commands:
          - checkout
          - cache restore bumped-packages-folder
          - cache restore node_modules-folder
          - cache restore stats-folder
          - npm set unsafe-perm true -g
          - npm set //registry.npmjs.org/:_authToken ${NPM_TOKEN} -g
          - npm set username ${NPM_USERNAME} -g
          - npm set email ${NPM_EMAIL} -g
      jobs:
        - name: "publish all-named-html-entities"
          commands:
            - cd packages/all-named-html-entities
            - "npm run publish || :"
        - name: "publish array-group-str-omit-num-char"
          commands:
            - cd packages/array-group-str-omit-num-char
            - "npm run publish || :"
        - name: "publish array-includes-with-glob"
          commands:
            - cd packages/array-includes-with-glob
            - "npm run publish || :"
        - name: "publish array-of-arrays-into-ast"
          commands:
            - cd packages/array-of-arrays-into-ast
            - "npm run publish || :"
        - name: "publish array-of-arrays-sort-by-col"
          commands:
            - cd packages/array-of-arrays-sort-by-col
            - "npm run publish || :"
        - name: "publish array-pull-all-with-glob"
          commands:
            - cd packages/array-pull-all-with-glob
            - "npm run publish || :"
        - name: "publish arrayiffy-if-string"
          commands:
            - cd packages/arrayiffy-if-string
            - "npm run publish || :"
        - name: "publish ast-compare"
          commands:
            - cd packages/ast-compare
            - "npm run publish || :"
        - name: "publish ast-contains-only-empty-space"
          commands:
            - cd packages/ast-contains-only-empty-space
            - "npm run publish || :"
        - name: "publish ast-deep-contains"
          commands:
            - cd packages/ast-deep-contains
            - "npm run publish || :"
        - name: "publish ast-delete-object"
          commands:
            - cd packages/ast-delete-object
            - "npm run publish || :"
        - name: "publish ast-get-object"
          commands:
            - cd packages/ast-get-object
            - "npm run publish || :"
        - name: "publish ast-get-values-by-key"
          commands:
            - cd packages/ast-get-values-by-key
            - "npm run publish || :"
        - name: "publish ast-is-empty"
          commands:
            - cd packages/ast-is-empty
            - "npm run publish || :"
        - name: "publish ast-loose-compare"
          commands:
            - cd packages/ast-loose-compare
            - "npm run publish || :"
        - name: "publish ast-monkey"
          commands:
            - cd packages/ast-monkey
            - "npm run publish || :"
        - name: "publish ast-monkey-traverse"
          commands:
            - cd packages/ast-monkey-traverse
            - "npm run publish || :"
        - name: "publish ast-monkey-traverse-with-lookahead"
          commands:
            - cd packages/ast-monkey-traverse-with-lookahead
            - "npm run publish || :"
        - name: "publish ast-monkey-util"
          commands:
            - cd packages/ast-monkey-util
            - "npm run publish || :"
        - name: "publish bitbucket-slug"
          commands:
            - cd packages/bitbucket-slug
            - "npm run publish || :"
        - name: "publish charcode-is-valid-xml-name-character"
          commands:
            - cd packages/charcode-is-valid-xml-name-character
            - "npm run publish || :"
        - name: "publish check-types-mini"
          commands:
            - cd packages/check-types-mini
            - "npm run publish || :"
        - name: "publish codsen-parser"
          commands:
            - cd packages/codsen-parser
            - "npm run publish || :"
        - name: "publish codsen-tokenizer"
          commands:
            - cd packages/codsen-tokenizer
            - "npm run publish || :"
        - name: "publish color-shorthand-hex-to-six-digit"
          commands:
            - cd packages/color-shorthand-hex-to-six-digit
            - "npm run publish || :"
        - name: "publish csv-sort"
          commands:
            - cd packages/csv-sort
            - "npm run publish || :"
        - name: "publish csv-sort-cli"
          commands:
            - cd packages/csv-sort-cli
            - "npm run publish || :"
        - name: "publish csv-split-easy"
          commands:
            - cd packages/csv-split-easy
            - "npm run publish || :"
        - name: "publish detect-is-it-html-or-xhtml"
          commands:
            - cd packages/detect-is-it-html-or-xhtml
            - "npm run publish || :"
        - name: "publish detect-templating-language"
          commands:
            - cd packages/detect-templating-language
            - "npm run publish || :"
        - name: "publish detergent"
          commands:
            - cd packages/detergent
            - "npm run publish || :"
        - name: "publish easy-replace"
          commands:
            - cd packages/easy-replace
            - "npm run publish || :"
        - name: "publish edit-package-json"
          commands:
            - cd packages/edit-package-json
            - "npm run publish || :"
        - name: "publish email-all-chars-within-ascii"
          commands:
            - cd packages/email-all-chars-within-ascii
            - "npm run publish || :"
        - name: "publish email-all-chars-within-ascii-cli"
          commands:
            - cd packages/email-all-chars-within-ascii-cli
            - "npm run publish || :"
        - name: "publish email-comb"
          commands:
            - cd packages/email-comb
            - "npm run publish || :"
        - name: "publish email-homey"
          commands:
            - cd packages/email-homey
            - "npm run publish || :"
        - name: "publish emlint"
          commands:
            - cd packages/emlint
            - "npm run publish || :"
        - name: "publish eslint-plugin-row-num"
          commands:
            - cd packages/eslint-plugin-row-num
            - "npm run publish || :"
        - name: "publish eslint-plugin-test-num"
          commands:
            - cd packages/eslint-plugin-test-num
            - "npm run publish || :"
        - name: "publish generate-atomic-css"
          commands:
            - cd packages/generate-atomic-css
            - "npm run publish || :"
        - name: "publish generate-atomic-css-cli"
          commands:
            - cd packages/generate-atomic-css-cli
            - "npm run publish || :"
        - name: "publish gulp-email-remove-unused-css"
          commands:
            - cd packages/gulp-email-remove-unused-css
            - "npm run publish || :"
        - name: "publish helga"
          commands:
            - cd packages/helga
            - "npm run publish || :"
        - name: "publish html-all-known-attributes"
          commands:
            - cd packages/html-all-known-attributes
            - "npm run publish || :"
        - name: "publish html-crush"
          commands:
            - cd packages/html-crush
            - "npm run publish || :"
        - name: "publish html-entities-not-email-friendly"
          commands:
            - cd packages/html-entities-not-email-friendly
            - "npm run publish || :"
        - name: "publish html-img-alt"
          commands:
            - cd packages/html-img-alt
            - "npm run publish || :"
        - name: "publish html-table-patcher"
          commands:
            - cd packages/html-table-patcher
            - "npm run publish || :"
        - name: "publish is-char-suitable-for-html-attr-name"
          commands:
            - cd packages/is-char-suitable-for-html-attr-name
            - "npm run publish || :"
        - name: "publish is-html-attribute-closing"
          commands:
            - cd packages/is-html-attribute-closing
            - "npm run publish || :"
        - name: "publish is-html-tag-opening"
          commands:
            - cd packages/is-html-tag-opening
            - "npm run publish || :"
        - name: "publish is-language-code"
          commands:
            - cd packages/is-language-code
            - "npm run publish || :"
        - name: "publish is-media-descriptor"
          commands:
            - cd packages/is-media-descriptor
            - "npm run publish || :"
        - name: "publish is-relative-uri"
          commands:
            - cd packages/is-relative-uri
            - "npm run publish || :"
        - name: "publish js-row-num"
          commands:
            - cd packages/js-row-num
            - "npm run publish || :"
        - name: "publish js-row-num-cli"
          commands:
            - cd packages/js-row-num-cli
            - "npm run publish || :"
        - name: "publish json-comb"
          commands:
            - cd packages/json-comb
            - "npm run publish || :"
        - name: "publish json-comb-core"
          commands:
            - cd packages/json-comb-core
            - "npm run publish || :"
        - name: "publish json-sort-cli"
          commands:
            - cd packages/json-sort-cli
            - "npm run publish || :"
        - name: "publish json-variables"
          commands:
            - cd packages/json-variables
            - "npm run publish || :"
        - name: "publish lect"
          commands:
            - cd packages/lect
            - "npm run publish || :"
        - name: "publish lerna-clean-changelogs"
          commands:
            - cd packages/lerna-clean-changelogs
            - "npm run publish || :"
        - name: "publish lerna-clean-changelogs-cli"
          commands:
            - cd packages/lerna-clean-changelogs-cli
            - "npm run publish || :"
        - name: "publish lerna-link-dep"
          commands:
            - cd packages/lerna-link-dep
            - "npm run publish || :"
        - name: "publish line-column-mini"
          commands:
            - cd packages/line-column-mini
            - "npm run publish || :"
        - name: "publish object-all-values-equal-to"
          commands:
            - cd packages/object-all-values-equal-to
            - "npm run publish || :"
        - name: "publish object-boolean-combinations"
          commands:
            - cd packages/object-boolean-combinations
            - "npm run publish || :"
        - name: "publish object-delete-key"
          commands:
            - cd packages/object-delete-key
            - "npm run publish || :"
        - name: "publish object-fill-missing-keys"
          commands:
            - cd packages/object-fill-missing-keys
            - "npm run publish || :"
        - name: "publish object-flatten-all-arrays"
          commands:
            - cd packages/object-flatten-all-arrays
            - "npm run publish || :"
        - name: "publish object-flatten-referencing"
          commands:
            - cd packages/object-flatten-referencing
            - "npm run publish || :"
        - name: "publish object-merge-advanced"
          commands:
            - cd packages/object-merge-advanced
            - "npm run publish || :"
        - name: "publish object-no-new-keys"
          commands:
            - cd packages/object-no-new-keys
            - "npm run publish || :"
        - name: "publish object-set-all-values-to"
          commands:
            - cd packages/object-set-all-values-to
            - "npm run publish || :"
        - name: "publish ranges-apply"
          commands:
            - cd packages/ranges-apply
            - "npm run publish || :"
        - name: "publish ranges-crop"
          commands:
            - cd packages/ranges-crop
            - "npm run publish || :"
        - name: "publish ranges-ent-decode"
          commands:
            - cd packages/ranges-ent-decode
            - "npm run publish || :"
        - name: "publish ranges-invert"
          commands:
            - cd packages/ranges-invert
            - "npm run publish || :"
        - name: "publish ranges-is-index-within"
          commands:
            - cd packages/ranges-is-index-within
            - "npm run publish || :"
        - name: "publish ranges-iterate"
          commands:
            - cd packages/ranges-iterate
            - "npm run publish || :"
        - name: "publish ranges-merge"
          commands:
            - cd packages/ranges-merge
            - "npm run publish || :"
        - name: "publish ranges-offset"
          commands:
            - cd packages/ranges-offset
            - "npm run publish || :"
        - name: "publish ranges-process-outside"
          commands:
            - cd packages/ranges-process-outside
            - "npm run publish || :"
        - name: "publish ranges-push"
          commands:
            - cd packages/ranges-push
            - "npm run publish || :"
        - name: "publish ranges-regex"
          commands:
            - cd packages/ranges-regex
            - "npm run publish || :"
        - name: "publish ranges-sort"
          commands:
            - cd packages/ranges-sort
            - "npm run publish || :"
        - name: "publish regex-empty-conditional-comments"
          commands:
            - cd packages/regex-empty-conditional-comments
            - "npm run publish || :"
        - name: "publish regex-is-jinja-nunjucks"
          commands:
            - cd packages/regex-is-jinja-nunjucks
            - "npm run publish || :"
        - name: "publish regex-is-jsp"
          commands:
            - cd packages/regex-is-jsp
            - "npm run publish || :"
        - name: "publish regex-jinja-specific"
          commands:
            - cd packages/regex-jinja-specific
            - "npm run publish || :"
        - name: "publish str-indexes-of-plus"
          commands:
            - cd packages/str-indexes-of-plus
            - "npm run publish || :"
        - name: "publish string-apostrophes"
          commands:
            - cd packages/string-apostrophes
            - "npm run publish || :"
        - name: "publish string-character-is-astral-surrogate"
          commands:
            - cd packages/string-character-is-astral-surrogate
            - "npm run publish || :"
        - name: "publish string-collapse-leading-whitespace"
          commands:
            - cd packages/string-collapse-leading-whitespace
            - "npm run publish || :"
        - name: "publish string-collapse-white-space"
          commands:
            - cd packages/string-collapse-white-space
            - "npm run publish || :"
        - name: "publish string-convert-indexes"
          commands:
            - cd packages/string-convert-indexes
            - "npm run publish || :"
        - name: "publish string-extract-class-names"
          commands:
            - cd packages/string-extract-class-names
            - "npm run publish || :"
        - name: "publish string-extract-sass-vars"
          commands:
            - cd packages/string-extract-sass-vars
            - "npm run publish || :"
        - name: "publish string-find-heads-tails"
          commands:
            - cd packages/string-find-heads-tails
            - "npm run publish || :"
        - name: "publish string-find-malformed"
          commands:
            - cd packages/string-find-malformed
            - "npm run publish || :"
        - name: "publish string-fix-broken-named-entities"
          commands:
            - cd packages/string-fix-broken-named-entities
            - "npm run publish || :"
        - name: "publish string-left-right"
          commands:
            - cd packages/string-left-right
            - "npm run publish || :"
        - name: "publish string-match-left-right"
          commands:
            - cd packages/string-match-left-right
            - "npm run publish || :"
        - name: "publish string-overlap-one-on-another"
          commands:
            - cd packages/string-overlap-one-on-another
            - "npm run publish || :"
        - name: "publish string-process-comma-separated"
          commands:
            - cd packages/string-process-comma-separated
            - "npm run publish || :"
        - name: "publish string-range-expander"
          commands:
            - cd packages/string-range-expander
            - "npm run publish || :"
        - name: "publish string-remove-duplicate-heads-tails"
          commands:
            - cd packages/string-remove-duplicate-heads-tails
            - "npm run publish || :"
        - name: "publish string-remove-thousand-separators"
          commands:
            - cd packages/string-remove-thousand-separators
            - "npm run publish || :"
        - name: "publish string-remove-widows"
          commands:
            - cd packages/string-remove-widows
            - "npm run publish || :"
        - name: "publish string-split-by-whitespace"
          commands:
            - cd packages/string-split-by-whitespace
            - "npm run publish || :"
        - name: "publish string-strip-html"
          commands:
            - cd packages/string-strip-html
            - "npm run publish || :"
        - name: "publish string-trim-spaces-only"
          commands:
            - cd packages/string-trim-spaces-only
            - "npm run publish || :"
        - name: "publish string-uglify"
          commands:
            - cd packages/string-uglify
            - "npm run publish || :"
        - name: "publish string-unfancy"
          commands:
            - cd packages/string-unfancy
            - "npm run publish || :"
        - name: "publish stristri"
          commands:
            - cd packages/stristri
            - "npm run publish || :"
        - name: "publish tap-parse-string-to-object"
          commands:
            - cd packages/tap-parse-string-to-object
            - "npm run publish || :"
        - name: "publish test-mixer"
          commands:
            - cd packages/test-mixer
            - "npm run publish || :"
        - name: "publish update-versions"
          commands:
            - cd packages/update-versions
            - "npm run publish || :"
        - name: "publish util-array-object-or-both"
          commands:
            - cd packages/util-array-object-or-both
            - "npm run publish || :"
        - name: "publish util-nonempty"
          commands:
            - cd packages/util-nonempty
            - "npm run publish || :"
  - name: "Purge JSDelivr"
    task:
      jobs:
        - name: Purge detergent
          commands:
            - curl https://purge.jsdelivr.net/npm/detergent/dist/detergent.umd.js || echo 'detergent unreachable on jsdelivr'
        - name: Purge html-crush
          commands:
            - curl https://purge.jsdelivr.net/npm/html-crush/dist/html-crush.umd.js || echo 'html-crush unreachable on jsdelivr'
        - name: Purge email-comb
          commands:
            - curl https://purge.jsdelivr.net/npm/email-comb/dist/email-comb.umd.js || echo 'email-comb unreachable on jsdelivr'
        - name: Purge string-strip-html
          commands:
            - curl https://purge.jsdelivr.net/npm/string-strip-html/dist/string-strip-html.umd.js || echo 'string-strip-html unreachable on jsdelivr'
        - name: Purge stristri
          commands:
            - curl https://purge.jsdelivr.net/npm/stristri/dist/stristri.umd.js || echo 'stristri unreachable on jsdelivr'
        - name: Purge emlint
          commands:
            - curl https://purge.jsdelivr.net/npm/emlint/dist/emlint.umd.js || echo 'emlint unreachable on jsdelivr'
        - name: Purge codsen-tokenizer
          commands:
            - curl https://purge.jsdelivr.net/npm/codsen-tokenizer/dist/codsen-tokenizer.umd.js || echo 'codsen-tokenizer unreachable on jsdelivr'
        - name: Purge codsen-parser
          commands:
            - curl https://purge.jsdelivr.net/npm/codsen-parser/dist/codsen-parser.umd.js || echo 'codsen-parser unreachable on jsdelivr'
        - name: Purge json-variables
          commands:
            - curl https://purge.jsdelivr.net/npm/json-variables/dist/json-variables.umd.js || echo 'json-variables unreachable on jsdelivr'
