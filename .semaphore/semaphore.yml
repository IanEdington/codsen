version: v1.0
name: CODSEN
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
# The "Stop" fail-fast strategy (not "Cancel")
fail_fast:
  stop:
    when: "true"
execution_time_limit:
  hours: 2
blocks:
  - name: "Set things up"
    task:
      jobs:
        - name: Bootstrap
          commands:
            - checkout
            - nvm install node
            - node --version
            - npm --version
            - npm run bootstrap
            # dump freshly-bootstrapped ./packages/ into cache
            - cache store raw-packages-folder packages
            - cache store node_modules-folder node_modules
  # "Fan-in and Fan-out"
  - name: "Unit-test everything"
    task:
      prologue:
        commands:
          - checkout
          - cache restore raw-packages-folder
          - cache restore node_modules-folder
      jobs:
        - name: "test all-named-html-entities"
          commands:
            - cd packages/all-named-html-entities
            - npm run test
        - name: "test array-group-str-omit-num-char"
          commands:
            - cd packages/array-group-str-omit-num-char
            - npm run test
        - name: "test array-includes-with-glob"
          commands:
            - cd packages/array-includes-with-glob
            - npm run test
        - name: "test array-of-arrays-into-ast"
          commands:
            - cd packages/array-of-arrays-into-ast
            - npm run test
        - name: "test array-of-arrays-sort-by-col"
          commands:
            - cd packages/array-of-arrays-sort-by-col
            - npm run test
        - name: "test array-pull-all-with-glob"
          commands:
            - cd packages/array-pull-all-with-glob
            - npm run test
        - name: "test arrayiffy-if-string"
          commands:
            - cd packages/arrayiffy-if-string
            - npm run test
        - name: "test ast-compare"
          commands:
            - cd packages/ast-compare
            - npm run test
        - name: "test ast-contains-only-empty-space"
          commands:
            - cd packages/ast-contains-only-empty-space
            - npm run test
        - name: "test ast-deep-contains"
          commands:
            - cd packages/ast-deep-contains
            - npm run test
        - name: "test ast-delete-object"
          commands:
            - cd packages/ast-delete-object
            - npm run test
        - name: "test ast-get-object"
          commands:
            - cd packages/ast-get-object
            - npm run test
        - name: "test ast-get-values-by-key"
          commands:
            - cd packages/ast-get-values-by-key
            - npm run test
        - name: "test ast-is-empty"
          commands:
            - cd packages/ast-is-empty
            - npm run test
        - name: "test ast-loose-compare"
          commands:
            - cd packages/ast-loose-compare
            - npm run test
        - name: "test ast-monkey"
          commands:
            - cd packages/ast-monkey
            - npm run test
        - name: "test ast-monkey-traverse"
          commands:
            - cd packages/ast-monkey-traverse
            - npm run test
        - name: "test ast-monkey-traverse-with-lookahead"
          commands:
            - cd packages/ast-monkey-traverse-with-lookahead
            - npm run test
        - name: "test ast-monkey-util"
          commands:
            - cd packages/ast-monkey-util
            - npm run test
        - name: "test bitbucket-slug"
          commands:
            - cd packages/bitbucket-slug
            - npm run test
        - name: "test charcode-is-valid-xml-name-character"
          commands:
            - cd packages/charcode-is-valid-xml-name-character
            - npm run test
        - name: "test check-types-mini"
          commands:
            - cd packages/check-types-mini
            - npm run test
        - name: "test codsen-parser"
          commands:
            - cd packages/codsen-parser
            - npm run test
        - name: "test codsen-tokenizer"
          commands:
            - cd packages/codsen-tokenizer
            - npm run test
        - name: "test color-shorthand-hex-to-six-digit"
          commands:
            - cd packages/color-shorthand-hex-to-six-digit
            - npm run test
        - name: "test csv-sort"
          commands:
            - cd packages/csv-sort
            - npm run test
        - name: "test csv-sort-cli"
          commands:
            - cd packages/csv-sort-cli
            - npm run test
        - name: "test csv-split-easy"
          commands:
            - cd packages/csv-split-easy
            - npm run test
        - name: "test detect-is-it-html-or-xhtml"
          commands:
            - cd packages/detect-is-it-html-or-xhtml
            - npm run test
        - name: "test detect-templating-language"
          commands:
            - cd packages/detect-templating-language
            - npm run test
        - name: "test detergent"
          commands:
            - cd packages/detergent
            - npm run test
        - name: "test easy-replace"
          commands:
            - cd packages/easy-replace
            - npm run test
        - name: "test edit-package-json"
          commands:
            - cd packages/edit-package-json
            - npm run test
        - name: "test email-all-chars-within-ascii"
          commands:
            - cd packages/email-all-chars-within-ascii
            - npm run test
        - name: "test email-all-chars-within-ascii-cli"
          commands:
            - cd packages/email-all-chars-within-ascii-cli
            - npm run test
        - name: "test email-comb"
          commands:
            - cd packages/email-comb
            - npm run test
        - name: "test email-homey"
          commands:
            - cd packages/email-homey
            - npm run test
        - name: "test emlint"
          commands:
            - cd packages/emlint
            - npm run test
        - name: "test eslint-plugin-row-num"
          commands:
            - cd packages/eslint-plugin-row-num
            - npm run test
        - name: "test eslint-plugin-test-num"
          commands:
            - cd packages/eslint-plugin-test-num
            - npm run test
        - name: "test generate-atomic-css"
          commands:
            - cd packages/generate-atomic-css
            - npm run test
        - name: "test generate-atomic-css-cli"
          commands:
            - cd packages/generate-atomic-css-cli
            - npm run test
        - name: "test gulp-email-remove-unused-css"
          commands:
            - cd packages/gulp-email-remove-unused-css
            - npm run test
        - name: "test helga"
          commands:
            - cd packages/helga
            - npm run test
        - name: "test html-all-known-attributes"
          commands:
            - cd packages/html-all-known-attributes
            - npm run test
        - name: "test html-crush"
          commands:
            - cd packages/html-crush
            - npm run test
        - name: "test html-entities-not-email-friendly"
          commands:
            - cd packages/html-entities-not-email-friendly
            - npm run test
        - name: "test html-img-alt"
          commands:
            - cd packages/html-img-alt
            - npm run test
        - name: "test html-table-patcher"
          commands:
            - cd packages/html-table-patcher
            - npm run test
        - name: "test is-char-suitable-for-html-attr-name"
          commands:
            - cd packages/is-char-suitable-for-html-attr-name
            - npm run test
        - name: "test is-html-attribute-closing"
          commands:
            - cd packages/is-html-attribute-closing
            - npm run test
        - name: "test is-html-tag-opening"
          commands:
            - cd packages/is-html-tag-opening
            - npm run test
        - name: "test is-language-code"
          commands:
            - cd packages/is-language-code
            - npm run test
        - name: "test is-media-descriptor"
          commands:
            - cd packages/is-media-descriptor
            - npm run test
        - name: "test is-relative-uri"
          commands:
            - cd packages/is-relative-uri
            - npm run test
        - name: "test js-row-num"
          commands:
            - cd packages/js-row-num
            - npm run test
        - name: "test js-row-num-cli"
          commands:
            - cd packages/js-row-num-cli
            - npm run test
        - name: "test json-comb"
          commands:
            - cd packages/json-comb
            - npm run test
        - name: "test json-comb-core"
          commands:
            - cd packages/json-comb-core
            - npm run test
        - name: "test json-sort-cli"
          commands:
            - cd packages/json-sort-cli
            - npm run test
        - name: "test json-variables"
          commands:
            - cd packages/json-variables
            - npm run test
        - name: "test lect"
          commands:
            - cd packages/lect
            - npm run test
        - name: "test lerna-clean-changelogs"
          commands:
            - cd packages/lerna-clean-changelogs
            - npm run test
        - name: "test lerna-clean-changelogs-cli"
          commands:
            - cd packages/lerna-clean-changelogs-cli
            - npm run test
        - name: "test lerna-link-dep"
          commands:
            - cd packages/lerna-link-dep
            - npm run test
        - name: "test line-column-mini"
          commands:
            - cd packages/line-column-mini
            - npm run test
        - name: "test object-all-values-equal-to"
          commands:
            - cd packages/object-all-values-equal-to
            - npm run test
        - name: "test object-boolean-combinations"
          commands:
            - cd packages/object-boolean-combinations
            - npm run test
        - name: "test object-delete-key"
          commands:
            - cd packages/object-delete-key
            - npm run test
        - name: "test object-fill-missing-keys"
          commands:
            - cd packages/object-fill-missing-keys
            - npm run test
        - name: "test object-flatten-all-arrays"
          commands:
            - cd packages/object-flatten-all-arrays
            - npm run test
        - name: "test object-flatten-referencing"
          commands:
            - cd packages/object-flatten-referencing
            - npm run test
        - name: "test object-merge-advanced"
          commands:
            - cd packages/object-merge-advanced
            - npm run test
        - name: "test object-no-new-keys"
          commands:
            - cd packages/object-no-new-keys
            - npm run test
        - name: "test object-set-all-values-to"
          commands:
            - cd packages/object-set-all-values-to
            - npm run test
        - name: "test ranges-apply"
          commands:
            - cd packages/ranges-apply
            - npm run test
        - name: "test ranges-crop"
          commands:
            - cd packages/ranges-crop
            - npm run test
        - name: "test ranges-ent-decode"
          commands:
            - cd packages/ranges-ent-decode
            - npm run test
        - name: "test ranges-invert"
          commands:
            - cd packages/ranges-invert
            - npm run test
        - name: "test ranges-is-index-within"
          commands:
            - cd packages/ranges-is-index-within
            - npm run test
        - name: "test ranges-iterate"
          commands:
            - cd packages/ranges-iterate
            - npm run test
        - name: "test ranges-merge"
          commands:
            - cd packages/ranges-merge
            - npm run test
        - name: "test ranges-offset"
          commands:
            - cd packages/ranges-offset
            - npm run test
        - name: "test ranges-process-outside"
          commands:
            - cd packages/ranges-process-outside
            - npm run test
        - name: "test ranges-push"
          commands:
            - cd packages/ranges-push
            - npm run test
        - name: "test ranges-regex"
          commands:
            - cd packages/ranges-regex
            - npm run test
        - name: "test ranges-sort"
          commands:
            - cd packages/ranges-sort
            - npm run test
        - name: "test regex-empty-conditional-comments"
          commands:
            - cd packages/regex-empty-conditional-comments
            - npm run test
        - name: "test regex-is-jinja-nunjucks"
          commands:
            - cd packages/regex-is-jinja-nunjucks
            - npm run test
        - name: "test regex-is-jsp"
          commands:
            - cd packages/regex-is-jsp
            - npm run test
        - name: "test regex-jinja-specific"
          commands:
            - cd packages/regex-jinja-specific
            - npm run test
        - name: "test str-indexes-of-plus"
          commands:
            - cd packages/str-indexes-of-plus
            - npm run test
        - name: "test string-apostrophes"
          commands:
            - cd packages/string-apostrophes
            - npm run test
        - name: "test string-character-is-astral-surrogate"
          commands:
            - cd packages/string-character-is-astral-surrogate
            - npm run test
        - name: "test string-collapse-leading-whitespace"
          commands:
            - cd packages/string-collapse-leading-whitespace
            - npm run test
        - name: "test string-collapse-white-space"
          commands:
            - cd packages/string-collapse-white-space
            - npm run test
        - name: "test string-convert-indexes"
          commands:
            - cd packages/string-convert-indexes
            - npm run test
        - name: "test string-extract-class-names"
          commands:
            - cd packages/string-extract-class-names
            - npm run test
        - name: "test string-extract-sass-vars"
          commands:
            - cd packages/string-extract-sass-vars
            - npm run test
        - name: "test string-find-heads-tails"
          commands:
            - cd packages/string-find-heads-tails
            - npm run test
        - name: "test string-find-malformed"
          commands:
            - cd packages/string-find-malformed
            - npm run test
        - name: "test string-fix-broken-named-entities"
          commands:
            - cd packages/string-fix-broken-named-entities
            - npm run test
        - name: "test string-left-right"
          commands:
            - cd packages/string-left-right
            - npm run test
        - name: "test string-match-left-right"
          commands:
            - cd packages/string-match-left-right
            - npm run test
        - name: "test string-overlap-one-on-another"
          commands:
            - cd packages/string-overlap-one-on-another
            - npm run test
        - name: "test string-process-comma-separated"
          commands:
            - cd packages/string-process-comma-separated
            - npm run test
        - name: "test string-range-expander"
          commands:
            - cd packages/string-range-expander
            - npm run test
        - name: "test string-remove-duplicate-heads-tails"
          commands:
            - cd packages/string-remove-duplicate-heads-tails
            - npm run test
        - name: "test string-remove-thousand-separators"
          commands:
            - cd packages/string-remove-thousand-separators
            - npm run test
        - name: "test string-remove-widows"
          commands:
            - cd packages/string-remove-widows
            - npm run test
        - name: "test string-split-by-whitespace"
          commands:
            - cd packages/string-split-by-whitespace
            - npm run test
        - name: "test string-strip-html"
          commands:
            - cd packages/string-strip-html
            - npm run test
        - name: "test string-trim-spaces-only"
          commands:
            - cd packages/string-trim-spaces-only
            - npm run test
        - name: "test string-uglify"
          commands:
            - cd packages/string-uglify
            - npm run test
        - name: "test string-unfancy"
          commands:
            - cd packages/string-unfancy
            - npm run test
        - name: "test stristri"
          commands:
            - cd packages/stristri
            - npm run test
        - name: "test tap-parse-string-to-object"
          commands:
            - cd packages/tap-parse-string-to-object
            - npm run test
        - name: "test test-mixer"
          commands:
            - cd packages/test-mixer
            - npm run test
        - name: "test update-versions"
          commands:
            - cd packages/update-versions
            - npm run test
        - name: "test util-array-object-or-both"
          commands:
            - cd packages/util-array-object-or-both
            - npm run test
        - name: "test util-nonempty"
          commands:
            - cd packages/util-nonempty
            - npm run test
      epilogue:
        commands:
          - cache store built-packages-folder packages
          - npm run info
          - cache store stats-folder stats
  - name: "Bump versions"
    task:
      secrets:
        - name: GIT setup
      prologue:
        commands:
          - checkout
          - cache restore built-packages-folder
          - cache restore node_modules-folder
          - cache restore stats-folder
          - git config --global user.email "${USER_EMAIL}"
          - git config --global user.name "${YOUR_NAME_SURNAME}"
          - git config user.name
          - git remote -v
      jobs:
        - name: Bump semver
          commands:
            - npm run readme:generate
            - git status
            - git add packages
            - git add stats
            - git add README.md
            - "git diff-index --quiet HEAD || git commit -m 'chore: automated build tasks [skip ci]' --no-verify"
            - npm run pub:vers
            - git status
            - git add packages
            - git add README.md
            - "git commit -m 'chore: automated build tasks [skip ci]' --no-verify"
            - git push
      epilogue:
        commands:
          - cache store bumped-packages-folder packages
  - name: "Publish to npm"
    task:
      secrets:
        - name: GIT setup
        - name: NPM setup
      prologue:
        commands:
          - checkout
          - cache restore bumped-packages-folder
          - cache restore node_modules-folder
          - cache restore stats-folder
          - git config --global user.email "${USER_EMAIL}"
          - git config --global user.name "${YOUR_NAME_SURNAME}"
          - git config user.name
          - git remote -v
          - npm set unsafe-perm true -g
          - npm set //registry.npmjs.org/:_authToken ${NPM_TOKEN} -g
          - npm set username ${NPM_USERNAME} -g
          - npm set email ${NPM_EMAIL} -g
      jobs:
        - name: "publish all-named-html-entities"
          commands:
            - cd packages/all-named-html-entities
            - "npm run publish || :"
        - name: "publish array-group-str-omit-num-char"
          commands:
            - cd packages/array-group-str-omit-num-char
            - "npm run publish || :"
        - name: "publish array-includes-with-glob"
          commands:
            - cd packages/array-includes-with-glob
            - "npm run publish || :"
        - name: "publish array-of-arrays-into-ast"
          commands:
            - cd packages/array-of-arrays-into-ast
            - "npm run publish || :"
        - name: "publish array-of-arrays-sort-by-col"
          commands:
            - cd packages/array-of-arrays-sort-by-col
            - "npm run publish || :"
        - name: "publish array-pull-all-with-glob"
          commands:
            - cd packages/array-pull-all-with-glob
            - "npm run publish || :"
        - name: "publish arrayiffy-if-string"
          commands:
            - cd packages/arrayiffy-if-string
            - "npm run publish || :"
        - name: "publish ast-compare"
          commands:
            - cd packages/ast-compare
            - "npm run publish || :"
        - name: "publish ast-contains-only-empty-space"
          commands:
            - cd packages/ast-contains-only-empty-space
            - "npm run publish || :"
        - name: "publish ast-deep-contains"
          commands:
            - cd packages/ast-deep-contains
            - "npm run publish || :"
        - name: "publish ast-delete-object"
          commands:
            - cd packages/ast-delete-object
            - "npm run publish || :"
        - name: "publish ast-get-object"
          commands:
            - cd packages/ast-get-object
            - "npm run publish || :"
        - name: "publish ast-get-values-by-key"
          commands:
            - cd packages/ast-get-values-by-key
            - "npm run publish || :"
        - name: "publish ast-is-empty"
          commands:
            - cd packages/ast-is-empty
            - "npm run publish || :"
        - name: "publish ast-loose-compare"
          commands:
            - cd packages/ast-loose-compare
            - "npm run publish || :"
        - name: "publish ast-monkey"
          commands:
            - cd packages/ast-monkey
            - "npm run publish || :"
        - name: "publish ast-monkey-traverse"
          commands:
            - cd packages/ast-monkey-traverse
            - "npm run publish || :"
        - name: "publish ast-monkey-traverse-with-lookahead"
          commands:
            - cd packages/ast-monkey-traverse-with-lookahead
            - "npm run publish || :"
        - name: "publish ast-monkey-util"
          commands:
            - cd packages/ast-monkey-util
            - "npm run publish || :"
        - name: "publish bitbucket-slug"
          commands:
            - cd packages/bitbucket-slug
            - "npm run publish || :"
        - name: "publish charcode-is-valid-xml-name-character"
          commands:
            - cd packages/charcode-is-valid-xml-name-character
            - "npm run publish || :"
        - name: "publish check-types-mini"
          commands:
            - cd packages/check-types-mini
            - "npm run publish || :"
        - name: "publish codsen-parser"
          commands:
            - cd packages/codsen-parser
            - "npm run publish || :"
        - name: "publish codsen-tokenizer"
          commands:
            - cd packages/codsen-tokenizer
            - "npm run publish || :"
        - name: "publish color-shorthand-hex-to-six-digit"
          commands:
            - cd packages/color-shorthand-hex-to-six-digit
            - "npm run publish || :"
        - name: "publish csv-sort"
          commands:
            - cd packages/csv-sort
            - "npm run publish || :"
        - name: "publish csv-sort-cli"
          commands:
            - cd packages/csv-sort-cli
            - "npm run publish || :"
        - name: "publish csv-split-easy"
          commands:
            - cd packages/csv-split-easy
            - "npm run publish || :"
        - name: "publish detect-is-it-html-or-xhtml"
          commands:
            - cd packages/detect-is-it-html-or-xhtml
            - "npm run publish || :"
        - name: "publish detect-templating-language"
          commands:
            - cd packages/detect-templating-language
            - "npm run publish || :"
        - name: "publish detergent"
          commands:
            - cd packages/detergent
            - "npm run publish || :"
        - name: "publish easy-replace"
          commands:
            - cd packages/easy-replace
            - "npm run publish || :"
        - name: "publish edit-package-json"
          commands:
            - cd packages/edit-package-json
            - "npm run publish || :"
        - name: "publish email-all-chars-within-ascii"
          commands:
            - cd packages/email-all-chars-within-ascii
            - "npm run publish || :"
        - name: "publish email-all-chars-within-ascii-cli"
          commands:
            - cd packages/email-all-chars-within-ascii-cli
            - "npm run publish || :"
        - name: "publish email-comb"
          commands:
            - cd packages/email-comb
            - "npm run publish || :"
        - name: "publish email-homey"
          commands:
            - cd packages/email-homey
            - "npm run publish || :"
        - name: "publish emlint"
          commands:
            - cd packages/emlint
            - "npm run publish || :"
        - name: "publish eslint-plugin-row-num"
          commands:
            - cd packages/eslint-plugin-row-num
            - "npm run publish || :"
        - name: "publish eslint-plugin-test-num"
          commands:
            - cd packages/eslint-plugin-test-num
            - "npm run publish || :"
        - name: "publish generate-atomic-css"
          commands:
            - cd packages/generate-atomic-css
            - "npm run publish || :"
        - name: "publish generate-atomic-css-cli"
          commands:
            - cd packages/generate-atomic-css-cli
            - "npm run publish || :"
        - name: "publish gulp-email-remove-unused-css"
          commands:
            - cd packages/gulp-email-remove-unused-css
            - "npm run publish || :"
        - name: "publish helga"
          commands:
            - cd packages/helga
            - "npm run publish || :"
        - name: "publish html-all-known-attributes"
          commands:
            - cd packages/html-all-known-attributes
            - "npm run publish || :"
        - name: "publish html-crush"
          commands:
            - cd packages/html-crush
            - "npm run publish || :"
        - name: "publish html-entities-not-email-friendly"
          commands:
            - cd packages/html-entities-not-email-friendly
            - "npm run publish || :"
        - name: "publish html-img-alt"
          commands:
            - cd packages/html-img-alt
            - "npm run publish || :"
        - name: "publish html-table-patcher"
          commands:
            - cd packages/html-table-patcher
            - "npm run publish || :"
        - name: "publish is-char-suitable-for-html-attr-name"
          commands:
            - cd packages/is-char-suitable-for-html-attr-name
            - "npm run publish || :"
        - name: "publish is-html-attribute-closing"
          commands:
            - cd packages/is-html-attribute-closing
            - "npm run publish || :"
        - name: "publish is-html-tag-opening"
          commands:
            - cd packages/is-html-tag-opening
            - "npm run publish || :"
        - name: "publish is-language-code"
          commands:
            - cd packages/is-language-code
            - "npm run publish || :"
        - name: "publish is-media-descriptor"
          commands:
            - cd packages/is-media-descriptor
            - "npm run publish || :"
        - name: "publish is-relative-uri"
          commands:
            - cd packages/is-relative-uri
            - "npm run publish || :"
        - name: "publish js-row-num"
          commands:
            - cd packages/js-row-num
            - "npm run publish || :"
        - name: "publish js-row-num-cli"
          commands:
            - cd packages/js-row-num-cli
            - "npm run publish || :"
        - name: "publish json-comb"
          commands:
            - cd packages/json-comb
            - "npm run publish || :"
        - name: "publish json-comb-core"
          commands:
            - cd packages/json-comb-core
            - "npm run publish || :"
        - name: "publish json-sort-cli"
          commands:
            - cd packages/json-sort-cli
            - "npm run publish || :"
        - name: "publish json-variables"
          commands:
            - cd packages/json-variables
            - "npm run publish || :"
        - name: "publish lect"
          commands:
            - cd packages/lect
            - "npm run publish || :"
        - name: "publish lerna-clean-changelogs"
          commands:
            - cd packages/lerna-clean-changelogs
            - "npm run publish || :"
        - name: "publish lerna-clean-changelogs-cli"
          commands:
            - cd packages/lerna-clean-changelogs-cli
            - "npm run publish || :"
        - name: "publish lerna-link-dep"
          commands:
            - cd packages/lerna-link-dep
            - "npm run publish || :"
        - name: "publish line-column-mini"
          commands:
            - cd packages/line-column-mini
            - "npm run publish || :"
        - name: "publish object-all-values-equal-to"
          commands:
            - cd packages/object-all-values-equal-to
            - "npm run publish || :"
        - name: "publish object-boolean-combinations"
          commands:
            - cd packages/object-boolean-combinations
            - "npm run publish || :"
        - name: "publish object-delete-key"
          commands:
            - cd packages/object-delete-key
            - "npm run publish || :"
        - name: "publish object-fill-missing-keys"
          commands:
            - cd packages/object-fill-missing-keys
            - "npm run publish || :"
        - name: "publish object-flatten-all-arrays"
          commands:
            - cd packages/object-flatten-all-arrays
            - "npm run publish || :"
        - name: "publish object-flatten-referencing"
          commands:
            - cd packages/object-flatten-referencing
            - "npm run publish || :"
        - name: "publish object-merge-advanced"
          commands:
            - cd packages/object-merge-advanced
            - "npm run publish || :"
        - name: "publish object-no-new-keys"
          commands:
            - cd packages/object-no-new-keys
            - "npm run publish || :"
        - name: "publish object-set-all-values-to"
          commands:
            - cd packages/object-set-all-values-to
            - "npm run publish || :"
        - name: "publish ranges-apply"
          commands:
            - cd packages/ranges-apply
            - "npm run publish || :"
        - name: "publish ranges-crop"
          commands:
            - cd packages/ranges-crop
            - "npm run publish || :"
        - name: "publish ranges-ent-decode"
          commands:
            - cd packages/ranges-ent-decode
            - "npm run publish || :"
        - name: "publish ranges-invert"
          commands:
            - cd packages/ranges-invert
            - "npm run publish || :"
        - name: "publish ranges-is-index-within"
          commands:
            - cd packages/ranges-is-index-within
            - "npm run publish || :"
        - name: "publish ranges-iterate"
          commands:
            - cd packages/ranges-iterate
            - "npm run publish || :"
        - name: "publish ranges-merge"
          commands:
            - cd packages/ranges-merge
            - "npm run publish || :"
        - name: "publish ranges-offset"
          commands:
            - cd packages/ranges-offset
            - "npm run publish || :"
        - name: "publish ranges-process-outside"
          commands:
            - cd packages/ranges-process-outside
            - "npm run publish || :"
        - name: "publish ranges-push"
          commands:
            - cd packages/ranges-push
            - "npm run publish || :"
        - name: "publish ranges-regex"
          commands:
            - cd packages/ranges-regex
            - "npm run publish || :"
        - name: "publish ranges-sort"
          commands:
            - cd packages/ranges-sort
            - "npm run publish || :"
        - name: "publish regex-empty-conditional-comments"
          commands:
            - cd packages/regex-empty-conditional-comments
            - "npm run publish || :"
        - name: "publish regex-is-jinja-nunjucks"
          commands:
            - cd packages/regex-is-jinja-nunjucks
            - "npm run publish || :"
        - name: "publish regex-is-jsp"
          commands:
            - cd packages/regex-is-jsp
            - "npm run publish || :"
        - name: "publish regex-jinja-specific"
          commands:
            - cd packages/regex-jinja-specific
            - "npm run publish || :"
        - name: "publish str-indexes-of-plus"
          commands:
            - cd packages/str-indexes-of-plus
            - "npm run publish || :"
        - name: "publish string-apostrophes"
          commands:
            - cd packages/string-apostrophes
            - "npm run publish || :"
        - name: "publish string-character-is-astral-surrogate"
          commands:
            - cd packages/string-character-is-astral-surrogate
            - "npm run publish || :"
        - name: "publish string-collapse-leading-whitespace"
          commands:
            - cd packages/string-collapse-leading-whitespace
            - "npm run publish || :"
        - name: "publish string-collapse-white-space"
          commands:
            - cd packages/string-collapse-white-space
            - "npm run publish || :"
        - name: "publish string-convert-indexes"
          commands:
            - cd packages/string-convert-indexes
            - "npm run publish || :"
        - name: "publish string-extract-class-names"
          commands:
            - cd packages/string-extract-class-names
            - "npm run publish || :"
        - name: "publish string-extract-sass-vars"
          commands:
            - cd packages/string-extract-sass-vars
            - "npm run publish || :"
        - name: "publish string-find-heads-tails"
          commands:
            - cd packages/string-find-heads-tails
            - "npm run publish || :"
        - name: "publish string-find-malformed"
          commands:
            - cd packages/string-find-malformed
            - "npm run publish || :"
        - name: "publish string-fix-broken-named-entities"
          commands:
            - cd packages/string-fix-broken-named-entities
            - "npm run publish || :"
        - name: "publish string-left-right"
          commands:
            - cd packages/string-left-right
            - "npm run publish || :"
        - name: "publish string-match-left-right"
          commands:
            - cd packages/string-match-left-right
            - "npm run publish || :"
        - name: "publish string-overlap-one-on-another"
          commands:
            - cd packages/string-overlap-one-on-another
            - "npm run publish || :"
        - name: "publish string-process-comma-separated"
          commands:
            - cd packages/string-process-comma-separated
            - "npm run publish || :"
        - name: "publish string-range-expander"
          commands:
            - cd packages/string-range-expander
            - "npm run publish || :"
        - name: "publish string-remove-duplicate-heads-tails"
          commands:
            - cd packages/string-remove-duplicate-heads-tails
            - "npm run publish || :"
        - name: "publish string-remove-thousand-separators"
          commands:
            - cd packages/string-remove-thousand-separators
            - "npm run publish || :"
        - name: "publish string-remove-widows"
          commands:
            - cd packages/string-remove-widows
            - "npm run publish || :"
        - name: "publish string-split-by-whitespace"
          commands:
            - cd packages/string-split-by-whitespace
            - "npm run publish || :"
        - name: "publish string-strip-html"
          commands:
            - cd packages/string-strip-html
            - "npm run publish || :"
        - name: "publish string-trim-spaces-only"
          commands:
            - cd packages/string-trim-spaces-only
            - "npm run publish || :"
        - name: "publish string-uglify"
          commands:
            - cd packages/string-uglify
            - "npm run publish || :"
        - name: "publish string-unfancy"
          commands:
            - cd packages/string-unfancy
            - "npm run publish || :"
        - name: "publish stristri"
          commands:
            - cd packages/stristri
            - "npm run publish || :"
        - name: "publish tap-parse-string-to-object"
          commands:
            - cd packages/tap-parse-string-to-object
            - "npm run publish || :"
        - name: "publish test-mixer"
          commands:
            - cd packages/test-mixer
            - "npm run publish || :"
        - name: "publish update-versions"
          commands:
            - cd packages/update-versions
            - "npm run publish || :"
        - name: "publish util-array-object-or-both"
          commands:
            - cd packages/util-array-object-or-both
            - "npm run publish || :"
        - name: "publish util-nonempty"
          commands:
            - cd packages/util-nonempty
            - "npm run publish || :"
  - name: "Purge JSDelivr"
    task:
      jobs:
        - name: Purge detergent
          commands:
            - curl https://purge.jsdelivr.net/npm/detergent/dist/detergent.umd.js || echo 'detergent unreachable on jsdelivr'
        - name: Purge html-crush
          commands:
            - curl https://purge.jsdelivr.net/npm/html-crush/dist/html-crush.umd.js || echo 'html-crush unreachable on jsdelivr'
        - name: Purge email-comb
          commands:
            - curl https://purge.jsdelivr.net/npm/email-comb/dist/email-comb.umd.js || echo 'email-comb unreachable on jsdelivr'
        - name: Purge string-strip-html
          commands:
            - curl https://purge.jsdelivr.net/npm/string-strip-html/dist/string-strip-html.umd.js || echo 'string-strip-html unreachable on jsdelivr'
        - name: Purge stristri
          commands:
            - curl https://purge.jsdelivr.net/npm/stristri/dist/stristri.umd.js || echo 'stristri unreachable on jsdelivr'
        - name: Purge emlint
          commands:
            - curl https://purge.jsdelivr.net/npm/emlint/dist/emlint.umd.js || echo 'emlint unreachable on jsdelivr'
        - name: Purge codsen-tokenizer
          commands:
            - curl https://purge.jsdelivr.net/npm/codsen-tokenizer/dist/codsen-tokenizer.umd.js || echo 'codsen-tokenizer unreachable on jsdelivr'
        - name: Purge codsen-parser
          commands:
            - curl https://purge.jsdelivr.net/npm/codsen-parser/dist/codsen-parser.umd.js || echo 'codsen-parser unreachable on jsdelivr'
        - name: Purge json-variables
          commands:
            - curl https://purge.jsdelivr.net/npm/json-variables/dist/json-variables.umd.js || echo 'json-variables unreachable on jsdelivr'
