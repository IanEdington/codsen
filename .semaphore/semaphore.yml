version: v1.0
name: JavaScript example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Publish the packages
    task:
      prologue:
        commands:
          - checkout
          - nvm install node
          - node --version
          - npm --version
          # Correct premissions since they are too open by default:
          - chmod 0600 ~/.ssh/id_rsa_semaphoreci
          # Add the key to the ssh agent:
          - ssh-add ~/.ssh/id_rsa_semaphoreci
      jobs:
        - name: git setup
          commands:
            - git config --global user.email $USER_EMAIL
            - git config --global user.name $YOUR_NAME_SURNAME
            - echo "git user:"
            - git config user.name
        - name: Bootstrap
          commands:
            - pwd
            - ls
            - git remote -v
