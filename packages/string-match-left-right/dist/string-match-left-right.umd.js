/**
 * string-match-left-right
 * Match substrings on the left or right of a given index, ignoring whitespace
 * Version: 4.0.11
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/string-match-left-right/
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).stringMatchLeftRight={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function o(t){return t&&"object"===e(t)&&!Array.isArray(t)}function a(t){return"string"==typeof t}function c(t,e,r,n,i,o){var a="function"==typeof r?r():r;if(e<0&&i&&"EOL"===a)return a;if(e>=t.length&&!i)return!1;for(var c=i?1:r.length,s=!1,f=!1,h=n.maxMismatches,u=e,l=!1,g=!1,m=!1;t[u];){var y=o(u);if(n.trimBeforeMatching&&""===t[u].trim()){if(!t[y]&&i&&"EOL"===r)return!0;u=o(u)}else if(!n.i&&n.trimCharsBeforeMatching.includes(t[u])||n.i&&n.trimCharsBeforeMatching.map((function(t){return t.toLowerCase()})).includes(t[u].toLowerCase())){if(i&&"EOL"===r&&!t[y])return!0;u=o(u)}else{var b=y>u?r[r.length-c]:r[c-1];if(!n.i&&t[u]===b||n.i&&t[u].toLowerCase()===b.toLowerCase()){if(l||(l=!0),f||(f=!0),c===r.length?g=!0:1===c&&(m=!0),(c-=1)<1)return u}else{if(!(n.maxMismatches&&h&&u))return!(0!==u||1!==c||n.lastMustMatch||!f)&&0;h-=1;for(var p=0;p<=h;p++){var M=y>u?r[r.length-c+1+p]:r[c-2-p],d=t[o(u)];if(M&&(!n.i&&t[u]===M||n.i&&t[u].toLowerCase()===M.toLowerCase())&&(!n.firstMustMatch||c!==r.length)){c-=2,l=!0;break}if(d&&M&&(!n.i&&d===M||n.i&&d.toLowerCase()===M.toLowerCase())&&(!n.firstMustMatch||c!==r.length)){c-=1,l=!0;break}if(void 0===M&&h>=0&&l&&(!n.firstMustMatch||g)&&(!n.lastMustMatch||m))return u}l||(s=u)}if(!1!==s&&s!==u&&(s=!1),c<1)return u;u=o(u)}}return c>0?!(!i||"EOL"!==a)||!!(n.maxMismatches>=c&&f)&&(s||0):void 0}function s(t,r,n,s,f){var h={cb:void 0,i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1};if(o(f)&&Object.prototype.hasOwnProperty.call(f,"trimBeforeMatching")&&"boolean"!=typeof f.trimBeforeMatching)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!").concat(Array.isArray(f.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var u,l,g,m,y,b=i(i({},h),f);if(b.trimCharsBeforeMatching="string"==typeof(u=b.trimCharsBeforeMatching)?u.length>0?[u]:[]:u,b.trimCharsBeforeMatching=b.trimCharsBeforeMatching.map((function(t){return a(t)?t:String(t)})),!a(r))return!1;if(!r.length)return!1;if(!Number.isInteger(n)||n<0)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ").concat(e(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(a(s))l=[s];else if(Array.isArray(s))l=s;else if(s){if("function"!=typeof s)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ").concat(e(s),", equal to:\n").concat(JSON.stringify(s,null,4)));(l=[]).push(s)}else l=s;if(f&&!o(f))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \"").concat(e(f),'", and equal to:\n').concat(JSON.stringify(f,null,4)));if(b.trimCharsBeforeMatching.some((function(t,e){return t.length>1&&(m=e,y=t,!0)})))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ").concat(m," is longer than 1 character, ").concat(y.length," (equals to ").concat(y,"). Please split it into separate characters and put into array as separate elements."));if(!l||!Array.isArray(l)||Array.isArray(l)&&!l.length||Array.isArray(l)&&1===l.length&&a(l[0])&&!l[0].trim()){if("function"==typeof b.cb){var p,M=n;if("matchLeftIncl"!==t&&"matchRight"!==t||(M+=1),"L"===t[5])for(var d=M;d--;){var O=r[d];if((!b.trimBeforeMatching||b.trimBeforeMatching&&void 0!==O&&O.trim())&&(!b.trimCharsBeforeMatching.length||void 0!==O&&!b.trimCharsBeforeMatching.includes(O))){p=d;break}}else if(t.startsWith("matchRight"))for(var v=M;v<r.length;v++){var w=r[v];if((!b.trimBeforeMatching||b.trimBeforeMatching&&w.trim())&&(!b.trimCharsBeforeMatching.length||!b.trimCharsBeforeMatching.includes(w))){p=v;break}}if(void 0===p)return!1;var L=r[p],B=p+1,C="";return B&&B>0&&(C=r.slice(0,B)),"L"===t[5]?b.cb(L,C,p):(p&&p>0&&(C=r.slice(p)),b.cb(L,C,p))}var j="";throw f||(j=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/".concat(t,'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!').concat(j))}for(var I=0,R=l.length;I<R;I++){g="function"==typeof l[I];var _=l[I],E=void 0,A=void 0,P="",T=n;"matchRight"===t?T+=1:"matchLeft"===t&&(T-=1);var D=c(r,T,_,b,g,(function(e){return"L"===t[5]?e-1:e+1}));if(D&&g&&"function"==typeof _&&"EOL"===_())return!(!_()||b.cb&&!b.cb(E,P,A))&&_();if(Number.isInteger(D)&&(A=t.startsWith("matchLeft")?D-1:D+1,P="L"===t[5]?r.slice(0,D):r.slice(A)),A<0&&(A=void 0),r[A]&&(E=r[A]),Number.isInteger(D)&&(!b.cb||b.cb(E,P,A)))return _}return!1}t.matchLeft=function(t,e,r,n){return s("matchLeft",t,e,r,n)},t.matchLeftIncl=function(t,e,r,n){return s("matchLeftIncl",t,e,r,n)},t.matchRight=function(t,e,r,n){return s("matchRight",t,e,r,n)},t.matchRightIncl=function(t,e,r,n){return s("matchRightIncl",t,e,r,n)},Object.defineProperty(t,"__esModule",{value:!0})}));
