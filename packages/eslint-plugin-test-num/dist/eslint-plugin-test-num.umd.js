/**
 * eslint-plugin-test-num
 * ESLint plugin to update unit test numbers automatically
 * Version: 1.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/eslint-plugin-test-num
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).eslintPluginTestNum=t()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(){var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(!e)return!0;if(s(e)&&0===e.length)return!0;if("string"!=typeof e){for(var r in e)if(t(e,r))return!1;return!0}return!1}function n(t){return e.call(t)}var s=Array.isArray||function(t){return"[object Array]"===e.call(t)};function o(e){var t=parseInt(e);return t.toString()===e?t:e}function i(e){e=e||{};var i=function(e){return Object.keys(i).reduce((function(t,r){return"create"===r||"function"==typeof i[r]&&(t[r]=i[r].bind(i,e)),t}),{})};function a(r,n){return e.includeInheritedProps||"number"==typeof n&&Array.isArray(r)||t(r,n)}function u(e,t){if(a(e,t))return e[t]}function l(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return l(e,t.split(".").map(o),r,n);var s=t[0],i=u(e,s);return 1===t.length?(void 0!==i&&n||(e[s]=r),i):(void 0===i&&("number"==typeof t[1]?e[s]=[]:e[s]={}),l(e[s],t.slice(1),r,n))}return i.has=function(r,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!r;for(var i=0;i<n.length;i++){var a=o(n[i]);if(!("number"==typeof a&&s(r)&&a<r.length||(e.includeInheritedProps?a in Object(r):t(r,a))))return!1;r=r[a]}return!0},i.ensureExists=function(e,t,r){return l(e,t,r,!0)},i.set=function(e,t,r,n){return l(e,t,r,n)},i.insert=function(e,t,r,n){var o=i.get(e,t);n=~~n,s(o)||(o=[],i.set(e,t,o)),o.splice(n,0,r)},i.empty=function(e,t){var o,u;if(!r(t)&&null!=e&&(o=i.get(e,t))){if("string"==typeof o)return i.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===n(e)}(o))return i.set(e,t,!1);if("number"==typeof o)return i.set(e,t,0);if(s(o))o.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===n(e)}(o))return i.set(e,t,null);for(u in o)a(o,u)&&delete o[u]}}},i.push=function(e,t){var r=i.get(e,t);s(r)||(r=[],i.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},i.coalesce=function(e,t,r){for(var n,s=0,o=t.length;s<o;s++)if(void 0!==(n=i.get(e,t[s])))return n;return r},i.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return i.get(e,t.split("."),r);var n=o(t[0]),s=u(e,n);return void 0===s?r:1===t.length?s:i.get(e[n],t.slice(1),r)},i.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(r(t))return e;if("string"==typeof t)return i.del(e,t.split("."));var n=o(t[0]);return a(e,n)?1!==t.length?i.del(e[n],t.slice(1)):(s(e)?e.splice(n,1):delete e[n],e):e},i}var a=i();return a.create=i,a.withInheritedProps=i({includeInheritedProps:!0}),a}()}));function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?r(Object(s),!0).forEach((function(r){t(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function s(e,t){if("string"==typeof e&&e.length)for(var r,s=n(n({},{offset:0}),t),o=null,i=0,a=e.length;i<=a;i++){if(null!==o&&(e[i]&&e[i].trim().length&&!/\d/.test(e[i])&&!["."].includes(e[i])||!e[i]))return{start:s.offset+o,end:s.offset+r+1,value:e.slice(o,r+1)};if(/^\d*$/.test(e[i])&&(r=i,null===o&&(o=i)),null===o&&e[i]&&e[i].trim().length&&!/[\d.'"`]/.test(e[i]))return}}var o=new Set(["ok","notOk","true","false","assert","assertNot","error","ifErr","ifError","rejects","resolves","resolveMatchSnapshot","throws","throw","doesNotThrow","notThrow","expectUncaughtException"]),i=new Set(["emits","rejects","resolveMatch","throws","throw","expectUncaughtException","equal","equals","isEqual","is","strictEqual","strictEquals","strictIs","isStrict","isStrictly","notEqual","inequal","notEqual","notEquals","notStrictEqual","notStrictEquals","isNotEqual","isNot","doesNotEqual","isInequal","same","equivalent","looseEqual","looseEquals","deepEqual","deepEquals","isLoose","looseIs","notSame","inequivalent","looseInequal","notDeep","deepInequal","notLoose","looseNot","strictSame","strictEquivalent","strictDeepEqual","sameStrict","deepIs","isDeeply","isDeep","strictDeepEquals","strictNotSame","strictInequivalent","strictDeepInequal","notSameStrict","deepNot","notDeeply","strictDeepInequals","notStrictSame","hasStrict","match","has","hasFields","matches","similar","like","isLike","includes","include","contains","notMatch","dissimilar","unsimilar","notSimilar","unlike","isUnlike","notLike","isNotLike","doesNotHave","isNotSimilar","isDissimilar","type","isa","isA"]);return{configs:{recommended:{plugins:["test-num"],rules:{"no-console":"off","test-num/correct-test-num":"error"}}},rules:{"correct-test-num":{create:function(t){var r=0;return{ExpressionStatement:function(n){if("CallExpression"===e.get(n,"expression.type")&&["test","only"].includes(e.get(n,"expression.callee.property.name"))&&["TemplateLiteral","Literal"].includes(e.get(n,"expression.arguments.0.type"))){var a,u="".concat(r+=1).padStart(2,"0");if(!a&&"TemplateLiteral"===e.get(n,"expression.arguments.0.type")&&e.has(n,"expression.arguments.0.quasis.0.value.raw")){var l=s(e.get(n,"expression.arguments.0.quasis.0.value.raw"),{offset:e.get(n,"expression.arguments.0.quasis.0.start"),returnRangesOnly:!0})||{},c=l.start,p=l.end,f=l.value;c&&p&&f&&f!==u&&(a={start:c,end:p,value:u})}if(!a&&"Literal"===n.expression.arguments[0].type&&n.expression.arguments[0].raw){var g=s(n.expression.arguments[0].raw,{offset:n.expression.arguments[0].start,returnRangesOnly:!0})||{},d=g.start,m=g.end,y=g.value;d&&m&&y&&y!==u&&(a={start:d,end:m,value:u})}if(!a&&"ArrowFunctionExpression"===e.get(n,"expression.arguments.1.type")&&"BlockStatement"===e.get(n,"expression.arguments.1.body.type")&&e.get(n,"expression.arguments.1.body.body").length){var v="multiple";2===e.get(n,"expression.arguments.1.body.body").length&&"ExpressionStatement"===e.get(n,"expression.arguments.1.body.body.1.type")&&"end"===e.get(n,"expression.arguments.1.body.body.1.expression.callee.property.name")&&(v="single");var h=e.get(n,"expression.arguments.1.body.body");if(Array.isArray(h))for(var b=0,x=h.length;b<x;b++){var q=e.get(h[b],"expression.callee.property.name");if(q){var w=void 0;if(i.has(q)&&e.has(h[b],"expression.arguments.2")?w=2:o.has(q)&&e.has(h[b],"expression.arguments.1")&&(w=1),w)if("continue"===function(){var r=void 0,o=void 0;"TemplateLiteral"===e.get(h[b],"expression.arguments.".concat(w,".type"))?(r=e.get(h[b],"expression.arguments.".concat(w,".quasis.0.value.raw")),o=e.get(h[b],"expression.arguments.".concat(w,".quasis.0.start"))):"Literal"===e.get(h[b],"expression.arguments.".concat(w,".type"))&&(r=e.get(h[b],"expression.arguments.".concat(w,".raw")),o=e.get(h[b],"expression.arguments.".concat(w,".start")));var i=s(r,{offset:o,returnRangesOnly:!0})||{},a=i.start,l=i.end;if(!a||!l)return"continue";var c="single"===v?u:"".concat(u,".").concat("".concat(b+1).padStart(2,"0"));r!==c&&t.report({node:n,messageId:"correctTestNum",fix:function(e){return e.replaceTextRange([a,l],c)}})}())continue}}}a&&t.report({node:n,messageId:"correctTestNum",fix:function(e){return e.replaceTextRange([a.start,a.end],a.value)}})}}}},meta:{type:"suggestion",messages:{correctTestNum:"Update the test number."},fixable:"code"}}}}}));
