/**
 * eslint-plugin-test-num
 * ESLint plugin to update unit test numbers automatically
 * Version: 1.1.1
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/eslint-plugin-test-num
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).eslintPluginTestNum=t()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(){var e=Object.prototype.toString;function t(e,t){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(!e)return!0;if(s(e)&&0===e.length)return!0;if("string"!=typeof e){for(var r in e)if(t(e,r))return!1;return!0}return!1}function n(t){return e.call(t)}var s=Array.isArray||function(t){return"[object Array]"===e.call(t)};function i(e){var t=parseInt(e);return t.toString()===e?t:e}function o(e){e=e||{};var o=function(e){return Object.keys(o).reduce((function(t,r){return"create"===r||"function"==typeof o[r]&&(t[r]=o[r].bind(o,e)),t}),{})};function a(r,n){return e.includeInheritedProps||"number"==typeof n&&Array.isArray(r)||t(r,n)}function u(e,t){if(a(e,t))return e[t]}function l(e,t,r,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return l(e,t.split(".").map(i),r,n);var s=t[0],o=u(e,s);return 1===t.length?(void 0!==o&&n||(e[s]=r),o):(void 0===o&&("number"==typeof t[1]?e[s]=[]:e[s]={}),l(e[s],t.slice(1),r,n))}return o.has=function(r,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!r;for(var o=0;o<n.length;o++){var a=i(n[o]);if(!("number"==typeof a&&s(r)&&a<r.length||(e.includeInheritedProps?a in Object(r):t(r,a))))return!1;r=r[a]}return!0},o.ensureExists=function(e,t,r){return l(e,t,r,!0)},o.set=function(e,t,r,n){return l(e,t,r,n)},o.insert=function(e,t,r,n){var i=o.get(e,t);n=~~n,s(i)||(i=[],o.set(e,t,i)),i.splice(n,0,r)},o.empty=function(e,t){var i,u;if(!r(t)&&null!=e&&(i=o.get(e,t))){if("string"==typeof i)return o.set(e,t,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===n(e)}(i))return o.set(e,t,!1);if("number"==typeof i)return o.set(e,t,0);if(s(i))i.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===n(e)}(i))return o.set(e,t,null);for(u in i)a(i,u)&&delete i[u]}}},o.push=function(e,t){var r=o.get(e,t);s(r)||(r=[],o.set(e,t,r)),r.push.apply(r,Array.prototype.slice.call(arguments,2))},o.coalesce=function(e,t,r){for(var n,s=0,i=t.length;s<i;s++)if(void 0!==(n=o.get(e,t[s])))return n;return r},o.get=function(e,t,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return r;if("string"==typeof t)return o.get(e,t.split("."),r);var n=i(t[0]),s=u(e,n);return void 0===s?r:1===t.length?s:o.get(e[n],t.slice(1),r)},o.del=function(e,t){if("number"==typeof t&&(t=[t]),null==e)return e;if(r(t))return e;if("string"==typeof t)return o.del(e,t.split("."));var n=i(t[0]);return a(e,n)?1!==t.length?o.del(e[n],t.slice(1)):(s(e)?e.splice(n,1):delete e[n],e):e},o}var a=o();return a.create=o,a.withInheritedProps=o({includeInheritedProps:!0}),a}()}));function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?r(Object(s),!0).forEach((function(r){t(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function s(e,t){if("string"==typeof e&&e.length)for(var r,s=n(n({},{offset:0}),t),i=null,o=0,a=e.length;o<=a;o++){if(null!==i&&(e[o]&&e[o].trim().length&&!/\d/.test(e[o])&&!["."].includes(e[o])||!e[o]))return{start:s.offset+i,end:s.offset+r+1,value:e.slice(i,r+1)};if(/^\d*$/.test(e[o])&&(r=o,null===i&&(i=o)),null===i&&e[o]&&e[o].trim().length&&!/[\d.'"`]/.test(e[o]))return}}var i=new Set(["ok","notOk","true","false","assert","assertNot","error","ifErr","ifError","rejects","resolves","resolveMatchSnapshot","throws","throw","doesNotThrow","notThrow","expectUncaughtException"]),o=new Set(["emits","rejects","resolveMatch","throws","throw","expectUncaughtException","equal","equals","isEqual","is","strictEqual","strictEquals","strictIs","isStrict","isStrictly","notEqual","inequal","notEqual","notEquals","notStrictEqual","notStrictEquals","isNotEqual","isNot","doesNotEqual","isInequal","same","equivalent","looseEqual","looseEquals","deepEqual","deepEquals","isLoose","looseIs","notSame","inequivalent","looseInequal","notDeep","deepInequal","notLoose","looseNot","strictSame","strictEquivalent","strictDeepEqual","sameStrict","deepIs","isDeeply","isDeep","strictDeepEquals","strictNotSame","strictInequivalent","strictDeepInequal","notSameStrict","deepNot","notDeeply","strictDeepInequals","notStrictSame","hasStrict","match","has","hasFields","matches","similar","like","isLike","includes","include","contains","notMatch","dissimilar","unsimilar","notSimilar","unlike","isUnlike","notLike","isNotLike","doesNotHave","isNotSimilar","isDissimilar","type","isa","isA"]);return{configs:{recommended:{plugins:["test-num"],rules:{"no-console":"off","test-num/correct-test-num":"error"}}},rules:{"correct-test-num":{create:function(t){var r=0;return{ExpressionStatement:function(n){if("CallExpression"===e.get(n,"expression.type")&&["test","only","skip"].includes(e.get(n,"expression.callee.property.name"))&&["TemplateLiteral","Literal"].includes(e.get(n,"expression.arguments.0.type"))){var a,u="".concat(r+=1).padStart(2,"0");if(!a&&"TemplateLiteral"===e.get(n,"expression.arguments.0.type")&&e.has(n,"expression.arguments.0.quasis.0.value.raw")){var l=s(e.get(n,"expression.arguments.0.quasis.0.value.raw"),{offset:e.get(n,"expression.arguments.0.quasis.0.start"),returnRangesOnly:!0})||{},c=l.start,f=l.end,p=l.value;c&&f&&p&&p!==u&&(a={start:c,end:f,value:u})}if(!a&&"Literal"===n.expression.arguments[0].type&&n.expression.arguments[0].raw){var g=s(n.expression.arguments[0].raw,{offset:n.expression.arguments[0].start,returnRangesOnly:!0})||{},d=g.start,m=g.end,y=g.value;d&&m&&y&&y!==u&&(a={start:d,end:m,value:u})}if(!a&&"ArrowFunctionExpression"===e.get(n,"expression.arguments.1.type")&&"BlockStatement"===e.get(n,"expression.arguments.1.body.type")&&e.get(n,"expression.arguments.1.body.body").length){var v,h="multiple";2===(v=e.get(n,"expression.arguments.1.body.body").filter((function(e){return"ExpressionStatement"===e.type}))).length&&"end"===e.get(v[v.length-1],"expression.callee.property.name")&&(h="single");var b=e.get(n,"expression.arguments.1.body.body");if(Array.isArray(b))for(var x=0,q=0,w=b.length;q<w;q++){var E=e.get(b[q],"expression.callee.property.name");if(E){var O=void 0;if(o.has(E)&&e.has(b[q],"expression.arguments.2")?O=2:i.has(E)&&e.has(b[q],"expression.arguments.1")&&(O=1),O)if("continue"===function(){var r=void 0,i=void 0;"TemplateLiteral"===e.get(b[q],"expression.arguments.".concat(O,".type"))?(r=e.get(b[q],"expression.arguments.".concat(O,".quasis.0.value.raw")),i=e.get(b[q],"expression.arguments.".concat(O,".quasis.0.start")),x+=1):"Literal"===e.get(b[q],"expression.arguments.".concat(O,".type"))&&(r=e.get(b[q],"expression.arguments.".concat(O,".raw")),i=e.get(b[q],"expression.arguments.".concat(O,".start")),x+=1);var o=s(r,{offset:i,returnRangesOnly:!0})||{},a=o.start,l=o.end;if(!a||!l)return"continue";var c="single"===h?u:"".concat(u,".").concat("".concat(x).padStart(2,"0"));s(r).value!==c&&t.report({node:n,messageId:"correctTestNum",fix:function(e){return e.replaceTextRange([a,l],c)}})}())continue}}}a&&t.report({node:n,messageId:"correctTestNum",fix:function(e){return e.replaceTextRange([a.start,a.end],a.value)}})}}}},meta:{type:"suggestion",messages:{correctTestNum:"Update the test number."},fixable:"code"}}}}}));
