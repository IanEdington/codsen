/**
 * ranges-compose
 * Convert ranges over ranges into flat single set of ranges
 * Version: 1.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/ranges-compose
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).rangesCompose=e()}(this,function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=e(function(e,n){var r=200,o="__lodash_hash_undefined__",i=9007199254740991,c="[object Arguments]",a="[object Boolean]",s="[object Date]",u="[object Function]",f="[object GeneratorFunction]",l="[object Map]",p="[object Number]",g="[object Object]",y="[object RegExp]",h="[object Set]",m="[object String]",d="[object Symbol]",b="[object ArrayBuffer]",v="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",j="[object Int8Array]",O="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",$="[object Uint8ClampedArray]",A="[object Uint16Array]",E="[object Uint32Array]",N=/\w*$/,P=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,k={};k[c]=k["[object Array]"]=k[b]=k[v]=k[a]=k[s]=k[_]=k[w]=k[j]=k[O]=k[S]=k[l]=k[p]=k[g]=k[y]=k[h]=k[m]=k[d]=k[T]=k[$]=k[A]=k[E]=!0,k["[object Error]"]=k[u]=k["[object WeakMap]"]=!1;var M="object"==typeof t&&t&&t.Object===Object&&t,x="object"==typeof self&&self&&self.Object===Object&&self,J=M||x||Function("return this")(),F=n&&!n.nodeType&&n,L=F&&e&&!e.nodeType&&e,R=L&&L.exports===F;function C(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function D(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function W(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function V(t,e){return function(n){return t(e(n))}}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var B,Z=Array.prototype,q=Function.prototype,G=Object.prototype,z=J["__core-js_shared__"],Q=(B=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",Y=q.toString,X=G.hasOwnProperty,tt=G.toString,et=RegExp("^"+Y.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=R?J.Buffer:void 0,rt=J.Symbol,ot=J.Uint8Array,it=V(Object.getPrototypeOf,Object),ct=Object.create,at=G.propertyIsEnumerable,st=Z.splice,ut=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,lt=V(Object.keys,Object),pt=Lt(J,"DataView"),gt=Lt(J,"Map"),yt=Lt(J,"Promise"),ht=Lt(J,"Set"),mt=Lt(J,"WeakMap"),dt=Lt(Object,"create"),bt=Wt(pt),vt=Wt(gt),_t=Wt(yt),wt=Wt(ht),jt=Wt(mt),Ot=rt?rt.prototype:void 0,St=Ot?Ot.valueOf:void 0;function Tt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $t(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function At(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Et(t){this.__data__=new $t(t)}function Nt(t,e){var n=Vt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ut(t)}(t)&&X.call(t,"callee")&&(!at.call(t,"callee")||tt.call(t)==c)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!X.call(t,i)||o&&("length"==i||Ht(i,r))||n.push(i);return n}function Pt(t,e,n){var r=t[e];X.call(t,e)&&Kt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function It(t,e){for(var n=t.length;n--;)if(Kt(t[n][0],e))return n;return-1}function kt(t,e,n,r,o,i,P){var I;if(r&&(I=i?r(t,o,i,P):r(t)),void 0!==I)return I;if(!qt(t))return t;var M=Vt(t);if(M){if(I=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&X.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(t,I)}else{var x=Ct(t),J=x==u||x==f;if(Bt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(x==g||x==c||J&&!i){if(W(t))return i?t:{};if(I=function(t){return"function"!=typeof t.constructor||Dt(t)?{}:(e=it(t),qt(e)?ct(e):{});var e}(J?{}:t),!e)return function(t,e){return Jt(t,Rt(t),e)}(t,function(t,e){return t&&Jt(e,Gt(e),t)}(I,t))}else{if(!k[x])return i?t:{};I=function(t,e,n,r){var o=t.constructor;switch(e){case b:return xt(t);case a:case s:return new o(+t);case v:return function(t,e){var n=e?xt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case _:case w:case j:case O:case S:case T:case $:case A:case E:return function(t,e){var n=e?xt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case l:return function(t,e,n){return D(e?n(K(t),!0):K(t),C,new t.constructor)}(t,r,n);case p:case m:return new o(t);case y:return(u=new(c=t).constructor(c.source,N.exec(c))).lastIndex=c.lastIndex,u;case h:return function(t,e,n){return D(e?n(U(t),!0):U(t),H,new t.constructor)}(t,r,n);case d:return i=t,St?Object(St.call(i)):{}}var i;var c,u}(t,x,kt,e)}}P||(P=new Et);var F=P.get(t);if(F)return F;if(P.set(t,I),!M)var L=n?function(t){return function(t,e,n){var r=e(t);return Vt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Gt,Rt)}(t):Gt(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););}(L||t,function(o,i){L&&(o=t[i=o]),Pt(I,i,kt(o,e,n,r,i,t,P))}),I}function Mt(t){return!(!qt(t)||(e=t,Q&&Q in e))&&(Zt(t)||W(t)?et:P).test(Wt(t));var e}function xt(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Jt(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var c=e[o],a=r?r(n[c],t[c],c,n,t):void 0;Pt(n,c,void 0===a?t[c]:a)}return n}function Ft(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(n)?n:void 0}Tt.prototype.clear=function(){this.__data__=dt?dt(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var e=this.__data__;if(dt){var n=e[t];return n===o?void 0:n}return X.call(e,t)?e[t]:void 0},Tt.prototype.has=function(t){var e=this.__data__;return dt?void 0!==e[t]:X.call(e,t)},Tt.prototype.set=function(t,e){return this.__data__[t]=dt&&void 0===e?o:e,this},$t.prototype.clear=function(){this.__data__=[]},$t.prototype.delete=function(t){var e=this.__data__,n=It(e,t);return!(n<0||(n==e.length-1?e.pop():st.call(e,n,1),0))},$t.prototype.get=function(t){var e=this.__data__,n=It(e,t);return n<0?void 0:e[n][1]},$t.prototype.has=function(t){return It(this.__data__,t)>-1},$t.prototype.set=function(t,e){var n=this.__data__,r=It(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},At.prototype.clear=function(){this.__data__={hash:new Tt,map:new(gt||$t),string:new Tt}},At.prototype.delete=function(t){return Ft(this,t).delete(t)},At.prototype.get=function(t){return Ft(this,t).get(t)},At.prototype.has=function(t){return Ft(this,t).has(t)},At.prototype.set=function(t,e){return Ft(this,t).set(t,e),this},Et.prototype.clear=function(){this.__data__=new $t},Et.prototype.delete=function(t){return this.__data__.delete(t)},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof $t){var o=n.__data__;if(!gt||o.length<r-1)return o.push([t,e]),this;n=this.__data__=new At(o)}return n.set(t,e),this};var Rt=ut?V(ut,Object):function(){return[]},Ct=function(t){return tt.call(t)};function Ht(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||G)}function Wt(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Kt(t,e){return t===e||t!=t&&e!=e}(pt&&Ct(new pt(new ArrayBuffer(1)))!=v||gt&&Ct(new gt)!=l||yt&&"[object Promise]"!=Ct(yt.resolve())||ht&&Ct(new ht)!=h||mt&&"[object WeakMap]"!=Ct(new mt))&&(Ct=function(t){var e=tt.call(t),n=e==g?t.constructor:void 0,r=n?Wt(n):void 0;if(r)switch(r){case bt:return v;case vt:return l;case _t:return"[object Promise]";case wt:return h;case jt:return"[object WeakMap]"}return e});var Vt=Array.isArray;function Ut(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Zt(t)}var Bt=ft||function(){return!1};function Zt(t){var e=qt(t)?tt.call(t):"";return e==u||e==f}function qt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Gt(t){return Ut(t)?Nt(t):function(t){if(!Dt(t))return lt(t);var e=[];for(var n in Object(t))X.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}e.exports=function(t){return kt(t,!0,!0)}}),r="[object Object]";var o,i,c=Function.prototype,a=Object.prototype,s=c.toString,u=a.hasOwnProperty,f=s.call(Object),l=a.toString,p=(o=Object.getPrototypeOf,i=Object,function(t){return o(i(t))});var g=function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||l.call(t)!=r||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=p(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==f},y=function(t,e){if(e){if("object"!=typeof e)throw new TypeError(String(e)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero&&0===t)return!0}}return Number.isSafeInteger(t)&&t>=1},h=e(function(t,e){(e=t.exports=function(t){return t+e.suffix(+t)}).suffix=function(t){return t%=100,1===Math.floor(t/10)?"th":t%10==1?"st":t%10==2?"nd":t%10==3?"rd":"th"}}),m=(h.suffix,e(function(e,n){var r,o,i,c,a,s,u,f,l,p,g,y,h,m,d,b,v,_,w,j;e.exports=(r="function"==typeof Promise,o="object"==typeof self?self:t,i="undefined"!=typeof Symbol,c="undefined"!=typeof Map,a="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,u="undefined"!=typeof WeakSet,f="undefined"!=typeof DataView,l=i&&void 0!==Symbol.iterator,p=i&&void 0!==Symbol.toStringTag,g=a&&"function"==typeof Set.prototype.entries,y=c&&"function"==typeof Map.prototype.entries,h=g&&Object.getPrototypeOf((new Set).entries()),m=y&&Object.getPrototypeOf((new Map).entries()),d=l&&"function"==typeof Array.prototype[Symbol.iterator],b=d&&Object.getPrototypeOf([][Symbol.iterator]()),v=l&&"function"==typeof String.prototype[Symbol.iterator],_=v&&Object.getPrototypeOf(""[Symbol.iterator]()),w=8,j=-1,function(t){var e=typeof t;if("object"!==e)return e;if(null===t)return"null";if(t===o)return"global";if(Array.isArray(t)&&(!1===p||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var n=p&&t[Symbol.toStringTag];if("string"==typeof n)return n;var i=Object.getPrototypeOf(t);return i===RegExp.prototype?"RegExp":i===Date.prototype?"Date":r&&i===Promise.prototype?"Promise":a&&i===Set.prototype?"Set":c&&i===Map.prototype?"Map":u&&i===WeakSet.prototype?"WeakSet":s&&i===WeakMap.prototype?"WeakMap":f&&i===DataView.prototype?"DataView":c&&i===m?"Map Iterator":a&&i===h?"Set Iterator":d&&i===b?"Array Iterator":v&&i===_?"String Iterator":null===i?"Object":Object.prototype.toString.call(t).slice(w,j)})}));function d(t,e,n){if(e!=e)return function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,v,n);for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}function b(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function v(t){return t!=t}var _=Array.prototype.splice;function w(t,e,n,r){var o,i=r?b:d,c=-1,a=e.length,s=t;for(t===e&&(e=function(t,e){var n=-1,r=t.length;e||(e=Array(r));for(;++n<r;)e[n]=t[n];return e}(e)),n&&(s=function(t,e){for(var n=-1,r=t?t.length:0,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,(o=n,function(t){return o(t)})));++c<a;)for(var u=0,f=e[c],l=n?n(f):f;(u=i(s,l,u,r))>-1;)s!==t&&_.call(s,u,1),_.call(t,u,1);return t}var j=function(t,e){return t&&t.length&&e&&e.length?w(t,e):t};const O=Array.isArray;function S(t){return"string"==typeof t&&t.length>0&&"."===t[0]?t.slice(1):t}function T(t,e){return function t(e,r,o){const i=n(e);let c,a,s,u,f;if((o=Object.assign({depth:-1,path:""},o)).depth+=1,O(i))for(c=0,a=i.length;c<a;c++){const e=`${o.path}.${c}`;void 0!==i[c]?(o.parent=n(i),o.parentType="array",s=t(r(i[c],void 0,Object.assign({},o,{path:S(e)})),r,Object.assign({},o,{path:S(e)})),Number.isNaN(s)&&c<i.length?(i.splice(c,1),c-=1):i[c]=s):i.splice(c,1)}else if(g(i))for(c=0,a=(u=Object.keys(i)).length;c<a;c++){f=u[c];const e=`${o.path}.${f}`;0===o.depth&&null!=f&&(o.topmostKey=f),o.parent=n(i),o.parentType="object",s=t(r(f,i[f],Object.assign({},o,{path:S(e)})),r,Object.assign({},o,{path:S(e)})),Number.isNaN(s)?delete i[f]:i[f]=s}return i}(t,e,{})}var $="__lodash_hash_undefined__",A=9007199254740991,E="[object Function]",N="[object GeneratorFunction]",P=/^\[object .+?Constructor\]$/,I="object"==typeof t&&t&&t.Object===Object&&t,k="object"==typeof self&&self&&self.Object===Object&&self,M=I||k||Function("return this")();function x(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n,r){var o=t.length,i=n+(r?1:-1);for(;r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,L,n);var r=n-1,o=t.length;for(;++r<o;)if(t[r]===e)return r;return-1}(t,e,0)>-1}function J(t,e,n){for(var r=-1,o=t?t.length:0;++r<o;)if(n(e,t[r]))return!0;return!1}function F(t,e){for(var n=-1,r=t?t.length:0,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function L(t){return t!=t}function R(t){return function(e){return t(e)}}function C(t,e){return t.has(e)}var H,D=Array.prototype,W=Function.prototype,K=Object.prototype,V=M["__core-js_shared__"],U=(H=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",B=W.toString,Z=K.hasOwnProperty,q=K.toString,G=RegExp("^"+B.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=D.splice,Q=Math.max,Y=Math.min,X=ut(M,"Map"),tt=ut(Object,"create");function et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function rt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function ot(t){var e=-1,n=t?t.length:0;for(this.__data__=new rt;++e<n;)this.add(t[e])}function it(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function ct(t){return!(!lt(t)||(e=t,U&&U in e))&&(ft(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?G:P).test(function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function at(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=A}(t.length)&&!ft(t)}(t)}(t)?t:[]}function st(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ut(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ct(n)?n:void 0}function ft(t){var e=lt(t)?q.call(t):"";return e==E||e==N}function lt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}et.prototype.clear=function(){this.__data__=tt?tt(null):{}},et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},et.prototype.get=function(t){var e=this.__data__;if(tt){var n=e[t];return n===$?void 0:n}return Z.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return tt?void 0!==e[t]:Z.call(e,t)},et.prototype.set=function(t,e){return this.__data__[t]=tt&&void 0===e?$:e,this},nt.prototype.clear=function(){this.__data__=[]},nt.prototype.delete=function(t){var e=this.__data__,n=it(e,t);return!(n<0||(n==e.length-1?e.pop():z.call(e,n,1),0))},nt.prototype.get=function(t){var e=this.__data__,n=it(e,t);return n<0?void 0:e[n][1]},nt.prototype.has=function(t){return it(this.__data__,t)>-1},nt.prototype.set=function(t,e){var n=this.__data__,r=it(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},rt.prototype.clear=function(){this.__data__={hash:new et,map:new(X||nt),string:new et}},rt.prototype.delete=function(t){return st(this,t).delete(t)},rt.prototype.get=function(t){return st(this,t).get(t)},rt.prototype.has=function(t){return st(this,t).has(t)},rt.prototype.set=function(t,e){return st(this,t).set(t,e),this},ot.prototype.add=ot.prototype.push=function(t){return this.__data__.set(t,$),this},ot.prototype.has=function(t){return this.__data__.has(t)};var pt=function(t,e){return e=Q(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=Q(n.length-e,0),i=Array(o);++r<o;)i[r]=n[e+r];r=-1;for(var c=Array(e+1);++r<e;)c[r]=n[r];return c[e]=i,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,c)}}(function(t){var e=F(t,at);return e.length&&e[0]===t[0]?function(t,e,n){for(var r=n?J:x,o=t[0].length,i=t.length,c=i,a=Array(i),s=1/0,u=[];c--;){var f=t[c];c&&e&&(f=F(f,R(e))),s=Y(f.length,s),a[c]=!n&&(e||o>=120&&f.length>=120)?new ot(c&&f):void 0}f=t[0];var l=-1,p=a[0];t:for(;++l<o&&u.length<s;){var g=f[l],y=e?e(g):g;if(g=n||0!==g?g:0,!(p?C(p,y):r(u,y,n))){for(c=i;--c;){var h=a[c];if(!(h?C(h,y):r(t[c],y,n)))continue t}p&&p.push(y),u.push(g)}}return u}(e):[]});function gt(t){return"string"==typeof t?t.length>0?[t]:[]:t}var yt=e(function(t){t.exports=function(){var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(o(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function r(e){return t.call(e)}var o=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function c(t){t=t||{};var c=function(t){return Object.keys(c).reduce(function(e,n){return"create"===n?e:("function"==typeof c[n]&&(e[n]=c[n].bind(c,t)),e)},{})};function a(n,r){return t.includeInheritedProps||"number"==typeof r&&Array.isArray(n)||e(n,r)}function s(t,e){if(a(t,e))return t[e]}function u(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return u(t,e.split(".").map(i),n,r);var o=e[0],c=s(t,o);return 1===e.length?(void 0!==c&&r||(t[o]=n),c):(void 0===c&&("number"==typeof e[1]?t[o]=[]:t[o]={}),u(t[o],e.slice(1),n,r))}return c.has=function(n,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!n;for(var c=0;c<r.length;c++){var a=i(r[c]);if(!("number"==typeof a&&o(n)&&a<n.length||(t.includeInheritedProps?a in Object(n):e(n,a))))return!1;n=n[a]}return!0},c.ensureExists=function(t,e,n){return u(t,e,n,!0)},c.set=function(t,e,n,r){return u(t,e,n,r)},c.insert=function(t,e,n,r){var i=c.get(t,e);r=~~r,o(i)||(i=[],c.set(t,e,i)),i.splice(r,0,n)},c.empty=function(t,e){var i,s;if(!n(e)&&null!=t&&(i=c.get(t,e))){if("string"==typeof i)return c.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===r(t)}(i))return c.set(t,e,!1);if("number"==typeof i)return c.set(t,e,0);if(o(i))i.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===r(t)}(i))return c.set(t,e,null);for(s in i)a(i,s)&&delete i[s]}}},c.push=function(t,e){var n=c.get(t,e);o(n)||(n=[],c.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},c.coalesce=function(t,e,n){for(var r,o=0,i=e.length;o<i;o++)if(void 0!==(r=c.get(t,e[o])))return r;return n},c.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return c.get(t,e.split("."),n);var r=i(e[0]),o=s(t,r);return void 0===o?n:1===e.length?o:c.get(t[r],e.slice(1),n)},c.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(n(e))return t;if("string"==typeof e)return c.del(t,e.split("."));var r=i(e[0]);return a(t,r)?1!==e.length?c.del(t[r],e.slice(1)):(o(t)?t.splice(r,1):delete t[r],t):t},c}var a=c();return a.create=c,a.withInheritedProps=c({includeInheritedProps:!0}),a}()}),ht=function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"};function mt(t){if("number"!=typeof t)throw new TypeError("Expected Number, got "+typeof t+" "+t);return Number.isFinite(t)?t+ht(t):t}mt.indicator=ht;var dt=mt;const bt=/[|\\{}()[\]^$+*?.-]/g;var vt=t=>{if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(bt,"\\$&")};const _t=new Map;function wt(t,e){e={caseSensitive:!1,...e};const n=t+JSON.stringify(e);if(_t.has(n))return _t.get(n);const r="!"===t[0];r&&(t=t.slice(1)),t=vt(t).replace(/\\\*/g,".*");const o=new RegExp(`^${t}$`,e.caseSensitive?"":"i");return o.negated=r,_t.set(n,o),o}var jt=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof e}`);if(0===e.length)return t;const r="!"===e[0][0];e=e.map(t=>wt(t,n));const o=[];for(const n of t){let t=r;for(const r of e)r.test(n)&&(t=!r.negated);t&&o.push(n)}return o};function Ot(t,e,n){return function t(e,n,r,o=!0){const i=Object.prototype.hasOwnProperty;function c(t){return null!=t}function a(t){return"Object"===m(t)}function s(t,e){return e=gt(e),Array.from(t).filter(t=>!e.some(e=>jt.isMatch(t,e,{caseSensitive:!0})))}const u=["any","anything","every","everything","all","whatever","whatevs"],f=Array.isArray;if(!c(e))throw new Error("check-types-mini: [THROW_ID_01] First argument is missing!");const l={ignoreKeys:[],ignorePaths:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini",optsVarName:"opts"};let p;if(p=c(r)&&a(r)?Object.assign({},l,r):Object.assign({},l),c(p.ignoreKeys)&&p.ignoreKeys?p.ignoreKeys=gt(p.ignoreKeys):p.ignoreKeys=[],c(p.ignorePaths)&&p.ignorePaths?p.ignorePaths=gt(p.ignorePaths):p.ignorePaths=[],c(p.acceptArraysIgnore)&&p.acceptArraysIgnore?p.acceptArraysIgnore=gt(p.acceptArraysIgnore):p.acceptArraysIgnore=[],p.msg="string"==typeof p.msg?p.msg.trim():p.msg,":"===p.msg[p.msg.length-1]&&(p.msg=p.msg.slice(0,p.msg.length-1).trim()),p.schema&&(Object.keys(p.schema).forEach(t=>{if(a(p.schema[t])){const e={};T(p.schema[t],(n,r,o)=>{const i=void 0!==r?r:n;return f(i)||a(i)||(e[`${t}.${o.path}`]=i),i}),delete p.schema[t],p.schema=Object.assign(p.schema,e)}}),Object.keys(p.schema).forEach(t=>{f(p.schema[t])||(p.schema[t]=[p.schema[t]]),p.schema[t]=p.schema[t].map(String).map(t=>t.toLowerCase()).map(t=>t.trim())})),c(n)||(n={}),o&&t(p,l,{enforceStrictKeyset:!1},!1),p.enforceStrictKeyset)if(c(p.schema)&&Object.keys(p.schema).length>0){if(0!==s(j(Object.keys(e),Object.keys(n).concat(Object.keys(p.schema))),p.ignoreKeys).length){const t=j(Object.keys(e),Object.keys(n).concat(Object.keys(p.schema)));throw new TypeError(`${p.msg}: ${p.optsVarName}.enforceStrictKeyset is on and the following key${t.length>1?"s":""} ${t.length>1?"are":"is"} not covered by schema and/or reference objects: ${t.join(", ")}`)}}else{if(!(c(n)&&Object.keys(n).length>0))throw new TypeError(`${p.msg}: Both ${p.optsVarName}.schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!`);if(0!==s(j(Object.keys(e),Object.keys(n)),p.ignoreKeys).length){const t=j(Object.keys(e),Object.keys(n));throw new TypeError(`${p.msg}: The input object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not covered by the reference object: ${t.join(", ")}`)}if(0!==s(j(Object.keys(n),Object.keys(e)),p.ignoreKeys).length){const t=j(Object.keys(n),Object.keys(e));throw new TypeError(`${p.msg}: The reference object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not present in the input object: ${t.join(", ")}`)}}const g=[];T(e,(t,r,o)=>{let c=r,s=t;if("array"===o.parentType&&(s=void 0,c=t),f(g)&&g.length&&g.some(t=>o.path.startsWith(t)))return c;if(s&&p.ignoreKeys.some(t=>jt.isMatch(s,t)))return c;if(p.ignorePaths.some(t=>jt.isMatch(o.path,t)))return c;const l=!(!a(c)&&!f(c)&&f(o.parent));let y=!1;a(p.schema)&&i.call(p.schema,yt.get(o.path))&&(y=!0);let h=!1;if(a(n)&&yt.has(n,yt.get(o.path))&&(h=!0),p.enforceStrictKeyset&&l&&!y&&!h)throw new TypeError(`${p.msg}: ${p.optsVarName}.${o.path} is neither covered by reference object (second input argument), nor ${p.optsVarName}.schema! To stop this error, turn off ${p.optsVarName}.enforceStrictKeyset or provide some type reference (2nd argument or ${p.optsVarName}.schema).\n\nDebug info:\n\nobj = ${JSON.stringify(e,null,4)}\n\nref = ${JSON.stringify(n,null,4)}\n\ninnerObj = ${JSON.stringify(o,null,4)}\n\nopts = ${JSON.stringify(p,null,4)}\n\ncurrent = ${JSON.stringify(c,null,4)}\n\n`);if(y){const t=gt(p.schema[o.path]).map(String).map(t=>t.toLowerCase());if(yt.set(p.schema,o.path,t),pt(t,u).length)g.push(o.path);else if(!0!==c&&!1!==c&&!t.includes(m(c).toLowerCase())||(!0===c||!1===c)&&!t.includes(String(c))&&!t.includes("boolean")){if(!f(c)||!p.acceptArrays)throw new TypeError(`${p.msg}: ${p.optsVarName}.${o.path} was customised to ${"string"!==m(c)?'"':""}${JSON.stringify(c,null,0)}${"string"!==m(c)?'"':""} (type: ${m(c).toLowerCase()}) which is not among the allowed types in schema (which is equal to ${JSON.stringify(t,null,0)})`);for(let e=0,n=c.length;e<n;e++)if(!t.includes(m(c[e]).toLowerCase()))throw new TypeError(`${p.msg}: ${p.optsVarName}.${o.path}.${e}, the ${dt(e+1)} element (equal to ${JSON.stringify(c[e],null,0)}) is of a type ${m(c[e]).toLowerCase()}, but only the following are allowed by the ${p.optsVarName}.schema: ${t.join(", ")}`)}}else if(h){const e=yt.get(n,o.path);if(p.acceptArrays&&f(c)&&!p.acceptArraysIgnore.includes(t)){if(!c.every(e=>m(e).toLowerCase()===m(n[t]).toLowerCase()))throw new TypeError(`${p.msg}: ${p.optsVarName}.${o.path} was customised to be array, but not all of its elements are ${m(n[t]).toLowerCase()}-type`)}else if(m(c)!==m(e))throw new TypeError(`${p.msg}: ${p.optsVarName}.${o.path} was customised to ${"string"===m(c).toLowerCase()?"":'"'}${JSON.stringify(c,null,0)}${"string"===m(c).toLowerCase()?"":'"'} which is not ${m(e).toLowerCase()} but ${m(c).toLowerCase()}`)}return c})}(t,e,n)}jt.isMatch=((t,e,n)=>{const r=wt(e,n),o=r.test(t);return r.negated?!o:o});const St=Array.isArray;function Tt(t,e){if(!St(t))throw new TypeError(`ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(0===t.length)return t;const n={strictlyTwoElementsInRangeArrays:!1,progressFn:null},r=Object.assign({},n,e);let o,i;if(Ot(r,n,{msg:"ranges-sort: [THROW_ID_02*]",schema:{progressFn:["function","false","null"]}}),r.strictlyTwoElementsInRangeArrays&&!t.every((t,e)=>2===t.length||(o=e,i=t.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${h(o)} range (${JSON.stringify(t[o],null,4)}) has not two but ${i} elements!`);if(!t.every((t,e)=>!(!y(t[0],{includeZero:!0})||!y(t[1],{includeZero:!0}))||(o=e,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${h(o)} range (${JSON.stringify(t[o],null,4)}) does not consist of only natural numbers!`);const c=t.length*t.length;let a=0;return Array.from(t).sort((t,e)=>(r.progressFn&&(a++,r.progressFn(Math.floor(100*a/c))),t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1))}function $t(t,e){function r(t){return"string"==typeof t}if(!Array.isArray(t))return t;const o={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};let i;if(e){if(!g(e))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(e,null,4)} (type ${typeof e})`);if((i=Object.assign({},o,e)).progressFn&&g(i.progressFn)&&!Object.keys(i.progressFn).length)i.progressFn=null;else if(i.progressFn&&"function"!=typeof i.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "${typeof i.progressFn}", equal to ${JSON.stringify(i.progressFn,null,4)}`);if(i.mergeType&&1!==i.mergeType&&2!==i.mergeType)if(r(i.mergeType)&&"1"===i.mergeType.trim())i.mergeType=1;else{if(!r(i.mergeType)||"2"!==i.mergeType.trim())throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof i.mergeType}", equal to ${JSON.stringify(i.progressFn,null,4)}`);i.mergeType=2}if("boolean"!=typeof i.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof i.joinRangesThatTouchEdges}", equal to ${JSON.stringify(i.joinRangesThatTouchEdges,null,4)}`)}else i=n(o);const c=n(t).filter(t=>void 0!==t[2]||t[0]!==t[1]);let a,s,u;const f=(a=i.progressFn?Tt(c,{progressFn:t=>{(u=Math.floor(t/5))!==s&&(s=u,i.progressFn(u))}}):Tt(c)).length-1;for(let t=f;t>0;t--)i.progressFn&&(u=Math.floor(78*(1-t/f))+21)!==s&&u>s&&(s=u,i.progressFn(u)),(a[t][0]<=a[t-1][0]||!i.joinRangesThatTouchEdges&&a[t][0]<a[t-1][1]||i.joinRangesThatTouchEdges&&a[t][0]<=a[t-1][1])&&(a[t-1][0]=Math.min(a[t][0],a[t-1][0]),a[t-1][1]=Math.max(a[t][1],a[t-1][1]),void 0!==a[t][2]&&(a[t-1][0]>=a[t][0]||a[t-1][1]<=a[t][1])&&null!==a[t-1][2]&&(null===a[t][2]&&null!==a[t-1][2]?a[t-1][2]=null:void 0!==a[t-1][2]?2===i.mergeType&&a[t-1][0]===a[t][0]?a[t-1][2]=a[t][2]:a[t-1][2]+=a[t][2]:a[t-1][2]=a[t][2]),a.splice(t,1),t=a.length);return a}return function(t,e,n,r){if(null===e)return null===n?null:n;if(null===n)return e;var o=$t(e),i=$t(n);console.log("038 ".concat("[".concat(33,"m","older","[",39,"m")," = ",JSON.stringify(o,null,0),"; ","[".concat(33,"m","newer","[",39,"m")," = ").concat(JSON.stringify(i,null,0)));for(var c=[],a=0;i.length;)for(console.log("\n"),console.log("063 ==========================================\n".concat("[".concat(35,"m","processing newer","[",39,"m"),"[0] = ","[".concat(32,"m[",i[0],"][",39,"m"),"\n"));o.length;)if(console.log("080 ██ \n".concat("[".concat(36,"m","processing older","[",39,"m"),"[0] = ","[".concat(32,"m[",o[0],"][",39,"m"),"\n")),i.length)if(i[0][1]<o[0][0])console.log("107 CASE #1"),console.log("111 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify(i[0],null,0),", then ").concat(JSON.stringify(o[0],null,0))),c.push(i.shift()),c.push(o.shift());else{var s=i[0][1]-i[0][0];if(1===o.length||s<=o[1][0]-o[0][1])console.log("126 newer ".concat(JSON.stringify(i[0],null,0)," will fit")),a+=o[0][1]-o[0][0]+("string"==typeof o[0][2]?o[0][2].length:0),console.log("133 range ".concat(JSON.stringify(o[0],null,0)," ","[".concat(33,"m","offset","[",39,"m")," = ").concat(a)),console.log("141 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify(i[0].map(function(t){return t+a}),null,0),", then ").concat(JSON.stringify(o[0],null,0))),c.push(o.shift()),c.push(i.shift().map(function(t){return t+a}));else{console.log("151 newer ".concat(JSON.stringify(i[0],null,0)," won't fit"));for(var u=i[0][1]-i[0][0];u&&o.length;)if(console.log("161 ".concat("[".concat(36,"m","========","[",39,"m")," LOOP ","[".concat(36,"m","========","[",39,"m"))),console.log("164 ".concat("[".concat(33,"m","older","[",39,"m")," = ",JSON.stringify(o,null,0))),o.length>1)if(u>=o[1][0]-o[0][1]){console.log("176 ".concat("[".concat(32,"m","GAP [".concat(o[0][1],", ").concat(o[1][0],"] WILL BE COVERED COMPLETELY"),"[",39,"m")));var f=o[0];console.log("183 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify(f,null,0))),c.push(f),console.log("191 ".concat("[".concat(33,"m","composed","[",39,"m")," = ",JSON.stringify(c,null,0))),console.log("202 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify([o[0][1],o[1][0]],null,0))),c.push([o[0][1],o[1][0]]),console.log("210 ".concat("[".concat(33,"m","composed","[",39,"m")," = ",JSON.stringify(c,null,0))),u-=o[1][0]-o[0][1],o.shift(),console.log("237 AFTER THAT, ".concat("[".concat(33,"m","older","[",39,"m")," = ",JSON.stringify(o,null,0),"; ","[".concat(33,"m","lengthToCover","[",39,"m")," = ").concat(u))}else console.log("245 ".concat("[".concat(31,"m","GAP [".concat(o[0][1],", ").concat(o[1][0],"] WILL NOT BE COVERED COMPLETELY"),"[",39,"m"))),console.log("251 ".concat("[".concat(32,"m","PUSH","[",39,"m")," [",i[0][1],", ").concat(i[0][1]+u,"]")),c.push(i[0][1],i[0][1]+u),console.log("257 ".concat("[".concat(33,"m","composed","[",39,"m")," = ",JSON.stringify(c,null,0))),u=0,console.log("265 lengthToCover = ".concat(u));else{console.log("271 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify(o[0],null,0)));var l=o.shift();c.push(l),c.push([l[1],l[1]+u]),u=0,console.log("287 ".concat("[".concat(33,"m","composed","[",39,"m")," = ",JSON.stringify(c,null,0),"; lengthToCover = ").concat(u))}i.shift(),console.log("299 ".concat("[".concat(36,"m","========","[",39,"m")," LOOP ENDS","[".concat(36,"m","========","[",39,"m")))}}else console.log("092 ".concat("[".concat(32,"m","PUSH","[",39,"m")," ",JSON.stringify(o[0],null,0))),c.push(o.shift());return console.log("\n---------------------\n"),console.log("318 ".concat("[".concat(32,"m","RETURN","[",39,"m"),"\n","[".concat(35,"m","raw","[",39,"m"),":    ",JSON.stringify(c,null,0),";\n","[".concat(35,"m","merged","[",39,"m"),": ").concat(JSON.stringify($t(c),null,0),"\n")),$t(c)}});
