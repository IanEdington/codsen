/**
 * json-variables
 * It's like SASS variables, but for JSON
 * Version: 8.2.12
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/json-variables
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).jsonVariables=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var f=u((function(e,r){var n="[object Arguments]",a="[object Boolean]",i="[object Function]",o="[object GeneratorFunction]",s="[object Map]",c="[object Set]",u="[object DataView]",f="[object Float32Array]",h="[object Float64Array]",g="[object Int8Array]",p="[object Int16Array]",d="[object Int32Array]",y="[object Uint8Array]",m="[object Uint16Array]",v="[object Uint32Array]",b=/\w*$/,w=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,T={};T[n]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T[s]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T[c]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[i]=T["[object WeakMap]"]=!1;var A="object"==t(l)&&l&&l.Object===Object&&l,O="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,W=A||O||Function("return this")(),j=r&&!r.nodeType&&r,I=j&&e&&!e.nodeType&&e,E=I&&I.exports===j;function S(t,e){return t.set(e[0],e[1]),t}function D(t,e){return t.add(e),t}function R(t,e,r,n){var a=-1,i=t?t.length:0;for(n&&i&&(r=t[++a]);++a<i;)r=e(r,t[a],a,t);return r}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function N(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function x(t,e){return function(r){return t(e(r))}}function M(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var C,B=Array.prototype,k=Function.prototype,P=Object.prototype,F=W["__core-js_shared__"],J=(C=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",V=k.toString,q=P.hasOwnProperty,L=P.toString,$=RegExp("^"+V.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=E?W.Buffer:void 0,z=W.Symbol,G=W.Uint8Array,K=x(Object.getPrototypeOf,Object),Q=Object.create,X=P.propertyIsEnumerable,Y=B.splice,Z=Object.getOwnPropertySymbols,tt=U?U.isBuffer:void 0,et=x(Object.keys,Object),rt=It(W,"DataView"),nt=It(W,"Map"),at=It(W,"Promise"),it=It(W,"Set"),ot=It(W,"WeakMap"),st=It(Object,"create"),ct=Ht(rt),lt=Ht(nt),ut=Ht(at),ft=Ht(it),ht=Ht(ot),gt=z?z.prototype:void 0,pt=gt?gt.valueOf:void 0;function dt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function yt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function mt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function vt(t){this.__data__=new yt(t)}function bt(e,r){var a=xt(e)||function(e){return function(e){return function(e){return!!e&&"object"==t(e)}(e)&&Mt(e)}(e)&&q.call(e,"callee")&&(!X.call(e,"callee")||L.call(e)==n)}(e)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(e.length,String):[],i=a.length,o=!!i;for(var s in e)!r&&!q.call(e,s)||o&&("length"==s||Dt(s,i))||a.push(s);return a}function wt(t,e,r){var n=t[e];q.call(t,e)&&Nt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function _t(t,e){for(var r=t.length;r--;)if(Nt(t[r][0],e))return r;return-1}function Tt(t,e,r,l,w,_,A){var O;if(l&&(O=_?l(t,w,_,A):l(t)),void 0!==O)return O;if(!kt(t))return t;var W=xt(t);if(W){if(O=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&q.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,O)}else{var j=St(t),I=j==i||j==o;if(Ct(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if("[object Object]"==j||j==n||I&&!_){if(H(t))return _?t:{};if(O=function(t){return"function"!=typeof t.constructor||Rt(t)?{}:(e=K(t),kt(e)?Q(e):{});var e}(I?{}:t),!e)return function(t,e){return Wt(t,Et(t),e)}(t,function(t,e){return t&&Wt(e,Pt(e),t)}(O,t))}else{if(!T[j])return _?t:{};O=function(t,e,r,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return Ot(t);case a:case"[object Date]":return new i(+t);case u:return function(t,e){var r=e?Ot(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case f:case h:case g:case p:case d:case y:case"[object Uint8ClampedArray]":case m:case v:return function(t,e){var r=e?Ot(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case s:return function(t,e,r){return R(e?r(N(t),!0):N(t),S,new t.constructor)}(t,n,r);case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,b.exec(t));return e.lastIndex=t.lastIndex,e}(t);case c:return function(t,e,r){return R(e?r(M(t),!0):M(t),D,new t.constructor)}(t,n,r);case"[object Symbol]":return o=t,pt?Object(pt.call(o)):{}}var o}(t,j,Tt,e)}}A||(A=new vt);var E=A.get(t);if(E)return E;if(A.set(t,O),!W)var x=r?function(t){return function(t,e,r){var n=e(t);return xt(t)?n:function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}(n,r(t))}(t,Pt,Et)}(t):Pt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(x||t,(function(n,a){x&&(n=t[a=n]),wt(O,a,Tt(n,e,r,l,a,t,A))})),O}function At(t){return!(!kt(t)||(e=t,J&&J in e))&&(Bt(t)||H(t)?$:w).test(Ht(t));var e}function Ot(t){var e=new t.constructor(t.byteLength);return new G(e).set(new G(t)),e}function Wt(t,e,r,n){r||(r={});for(var a=-1,i=e.length;++a<i;){var o=e[a],s=n?n(r[o],t[o],o,r,t):void 0;wt(r,o,void 0===s?t[o]:s)}return r}function jt(e,r){var n,a,i=e.__data__;return("string"==(a=t(n=r))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n)?i["string"==typeof r?"string":"hash"]:i.map}function It(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return At(r)?r:void 0}dt.prototype.clear=function(){this.__data__=st?st(null):{}},dt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},dt.prototype.get=function(t){var e=this.__data__;if(st){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return q.call(e,t)?e[t]:void 0},dt.prototype.has=function(t){var e=this.__data__;return st?void 0!==e[t]:q.call(e,t)},dt.prototype.set=function(t,e){return this.__data__[t]=st&&void 0===e?"__lodash_hash_undefined__":e,this},yt.prototype.clear=function(){this.__data__=[]},yt.prototype.delete=function(t){var e=this.__data__,r=_t(e,t);return!(r<0)&&(r==e.length-1?e.pop():Y.call(e,r,1),!0)},yt.prototype.get=function(t){var e=this.__data__,r=_t(e,t);return r<0?void 0:e[r][1]},yt.prototype.has=function(t){return _t(this.__data__,t)>-1},yt.prototype.set=function(t,e){var r=this.__data__,n=_t(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},mt.prototype.clear=function(){this.__data__={hash:new dt,map:new(nt||yt),string:new dt}},mt.prototype.delete=function(t){return jt(this,t).delete(t)},mt.prototype.get=function(t){return jt(this,t).get(t)},mt.prototype.has=function(t){return jt(this,t).has(t)},mt.prototype.set=function(t,e){return jt(this,t).set(t,e),this},vt.prototype.clear=function(){this.__data__=new yt},vt.prototype.delete=function(t){return this.__data__.delete(t)},vt.prototype.get=function(t){return this.__data__.get(t)},vt.prototype.has=function(t){return this.__data__.has(t)},vt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof yt){var n=r.__data__;if(!nt||n.length<199)return n.push([t,e]),this;r=this.__data__=new mt(n)}return r.set(t,e),this};var Et=Z?x(Z,Object):function(){return[]},St=function(t){return L.call(t)};function Dt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||_.test(t))&&t>-1&&t%1==0&&t<e}function Rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||P)}function Ht(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Nt(t,e){return t===e||t!=t&&e!=e}(rt&&St(new rt(new ArrayBuffer(1)))!=u||nt&&St(new nt)!=s||at&&"[object Promise]"!=St(at.resolve())||it&&St(new it)!=c||ot&&"[object WeakMap]"!=St(new ot))&&(St=function(t){var e=L.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?Ht(r):void 0;if(n)switch(n){case ct:return u;case lt:return s;case ut:return"[object Promise]";case ft:return c;case ht:return"[object WeakMap]"}return e});var xt=Array.isArray;function Mt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!Bt(t)}var Ct=tt||function(){return!1};function Bt(t){var e=kt(t)?L.call(t):"";return e==i||e==o}function kt(e){var r=t(e);return!!e&&("object"==r||"function"==r)}function Pt(t){return Mt(t)?bt(t):function(t){if(!Rt(t))return et(t);var e=[];for(var r in Object(t))q.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}e.exports=function(t){return Tt(t,!0,!0)}}));function h(t){return"string"==typeof t&&t.length&&"."===t[0]?t.slice(1):t}function g(e,r){return function e(r,n,i,o){var s,c,l,u,g=f(r),p=a({depth:-1,path:""},i);if(p.depth+=1,Array.isArray(g))for(s=0,c=g.length;s<c&&!o.now;s++){var d="".concat(p.path,".").concat(s);void 0!==g[s]?(p.parent=f(g),p.parentType="array",l=e(n(g[s],void 0,a(a({},p),{},{path:h(d)}),o),n,a(a({},p),{},{path:h(d)}),o),Number.isNaN(l)&&s<g.length?(g.splice(s,1),s-=1):g[s]=l):g.splice(s,1)}else if((u=g)&&"object"===t(u)&&!Array.isArray(u))for(var y in g){if(o.now&&null!=y)break;var m="".concat(p.path,".").concat(y);0===p.depth&&null!=y&&(p.topmostKey=y),p.parent=f(g),p.parentType="object",l=e(n(y,g[y],a(a({},p),{},{path:h(m)}),o),n,a(a({},p),{},{path:h(m)}),o),Number.isNaN(l)?delete g[y]:g[y]=l}return g}(e,r,{},{now:!1})}var p=new Map;function d(t,e){e=a({caseSensitive:!1},e);var r=t+JSON.stringify(e);if(p.has(r))return p.get(r);var n="!"===t[0];n&&(t=t.slice(1)),t=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(t).replace(/\\\*/g,"[\\s\\S]*");var i=new RegExp("^".concat(t,"$"),e.caseSensitive?"":"i");return i.negated=n,p.set(r,i),i}var y=function(e,r,n){if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Expected two arrays, got ".concat(t(e)," ").concat(t(r)));if(0===r.length)return e;var a="!"===r[0][0];r=r.map((function(t){return d(t,n)}));var i,o=[],s=c(e);try{for(s.s();!(i=s.n()).done;){var l,u=i.value,f=a,h=c(r);try{for(h.s();!(l=h.n()).done;){var g=l.value;g.test(u)&&(f=!g.negated)}}catch(t){h.e(t)}finally{h.f()}f&&o.push(u)}}catch(t){s.e(t)}finally{s.f()}return o};y.isMatch=function(t,e,r){var n=Array.isArray(t)?t:[t],a=Array.isArray(e)?e:[e];return n.some((function(t){return a.every((function(e){var n=d(e,r),a=n.test(t);return n.negated?!a:a}))}))};var m=u((function(e){e.exports=function(){var e=Object.prototype.toString;function r(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(o(t)&&0===t.length)return!0;if("string"!=typeof t){for(var e in t)if(r(t,e))return!1;return!0}return!1}function a(t){return e.call(t)}function i(e){return"object"===t(e)&&"[object Object]"===a(e)}var o=Array.isArray||function(t){return"[object Array]"===e.call(t)};function s(t){return"boolean"==typeof t||"[object Boolean]"===a(t)}function c(t){var e=parseInt(t);return e.toString()===t?e:t}function l(t){t=t||{};var e=function t(e){return Object.keys(t).reduce((function(r,n){return"create"===n||"function"==typeof t[n]&&(r[n]=t[n].bind(t,e)),r}),{})};function a(e,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(e)||r(e,n)}function l(t,e){if(a(t,e))return t[e]}function u(t,e,r,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return u(t,e.split(".").map(c),r,n);var a=e[0],i=l(t,a);return 1===e.length?(void 0!==i&&n||(t[a]=r),i):(void 0===i&&("number"==typeof e[1]?t[a]=[]:t[a]={}),u(t[a],e.slice(1),r,n))}return e.has=function(e,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!e;for(var a=0;a<n.length;a++){var i=c(n[a]);if(!("number"==typeof i&&o(e)&&i<e.length||(t.includeInheritedProps?i in Object(e):r(e,i))))return!1;e=e[i]}return!0},e.ensureExists=function(t,e,r){return u(t,e,r,!0)},e.set=function(t,e,r,n){return u(t,e,r,n)},e.insert=function(t,r,n,a){var i=e.get(t,r);a=~~a,o(i)||(i=[],e.set(t,r,i)),i.splice(a,0,n)},e.empty=function(t,r){var c,l;if(!n(r)&&null!=t&&(c=e.get(t,r))){if("string"==typeof c)return e.set(t,r,"");if(s(c))return e.set(t,r,!1);if("number"==typeof c)return e.set(t,r,0);if(o(c))c.length=0;else{if(!i(c))return e.set(t,r,null);for(l in c)a(c,l)&&delete c[l]}}},e.push=function(t,r){var n=e.get(t,r);o(n)||(n=[],e.set(t,r,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},e.coalesce=function(t,r,n){for(var a,i=0,o=r.length;i<o;i++)if(void 0!==(a=e.get(t,r[i])))return a;return n},e.get=function(t,r,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return t;if(null==t)return n;if("string"==typeof r)return e.get(t,r.split("."),n);var a=c(r[0]),i=l(t,a);return void 0===i?n:1===r.length?i:e.get(t[a],r.slice(1),n)},e.del=function(t,r){if("number"==typeof r&&(r=[r]),null==t)return t;if(n(r))return t;if("string"==typeof r)return e.del(t,r.split("."));var i=c(r[0]);return a(t,i)?1!==r.length?e.del(t[i],r.slice(1)):(o(t)?t.splice(i,1):delete t[i],t):t},e}var u=l();return u.create=l,u.withInheritedProps=l({includeInheritedProps:!0}),u}()}));function v(t){return"string"==typeof t?t.length>0?[t]:[]:t}function b(e){return e&&"object"===t(e)&&!Array.isArray(e)}function w(t){return"string"==typeof t}function _(t,e,r,n,a,i){var o="function"==typeof r?r():r;if(e<0&&a&&"EOL"===o)return o;if(e>=t.length&&!a)return!1;for(var s=a?1:r.length,c=!1,l=!1,u=n.maxMismatches,f=e,h=!1,g=!1,p=!1;t[f];){var d=i(f);if(n.trimBeforeMatching&&""===t[f].trim()){if(!t[d]&&a&&"EOL"===r)return!0;f=i(f)}else if(!n.i&&n.trimCharsBeforeMatching.includes(t[f])||n.i&&n.trimCharsBeforeMatching.map((function(t){return t.toLowerCase()})).includes(t[f].toLowerCase())){if(a&&"EOL"===r&&!t[d])return!0;f=i(f)}else{var y=d>f?r[r.length-s]:r[s-1];if(!n.i&&t[f]===y||n.i&&t[f].toLowerCase()===y.toLowerCase()){if(h||(h=!0),l||(l=!0),s===r.length?g=!0:1===s&&(p=!0),(s-=1)<1)return f}else{if(!(n.maxMismatches&&u&&f))return!(0!==f||1!==s||n.lastMustMatch||!l)&&0;u-=1;for(var m=0;m<=u;m++){var v=d>f?r[r.length-s+1+m]:r[s-2-m],b=t[i(f)];if(v&&(!n.i&&t[f]===v||n.i&&t[f].toLowerCase()===v.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=2,h=!0;break}if(b&&v&&(!n.i&&b===v||n.i&&b.toLowerCase()===v.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=1,h=!0;break}if(void 0===v&&u>=0&&h&&(!n.firstMustMatch||g)&&(!n.lastMustMatch||p))return f}h||(c=f)}if(!1!==c&&c!==f&&(c=!1),s<1)return f;f=i(f)}}return s>0?!(!a||"EOL"!==o)||!!(n.maxMismatches>=s&&l)&&(c||0):void 0}function T(e,r,n,i,o){if(b(o)&&Object.prototype.hasOwnProperty.call(o,"trimBeforeMatching")&&"boolean"!=typeof o.trimBeforeMatching)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!").concat(Array.isArray(o.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var s,c,l,u,f=a(a({},{i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1}),o);if(f.trimCharsBeforeMatching=v(f.trimCharsBeforeMatching),f.trimCharsBeforeMatching=f.trimCharsBeforeMatching.map((function(t){return w(t)?t:String(t)})),!w(r))return!1;if(!r.length)return!1;if(!Number.isInteger(n)||n<0)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ").concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(w(i))s=[i];else if(Array.isArray(i))s=i;else if(i){if("function"!=typeof i)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ").concat(t(i),", equal to:\n").concat(JSON.stringify(i,null,4)));(s=[]).push(i)}else s=i;if(o&&!b(o))throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \"").concat(t(o),'", and equal to:\n').concat(JSON.stringify(o,null,4)));if(f.trimCharsBeforeMatching.some((function(t,e){return t.length>1&&(l=e,u=t,!0)})))throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ").concat(l," is longer than 1 character, ").concat(u.length," (equals to ").concat(u,"). Please split it into separate characters and put into array as separate elements."));if(!s||!Array.isArray(s)||Array.isArray(s)&&!s.length||Array.isArray(s)&&1===s.length&&w(s[0])&&!s[0].trim()){if("function"==typeof f.cb){var h,g=n;if("matchLeftIncl"!==e&&"matchRight"!==e||(g+=1),"L"===e[5])for(var p=g;p--;){var d=r[p];if((!f.trimBeforeMatching||f.trimBeforeMatching&&void 0!==d&&d.trim())&&(!f.trimCharsBeforeMatching.length||void 0!==d&&!f.trimCharsBeforeMatching.includes(d))){h=p;break}}else if(e.startsWith("matchRight"))for(var y=g;y<r.length;y++){var m=r[y];if((!f.trimBeforeMatching||f.trimBeforeMatching&&m.trim())&&(!f.trimCharsBeforeMatching.length||!f.trimCharsBeforeMatching.includes(m))){h=y;break}}if(void 0===h)return!1;var T=r[h],A=h+1,O="";return A&&A>0&&(O=r.slice(0,A)),"L"===e[5]?f.cb(T,O,h):(h&&h>0&&(O=r.slice(h)),f.cb(T,O,h))}var W="";throw o||(W=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/".concat(e,'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!').concat(W))}for(var j=0,I=s.length;j<I;j++){c="function"==typeof s[j];var E=s[j],S=void 0,D=void 0,R="",H=n;"matchRight"===e?H+=1:"matchLeft"===e&&(H-=1);var N=_(r,H,E,f,c,(function(t){return"L"===e[5]?t-1:t+1}));if(N&&c&&"function"==typeof E&&"EOL"===E())return!(!E()||f.cb&&!f.cb(S,R,D))&&E();if(Number.isInteger(N)&&(D=e.startsWith("matchLeft")?N-1:N+1,R="L"===e[5]?r.slice(0,N):r.slice(D)),D<0&&(D=void 0),r[D]&&(S=r[D]),Number.isInteger(N)&&(!f.cb||f.cb(S,R,D)))return E}return!1}function A(t,e,r,n){return T("matchLeftIncl",t,e,r,n)}function O(t,e,r,n){return T("matchRightIncl",t,e,r,n)}function W(t){return"string"==typeof t}function j(e,r,n,i){if(i&&(!(o=i)||"object"!==t(o)||Array.isArray(o)))throw new TypeError("string-find-heads-tails: [THROW_ID_01] the fourth input argument, an Optional Options Object, must be a plain object! Currently it's equal to: ".concat(i," (type: ").concat(t(i),")"));var o,s,c,l={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1},u=a(a({},l),i);if("string"==typeof u.fromIndex&&/^\d*$/.test(u.fromIndex))u.fromIndex=Number(u.fromIndex);else if(!Number.isInteger(u.fromIndex)||u.fromIndex<0)throw new TypeError("".concat(u.source," [THROW_ID_18] the fourth input argument must be a natural number or zero! Currently it's: ").concat(u.fromIndex));if(!W(e)||0===e.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: ".concat(t(e),", equal to: ").concat(e))}if("string"!=typeof r&&!Array.isArray(r)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: ".concat(t(r),", equal to:\n").concat(JSON.stringify(r,null,4)))}if("string"==typeof r){if(0===r.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}r=v(r)}else if(Array.isArray(r)){if(0===r.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(r.every((function(t,e){return s=t,c=e,W(t)}))){if(!r.every((function(t,e){return c=e,W(t)&&t.length>0&&""!==t.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index ".concat(c," of heads array:\n").concat(JSON.stringify(r,null,4),"."));if(0===(r=r.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at ".concat(c,"th index is ").concat(t(s),", equal to:\n").concat(JSON.stringify(s,null,4),". Whole heads array looks like:\n").concat(JSON.stringify(r,null,4)));if(0===(r=r.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}if(!W(n)&&!Array.isArray(n)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: ".concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)))}if(W(n)){if(0===n.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}n=v(n)}else if(Array.isArray(n)){if(0===n.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(n.every((function(t,e){return s=t,c=e,W(t)}))){if(!n.every((function(t,e){return c=e,W(t)&&t.length>0&&""!==t.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index ".concat(c,". Whole tails array is equal to:\n").concat(JSON.stringify(n,null,4)));if(0===(n=n.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at ".concat(c,"th index is ").concat(t(s),", equal to:\n").concat(JSON.stringify(s,null,4),". Whole tails array is equal to:\n").concat(JSON.stringify(n,null,4)));if(0===(n=n.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}var f=u.source===l.source;if(u.throwWhenSomethingWrongIsDetected&&!u.allowWholeValueToBeOnlyHeadsOrTails){if(v(r).includes(e))throw new Error("".concat(u.source).concat(f?": [THROW_ID_16]":""," the whole input string can't be equal to ").concat(W(r)?"":"one of ","heads (").concat(e,")!"));if(v(n).includes(e))throw new Error("".concat(u.source).concat(f?": [THROW_ID_17]":""," the whole input string can't be equal to ").concat(W(n)?"":"one of ","tails (").concat(e,")!"))}for(var h,g=r.concat(n).map((function(t){return t.charAt(0)})).reduce((function(t,e){return e.charCodeAt(0)>t[1]?[t[0],e.charCodeAt(0)]:e.charCodeAt(0)<t[0]?[e.charCodeAt(0),t[1]]:t}),[r[0].charCodeAt(0),r[0].charCodeAt(0)]),p=[],d=!1,y={},m=!1,b=u.fromIndex,w=e.length;b<w;b++){var _=e[b].charCodeAt(0);if(_<=g[1]&&_>=g[0]){var T=O(e,b,r);if(T&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var A=r.length;A--;)if(r[A]===T){h=A;break}if(T){if(!d){(y={}).headsStartAt=b,y.headsEndAt=b+T.length,d=!0,b+=T.length-1,m&&(m=!1);continue}if(u.throwWhenSomethingWrongIsDetected)throw new TypeError("".concat(u.source).concat(f?": [THROW_ID_19]":"",' When processing "').concat(e,'", we found heads (').concat(e.slice(b,b+T.length),') starting at character with index number "').concat(b,'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n').concat(e.slice(Math.max(b-200,0),b),"\n      ","[".concat(33,"m-------\x3e[",39,"m")," ","[".concat(31,"m",e.slice(b,b+T.length),"[",39,"m")," [",33,"m","<-------","[",39,"m\n").concat(e.slice(b+T.length,Math.min(w,b+200)),"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false."))}var j=O(e,b,n);if(d&&j&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==h&&void 0!==n[h]&&n[h]!==j){for(var I=void 0,E=n.length;E--;)if(n[E]===j){I=E;break}throw new TypeError("".concat(u.source).concat(f?": [THROW_ID_20]":"",' When processing "').concat(e,'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads (').concat(r[h],") but the tails the followed it were not of the same index, ").concat(h," (").concat(n[h],") but ").concat(I," (").concat(j,")."))}if(j){if(d){y.tailsStartAt=b,y.tailsEndAt=b+j.length,p.push(y),y={},d=!1,b+=j.length-1;continue}u.throwWhenSomethingWrongIsDetected&&(m="".concat(u.source).concat(f?": [THROW_ID_21]":"",' When processing "').concat(e,'", we found tails (').concat(e.slice(b,b+j.length),') starting at character with index number "').concat(b,"\" but there were no heads preceding it. That's very naughty!"))}}if(u.throwWhenSomethingWrongIsDetected&&b===w-1){if(0!==Object.keys(y).length)throw new TypeError("".concat(u.source).concat(f?": [THROW_ID_22]":"",' When processing "').concat(e,"\", we reached the end of the string and yet didn't find any tails (").concat(JSON.stringify(n,null,4),") to match the last detected heads (").concat(e.slice(y.headsStartAt,y.headsEndAt),")!"));if(m)throw new Error(m)}}return p}var I=Array.isArray;function E(t){return null!=t}function S(e,r,n){if(!E(e))throw new Error("ast-get-values-by-key: [THROW_ID_01] the first argument is missing!");if(!E(r))throw new Error("ast-get-values-by-key: [THROW_ID_02] the second argument is missing!");var a,i,o;if(I(r)){if(r.length&&r.some((function(t,e){return"string"!=typeof t&&(a=e,i=t,!0)})))throw new Error("ast-get-values-by-key: [THROW_ID_03] the second argument is array of values and not all of them are strings! For example, at index ".concat(a,", we have a value ").concat(JSON.stringify(i,null,0)," which is not string but ").concat(t(i),"!"))}else if("string"!=typeof r)throw new Error("ast-get-values-by-key: [THROW_ID_04] the second argument must be string! Currently it's of a type \"".concat(t(r),'", equal to:\n').concat(JSON.stringify(r,null,4)));E(n)&&(o="string"==typeof n?[n]:f(n));var s=[],c=g(e,(function(t,e,n){var a=void 0!==e?e:t;if(void 0!==e&&y.isMatch(t,r,{caseSensitive:!0}))if(void 0===o)s.push({val:e,path:n.path});else if(o.length>0)return o.shift();return a}));return void 0===o?s:c}function D(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;if(!(r.trim()||t.length&&"\n"!==r&&" "!==r&&" "===(e?t[t.length-1]:t[0])||t.length&&"\n"===(e?t[t.length-1]:t[0])&&"\n"!==r&&" "!==r))if(e){if(("\n"===r||" "===r)&&t.length&&" "===t[t.length-1])for(;t.length&&" "===t[t.length-1];)t.pop();t.push(" "===r||"\n"===r?r:" ")}else{if(("\n"===r||" "===r)&&t.length&&" "===t[0])for(;t.length&&" "===t[0];)t.shift();t.unshift(" "===r||"\n"===r?r:" ")}}function R(t,e){if("string"==typeof t&&t.length){var r,n,a=!1;if(t.includes("\r\n")&&(a=!0),r=e&&"number"==typeof e?e:1,""===t.trim()){var i=[];for(n=r,Array.from(t).forEach((function(t){("\n"!==t||n)&&("\n"===t&&(n-=1),D(i,!0,t))}));i.length>1&&" "===i[i.length-1];)i.pop();return i.join("")}var o=[];if(n=r,""===t[0].trim())for(var s=0,c=t.length;s<c&&!t[s].trim();s++)("\n"!==t[s]||n)&&("\n"===t[s]&&(n-=1),D(o,!0,t[s]));var l=[];if(n=r,""===t.slice(-1).trim())for(var u=t.length;u--&&!t[u].trim();)("\n"!==t[u]||n)&&("\n"===t[u]&&(n-=1),D(l,!1,t[u]));return a?"".concat(o.join("")).concat(t.trim()).concat(l.join("")).replace(/\n/g,"\r\n"):o.join("")+t.trim()+l.join("")}return t}function H(t,e){if(!Array.isArray(t)||!t.length)return t;var r,n,i=a(a({},{strictlyTwoElementsInRangeArrays:!1,progressFn:null}),e);if(i.strictlyTwoElementsInRangeArrays&&!t.every((function(t,e){return 2===t.length||(r=e,n=t.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") has not two but ").concat(n," elements!"));if(!t.every((function(t,e){return!(!Number.isInteger(t[0])||t[0]<0||!Number.isInteger(t[1])||t[1]<0)||(r=e,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") does not consist of only natural numbers!"));var o=t.length*t.length,s=0;return Array.from(t).sort((function(t,e){return i.progressFn&&(s+=1,i.progressFn(Math.floor(100*s/o))),t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1}))}function N(e,r){function n(t){return"string"==typeof t}function o(e){return e&&"object"===t(e)&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return e;var s,c={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};if(r){if(!o(r))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(r,null,4)," (type ").concat(t(r),")"));if((s=a(a({},c),r)).progressFn&&o(s.progressFn)&&!Object.keys(s.progressFn).length)s.progressFn=null;else if(s.progressFn&&"function"!=typeof s.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'.concat(t(s.progressFn),'", equal to ').concat(JSON.stringify(s.progressFn,null,4)));if(s.mergeType&&1!==s.mergeType&&2!==s.mergeType)if(n(s.mergeType)&&"1"===s.mergeType.trim())s.mergeType=1;else{if(!n(s.mergeType)||"2"!==s.mergeType.trim())throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(t(s.mergeType),'", equal to ').concat(JSON.stringify(s.mergeType,null,4)));s.mergeType=2}if("boolean"!=typeof s.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'.concat(t(s.joinRangesThatTouchEdges),'", equal to ').concat(JSON.stringify(s.joinRangesThatTouchEdges,null,4)))}else s=a({},c);for(var l,u,f,h=e.map((function(t){return i(t)})).filter((function(t){return void 0!==t[2]||t[0]!==t[1]})),g=(l=s.progressFn?H(h,{progressFn:function(t){(f=Math.floor(t/5))!==u&&(u=f,s.progressFn(f))}}):H(h)).length-1,p=g;p>0;p--)s.progressFn&&(f=Math.floor(78*(1-p/g))+21)!==u&&f>u&&(u=f,s.progressFn(f)),(l[p][0]<=l[p-1][0]||!s.joinRangesThatTouchEdges&&l[p][0]<l[p-1][1]||s.joinRangesThatTouchEdges&&l[p][0]<=l[p-1][1])&&(l[p-1][0]=Math.min(l[p][0],l[p-1][0]),l[p-1][1]=Math.max(l[p][1],l[p-1][1]),void 0!==l[p][2]&&(l[p-1][0]>=l[p][0]||l[p-1][1]<=l[p][1])&&null!==l[p-1][2]&&(null===l[p][2]&&null!==l[p-1][2]?l[p-1][2]=null:void 0!==l[p-1][2]?2===s.mergeType&&l[p-1][0]===l[p][0]?l[p-1][2]=l[p][2]:l[p-1][2]+=l[p][2]:l[p-1][2]=l[p][2]),l.splice(p,1),p=l.length);return l}function x(t){return null!=t}function M(t){return Number.isInteger(t)&&t>=0}function C(t){return"string"==typeof t}function B(t){return/^\d*$/.test(t)?parseInt(t,10):t}var k=function(){function r(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=a(a({},{limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1}),e);if(n.mergeType&&1!==n.mergeType&&2!==n.mergeType)if(C(n.mergeType)&&"1"===n.mergeType.trim())n.mergeType=1;else{if(!C(n.mergeType)||"2"!==n.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(t(n.mergeType),'", equal to ').concat(JSON.stringify(n.mergeType,null,4)));n.mergeType=2}this.opts=n}var n,o,s;return n=r,(o=[{key:"add",value:function(e,r,n){for(var a=this,o=arguments.length,s=new Array(o>3?o-3:0),c=3;c<o;c++)s[c-3]=arguments[c];if(s.length>0)throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_03] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: ".concat(JSON.stringify(s,null,4)));if(x(e)||x(r)){if(x(e)&&!x(r)){if(Array.isArray(e)){if(e.length){if(e.some((function(t){return Array.isArray(t)})))return void e.forEach((function(t){Array.isArray(t)&&a.add.apply(a,i(t))}));e.length>1&&M(B(e[0]))&&M(B(e[1]))&&this.add.apply(this,i(e))}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('.concat(JSON.stringify(e,null,0),') but second-one, "to" is not (').concat(JSON.stringify(r,null,0),")"))}if(!x(e)&&x(r))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('.concat(JSON.stringify(r,null,0),') but first-one, "from" is not (').concat(JSON.stringify(e,null,0),")"));var l=/^\d*$/.test(e)?parseInt(e,10):e,u=/^\d*$/.test(r)?parseInt(r,10):r;if(M(n)&&(n=String(n)),!M(l)||!M(u))throw M(l)&&l>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(t(u),'" equal to: ').concat(JSON.stringify(u,null,4))):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(t(l),'" equal to: ').concat(JSON.stringify(l,null,4)));if(x(n)&&!C(n)&&!M(n))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ".concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(x(this.ranges)&&Array.isArray(this.last())&&l===this.last()[1]){if(this.last()[1]=u,this.last()[2],null!==this.last()[2]&&x(n)){var f=!(x(this.last()[2])&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?n:this.last()[2]+n;this.opts.limitToBeAddedWhitespace&&(f=R(f,this.opts.limitLinebreaksCount)),C(f)&&!f.length||(this.last()[2]=f)}}else{this.ranges||(this.ranges=[]);var h=void 0===n||C(n)&&!n.length?[l,u]:[l,u,this.opts.limitToBeAddedWhitespace?R(n,this.opts.limitLinebreaksCount):n];this.ranges.push(h)}}}},{key:"push",value:function(t,e,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];this.add.apply(this,[t,e,r].concat(a))}},{key:"current",value:function(){var t=this;return null!=this.ranges?(this.ranges=N(this.ranges,{mergeType:this.opts.mergeType}),this.opts.limitToBeAddedWhitespace?this.ranges.map((function(e){return x(e[2])?[e[0],e[1],R(e[2],t.opts.limitLinebreaksCount)]:e})):this.ranges):null}},{key:"wipe",value:function(){this.ranges=void 0}},{key:"replace",value:function(t){if(Array.isArray(t)&&t.length){if(!Array.isArray(t[0])||!M(t[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ".concat(JSON.stringify(t[0],null,4)," should be an array and its first element should be an integer, a string index."));this.ranges=Array.from(t)}else this.ranges=void 0}},{key:"last",value:function(){return void 0!==this.ranges&&Array.isArray(this.ranges)?this.ranges[this.ranges.length-1]:null}}])&&e(n.prototype,o),s&&e(n,s),r}();function P(t){return null!=t}function F(t){return"string"==typeof t}function J(e,r,n){var a,i=0,o=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if(!F(e))throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ".concat(t(e),", equal to: ").concat(JSON.stringify(e,null,4)));if(null===r)return e;if(!Array.isArray(r))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ".concat(t(r),", equal to: ").concat(JSON.stringify(r,null,4)));if(n&&"function"!=typeof n)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: ".concat(t(n),", equal to: ").concat(JSON.stringify(n,null,4)));var s=(a=Array.isArray(r)&&(Number.isInteger(r[0])&&r[0]>=0||/^\d*$/.test(r[0]))&&(Number.isInteger(r[1])&&r[1]>=0||/^\d*$/.test(r[1]))?[Array.from(r)]:Array.from(r)).length,c=0;a.forEach((function(e,r){if(n&&(i=Math.floor(c/s*10))!==o&&(o=i,n(i)),!Array.isArray(e))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has ".concat(r,"th element not an array: ").concat(JSON.stringify(e,null,4),", which is ").concat(t(e)));if(!Number.isInteger(e[0])||e[0]<0){if(!/^\d*$/.test(e[0]))throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has ".concat(r,"th element, array [").concat(e[0],",").concat(e[1],"]. That array has first element not an integer, but ").concat(t(e[0]),", equal to: ").concat(JSON.stringify(e[0],null,4),". Computer doesn't like this."));a[r][0]=Number.parseInt(a[r][0],10)}if(!Number.isInteger(e[1])){if(!/^\d*$/.test(e[1]))throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has ".concat(r,"th element, array [").concat(e[0],",").concat(e[1],"]. That array has second element not an integer, but ").concat(t(e[1]),", equal to: ").concat(JSON.stringify(e[1],null,4),". Computer doesn't like this."));a[r][1]=Number.parseInt(a[r][1],10)}c+=1}));var l=N(a,{progressFn:function(t){n&&(i=10+Math.floor(t/10))!==o&&(o=i,n(i))}}),u=l.length;if(u>0){var f=e.slice(l[u-1][1]);e=l.reduce((function(t,r,a,s){n&&(i=20+Math.floor(a/u*80))!==o&&(o=i,n(i));var c=0===a?0:s[a-1][1],l=s[a][0];return t+e.slice(c,l)+(P(s[a][2])?s[a][2]:"")}),""),e+=f}return e}var V,q,L=Function.prototype,$=Object.prototype,U=L.toString,z=$.hasOwnProperty,G=U.call(Object),K=$.toString,Q=(V=Object.getPrototypeOf,q=Object,function(t){return V(q(t))});var X=function(e){if(!function(e){return!!e&&"object"==t(e)}(e)||"[object Object]"!=K.call(e)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(e))return!1;var r=Q(e);if(null===r)return!0;var n=z.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&U.call(n)==G};function Y(e,r){if("string"!=typeof e)throw new Error("string-trim-spaces-only: [THROW_ID_01] input must be string! It was given as ".concat(t(e),", equal to:\n").concat(JSON.stringify(e,null,4)));var n,i,o=a(a({},{classicTrim:!1,cr:!1,lf:!1,tab:!1,space:!0,nbsp:!1}),r);function s(t){return o.classicTrim&&!t.trim()||!o.classicTrim&&(o.space&&" "===t||o.cr&&"\r"===t||o.lf&&"\n"===t||o.tab&&"\t"===t||o.nbsp&&" "===t)}if(e.length){if(s(e[0]))for(var c=0,l=e.length;c<l;c++){if(!s(e[c])){n=c;break}if(c===e.length-1)return{res:"",ranges:[[0,e.length]]}}if(s(e[e.length-1]))for(var u=e.length;u--;)if(!s(e[u])){i=u+1;break}return n?i?{res:e.slice(n,i),ranges:[[0,n],[i,e.length]]}:{res:e.slice(n),ranges:[[0,n]]}:i?{res:e.slice(0,i),ranges:[[i,e.length]]}:{res:e,ranges:[]}}return{res:"",ranges:[]}}function Z(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(t){return null!=t}var i=Object.prototype.hasOwnProperty;function o(t){return"string"==typeof t}if(void 0===e)throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_01] The input is missing!");if("string"!=typeof e)return e;if(n(r)&&!X(r))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_03] The given options are not a plain object but ".concat(t(r),"!"));if(n(r)&&i.call(r,"heads")){if(!v(r.heads).every((function(t){return o(t)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_04] The opts.heads contains elements which are not string-type!");o(r.heads)&&(r.heads=v(r.heads))}if(n(r)&&i.call(r,"tails")){if(!v(r.tails).every((function(t){return o(t)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_05] The opts.tails contains elements which are not string-type!");o(r.tails)&&(r.tails=v(r.tails))}var s=Y(e).res;if(0===s.length)return e;e=s;var c={heads:["{{"],tails:["}}"]},l=a(a({},c),r);l.heads=l.heads.map((function(t){return t.trim()})),l.tails=l.tails.map((function(t){return t.trim()}));var u=!1,f=!1,h=new k({limitToBeAddedWhitespace:!0}),g=new k({limitToBeAddedWhitespace:!0}),p=!0,d=!0,y="";function m(t,e){var r;return O(t,0,e.heads,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})&&O(t,r,e.tails,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})?t.slice(r):t}for(;e!==m(e,l);)e=Y(m(e,l)).res;function b(t,e){var r;return A(t,t.length-1,e.tails,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})&&A(t,r,e.heads,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})?t.slice(0,r+1):t}for(;e!==b(e,l);)e=Y(b(e,l)).res;if(!(l.heads.length&&O(e,0,l.heads,{trimBeforeMatching:!0,relaxedApi:!0})&&l.tails.length&&A(e,e.length-1,l.tails,{trimBeforeMatching:!0,relaxedApi:!0})))return Y(e).res;for(var w=0,_=e.length;w<_;w++)if(""===e[w].trim());else{var T=void 0,W=O(e,w,l.heads,{trimBeforeMatching:!0,cb:function(t,e,r){return T=r,!0},relaxedApi:!0});if(W){d=!0,p&&(p=!0);var j=void 0,I=O(e,T,l.tails,{trimBeforeMatching:!0,cb:function(t,e,r){return j=r,!0},relaxedApi:!0});I&&h.push(w,j),g.current()&&u&&"tails"!==y&&h.push(g.current()),u||g.current()&&(h.push(g.current()),g.wipe()),g.push(w,T),y="heads",w=T-1;continue}var E=O(e,w,l.tails,{trimBeforeMatching:!0,cb:function(t,r,a){return T=n(a)?a:e.length,!0},relaxedApi:!0});if(E){d=!0,p?("heads"===y&&g.wipe(),p=!1):g.push(w,T),y="tails",w=T-1;continue}p&&(p=!0),d&&!u?(u=!0,d=!1):d&&!f?(f=!0,p=!0,d=!1,"heads"===y&&g.wipe()):d&&f&&g.wipe()}return g.current()&&h.push(g.current()),h.current()?J(e,h.current()).trim():e.trim()}var tt=Object.prototype.hasOwnProperty;function et(t){return"string"==typeof t}function rt(t){return"boolean"==typeof t}function nt(t){return null===t}function at(e){return e&&"object"===t(e)&&!Array.isArray(e)}function it(t){return null!=t}function ot(t){return et(t)?t.trim():t}function st(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=0,r=t.length;e<r;e++)if("."===t[e])return t.slice(e+1);return t}function ct(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=t.length;e--;)if("."===t[e])return t.slice(0,e);return t}function lt(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=t.length;e--;)if("."===t[e])return t.slice(e+1);return t}function ut(t,e){return!("string"!=typeof t||!t.trim())&&!!(t.includes(e.heads)||t.includes(e.tails)||et(e.headsNoWrap)&&e.headsNoWrap.length>0&&t.includes(e.headsNoWrap)||et(e.tailsNoWrap)&&e.tailsNoWrap.length>0&&t.includes(e.tailsNoWrap))}function ft(t,e,r){var n,a;return"string"==typeof t&&t.length>0&&O(t,0,e,{trimBeforeMatching:!0,cb:function(t,e,r){return n=r,!0}})&&A(t,t.length-1,r,{trimBeforeMatching:!0,cb:function(t,e,r){return a=r+1,!0}})?t.slice(n,a):t}function ht(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>5?arguments[5]:void 0;if(e.wrapHeadsWith||(e.wrapHeadsWith=""),e.wrapTailsWith||(e.wrapTailsWith=""),et(t)&&!r&&e.wrapGlobalFlipSwitch&&!e.dontWrapVars.some((function(t){return y.isMatch(n,t)}))&&(!e.preventDoubleWrapping||e.preventDoubleWrapping&&et(t)&&!t.includes(e.wrapHeadsWith)&&!t.includes(e.wrapTailsWith)))return e.wrapHeadsWith+t+e.wrapTailsWith;if(r){if(!et(t))return t;var a=Z(t,{heads:e.wrapHeadsWith,tails:e.wrapTailsWith});return et(a)?ft(a,e.wrapHeadsWith,e.wrapTailsWith):a}return t}function gt(t,e,r,n){var a;if(-1!==r.indexOf(".")){var i=r,o=!0;if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!i.endsWith(n.dataContainerIdentifierTails)){var s=m.get(t,i+n.dataContainerIdentifierTails);at(s)&&m.get(s,e)&&(a=m.get(s,e),o=!1)}for(;o&&-1!==i.indexOf(".");){if(lt(i=ct(i))===e)throw new Error('json-variables/findValues(): [THROW_ID_20] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we encountered a closed loop. The parent key "').concat(lt(i),'" is called the same as the variable "').concat(e,"\" we're looking for."));if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!i.endsWith(n.dataContainerIdentifierTails)){var c=m.get(t,i+n.dataContainerIdentifierTails);at(c)&&m.get(c,e)&&(a=m.get(c,e),o=!1)}if(void 0===a){var l=m.get(t,i);at(l)&&m.get(l,e)&&(a=m.get(l,e),o=!1)}}}if(void 0===a){var u=m.get(t,e);void 0!==u&&(a=u)}if(void 0===a)if(-1===e.indexOf(".")){var f=S(t,e);if(f.length>0)for(var h=0,g=f.length;h<g;h++){if(et(f[h].val)||rt(f[h].val)||nt(f[h].val)){a=f[h].val;break}if("number"==typeof f[h].val){a=String(f[h].val);break}if(Array.isArray(f[h].val)){a=f[h].val.join("");break}throw new Error('json-variables/findValues(): [THROW_ID_21] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we actually found the key named ').concat(e,", but it was not equal to a string but to:\n").concat(JSON.stringify(f[h],null,4),"\nWe can't resolve a string with that! It should be a string."))}}else{var p=S(t,function(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=0,r=t.length;e<r;e++)if("."===t[e])return t.slice(0,e);return t}(e));if(p.length>0)for(var d=0,y=p.length;d<y;d++){var v=m.get(p[d].val,st(e));v&&et(v)&&(a=v)}}return a}function pt(t,e,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(a.includes(r)){var i="";if(a.length>1){var o=" →\n";i=a.reduce((function(t,e,n){return t+(0===n?"":o)+(e===r?"💥 ":"  ")+e})," Here's the path we travelled up until we hit the recursion:\n\n"),i+="".concat(o,"💥 ").concat(r)}throw new Error('json-variables/resolveString(): [THROW_ID_19] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we encountered a closed loop, the key is referencing itself."').concat(i))}var s={},c=Array.from(a);c.push(r);var l,u=new k;function f(a,i,o){for(var l=0,f=a.length;l<f;l++){var h=a[l],g=e.slice(h.headsEndAt,h.tailsStartAt);if(0===g.length)u.push(h.headsStartAt,h.tailsEndAt);else if(tt.call(s,g)&&et(s[g]))u.push(h.headsStartAt,h.tailsEndAt,s[g]);else{var p=gt(t,g.trim(),r,n);if(void 0===p)if(!0===n.allowUnresolved)p="";else{if("string"!=typeof n.allowUnresolved)throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_18] We couldn't find the value to resolve the variable ".concat(e.slice(h.headsEndAt,h.tailsStartAt),". We're at path: \"").concat(r,'".'));p=n.allowUnresolved}if(!o&&n.throwWhenNonStringInsertedInString&&!et(p))throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_23] While resolving the variable ".concat(e.slice(h.headsEndAt,h.tailsStartAt)," at path ").concat(r,", it resolved into a non-string value, ").concat(JSON.stringify(p,null,4),'. This is happening because options setting "throwWhenNonStringInsertedInString" is active (set to "true").'));if(rt(p)){if(n.resolveToBoolIfAnyValuesContainBool)return u=void 0,!n.resolveToFalseIfAnyValuesContainBool&&p;p=""}else{if(nt(p)&&o)return u=void 0,p;p=Array.isArray(p)?String(p.join("")):nt(p)?"":String(p)}var d=r.includes(".")?"".concat(ct(r),".").concat(g):g;if(ut(p,n)){var y=ht(pt(t,p,d,n,c),n,i,c,d,g.trim());et(y)&&u.push(h.headsStartAt,h.tailsEndAt,y)}else{s[g]=p;var m=ht(p,n,i,c,d,g.trim());et(m)&&u.push(h.headsStartAt,h.tailsEndAt,m)}}}}try{l=j(e,n.heads,n.tails,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(t){throw new Error('json-variables/resolveString(): [THROW_ID_17] While trying to resolve string: "'.concat(e,'" at path ').concat(r,", something wrong with heads and tails was detected! Here's the internal error message:\n").concat(t))}var h=!1;1===l.length&&""===J(e,[l[0].headsStartAt,l[0].tailsEndAt]).trim()&&(h=!0);var g=f(l,!1,h);if(rt(g))return g;if(nt(g))return g;try{l=j(e,n.headsNoWrap,n.tailsNoWrap,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(t){throw new Error('json-variables/resolveString(): [THROW_ID_22] While trying to resolve string: "'.concat(e,'" at path ').concat(r,", something wrong with no-wrap heads and no-wrap tails was detected! Here's the internal error message:\n").concat(t))}1===l.length&&""===J(e,[l[0].headsStartAt,l[0].tailsEndAt]).trim()&&(h=!0);var p=f(l,!0,h);return rt(p)||nt(p)?p:u&&u.current()?J(e,u.current()):e}return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!arguments.length)throw new Error("json-variables/jsonVariables(): [THROW_ID_01] Alas! Inputs are missing!");if(!at(e))throw new TypeError("json-variables/jsonVariables(): [THROW_ID_02] Alas! The input must be a plain object! Currently it's: ".concat(Array.isArray(e)?"array":t(e)));if(!at(r))throw new TypeError("json-variables/jsonVariables(): [THROW_ID_03] Alas! An Optional Options Object must be a plain object! Currently it's: ".concat(Array.isArray(r)?"array":t(r)));var n,i,o,s={heads:"%%_",tails:"_%%",headsNoWrap:"%%-",tailsNoWrap:"-%%",lookForDataContainers:!0,dataContainerIdentifierTails:"_data",wrapHeadsWith:"",wrapTailsWith:"",dontWrapVars:[],preventDoubleWrapping:!0,wrapGlobalFlipSwitch:!0,noSingleMarkers:!1,resolveToBoolIfAnyValuesContainBool:!0,resolveToFalseIfAnyValuesContainBool:!0,throwWhenNonStringInsertedInString:!1,allowUnresolved:!1},c=a(a({},s),r);if(c.dontWrapVars?Array.isArray(c.dontWrapVars)||(c.dontWrapVars=v(c.dontWrapVars)):c.dontWrapVars=[],c.dontWrapVars.length>0&&!c.dontWrapVars.every((function(t,e){return!!et(t)||(n=t,i=e,!1)})))throw new Error('json-variables/jsonVariables(): [THROW_ID_05] Alas! All variable names set in opts.dontWrapVars should be of a string type. Computer detected a value "'.concat(n,'" at index ').concat(i,", which is not string but ").concat(Array.isArray(n)?"array":t(n),"!"));if(""===c.heads)throw new Error("json-variables/jsonVariables(): [THROW_ID_06] Alas! opts.heads are empty!");if(""===c.tails)throw new Error("json-variables/jsonVariables(): [THROW_ID_07] Alas! opts.tails are empty!");if(c.lookForDataContainers&&""===c.dataContainerIdentifierTails)throw new Error("json-variables/jsonVariables(): [THROW_ID_08] Alas! opts.dataContainerIdentifierTails is empty!");if(c.heads===c.tails)throw new Error("json-variables/jsonVariables(): [THROW_ID_09] Alas! opts.heads and opts.tails can't be equal!");if(c.heads===c.headsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_10] Alas! opts.heads and opts.headsNoWrap can't be equal!");if(c.tails===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_11] Alas! opts.tails and opts.tailsNoWrap can't be equal!");if(""===c.headsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_12] Alas! opts.headsNoWrap is an empty string!");if(""===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_13] Alas! opts.tailsNoWrap is an empty string!");if(c.headsNoWrap===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_14] Alas! opts.headsNoWrap and opts.tailsNoWrap can't be equal!");return g(e,(function(t,r,n){if(it(r)&&ut(t,c))throw new Error("json-variables/jsonVariables(): [THROW_ID_15] Alas! Object keys can't contain variables!\nPlease check the following key: ".concat(t));if(""===(o=void 0!==r?r:t))return o;if(0!==c.heads.length&&ot(o)===ot(c.heads)||0!==c.tails.length&&ot(o)===ot(c.tails)||0!==c.headsNoWrap.length&&ot(o)===ot(c.headsNoWrap)||0!==c.tailsNoWrap.length&&ot(o)===ot(c.tailsNoWrap)){if(!c.noSingleMarkers)return o;throw new Error("json-variables/jsonVariables(): [THROW_ID_16] Alas! While processing the input, we stumbled upon ".concat(ot(o)," which is equal to ").concat(ot(o)===ot(c.heads)?"heads":"").concat(ot(o)===ot(c.tails)?"tails":"").concat(et(c.headsNoWrap)&&ot(o)===ot(c.headsNoWrap)?"headsNoWrap":"").concat(et(c.tailsNoWrap)&&ot(o)===ot(c.tailsNoWrap)?"tailsNoWrap":"",'. If you wouldn\'t have set opts.noSingleMarkers to "true" this error would not happen and computer would have left the current element (').concat(ot(o),") alone"))}return et(o)&&ut(o,c)?pt(e,o,n.path,c):o}))}}));
