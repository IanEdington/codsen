/**
 * json-variables
 * Resolves custom-marked, cross-referenced paths in parsed JSON
 * Version: 10.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/json-variables/
 */

!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r="undefined"!=typeof globalThis?globalThis:r||self).jsonVariables={})}(this,(function(r){"use strict";function e(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function t(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function n(r){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){e(r,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))}))}return r}function i(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function a(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=function(r,e){if(r){if("string"==typeof r)return i(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=r[Symbol.iterator]()).next.bind(t)}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(r){var e={exports:{}};return r(e,e.exports),e.exports}var u=s((function(r,e){var t="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",a="[object Boolean]",s="[object Date]",u="[object Function]",l="[object GeneratorFunction]",f="[object Map]",h="[object Number]",c="[object Object]",p="[object Promise]",g="[object RegExp]",d="[object Set]",y="[object String]",v="[object Symbol]",m="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",T="[object Float64Array]",O="[object Int8Array]",A="[object Int16Array]",W="[object Int32Array]",I="[object Uint8Array]",j="[object Uint8ClampedArray]",E="[object Uint16Array]",S="[object Uint32Array]",N=/\w*$/,D=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,H={};H[i]=H["[object Array]"]=H[w]=H[b]=H[a]=H[s]=H[_]=H[T]=H[O]=H[A]=H[W]=H[f]=H[h]=H[c]=H[g]=H[d]=H[y]=H[v]=H[I]=H[j]=H[E]=H[S]=!0,H["[object Error]"]=H[u]=H[m]=!1;var M="object"==typeof self&&self&&self.Object===Object&&self,x="object"==typeof o&&o&&o.Object===Object&&o||M||Function("return this")(),C=e&&!e.nodeType&&e,B=C&&r&&!r.nodeType&&r,k=B&&B.exports===C;function P(r,e){return r.set(e[0],e[1]),r}function F(r,e){return r.add(e),r}function J(r,e,t,n){var i=-1,a=r?r.length:0;for(n&&a&&(t=r[++i]);++i<a;)t=e(t,r[i],i,r);return t}function V(r){var e=!1;if(null!=r&&"function"!=typeof r.toString)try{e=!!(r+"")}catch(r){}return e}function q(r){var e=-1,t=Array(r.size);return r.forEach((function(r,n){t[++e]=[n,r]})),t}function L(r,e){return function(t){return r(e(t))}}function $(r){var e=-1,t=Array(r.size);return r.forEach((function(r){t[++e]=r})),t}var U,z=Array.prototype,G=Function.prototype,K=Object.prototype,Q=x["__core-js_shared__"],X=(U=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",Y=G.toString,Z=K.hasOwnProperty,rr=K.toString,er=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=k?x.Buffer:void 0,nr=x.Symbol,ir=x.Uint8Array,ar=L(Object.getPrototypeOf,Object),or=Object.create,sr=K.propertyIsEnumerable,ur=z.splice,lr=Object.getOwnPropertySymbols,fr=tr?tr.isBuffer:void 0,hr=L(Object.keys,Object),cr=Br(x,"DataView"),pr=Br(x,"Map"),gr=Br(x,"Promise"),dr=Br(x,"Set"),yr=Br(x,"WeakMap"),vr=Br(Object,"create"),mr=Vr(cr),wr=Vr(pr),br=Vr(gr),_r=Vr(dr),Tr=Vr(yr),Or=nr?nr.prototype:void 0,Ar=Or?Or.valueOf:void 0;function Wr(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Ir(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function jr(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Er(r){this.__data__=new Ir(r)}function Sr(r,e){var t=Lr(r)||function(r){return function(r){return function(r){return!!r&&"object"==typeof r}(r)&&$r(r)}(r)&&Z.call(r,"callee")&&(!sr.call(r,"callee")||rr.call(r)==i)}(r)?function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}(r.length,String):[],n=t.length,a=!!n;for(var o in r)!e&&!Z.call(r,o)||a&&("length"==o||Fr(o,n))||t.push(o);return t}function Nr(r,e,t){var n=r[e];Z.call(r,e)&&qr(n,t)&&(void 0!==t||e in r)||(r[e]=t)}function Dr(r,e){for(var t=r.length;t--;)if(qr(r[t][0],e))return t;return-1}function Rr(r,e,t,n,o,p,m){var D;if(n&&(D=p?n(r,o,p,m):n(r)),void 0!==D)return D;if(!Gr(r))return r;var R=Lr(r);if(R){if(D=function(r){var e=r.length,t=r.constructor(e);e&&"string"==typeof r[0]&&Z.call(r,"index")&&(t.index=r.index,t.input=r.input);return t}(r),!e)return function(r,e){var t=-1,n=r.length;e||(e=Array(n));for(;++t<n;)e[t]=r[t];return e}(r,D)}else{var M=Pr(r),x=M==u||M==l;if(Ur(r))return function(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}(r,e);if(M==c||M==i||x&&!p){if(V(r))return p?r:{};if(D=function(r){return"function"!=typeof r.constructor||Jr(r)?{}:(e=ar(r),Gr(e)?or(e):{});var e}(x?{}:r),!e)return function(r,e){return xr(r,kr(r),e)}(r,function(r,e){return r&&xr(e,Kr(e),r)}(D,r))}else{if(!H[M])return p?r:{};D=function(r,e,t,n){var i=r.constructor;switch(e){case w:return Mr(r);case a:case s:return new i(+r);case b:return function(r,e){var t=e?Mr(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}(r,n);case _:case T:case O:case A:case W:case I:case j:case E:case S:return function(r,e){var t=e?Mr(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}(r,n);case f:return function(r,e,t){return J(e?t(q(r),!0):q(r),P,new r.constructor)}(r,n,t);case h:case y:return new i(r);case g:return function(r){var e=new r.constructor(r.source,N.exec(r));return e.lastIndex=r.lastIndex,e}(r);case d:return function(r,e,t){return J(e?t($(r),!0):$(r),F,new r.constructor)}(r,n,t);case v:return o=r,Ar?Object(Ar.call(o)):{}}var o}(r,M,Rr,e)}}m||(m=new Er);var C=m.get(r);if(C)return C;if(m.set(r,D),!R)var B=t?function(r){return function(r,e,t){var n=e(r);return Lr(r)?n:function(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}(n,t(r))}(r,Kr,kr)}(r):Kr(r);return function(r,e){for(var t=-1,n=r?r.length:0;++t<n&&!1!==e(r[t],t,r););}(B||r,(function(i,a){B&&(i=r[a=i]),Nr(D,a,Rr(i,e,t,n,a,r,m))})),D}function Hr(r){return!(!Gr(r)||(e=r,X&&X in e))&&(zr(r)||V(r)?er:D).test(Vr(r));var e}function Mr(r){var e=new r.constructor(r.byteLength);return new ir(e).set(new ir(r)),e}function xr(r,e,t,n){t||(t={});for(var i=-1,a=e.length;++i<a;){var o=e[i],s=n?n(t[o],r[o],o,t,r):void 0;Nr(t,o,void 0===s?r[o]:s)}return t}function Cr(r,e){var t,n,i=r.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?i["string"==typeof e?"string":"hash"]:i.map}function Br(r,e){var t=function(r,e){return null==r?void 0:r[e]}(r,e);return Hr(t)?t:void 0}Wr.prototype.clear=function(){this.__data__=vr?vr(null):{}},Wr.prototype.delete=function(r){return this.has(r)&&delete this.__data__[r]},Wr.prototype.get=function(r){var e=this.__data__;if(vr){var n=e[r];return n===t?void 0:n}return Z.call(e,r)?e[r]:void 0},Wr.prototype.has=function(r){var e=this.__data__;return vr?void 0!==e[r]:Z.call(e,r)},Wr.prototype.set=function(r,e){return this.__data__[r]=vr&&void 0===e?t:e,this},Ir.prototype.clear=function(){this.__data__=[]},Ir.prototype.delete=function(r){var e=this.__data__,t=Dr(e,r);return!(t<0)&&(t==e.length-1?e.pop():ur.call(e,t,1),!0)},Ir.prototype.get=function(r){var e=this.__data__,t=Dr(e,r);return t<0?void 0:e[t][1]},Ir.prototype.has=function(r){return Dr(this.__data__,r)>-1},Ir.prototype.set=function(r,e){var t=this.__data__,n=Dr(t,r);return n<0?t.push([r,e]):t[n][1]=e,this},jr.prototype.clear=function(){this.__data__={hash:new Wr,map:new(pr||Ir),string:new Wr}},jr.prototype.delete=function(r){return Cr(this,r).delete(r)},jr.prototype.get=function(r){return Cr(this,r).get(r)},jr.prototype.has=function(r){return Cr(this,r).has(r)},jr.prototype.set=function(r,e){return Cr(this,r).set(r,e),this},Er.prototype.clear=function(){this.__data__=new Ir},Er.prototype.delete=function(r){return this.__data__.delete(r)},Er.prototype.get=function(r){return this.__data__.get(r)},Er.prototype.has=function(r){return this.__data__.has(r)},Er.prototype.set=function(r,e){var t=this.__data__;if(t instanceof Ir){var n=t.__data__;if(!pr||n.length<199)return n.push([r,e]),this;t=this.__data__=new jr(n)}return t.set(r,e),this};var kr=lr?L(lr,Object):function(){return[]},Pr=function(r){return rr.call(r)};function Fr(r,e){return!!(e=null==e?n:e)&&("number"==typeof r||R.test(r))&&r>-1&&r%1==0&&r<e}function Jr(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||K)}function Vr(r){if(null!=r){try{return Y.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function qr(r,e){return r===e||r!=r&&e!=e}(cr&&Pr(new cr(new ArrayBuffer(1)))!=b||pr&&Pr(new pr)!=f||gr&&Pr(gr.resolve())!=p||dr&&Pr(new dr)!=d||yr&&Pr(new yr)!=m)&&(Pr=function(r){var e=rr.call(r),t=e==c?r.constructor:void 0,n=t?Vr(t):void 0;if(n)switch(n){case mr:return b;case wr:return f;case br:return p;case _r:return d;case Tr:return m}return e});var Lr=Array.isArray;function $r(r){return null!=r&&function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=n}(r.length)&&!zr(r)}var Ur=fr||function(){return!1};function zr(r){var e=Gr(r)?rr.call(r):"";return e==u||e==l}function Gr(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function Kr(r){return $r(r)?Sr(r):function(r){if(!Jr(r))return hr(r);var e=[];for(var t in Object(r))Z.call(r,t)&&"constructor"!=t&&e.push(t);return e}(r)}r.exports=function(r){return Rr(r,!0,!0)}}));var l,f,h=Object.prototype,c=Function.prototype.toString,p=h.hasOwnProperty,g=c.call(Object),d=h.toString,y=(l=Object.getPrototypeOf,f=Object,function(r){return l(f(r))});var v=function(r){if(!function(r){return!!r&&"object"==typeof r}(r)||"[object Object]"!=d.call(r)||function(r){var e=!1;if(null!=r&&"function"!=typeof r.toString)try{e=!!(r+"")}catch(r){}return e}(r))return!1;var e=y(r);if(null===e)return!0;var t=p.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&c.call(t)==g};function m(r){if(r.includes(".")){var e=r.lastIndexOf(".");if(!r.slice(0,e).includes("."))return r.slice(0,e);for(var t=e-1;t--;)if("."===r[t])return r.slice(t+1,e)}return null}function w(r,e){return function r(e,t,i,a){var o,s=u(e),l=n({depth:-1,path:""},i);if(l.depth+=1,Array.isArray(s))for(var f=0,h=s.length;f<h&&!a.now;f++){var c=l.path?l.path+"."+f:""+f;void 0!==s[f]?(l.parent=u(s),l.parentType="array",l.parentKey=m(c),o=r(t(s[f],void 0,n(n({},l),{},{path:c}),a),t,n(n({},l),{},{path:c}),a),Number.isNaN(o)&&f<s.length?(s.splice(f,1),f-=1):s[f]=o):s.splice(f,1)}else if(v(s))for(var p in s){if(a.now&&null!=p)break;var g=l.path?l.path+"."+p:p;0===l.depth&&null!=p&&(l.topmostKey=p),l.parent=u(s),l.parentType="object",l.parentKey=m(g),o=r(t(p,s[p],n(n({},l),{},{path:g}),a),t,n(n({},l),{},{path:g}),a),Number.isNaN(o)?delete s[p]:s[p]=o}return s}(r,e,{},{now:!1})}var b=new Map;function _(r,e){e=n({caseSensitive:!1},e);var t=r+JSON.stringify(e);if(b.has(t))return b.get(t);var i="!"===r[0];i&&(r=r.slice(1)),r=function(r){if("string"!=typeof r)throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(r).replace(/\\\*/g,"[\\s\\S]*");var a=new RegExp("^"+r+"$",e.caseSensitive?"":"i");return a.negated=i,b.set(t,a),a}var T=function(r,e,t){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Expected two arrays, got "+typeof r+" "+typeof e);if(0===e.length)return r;var n="!"===e[0][0];e=e.map((function(r){return _(r,t)}));for(var i,o=[],s=a(r);!(i=s()).done;){for(var u,l=i.value,f=n,h=a(e);!(u=h()).done;){var c=u.value;c.test(l)&&(f=!c.negated)}f&&o.push(l)}return o};T.isMatch=function(r,e,t){var n=Array.isArray(r)?r:[r],i=Array.isArray(e)?e:[e];return n.some((function(r){return i.every((function(e){var n=_(e,t),i=n.test(r);return n.negated?!i:i}))}))};var O=s((function(r){r.exports=function(){var r=Object.prototype.toString;function e(r,e){return null!=r&&Object.prototype.hasOwnProperty.call(r,e)}function t(r){if(!r)return!0;if(a(r)&&0===r.length)return!0;if("string"!=typeof r){for(var t in r)if(e(r,t))return!1;return!0}return!1}function n(e){return r.call(e)}function i(r){return"object"==typeof r&&"[object Object]"===n(r)}var a=Array.isArray||function(e){return"[object Array]"===r.call(e)};function o(r){return"boolean"==typeof r||"[object Boolean]"===n(r)}function s(r){var e=parseInt(r);return e.toString()===r?e:r}function u(r){var n,u=function r(e){return Object.keys(r).reduce((function(t,n){return"create"===n||"function"==typeof r[n]&&(t[n]=r[n].bind(r,e)),t}),{})};function l(r,e){if(n(r,e))return r[e]}function f(e,t,n,i){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return f(e,t.split(".").map(s),n,i);var a=t[0],o=l(e,a);if(r.includeInheritedProps&&("__proto__"===a||"constructor"===a&&"function"==typeof o))throw new Error("For security reasons, object's magic properties cannot be set");return 1===t.length?(void 0!==o&&i||(e[a]=n),o):(void 0===o&&(e[a]="number"==typeof t[1]?[]:{}),f(e[a],t.slice(1),n,i))}return n=(r=r||{}).includeInheritedProps?function(){return!0}:function(r,t){return"number"==typeof t&&Array.isArray(r)||e(r,t)},u.has=function(t,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!t;for(var i=0;i<n.length;i++){var o=s(n[i]);if(!("number"==typeof o&&a(t)&&o<t.length||(r.includeInheritedProps?o in Object(t):e(t,o))))return!1;t=t[o]}return!0},u.ensureExists=function(r,e,t){return f(r,e,t,!0)},u.set=function(r,e,t,n){return f(r,e,t,n)},u.insert=function(r,e,t,n){var i=u.get(r,e);n=~~n,a(i)||u.set(r,e,i=[]),i.splice(n,0,t)},u.empty=function(r,e){var s,l;if(!t(e)&&null!=r&&(s=u.get(r,e))){if("string"==typeof s)return u.set(r,e,"");if(o(s))return u.set(r,e,!1);if("number"==typeof s)return u.set(r,e,0);if(a(s))s.length=0;else{if(!i(s))return u.set(r,e,null);for(l in s)n(s,l)&&delete s[l]}}},u.push=function(r,e){var t=u.get(r,e);a(t)||u.set(r,e,t=[]),t.push.apply(t,Array.prototype.slice.call(arguments,2))},u.coalesce=function(r,e,t){for(var n,i=0,a=e.length;i<a;i++)if(void 0!==(n=u.get(r,e[i])))return n;return t},u.get=function(r,e,t){if("number"==typeof e&&(e=[e]),!e||0===e.length)return r;if(null==r)return t;if("string"==typeof e)return u.get(r,e.split("."),t);var n=s(e[0]),i=l(r,n);return void 0===i?t:1===e.length?i:u.get(r[n],e.slice(1),t)},u.del=function(r,e){if("number"==typeof e&&(e=[e]),null==r)return r;if(t(e))return r;if("string"==typeof e)return u.del(r,e.split("."));var i=s(e[0]);return n(r,i)?1!==e.length?u.del(r[i],e.slice(1)):(a(r)?r.splice(i,1):delete r[i],r):r},u}var l=u();return l.create=u,l.withInheritedProps=u({includeInheritedProps:!0}),l}()}));function A(r){return"string"==typeof r?r.length?[r]:[]:r}function W(r){return r&&"object"==typeof r&&!Array.isArray(r)}function I(r){return"string"==typeof r}var j={cb:void 0,i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1},E=function(r){return r+1};function S(r,e,t,i,a,o){void 0===a&&(a=!1),void 0===o&&(o=E);var s="function"==typeof t?t():t;if(+e<0&&a&&"EOL"===s)return s;var u=n(n({},j),i);if(e>=r.length&&!a)return!1;for(var l=a?1:t.length,f=!1,h=!1,c=u.maxMismatches,p=e,g=!1,d=!1,y=!1;r[p];){var v=o(p);if(u.trimBeforeMatching&&""===r[p].trim()){if(!r[v]&&a&&"EOL"===t)return!0;p=o(p)}else if(u&&!u.i&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.includes(r[p])||u&&u.i&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.map((function(r){return r.toLowerCase()})).includes(r[p].toLowerCase())){if(a&&"EOL"===t&&!r[v])return!0;p=o(p)}else{var m=v>p?t[t.length-l]:t[l-1];if(!u.i&&r[p]===m||u.i&&r[p].toLowerCase()===m.toLowerCase()){if(g||(g=!0),h||(h=!0),l===t.length?d=!0:1===l&&(y=!0),(l-=1)<1)return p}else{if(!(u.maxMismatches&&c&&p))return!(0!==p||1!==l||u.lastMustMatch||!h)&&0;c-=1;for(var w=0;w<=c;w++){var b=v>p?t[t.length-l+1+w]:t[l-2-w],_=r[o(p)];if(b&&(!u.i&&r[p]===b||u.i&&r[p].toLowerCase()===b.toLowerCase())&&(!u.firstMustMatch||l!==t.length)){l-=2,g=!0;break}if(_&&b&&(!u.i&&_===b||u.i&&_.toLowerCase()===b.toLowerCase())&&(!u.firstMustMatch||l!==t.length)){l-=1,g=!0;break}if(void 0===b&&c>=0&&g&&(!u.firstMustMatch||d)&&(!u.lastMustMatch||y))return p}g||(f=p)}if(!1!==f&&f!==p&&(f=!1),l<1)return p;p=o(p)}}return l>0?!(!a||"EOL"!==s)||!!(u&&u.maxMismatches>=l&&h)&&(f||0):void 0}function N(r,e,t,i,a){if(W(a)&&Object.prototype.hasOwnProperty.call(a,"trimBeforeMatching")&&"boolean"!=typeof a.trimBeforeMatching)throw new Error("string-match-left-right/"+r+"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!"+(Array.isArray(a.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var o,s,u=n(n({},j),a);if("string"==typeof u.trimCharsBeforeMatching&&(u.trimCharsBeforeMatching=A(u.trimCharsBeforeMatching)),u.trimCharsBeforeMatching=u.trimCharsBeforeMatching.map((function(r){return I(r)?r:String(r)})),!I(e))return!1;if(!e.length)return!1;if(!Number.isInteger(t)||t<0)throw new Error("string-match-left-right/"+r+"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: "+typeof t+", equal to:\n"+JSON.stringify(t,null,4));if(I(i))o=[i];else if(Array.isArray(i))o=i;else if(i){if("function"!=typeof i)throw new Error("string-match-left-right/"+r+"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's "+typeof i+", equal to:\n"+JSON.stringify(i,null,4));(o=[]).push(i)}else o=i;if(a&&!W(a))throw new Error("string-match-left-right/"+r+"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \""+typeof a+'", and equal to:\n'+JSON.stringify(a,null,4));var l=0,f="";if(u&&u.trimCharsBeforeMatching&&u.trimCharsBeforeMatching.some((function(r,e){return r.length>1&&(l=e,f=r,!0)})))throw new Error("string-match-left-right/"+r+"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index "+l+" is longer than 1 character, "+f.length+" (equals to "+f+"). Please split it into separate characters and put into array as separate elements.");if(!o||!Array.isArray(o)||Array.isArray(o)&&!o.length||Array.isArray(o)&&1===o.length&&I(o[0])&&!o[0].trim()){if("function"==typeof u.cb){var h,c=t;if("matchLeftIncl"!==r&&"matchRight"!==r||(c+=1),"L"===r[5])for(var p=c;p--;){var g=e[p];if((!u.trimBeforeMatching||u.trimBeforeMatching&&void 0!==g&&g.trim())&&(!u.trimCharsBeforeMatching||!u.trimCharsBeforeMatching.length||void 0!==g&&!u.trimCharsBeforeMatching.includes(g))){h=p;break}}else if(r.startsWith("matchRight"))for(var d=c;d<e.length;d++){var y=e[d];if((!u.trimBeforeMatching||u.trimBeforeMatching&&y.trim())&&(!u.trimCharsBeforeMatching||!u.trimCharsBeforeMatching.length||!u.trimCharsBeforeMatching.includes(y))){h=d;break}}if(void 0===h)return!1;var v=e[h],m=h+1,w="";return m&&m>0&&(w=e.slice(0,m)),"L"===r[5]?u.cb(v,w,h):(h&&h>0&&(w=e.slice(h)),u.cb(v,w,h))}var b="";throw a||(b=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/"+r+'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!'+b)}for(var _=0,T=o.length;_<T;_++){var O=o[_],E=void 0,N=void 0,D="",R=t;"matchRight"===r?R+=1:"matchLeft"===r&&(R-=1);var H=S(e,R,O,u,s="function"==typeof o[_],(function(e){return"L"===r[5]?e-1:e+1}));if(H&&s&&"function"==typeof O&&"EOL"===O())return!(!O()||u.cb&&!u.cb(E,D,N))&&O();if(Number.isInteger(H)&&(N=r.startsWith("matchLeft")?H-1:H+1,D="L"===r[5]?e.slice(0,H):e.slice(N)),N<0&&(N=void 0),e[N]&&(E=e[N]),Number.isInteger(H)&&(!u.cb||u.cb(E,D,N)))return O}return!1}function D(r,e,t,n){return N("matchLeftIncl",r,e,t,n)}function R(r,e,t,n){return N("matchRightIncl",r,e,t,n)}function H(r){return"string"==typeof r}var M={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1};function x(r,e,t,i){if(i&&(!(a=i)||"object"!=typeof a||Array.isArray(a)))throw new TypeError("string-find-heads-tails: [THROW_ID_01] the fourth input argument, an Optional Options Object, must be a plain object! Currently it's equal to: "+i+" (type: "+typeof i+")");var a,o,s,u=n(n({},M),i);if("string"==typeof u.fromIndex&&/^\d*$/.test(u.fromIndex))u.fromIndex=Number(u.fromIndex);else if(!Number.isInteger(u.fromIndex)||u.fromIndex<0)throw new TypeError(u.source+" [THROW_ID_18] the fourth input argument must be a natural number or zero! Currently it's: "+u.fromIndex);if(!H(r)||0===r.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: "+typeof r+", equal to: "+r)}if("string"!=typeof e&&!Array.isArray(e)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: "+typeof e+", equal to:\n"+JSON.stringify(e,null,4))}if("string"==typeof e){if(0===e.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}e=A(e)}else if(Array.isArray(e)){if(0===e.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(e.every((function(r,e){return o=r,s=e,H(r)}))){if(!e.every((function(r,e){return s=e,H(r)&&r.length>0&&""!==r.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index "+s+" of heads array:\n"+JSON.stringify(e,null,4)+".");if(0===(e=e.filter((function(r){return H(r)&&r.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at "+s+"th index is "+typeof o+", equal to:\n"+JSON.stringify(o,null,4)+". Whole heads array looks like:\n"+JSON.stringify(e,null,4));if(0===(e=e.filter((function(r){return H(r)&&r.length>0}))).length)return[]}}if(!H(t)&&!Array.isArray(t)){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: "+typeof t+", equal to:\n"+JSON.stringify(t,null,4))}if(H(t)){if(0===t.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}t=A(t)}else if(Array.isArray(t)){if(0===t.length){if(u.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(t.every((function(r,e){return o=r,s=e,H(r)}))){if(!t.every((function(r,e){return s=e,H(r)&&r.length>0&&""!==r.trim()}))){if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index "+s+". Whole tails array is equal to:\n"+JSON.stringify(t,null,4));if(0===(t=t.filter((function(r){return H(r)&&r.length>0}))).length)return[]}}else{if(!u.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at "+s+"th index is "+typeof o+", equal to:\n"+JSON.stringify(o,null,4)+". Whole tails array is equal to:\n"+JSON.stringify(t,null,4));if(0===(t=t.filter((function(r){return H(r)&&r.length>0}))).length)return[]}}var l=u.source===M.source;if(u.throwWhenSomethingWrongIsDetected&&!u.allowWholeValueToBeOnlyHeadsOrTails){if(A(e).includes(r))throw new Error(u.source+(l?": [THROW_ID_16]":"")+" the whole input string can't be equal to "+(H(e)?"":"one of ")+"heads ("+r+")!");if(A(t).includes(r))throw new Error(u.source+(l?": [THROW_ID_17]":"")+" the whole input string can't be equal to "+(H(t)?"":"one of ")+"tails ("+r+")!")}for(var f,h=e.concat(t).map((function(r){return r.charAt(0)})).reduce((function(r,e){return e.charCodeAt(0)>r[1]?[r[0],e.charCodeAt(0)]:e.charCodeAt(0)<r[0]?[e.charCodeAt(0),r[1]]:r}),[e[0].charCodeAt(0),e[0].charCodeAt(0)]),c=[],p=!1,g={},d="",y=u.fromIndex,v=r.length;y<v;y++){var m=r[y].charCodeAt(0);if(m<=h[1]&&m>=h[0]){var w=R(r,y,e);if(w&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var b=e.length;b--;)if(e[b]===w){f=b;break}if("string"==typeof w){if(!p){(g={}).headsStartAt=y,g.headsEndAt=y+w.length,p=!0,y+=w.length-1,d&&(d="");continue}if(u.throwWhenSomethingWrongIsDetected)throw new TypeError(u.source+(l?": [THROW_ID_19]":"")+' When processing "'+r+'", we found heads ('+r.slice(y,y+w.length)+') starting at character with index number "'+y+'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n'+r.slice(Math.max(y-200,0),y)+"\n      [33m-------\x3e[39m [31m"+r.slice(y,y+w.length)+"[39m [33m<-------[39m\n"+r.slice(y+w.length,Math.min(v,y+200))+"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false.")}var _=R(r,y,t);if(p&&_&&u.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==f&&void 0!==t[f]&&t[f]!==_){for(var T=void 0,O=t.length;O--;)if(t[O]===_){T=O;break}throw new TypeError(u.source+(l?": [THROW_ID_20]":"")+' When processing "'+r+'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads ('+e[f]+") but the tails the followed it were not of the same index, "+f+" ("+t[f]+") but "+T+" ("+_+").")}if("string"==typeof _){if(p){g.tailsStartAt=y,g.tailsEndAt=y+_.length,c.push(g),g={},p=!1,y+=_.length-1;continue}u.throwWhenSomethingWrongIsDetected&&(d=u.source+(l?": [THROW_ID_21]":"")+' When processing "'+r+'", we found tails ('+r.slice(y,y+_.length)+') starting at character with index number "'+y+"\" but there were no heads preceding it. That's very naughty!")}}if(u.throwWhenSomethingWrongIsDetected&&y===v-1){if(0!==Object.keys(g).length)throw new TypeError(u.source+(l?": [THROW_ID_22]":"")+' When processing "'+r+"\", we reached the end of the string and yet didn't find any tails ("+JSON.stringify(t,null,4)+") to match the last detected heads ("+r.slice(g.headsStartAt,g.headsEndAt)+")!");if(d)throw new Error(d)}}return c}function C(r,e,t){var n;void 0!==t&&(n=Array.isArray(t)?u(t):[u(t)]);var i=[],a=w(r,(function(r,t,a){var o=void 0!==t?t:r;if(void 0!==t&&T.isMatch(r,e,{caseSensitive:!0}))if(void 0===n)i.push({val:t,path:a.path});else if(n.length)return n.shift();return o}));return void 0===n?i:a}function B(r,e){void 0===e&&(e=1);function t(r){return Array.from(r).reverse().join("")}function n(r,e,t){var n=t?"\n":"\r",i=t?"\r":"\n";if(!r)return r;for(var a=0,o="",s=0,u=r.length;s<u;s++)(r[s]===n||r[s]===i&&r[s-1]!==n)&&a++,"\r\n".includes(r[s])||" "===r[s]?" "===r[s]?o+=r[s]:r[s]===n?a<=e&&(o+=r[s],r[s+1]===i&&(o+=r[s+1],s++)):r[s]===i&&(!r[s-1]||r[s-1]!==n)&&a<=e&&(o+=r[s]):r[s+1]||a||(o+=" ");return o}if("string"==typeof r&&r.length){var i=1;"number"==typeof+e&&Number.isInteger(+e)&&+e>=0&&(i=+e);var a="",o="";if(r.trim()){if(!r[0].trim())for(var s=0,u=r.length;s<u;s++)if(r[s].trim()){a=r.slice(0,s);break}}else a=r;if(r.trim()&&(""===r.slice(-1).trim()||" "===r.slice(-1)))for(var l=r.length;l--;)if(r[l].trim()){o=r.slice(l+1);break}return""+n(a,i,!1)+r.trim()+t(n(t(o),i,!0))}return r}var k={strictlyTwoElementsInRangeArrays:!1,progressFn:null};function P(r,e){if(!Array.isArray(r)||!r.length)return r;var t,i,a=n(n({},k),e);if(a.strictlyTwoElementsInRangeArrays&&!r.filter((function(r){return r})).every((function(r,e){return 2===r.length||(t=e,i=r.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, "+t+"th range ("+JSON.stringify(r[t],null,4)+") has not two but "+i+" elements!");if(!r.filter((function(r){return r})).every((function(r,e){return!(!Number.isInteger(r[0])||r[0]<0||!Number.isInteger(r[1])||r[1]<0)||(t=e,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, "+t+"th range ("+JSON.stringify(r[t],null,4)+") does not consist of only natural numbers!");var o=Math.pow(r.filter((function(r){return r})).length,2),s=0;return Array.from(r).filter((function(r){return r})).sort((function(r,e){return a.progressFn&&a.progressFn(Math.floor(100*(s+=1)/o)),r[0]===e[0]?r[1]<e[1]?-1:r[1]>e[1]?1:0:r[0]<e[0]?-1:1}))}var F={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};function J(r,e){function t(r){return r&&"object"==typeof r&&!Array.isArray(r)}if(!Array.isArray(r)||!r.length)return null;var i;if(e){if(!t(e))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n"+JSON.stringify(e,null,4)+" (type "+typeof e+")");if((i=n(n({},F),e)).progressFn&&t(i.progressFn)&&!Object.keys(i.progressFn).length)i.progressFn=null;else if(i.progressFn&&"function"!=typeof i.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'+typeof i.progressFn+'", equal to '+JSON.stringify(i.progressFn,null,4));if(i.mergeType&&1!=+i.mergeType&&2!=+i.mergeType)throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'+typeof i.mergeType+'", equal to '+JSON.stringify(i.mergeType,null,4));if("boolean"!=typeof i.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'+typeof i.joinRangesThatTouchEdges+'", equal to '+JSON.stringify(i.joinRangesThatTouchEdges,null,4))}else i=n({},F);var a,o,s,u=r.filter((function(r){return r})).map((function(r){return[].concat(r)})).filter((function(r){return void 0!==r[2]||r[0]!==r[1]}));if(!(a=i.progressFn?P(u,{progressFn:function(r){(s=Math.floor(r/5))!==o&&(o=s,i.progressFn(s))}}):P(u)))return null;for(var l=a.length-1,f=l;f>0;f--)i.progressFn&&(s=Math.floor(78*(1-f/l))+21)!==o&&s>o&&(o=s,i.progressFn(s)),(a[f][0]<=a[f-1][0]||!i.joinRangesThatTouchEdges&&a[f][0]<a[f-1][1]||i.joinRangesThatTouchEdges&&a[f][0]<=a[f-1][1])&&(a[f-1][0]=Math.min(a[f][0],a[f-1][0]),a[f-1][1]=Math.max(a[f][1],a[f-1][1]),void 0!==a[f][2]&&(a[f-1][0]>=a[f][0]||a[f-1][1]<=a[f][1])&&null!==a[f-1][2]&&(null===a[f][2]&&null!==a[f-1][2]?a[f-1][2]=null:null!=a[f-1][2]?2==+i.mergeType&&a[f-1][0]===a[f][0]?a[f-1][2]=a[f][2]:a[f-1][2]+=a[f][2]:a[f-1][2]=a[f][2]),a.splice(f,1),f=a.length);return a.length?a:null}function V(r){return null!=r}function q(r){return Number.isInteger(r)&&r>=0}function L(r){return"string"==typeof r}var $={limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1},U=function(){function r(r){var e=n(n({},$),r);if(e.mergeType&&1!==e.mergeType&&2!==e.mergeType)if(L(e.mergeType)&&"1"===e.mergeType.trim())e.mergeType=1;else{if(!L(e.mergeType)||"2"!==e.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'+typeof e.mergeType+'", equal to '+JSON.stringify(e.mergeType,null,4));e.mergeType=2}this.opts=e,this.ranges=[]}var e=r.prototype;return e.add=function(r,e,t){var n=this;if(null!=r||null!=e){if(V(r)&&!V(e)){if(Array.isArray(r)){if(r.length){if(r.some((function(r){return Array.isArray(r)})))return void r.forEach((function(r){Array.isArray(r)&&n.add.apply(n,r)}));r.length&&q(+r[0])&&q(+r[1])&&this.add.apply(this,r)}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('+JSON.stringify(r,null,0)+') but second-one, "to" is not ('+JSON.stringify(e,null,0)+")")}if(!V(r)&&V(e))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('+JSON.stringify(e,null,0)+') but first-one, "from" is not ('+JSON.stringify(r,null,0)+")");var i=+r,a=+e;if(q(t)&&(t=String(t)),!q(i)||!q(a))throw q(i)&&i>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'+typeof a+'" equal to: '+JSON.stringify(a,null,4)):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'+typeof i+'" equal to: '+JSON.stringify(i,null,4));if(V(t)&&!L(t)&&!q(t))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but "+typeof t+", equal to:\n"+JSON.stringify(t,null,4));if(V(this.ranges)&&Array.isArray(this.last())&&i===this.last()[1]){if(this.last()[1]=a,this.last(),null!==this.last()[2]&&V(t)){var o=!(this.last()[2]&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?t:this.last()[2]+t;this.opts.limitToBeAddedWhitespace&&(o=B(o,this.opts.limitLinebreaksCount)),L(o)&&!o.length||(this.last()[2]=o)}}else{this.ranges||(this.ranges=[]);var s=void 0===t||L(t)&&!t.length?[i,a]:[i,a,t&&this.opts.limitToBeAddedWhitespace?B(t,this.opts.limitLinebreaksCount):t];this.ranges.push(s)}}},e.push=function(r,e,t){this.add(r,e,t)},e.current=function(){var r=this;return Array.isArray(this.ranges)&&this.ranges.length?(this.ranges=J(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map((function(e){return V(e[2])?[e[0],e[1],B(e[2],r.opts.limitLinebreaksCount)]:e})):this.ranges):null},e.wipe=function(){this.ranges=[]},e.replace=function(r){if(Array.isArray(r)&&r.length){if(!Array.isArray(r[0])||!q(r[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, "+JSON.stringify(r[0],null,4)+" should be an array and its first element should be an integer, a string index.");this.ranges=Array.from(r)}else this.ranges=[]},e.last=function(){return Array.isArray(this.ranges)&&this.ranges.length?this.ranges[this.ranges.length-1]:null},r}();function z(r,e,t){var n,i=0,a=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if("string"!=typeof r)throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: "+typeof r+", equal to: "+JSON.stringify(r,null,4));if(e&&!Array.isArray(e))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: "+typeof e+", equal to: "+JSON.stringify(e,null,4));if(t&&"function"!=typeof t)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: "+typeof t+", equal to: "+JSON.stringify(t,null,4));if(!e||!e.filter((function(r){return r})).length)return r;var o=(n=Array.isArray(e)&&Number.isInteger(e[0])&&Number.isInteger(e[1])?[Array.from(e)]:Array.from(e)).length,s=0;n.filter((function(r){return r})).forEach((function(r,e){if(t&&(i=Math.floor(s/o*10))!==a&&(a=i,t(i)),!Array.isArray(r))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has "+e+"th element not an array: "+JSON.stringify(r,null,4)+", which is "+typeof r);if(!Number.isInteger(r[0])){if(!Number.isInteger(+r[0])||+r[0]<0)throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has "+e+"th element, array "+JSON.stringify(r,null,0)+". Its first element is not an integer, string index, but "+typeof r[0]+", equal to: "+JSON.stringify(r[0],null,4)+".");n[e][0]=+n[e][0]}if(!Number.isInteger(r[1])){if(!Number.isInteger(+r[1])||+r[1]<0)throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has "+e+"th element, array "+JSON.stringify(r,null,0)+". Its second element is not an integer, string index, but "+typeof r[1]+", equal to: "+JSON.stringify(r[1],null,4)+".");n[e][1]=+n[e][1]}s+=1}));var u=J(n,{progressFn:function(r){t&&(i=10+Math.floor(r/10))!==a&&(a=i,t(i))}}),l=u.length;if(l>0){var f=r.slice(u[l-1][1]);r=u.reduce((function(e,n,o,s){return t&&(i=20+Math.floor(o/l*80))!==a&&(a=i,t(i)),e+r.slice(0===o?0:s[o-1][1],s[o][0])+(s[o][2]||"")}),""),r+=f}return r}var G={classicTrim:!1,cr:!1,lf:!1,tab:!1,space:!0,nbsp:!1};function K(r,e){if("string"!=typeof r)throw new Error("string-trim-spaces-only: [THROW_ID_01] input must be string! It was given as "+typeof r+", equal to:\n"+JSON.stringify(r,null,4));var t,i,a=n(n({},G),e);function o(r){return a.classicTrim&&!r.trim()||!a.classicTrim&&(a.space&&" "===r||a.cr&&"\r"===r||a.lf&&"\n"===r||a.tab&&"\t"===r||a.nbsp&&" "===r)}if(r.length){if(o(r[0]))for(var s=0,u=r.length;s<u;s++){if(!o(r[s])){t=s;break}if(s===r.length-1)return{res:"",ranges:[[0,r.length]]}}if(o(r[r.length-1]))for(var l=r.length;l--;)if(!o(r[l])){i=l+1;break}return t?i?{res:r.slice(t,i),ranges:[[0,t],[i,r.length]]}:{res:r.slice(t),ranges:[[0,t]]}:i?{res:r.slice(0,i),ranges:[[i,r.length]]}:{res:r,ranges:[]}}return{res:"",ranges:[]}}var Q=Object.prototype.hasOwnProperty,X={heads:"%%_",tails:"_%%",headsNoWrap:"%%-",tailsNoWrap:"-%%",lookForDataContainers:!0,dataContainerIdentifierTails:"_data",wrapHeadsWith:"",wrapTailsWith:"",dontWrapVars:[],preventDoubleWrapping:!0,wrapGlobalFlipSwitch:!0,noSingleMarkers:!1,resolveToBoolIfAnyValuesContainBool:!0,resolveToFalseIfAnyValuesContainBool:!0,throwWhenNonStringInsertedInString:!1,allowUnresolved:!1};function Y(r){return"string"==typeof r}function Z(r){return"boolean"==typeof r}function rr(r){return null===r}function er(r){return r&&"object"==typeof r&&!Array.isArray(r)}function tr(r){return null!=r}function nr(r){return Y(r)?r.trim():r}function ir(r){if("string"==typeof r&&r.length>0&&-1!==r.indexOf("."))for(var e=0,t=r.length;e<t;e++)if("."===r[e])return r.slice(e+1);return r}function ar(r){if("string"==typeof r&&r.length>0&&-1!==r.indexOf("."))for(var e=r.length;e--;)if("."===r[e])return r.slice(0,e);return r}function or(r){if("string"==typeof r&&r.length>0&&-1!==r.indexOf("."))for(var e=r.length;e--;)if("."===r[e])return r.slice(e+1);return r}function sr(r,e){return!("string"!=typeof r||!r.trim())&&!!(r.includes(e.heads)||r.includes(e.tails)||Y(e.headsNoWrap)&&e.headsNoWrap.length>0&&r.includes(e.headsNoWrap)||Y(e.tailsNoWrap)&&e.tailsNoWrap.length>0&&r.includes(e.tailsNoWrap))}function ur(r,e,t,i,a,o){if(void 0===t&&(t=!1),e.wrapHeadsWith||(e.wrapHeadsWith=""),e.wrapTailsWith||(e.wrapTailsWith=""),Y(r)&&!t&&e.wrapGlobalFlipSwitch&&!e.dontWrapVars.some((function(r){return T.isMatch(o,r)}))&&(!e.preventDoubleWrapping||e.preventDoubleWrapping&&Y(r)&&!r.includes(e.wrapHeadsWith)&&!r.includes(e.wrapTailsWith)))return e.wrapHeadsWith+r+e.wrapTailsWith;if(t){if(!Y(r))return r;var s=function(r,e){var t=Object.prototype.hasOwnProperty;if(void 0===r)throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_01] The input is missing!");if("string"!=typeof r)return r;if(e&&!v(e))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_03] The given options are not a plain object but "+typeof e+"!");var i=n({},e);if(i&&t.call(i,"heads")){if(!A(i.heads).every((function(r){return"string"==typeof r||Array.isArray(r)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_04] The opts.heads contains elements which are not string-type!");"string"==typeof i.heads&&(i.heads=A(i.heads))}if(i&&t.call(i,"tails")){if(!A(i.tails).every((function(r){return"string"==typeof r||Array.isArray(r)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_05] The opts.tails contains elements which are not string-type!");"string"==typeof i.tails&&(i.tails=A(i.tails))}var a=K(r).res;if(0===a.length)return r;r=a;var o=n(n({},{heads:["{{"],tails:["}}"]}),i);o.heads=o.heads.map((function(r){return r.trim()})),o.tails=o.tails.map((function(r){return r.trim()}));var s=!1,u=!1,l=new U({limitToBeAddedWhitespace:!0}),f=new U({limitToBeAddedWhitespace:!0}),h=!0,c=!0,p="";function g(r,e){var t;return R(r,0,e.heads,{trimBeforeMatching:!0,cb:function(r,e,n){return t=n,!0}})&&R(r,t,e.tails,{trimBeforeMatching:!0,cb:function(r,e,n){return t=n,!0}})?r.slice(t):r}for(;r!==g(r,o);)r=K(g(r,o)).res;function d(r,e){var t;return D(r,r.length-1,e.tails,{trimBeforeMatching:!0,cb:function(r,e,n){return t=n,!0}})&&t&&D(r,t,e.heads,{trimBeforeMatching:!0,cb:function(r,e,n){return t=n,!0}})?r.slice(0,t+1):r}for(;r!==d(r,o);)r=K(d(r,o)).res;if(!(o.heads.length&&R(r,0,o.heads,{trimBeforeMatching:!0})&&o.tails.length&&D(r,r.length-1,o.tails,{trimBeforeMatching:!0})))return K(r).res;for(var y=0,m=r.length;y<m;y++)if(""===r[y].trim());else{var w=void 0;if(R(r,y,o.heads,{trimBeforeMatching:!0,cb:function(r,e,t){return w=t,!0}})&&w){c=!0,h&&(h=!0);var b=void 0;R(r,w,o.tails,{trimBeforeMatching:!0,cb:function(r,e,t){return b=t,!0}})&&l.push(y,b),f.current()&&s&&"tails"!==p&&l.push(f.current()),s||f.current()&&(l.push(f.current()),f.wipe()),f.push(y,w),p="heads",y=w-1;continue}if(R(r,y,o.tails,{trimBeforeMatching:!0,cb:function(e,t,n){return w=Number.isInteger(n)?n:r.length,!0}})&&w){c=!0,h?("heads"===p&&f.wipe(),h=!1):f.push(y,w),p="tails",y=w-1;continue}h&&(h=!0),c&&!s?(s=!0,c=!1):c&&!u?(u=!0,h=!0,c=!1,"heads"===p&&f.wipe()):c&&u&&f.wipe()}return f.current()&&l.push(f.current()),l.current()?z(r,l.current()).trim():r.trim()}(r,{heads:e.wrapHeadsWith,tails:e.wrapTailsWith});return Y(s)?(l=e.wrapHeadsWith,f=e.wrapTailsWith,"string"==typeof(u=s)&&u.length>0&&R(u,0,l,{trimBeforeMatching:!0,cb:function(r,e,t){return h=t,!0}})&&D(u,u.length-1,f,{trimBeforeMatching:!0,cb:function(r,e,t){return c=t+1,!0}})?u.slice(h,c):u):s}var u,l,f,h,c;return r}function lr(r,e,t,n){var i;if(-1!==t.indexOf(".")){var a=t,o=!0;if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!a.endsWith(n.dataContainerIdentifierTails)){var s=O.get(r,a+n.dataContainerIdentifierTails);er(s)&&O.get(s,e)&&(i=O.get(s,e),o=!1)}for(;o&&-1!==a.indexOf(".");){if(or(a=ar(a))===e)throw new Error('json-variables/findValues(): [THROW_ID_20] While trying to resolve: "'+e+'" at path "'+t+'", we encountered a closed loop. The parent key "'+or(a)+'" is called the same as the variable "'+e+"\" we're looking for.");if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!a.endsWith(n.dataContainerIdentifierTails)){var u=O.get(r,a+n.dataContainerIdentifierTails);er(u)&&O.get(u,e)&&(i=O.get(u,e),o=!1)}if(void 0===i){var l=O.get(r,a);er(l)&&O.get(l,e)&&(i=O.get(l,e),o=!1)}}}if(void 0===i){var f=O.get(r,e);void 0!==f&&(i=f)}if(void 0===i)if(-1===e.indexOf(".")){var h=C(r,e);if(h.length>0)for(var c=0,p=h.length;c<p;c++){if(Y(h[c].val)||Z(h[c].val)||rr(h[c].val)){i=h[c].val;break}if("number"==typeof h[c].val){i=String(h[c].val);break}if(Array.isArray(h[c].val)){i=h[c].val.join("");break}throw new Error('json-variables/findValues(): [THROW_ID_21] While trying to resolve: "'+e+'" at path "'+t+'", we actually found the key named '+e+", but it was not equal to a string but to:\n"+JSON.stringify(h[c],null,4)+"\nWe can't resolve a string with that! It should be a string.")}}else{var g=C(r,function(r){if("string"==typeof r&&r.length>0&&-1!==r.indexOf("."))for(var e=0,t=r.length;e<t;e++)if("."===r[e])return r.slice(0,e);return r}(e));if(g.length>0)for(var d=0,y=g.length;d<y;d++){var v=O.get(g[d].val,ir(e));v&&Y(v)&&(i=v)}}return i}function fr(r,e,t,n,i){if(void 0===i&&(i=[]),i.includes(t)){var a="";if(i.length>1){a=i.reduce((function(r,e,n){return r+(0===n?"":" →\n")+(e===t?"💥 ":"  ")+e})," Here's the path we travelled up until we hit the recursion:\n\n"),a+=" →\n💥 "+t}throw new Error('json-variables/resolveString(): [THROW_ID_19] While trying to resolve: "'+e+'" at path "'+t+'", we encountered a closed loop, the key is referencing itself."'+a)}var o={},s=Array.from(i);s.push(t);var u,l=new U;function f(i,a,u){for(var f=0,h=i.length;f<h;f++){var c=i[f],p=e.slice(c.headsEndAt,c.tailsStartAt);if(0===p.length)l.push(c.headsStartAt,c.tailsEndAt);else if(Q.call(o,p)&&Y(o[p]))l.push(c.headsStartAt,c.tailsEndAt,o[p]);else{var g=lr(r,p.trim(),t,n);if(void 0===g)if(!0===n.allowUnresolved)g="";else{if("string"!=typeof n.allowUnresolved)throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_18] We couldn't find the value to resolve the variable "+e.slice(c.headsEndAt,c.tailsStartAt)+". We're at path: \""+t+'".');g=n.allowUnresolved}if(!u&&n.throwWhenNonStringInsertedInString&&!Y(g))throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_23] While resolving the variable "+e.slice(c.headsEndAt,c.tailsStartAt)+" at path "+t+", it resolved into a non-string value, "+JSON.stringify(g,null,4)+'. This is happening because options setting "throwWhenNonStringInsertedInString" is active (set to "true").');if(Z(g)){if(n.resolveToBoolIfAnyValuesContainBool)return l.wipe(),!n.resolveToFalseIfAnyValuesContainBool&&g;g=""}else{if(rr(g)&&u)return l.wipe(),g;g=Array.isArray(g)?String(g.join("")):rr(g)?"":String(g)}var d=t.includes(".")?ar(t)+"."+p:p;if(sr(g,n)){var y=ur(fr(r,g,d,n,s),n,a,0,0,p.trim());Y(y)&&l.push(c.headsStartAt,c.tailsEndAt,y)}else{o[p]=g;var v=ur(g,n,a,0,0,p.trim());Y(v)&&l.push(c.headsStartAt,c.tailsEndAt,v)}}}}try{u=x(e,n.heads,n.tails,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(r){throw new Error('json-variables/resolveString(): [THROW_ID_17] While trying to resolve string: "'+e+'" at path '+t+", something wrong with heads and tails was detected! Here's the internal error message:\n"+r)}var h=!1;1===u.length&&""===z(e,[[u[0].headsStartAt,u[0].tailsEndAt]]).trim()&&(h=!0);var c=f(u,!1,h);if(Z(c))return c;if(rr(c))return c;try{u=x(e,n.headsNoWrap,n.tailsNoWrap,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(r){throw new Error('json-variables/resolveString(): [THROW_ID_22] While trying to resolve string: "'+e+'" at path '+t+", something wrong with no-wrap heads and no-wrap tails was detected! Here's the internal error message:\n"+r)}1===u.length&&""===z(e,[[u[0].headsStartAt,u[0].tailsEndAt]]).trim()&&(h=!0);var p=f(u,!0,h);return Z(p)||rr(p)?p:l&&l.current()?z(e,l.current()):e}r.defaults=X,r.jVar=function(r,e){if(!arguments.length)throw new Error("json-variables/jVar(): [THROW_ID_01] Alas! Inputs are missing!");if(!er(r))throw new TypeError("json-variables/jVar(): [THROW_ID_02] Alas! The input must be a plain object! Currently it's: "+(Array.isArray(r)?"array":typeof r));if(e&&!er(e))throw new TypeError("json-variables/jVar(): [THROW_ID_03] Alas! An Optional Options Object must be a plain object! Currently it's: "+(Array.isArray(e)?"array":typeof e));var t,i,a,o=n(n({},X),e);if(o.dontWrapVars?Array.isArray(o.dontWrapVars)||(o.dontWrapVars=A(o.dontWrapVars)):o.dontWrapVars=[],o.dontWrapVars.length>0&&!o.dontWrapVars.every((function(r,e){return!!Y(r)||(t=r,i=e,!1)})))throw new Error('json-variables/jVar(): [THROW_ID_05] Alas! All variable names set in opts.dontWrapVars should be of a string type. Computer detected a value "'+t+'" at index '+i+", which is not string but "+(Array.isArray(t)?"array":typeof t)+"!");if(""===o.heads)throw new Error("json-variables/jVar(): [THROW_ID_06] Alas! opts.heads are empty!");if(""===o.tails)throw new Error("json-variables/jVar(): [THROW_ID_07] Alas! opts.tails are empty!");if(o.lookForDataContainers&&""===o.dataContainerIdentifierTails)throw new Error("json-variables/jVar(): [THROW_ID_08] Alas! opts.dataContainerIdentifierTails is empty!");if(o.heads===o.tails)throw new Error("json-variables/jVar(): [THROW_ID_09] Alas! opts.heads and opts.tails can't be equal!");if(o.heads===o.headsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_10] Alas! opts.heads and opts.headsNoWrap can't be equal!");if(o.tails===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_11] Alas! opts.tails and opts.tailsNoWrap can't be equal!");if(""===o.headsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_12] Alas! opts.headsNoWrap is an empty string!");if(""===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_13] Alas! opts.tailsNoWrap is an empty string!");if(o.headsNoWrap===o.tailsNoWrap)throw new Error("json-variables/jVar(): [THROW_ID_14] Alas! opts.headsNoWrap and opts.tailsNoWrap can't be equal!");return w(r,(function(e,t,n){if(tr(t)&&sr(e,o))throw new Error("json-variables/jVar(): [THROW_ID_15] Alas! Object keys can't contain variables!\nPlease check the following key: "+e);if(""===(a=void 0!==t?t:e))return a;if(0!==o.heads.length&&nr(a)===nr(o.heads)||0!==o.tails.length&&nr(a)===nr(o.tails)||0!==o.headsNoWrap.length&&nr(a)===nr(o.headsNoWrap)||0!==o.tailsNoWrap.length&&nr(a)===nr(o.tailsNoWrap)){if(!o.noSingleMarkers)return a;throw new Error("json-variables/jVar(): [THROW_ID_16] Alas! While processing the input, we stumbled upon "+nr(a)+" which is equal to "+(nr(a)===nr(o.heads)?"heads":"")+(nr(a)===nr(o.tails)?"tails":"")+(Y(o.headsNoWrap)&&nr(a)===nr(o.headsNoWrap)?"headsNoWrap":"")+(Y(o.tailsNoWrap)&&nr(a)===nr(o.tailsNoWrap)?"tailsNoWrap":"")+'. If you wouldn\'t have set opts.noSingleMarkers to "true" this error would not happen and computer would have left the current element ('+nr(a)+") alone")}return Y(a)&&sr(a,o)?fr(r,a,n.path,o):a}))},r.version="10.0.0",Object.defineProperty(r,"__esModule",{value:!0})}));
