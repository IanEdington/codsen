/**
 * emlint
 * Pluggable email template code linter
 * Version: 2.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/emlint
 */

!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r=r||self).emlint={})}(this,(function(r){"use strict";function e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function t(r){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function n(r,e){return(n=Object.setPrototypeOf||function(r,e){return r.__proto__=e,r})(r,e)}function a(r,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):e}function c(r){return function(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e<r.length;e++)t[e]=r[e];return t}}(r)||function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=function(r,e){if(e){if("object"!=typeof e)throw new TypeError(String(e)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero&&0===r)return!0}}return Number.isSafeInteger(r)&&r>=1},i="[object Object]";var u,s,f=Function.prototype,d=Object.prototype,h=f.toString,l=d.hasOwnProperty,g=h.call(Object),p=d.toString,m=(u=Object.getPrototypeOf,s=Object,function(r){return u(s(r))});var b=function(r){if(!function(r){return!!r&&"object"==typeof r}(r)||p.call(r)!=i||function(r){var e=!1;if(null!=r&&"function"!=typeof r.toString)try{e=!!(r+"")}catch(r){}return e}(r))return!1;var e=m(r);if(null===e)return!0;var t=l.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&h.call(t)==g},x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var A="[object AsyncFunction]",T="[object Function]",y="[object GeneratorFunction]",I="[object Null]",v="[object Proxy]",E="[object Undefined]",C="object"==typeof x&&x&&x.Object===Object&&x,O="object"==typeof self&&self&&self.Object===Object&&self,w=C||O||Function("return this")(),F=Object.prototype,R=F.hasOwnProperty,_=F.toString,N=w.Symbol,B=N?N.toStringTag:void 0;function S(r){return null==r?void 0===r?E:I:B&&B in Object(r)?function(r){var e=R.call(r,B),t=r[B];try{r[B]=void 0;var n=!0}catch(r){}var a=_.call(r);n&&(e?r[B]=t:delete r[B]);return a}(r):function(r){return _.call(r)}(r)}var L=function(r){if(!function(r){var e=typeof r;return null!=r&&("object"==e||"function"==e)}(r))return!1;var e=S(r);return e==T||e==y||e==A||e==v};function j(r){if("string"==typeof r)return 0!==r.length&&(r.charCodeAt(0)>=55296&&r.charCodeAt(0)<=56319);if(void 0===r)return!1;throw new TypeError(`string-character-is-astral-surrogate/isHighSurrogate(): the input is not string but ${typeof r}`)}function P(r){if("string"==typeof r)return 0!==r.length&&(r.charCodeAt(0)>=56320&&r.charCodeAt(0)<=57343);if(void 0===r)return!1;throw new TypeError(`string-character-is-astral-surrogate/isLowSurrogate(): the input is not string but ${typeof r}`)}const M=Array.isArray;function k(r){return null!=r}function D(r){return"string"==typeof r}function H(r){return"string"==typeof r&&(r.charCodeAt(0)>=55296&&r.charCodeAt(0)<=57343)}function $(r,e,t,n,a){const c="function"==typeof t?t():t;if(e>=r.length&&a&&"EOL"===c)return c;if(!(e<=r.length)){if(n.relaxedApi)return!1;throw new Error(`string-match-left-right/marchForward(): [THROW_ID_102] second argument, fromIndexInclusive is ${e} beyond the input string length, ${r.length}.`)}{let o=a?1:t.length;for(let a=e,c=r.length;a<c;a++){let e=r[a];if(j(r[a])&&P(r[a+1])&&(e=r[a]+r[a+1]),P(r[a])&&j(r[a-1])&&(e=r[a-1]+r[a]),n.trimBeforeMatching&&""===r[a].trim())continue;if(!n.i&&n.trimCharsBeforeMatching.includes(e)||n.i&&n.trimCharsBeforeMatching.map(r=>r.toLowerCase()).includes(e.toLowerCase())){2===e.length&&(a+=1);continue}let c=t[t.length-o];if(j(c)&&k(t[t.length-o+1])&&P(t[t.length-o+1])&&(c=t[t.length-o]+t[t.length-o+1]),!(!n.i&&e===c||n.i&&e.toLowerCase()===c.toLowerCase()))return!1;if((o-=e.length)<1){let n=a-t.length+e.length;return n>=0&&P(r[n])&&k(r[n-1])&&j(r[n-1])&&(n-=1),n>=0?n:0}2===e.length&&j(r[a])&&(a+=1)}if(o>0)return!(!a||"EOL"!==c)}}function G(r,e,t,n,a){const c="function"==typeof t?t():t;if(e<0&&a&&"EOL"===c)return c;if(e>=r.length){if(n.relaxedApi)return!1;throw new Error(`string-match-left-right/marchBackward(): [THROW_ID_203] second argument, starting index, should not be beyond the last character of the input string! Currently the first argument's last character's index is ${r.length} but the second argument is beyond it:\n${JSON.stringify(e,null,4)}`)}let o=a?1:t.length;for(let c=e+1;c--;){if(n.trimBeforeMatching&&""===r[c].trim()){if(0===c&&a&&"EOL"===t)return!0;continue}let e=r[c];if(P(r[c])&&j(r[c-1])?e=r[c-1]+r[c]:j(r[c])&&P(r[c+1])&&(e=r[c]+r[c+1]),!n.i&&n.trimCharsBeforeMatching.includes(e)||n.i&&n.trimCharsBeforeMatching.map(r=>r.toLowerCase()).includes(e.toLowerCase())){if(2===e.length&&(c-=1),a&&"EOL"===t&&0===c)return!0;continue}let i=t[o-1];if(P(i)&&(i=`${t[o-2]}${t[o-1]}`,o-=1,c-=1),!(!n.i&&e===i||n.i&&e.toLowerCase()===i.toLowerCase()))return!1;if((o-=1)<1)return c>=0?c:0}return o>0?!(!a||"EOL"!==c):void 0}function W(r,e,t,n){return function(r,e,t,n,a){const c=Object.assign({},{i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],relaxedApi:!1},a);var i;let u,s,f,d;if(c.trimCharsBeforeMatching="string"==typeof(i=c.trimCharsBeforeMatching)?i.length>0?[i]:[]:i,c.trimCharsBeforeMatching=c.trimCharsBeforeMatching.map(r=>D(r)?r:String(r)),c.trimCharsBeforeMatching.some((r,e)=>r.length>1&&!H(r)&&(u=e,s=r,!0)))throw new Error(`string-match-left-right/${r}(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ${u} is longer than 1 character, ${s.length} (equals to ${s}). Please split it into separate characters and put into array as separate elements.`);if(!D(e)){if(c.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_01] the first argument should be a string. Currently it's of a type: ${typeof e}, equal to:\n${JSON.stringify(e,null,4)}`)}if(0===e.length){if(c.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_02] the first argument should be a non-empty string. Currently it's empty!`)}if(!o(t,{includeZero:!0})){if(c.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ${typeof t}, equal to:\n${JSON.stringify(t,null,4)}`)}if(D(n))f=[n];else if(M(n))f=n;else if(k(n)){if(!L(n))throw new Error(`string-match-left-right/${r}(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ${typeof n}, equal to:\n${JSON.stringify(n,null,4)}`);(f=[]).push(n)}else f=n;if(k(a)&&!b(a))throw new Error(`string-match-left-right/${r}(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type "${typeof a}", and equal to:\n${JSON.stringify(a,null,4)}`);if(!k(f)||!M(f)||M(f)&&!f.length||M(f)&&1===f.length&&D(f[0])&&0===f[0].trim().length){if("function"==typeof c.cb){let n,a=t;if("matchRight"===r&&j(e[t])&&P(e[t+1])&&(a+=1),"matchLeftIncl"!==r&&"matchRight"!==r||(a+=1),r.startsWith("matchLeft"))for(let r=a;r--;){if(P(e[r])&&j(e[r-1]))continue;let t=e[r];if(j(e[r])&&P(e[r+1])&&(t=e[r]+e[r+1]),(!c.trimBeforeMatching||c.trimBeforeMatching&&void 0!==t&&""!==t.trim())&&(0===c.trimCharsBeforeMatching.length||void 0!==t&&!c.trimCharsBeforeMatching.includes(t))){n=r;break}P(e[r-1])&&j(e[r-2])&&(r-=1)}else if(r.startsWith("matchRight"))for(let r=a;r<e.length;r++){let t=e[r];if(j(e[r])&&P(e[r+1])&&(t=e[r]+e[r+1]),(!c.trimBeforeMatching||c.trimBeforeMatching&&""!==t.trim())&&(0===c.trimCharsBeforeMatching.length||!c.trimCharsBeforeMatching.includes(t))){n=r;break}j(e[r])&&P(e[r+1])&&(r+=1)}if(void 0===n)return!1;let o=e[n];j(e[n])&&P(e[n+1])&&(o=e[n]+e[n+1]),P(e[n])&&j(e[n-1])&&(o=e[n-1]+e[n],n-=1);let i,u=n+1;return j(e[n])&&P(e[n+1])&&(u+=1),u&&u>0&&(i=e.slice(0,u)),r.startsWith("matchLeft")?c.cb(o,i,n):(n&&n>0&&(i=e.slice(n)),c.cb(o,i,n))}let n="";throw k(a)||(n=" More so, the whole options object, the fourth input argument, is missing!"),new Error(`string-match-left-right/${r}(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!${n}`)}if(r.startsWith("matchLeft")){for(let n=0,a=f.length;n<a;n++){d="function"==typeof f[n];const a=f[n];let o=t;"matchLeft"===r&&(H(e[n-1])&&H(e[n-2])?o-=2:o-=1);const i=G(e,o,a,c,d);if(i&&d&&"function"==typeof a&&"EOL"===a())return!(!a()||c.cb&&!c.cb(s,h,u))&&a();let u,s,h="";if(k(i)&&i>0&&(s=e[u=i-1],h=e.slice(0,i)),P(e[u])&&k(e[u-1])&&j(e[u-1])&&(s=e[(u-=1)-1]+e[u]),j(e[u])&&k(e[u+1])&&P(e[u+1])&&(s=e[u]+e[u+1],h=e.slice(0,u+2)),!1!==i&&(!c.cb||c.cb(s,h,u)))return a}return!1}for(let n=0,a=f.length;n<a;n++){d="function"==typeof f[n];const a=f[n];let o=t+("matchRight"===r?1:0);"matchRight"===r&&j(e[o-1])&&P(e[o])&&(o+=1);const i=$(e,o,a,c,d);if(i&&d&&"function"==typeof a&&"EOL"===a()){let r,e,t;return!(!a()||c.cb&&!c.cb(r,e,t))&&a()}let u,s,h;if(k(i)&&k(e[i+a.length-1])&&(s=e[u=i+a.length],j(e[u])&&P(e[u+1])&&(s=e[u]+e[u+1])),k(u)&&u>=0&&(h=e.slice(u)),!1!==i&&(!c.cb||c.cb(s,h,u)))return a}return!1}("matchRight",r,e,t,n)}var U=function(r,e){return r(e={exports:{}},e.exports),e.exports}((function(r,e){var t=200,n="__lodash_hash_undefined__",a=9007199254740991,c="[object Arguments]",o="[object Boolean]",i="[object Date]",u="[object Function]",s="[object GeneratorFunction]",f="[object Map]",d="[object Number]",h="[object Object]",l="[object RegExp]",g="[object Set]",p="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",A="[object DataView]",T="[object Float32Array]",y="[object Float64Array]",I="[object Int8Array]",v="[object Int16Array]",E="[object Int32Array]",C="[object Uint8Array]",O="[object Uint8ClampedArray]",w="[object Uint16Array]",F="[object Uint32Array]",R=/\w*$/,_=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,B={};B[c]=B["[object Array]"]=B[b]=B[A]=B[o]=B[i]=B[T]=B[y]=B[I]=B[v]=B[E]=B[f]=B[d]=B[h]=B[l]=B[g]=B[p]=B[m]=B[C]=B[O]=B[w]=B[F]=!0,B["[object Error]"]=B[u]=B["[object WeakMap]"]=!1;var S="object"==typeof x&&x&&x.Object===Object&&x,L="object"==typeof self&&self&&self.Object===Object&&self,j=S||L||Function("return this")(),P=e&&!e.nodeType&&e,M=P&&r&&!r.nodeType&&r,k=M&&M.exports===P;function D(r,e){return r.set(e[0],e[1]),r}function H(r,e){return r.add(e),r}function $(r,e,t,n){var a=-1,c=r?r.length:0;for(n&&c&&(t=r[++a]);++a<c;)t=e(t,r[a],a,r);return t}function G(r){var e=!1;if(null!=r&&"function"!=typeof r.toString)try{e=!!(r+"")}catch(r){}return e}function W(r){var e=-1,t=Array(r.size);return r.forEach((function(r,n){t[++e]=[n,r]})),t}function U(r,e){return function(t){return r(e(t))}}function V(r){var e=-1,t=Array(r.size);return r.forEach((function(r){t[++e]=r})),t}var q,z=Array.prototype,K=Function.prototype,J=Object.prototype,Z=j["__core-js_shared__"],Y=(q=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",Q=K.toString,X=J.hasOwnProperty,rr=J.toString,er=RegExp("^"+Q.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=k?j.Buffer:void 0,nr=j.Symbol,ar=j.Uint8Array,cr=U(Object.getPrototypeOf,Object),or=Object.create,ir=J.propertyIsEnumerable,ur=z.splice,sr=Object.getOwnPropertySymbols,fr=tr?tr.isBuffer:void 0,dr=U(Object.keys,Object),hr=Mr(j,"DataView"),lr=Mr(j,"Map"),gr=Mr(j,"Promise"),pr=Mr(j,"Set"),mr=Mr(j,"WeakMap"),br=Mr(Object,"create"),xr=Gr(hr),Ar=Gr(lr),Tr=Gr(gr),yr=Gr(pr),Ir=Gr(mr),vr=nr?nr.prototype:void 0,Er=vr?vr.valueOf:void 0;function Cr(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Or(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function wr(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Fr(r){this.__data__=new Or(r)}function Rr(r,e){var t=Ur(r)||function(r){return function(r){return function(r){return!!r&&"object"==typeof r}(r)&&Vr(r)}(r)&&X.call(r,"callee")&&(!ir.call(r,"callee")||rr.call(r)==c)}(r)?function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}(r.length,String):[],n=t.length,a=!!n;for(var o in r)!e&&!X.call(r,o)||a&&("length"==o||Hr(o,n))||t.push(o);return t}function _r(r,e,t){var n=r[e];X.call(r,e)&&Wr(n,t)&&(void 0!==t||e in r)||(r[e]=t)}function Nr(r,e){for(var t=r.length;t--;)if(Wr(r[t][0],e))return t;return-1}function Br(r,e,t,n,a,x,_){var N;if(n&&(N=x?n(r,a,x,_):n(r)),void 0!==N)return N;if(!Kr(r))return r;var S=Ur(r);if(S){if(N=function(r){var e=r.length,t=r.constructor(e);e&&"string"==typeof r[0]&&X.call(r,"index")&&(t.index=r.index,t.input=r.input);return t}(r),!e)return function(r,e){var t=-1,n=r.length;e||(e=Array(n));for(;++t<n;)e[t]=r[t];return e}(r,N)}else{var L=Dr(r),j=L==u||L==s;if(qr(r))return function(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}(r,e);if(L==h||L==c||j&&!x){if(G(r))return x?r:{};if(N=function(r){return"function"!=typeof r.constructor||$r(r)?{}:(e=cr(r),Kr(e)?or(e):{});var e}(j?{}:r),!e)return function(r,e){return jr(r,kr(r),e)}(r,function(r,e){return r&&jr(e,Jr(e),r)}(N,r))}else{if(!B[L])return x?r:{};N=function(r,e,t,n){var a=r.constructor;switch(e){case b:return Lr(r);case o:case i:return new a(+r);case A:return function(r,e){var t=e?Lr(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}(r,n);case T:case y:case I:case v:case E:case C:case O:case w:case F:return function(r,e){var t=e?Lr(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}(r,n);case f:return function(r,e,t){return $(e?t(W(r),!0):W(r),D,new r.constructor)}(r,n,t);case d:case p:return new a(r);case l:return(s=new(u=r).constructor(u.source,R.exec(u))).lastIndex=u.lastIndex,s;case g:return function(r,e,t){return $(e?t(V(r),!0):V(r),H,new r.constructor)}(r,n,t);case m:return c=r,Er?Object(Er.call(c)):{}}var c;var u,s}(r,L,Br,e)}}_||(_=new Fr);var P=_.get(r);if(P)return P;if(_.set(r,N),!S)var M=t?function(r){return function(r,e,t){var n=e(r);return Ur(r)?n:function(r,e){for(var t=-1,n=e.length,a=r.length;++t<n;)r[a+t]=e[t];return r}(n,t(r))}(r,Jr,kr)}(r):Jr(r);return function(r,e){for(var t=-1,n=r?r.length:0;++t<n&&!1!==e(r[t],t,r););}(M||r,(function(a,c){M&&(a=r[c=a]),_r(N,c,Br(a,e,t,n,c,r,_))})),N}function Sr(r){return!(!Kr(r)||function(r){return!!Y&&Y in r}(r))&&(zr(r)||G(r)?er:_).test(Gr(r))}function Lr(r){var e=new r.constructor(r.byteLength);return new ar(e).set(new ar(r)),e}function jr(r,e,t,n){t||(t={});for(var a=-1,c=e.length;++a<c;){var o=e[a],i=n?n(t[o],r[o],o,t,r):void 0;_r(t,o,void 0===i?r[o]:i)}return t}function Pr(r,e){var t,n,a=r.__data__;return("string"==(n=typeof(t=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?a["string"==typeof e?"string":"hash"]:a.map}function Mr(r,e){var t=function(r,e){return null==r?void 0:r[e]}(r,e);return Sr(t)?t:void 0}Cr.prototype.clear=function(){this.__data__=br?br(null):{}},Cr.prototype.delete=function(r){return this.has(r)&&delete this.__data__[r]},Cr.prototype.get=function(r){var e=this.__data__;if(br){var t=e[r];return t===n?void 0:t}return X.call(e,r)?e[r]:void 0},Cr.prototype.has=function(r){var e=this.__data__;return br?void 0!==e[r]:X.call(e,r)},Cr.prototype.set=function(r,e){return this.__data__[r]=br&&void 0===e?n:e,this},Or.prototype.clear=function(){this.__data__=[]},Or.prototype.delete=function(r){var e=this.__data__,t=Nr(e,r);return!(t<0)&&(t==e.length-1?e.pop():ur.call(e,t,1),!0)},Or.prototype.get=function(r){var e=this.__data__,t=Nr(e,r);return t<0?void 0:e[t][1]},Or.prototype.has=function(r){return Nr(this.__data__,r)>-1},Or.prototype.set=function(r,e){var t=this.__data__,n=Nr(t,r);return n<0?t.push([r,e]):t[n][1]=e,this},wr.prototype.clear=function(){this.__data__={hash:new Cr,map:new(lr||Or),string:new Cr}},wr.prototype.delete=function(r){return Pr(this,r).delete(r)},wr.prototype.get=function(r){return Pr(this,r).get(r)},wr.prototype.has=function(r){return Pr(this,r).has(r)},wr.prototype.set=function(r,e){return Pr(this,r).set(r,e),this},Fr.prototype.clear=function(){this.__data__=new Or},Fr.prototype.delete=function(r){return this.__data__.delete(r)},Fr.prototype.get=function(r){return this.__data__.get(r)},Fr.prototype.has=function(r){return this.__data__.has(r)},Fr.prototype.set=function(r,e){var n=this.__data__;if(n instanceof Or){var a=n.__data__;if(!lr||a.length<t-1)return a.push([r,e]),this;n=this.__data__=new wr(a)}return n.set(r,e),this};var kr=sr?U(sr,Object):function(){return[]},Dr=function(r){return rr.call(r)};function Hr(r,e){return!!(e=null==e?a:e)&&("number"==typeof r||N.test(r))&&r>-1&&r%1==0&&r<e}function $r(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||J)}function Gr(r){if(null!=r){try{return Q.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function Wr(r,e){return r===e||r!=r&&e!=e}(hr&&Dr(new hr(new ArrayBuffer(1)))!=A||lr&&Dr(new lr)!=f||gr&&"[object Promise]"!=Dr(gr.resolve())||pr&&Dr(new pr)!=g||mr&&"[object WeakMap]"!=Dr(new mr))&&(Dr=function(r){var e=rr.call(r),t=e==h?r.constructor:void 0,n=t?Gr(t):void 0;if(n)switch(n){case xr:return A;case Ar:return f;case Tr:return"[object Promise]";case yr:return g;case Ir:return"[object WeakMap]"}return e});var Ur=Array.isArray;function Vr(r){return null!=r&&function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=a}(r.length)&&!zr(r)}var qr=fr||function(){return!1};function zr(r){var e=Kr(r)?rr.call(r):"";return e==u||e==s}function Kr(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function Jr(r){return Vr(r)?Rr(r):function(r){if(!$r(r))return dr(r);var e=[];for(var t in Object(r))X.call(r,t)&&"constructor"!=t&&e.push(t);return e}(r)}r.exports=function(r){return Br(r,!0,!0)}}));function V(r,e){return function(r,e,t){if("string"!=typeof r||!r.length)return null;if(e&&"number"==typeof e||(e=0),!r[e+1])return null;if(r[e+1]&&(!t&&r[e+1].trim().length||t&&(r[e+1].trim().length||"\n\r".includes(r[e+1]))))return e+1;if(r[e+2]&&(!t&&r[e+2].trim().length||t&&(r[e+2].trim().length||"\n\r".includes(r[e+2]))))return e+2;for(let n=e+1,a=r.length;n<a;n++)if(r[n]&&(!t&&r[n].trim().length||t&&(r[n].trim().length||"\n\r".includes(r[n]))))return n;return null}(r,e,!1)}function q(r,e){return function(r,e,t){if("string"!=typeof r||!r.length)return null;if(e&&"number"==typeof e||(e=0),e<1)return null;if(r[e-1]&&(!t&&r[e-1].trim().length||t&&(r[e-1].trim().length||"\n\r".includes(r[e-1]))))return e-1;if(r[e-2]&&(!t&&r[e-2].trim().length||t&&(r[e-2].trim().length||"\n\r".includes(r[e-2]))))return e-2;for(let n=e;n--;)if(r[n]&&(!t&&r[n].trim().length||t&&(r[n].trim().length||"\n\r".includes(r[n]))))return n;return null}(r,e,!1)}const z=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"];function K(r){return void 0===r||"string"==typeof r&&""===r.trim()}function J(r,e=0){const t=e?r.slice(e):r;let n=!1;return/^<\s*\w+\s*\/?\s*>/g.test(t)?n=!0:/^<\s*\w+\s+\w+\s*=\s*['"]/g.test(t)?n=!0:/^<\s*\/?\s*\w+\s*\/?\s*>/g.test(t)?n=!0:/^<\s*\w+(?:\s*\w+)*\s*\w+=['"]/g.test(t)?n=!0:"<"===r[e]&&r[e+1]&&r[e+1].trim().length&&W(r,e,z,{cb:K})&&(n=!0),"string"==typeof r&&e<r.length&&n}function Z(r){return"string"==typeof r}function Y(r){return"number"==typeof r}function Q(r){return Z(r)&&1===r.length&&(r.charCodeAt(0)>64&&r.charCodeAt(0)<91||r.charCodeAt(0)>96&&r.charCodeAt(0)<123)}function X(r){let e="";for(let t=0,n=r.length;t<n;t++)e="{"===r[t]?`}${e}`:"("===r[t]?`)${e}`:`${r[t]}${e}`;return e}const rr={reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100},er="{}%-$_()*|";var tr=(r,e,t)=>{const n=t=>Object.defineProperty(r,e,{value:t,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){const r=t();return n(r),r},set(r){n(r)}}),r};function nr(r){return{character:function(e,t){0===e.charCodeAt(0)&&r.report({ruleId:"bad-character-null",message:"Bad character - NULL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ar(r){return{character:function(e,t){1===e.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-heading",message:"Bad character - START OF HEADING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function cr(r){return{character:function(e,t){2===e.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-text",message:"Bad character - START OF TEXT.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function or(r){return{character:function(e,t){3===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-text",message:"Bad character - END OF TEXT.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1,"\n"]]}})}}}function ir(r){return{character:function(e,t){4===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-transmission",message:"Bad character - END OF TRANSMISSION.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ur(r){return{character:function(e,t){5===e.charCodeAt(0)&&r.report({ruleId:"bad-character-enquiry",message:"Bad character - ENQUIRY.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function sr(r){return{character:function(e,t){6===e.charCodeAt(0)&&r.report({ruleId:"bad-character-acknowledge",message:"Bad character - ACKNOWLEDGE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function fr(r){return{character:function(e,t){7===e.charCodeAt(0)&&r.report({ruleId:"bad-character-bell",message:"Bad character - BELL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function dr(r){return{character:function(e,t){8===e.charCodeAt(0)&&r.report({ruleId:"bad-character-backspace",message:"Bad character - BACKSPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function hr(r){return{character:function(e,t){9===e.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation",message:"Bad character - TABULATION.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function lr(r){return{character:function(e,t){11===e.charCodeAt(0)&&r.report({ruleId:"bad-character-line-tabulation",message:"Bad character - LINE TABULATION.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function gr(r){return{character:function(e,t){12===e.charCodeAt(0)&&r.report({ruleId:"bad-character-form-feed",message:"Bad character - FORM FEED.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function pr(r){return{character:function(e,t){14===e.charCodeAt(0)&&r.report({ruleId:"bad-character-shift-out",message:"Bad character - SHIFT OUT.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function mr(r){return{character:function(e,t){15===e.charCodeAt(0)&&r.report({ruleId:"bad-character-shift-in",message:"Bad character - SHIFT IN.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function br(r){return{character:function(e,t){16===e.charCodeAt(0)&&r.report({ruleId:"bad-character-data-link-escape",message:"Bad character - DATA LINK ESCAPE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function xr(r){return{character:function(e,t){17===e.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-one",message:"Bad character - DEVICE CONTROL ONE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ar(r){return{character:function(e,t){18===e.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-two",message:"Bad character - DEVICE CONTROL TWO.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Tr(r){return{character:function(e,t){19===e.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-three",message:"Bad character - DEVICE CONTROL THREE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function yr(r){return{character:function(e,t){20===e.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-four",message:"Bad character - DEVICE CONTROL FOUR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ir(r){return{character:function(e,t){21===e.charCodeAt(0)&&r.report({ruleId:"bad-character-negative-acknowledge",message:"Bad character - NEGATIVE ACKNOWLEDGE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function vr(r){return{character:function(e,t){22===e.charCodeAt(0)&&r.report({ruleId:"bad-character-synchronous-idle",message:"Bad character - SYNCHRONOUS IDLE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Er(r){return{character:function(e,t){23===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-transmission-block",message:"Bad character - END OF TRANSMISSION BLOCK.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Cr(r){return{character:function(e,t){24===e.charCodeAt(0)&&r.report({ruleId:"bad-character-cancel",message:"Bad character - CANCEL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Or(r){return{character:function(e,t){25===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-medium",message:"Bad character - END OF MEDIUM.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function wr(r){return{character:function(e,t){26===e.charCodeAt(0)&&r.report({ruleId:"bad-character-substitute",message:"Bad character - SUBSTITUTE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Fr(r){return{character:function(e,t){27===e.charCodeAt(0)&&r.report({ruleId:"bad-character-escape",message:"Bad character - ESCAPE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Rr(r){return{character:function(e,t){28===e.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-four",message:"Bad character - INFORMATION SEPARATOR FOUR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function _r(r){return{character:function(e,t){29===e.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-three",message:"Bad character - INFORMATION SEPARATOR THREE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Nr(r){return{character:function(e,t){30===e.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-two",message:"Bad character - INFORMATION SEPARATOR TWO.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Br(r){return{character:function(e,t){31===e.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-one",message:"Bad character - INFORMATION SEPARATOR ONE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Sr(r){return{character:function(e,t){127===e.charCodeAt(0)&&r.report({ruleId:"bad-character-delete",message:"Bad character - DELETE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Lr(r){return{character:function(e,t){128===e.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0080",message:"Bad character - CONTROL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function jr(r){return{character:function(e,t){129===e.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0081",message:"Bad character - CONTROL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Pr(r){return{character:function(e,t){130===e.charCodeAt(0)&&r.report({ruleId:"bad-character-break-permitted-here",message:"Bad character - BREAK PERMITTED HERE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Mr(r){return{character:function(e,t){131===e.charCodeAt(0)&&r.report({ruleId:"bad-character-no-break-here",message:"Bad character - NO BREAK HERE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function kr(r){return{character:function(e,t){132===e.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0084",message:"Bad character - CONTROL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Dr(r){return{character:function(e,t){133===e.charCodeAt(0)&&r.report({ruleId:"bad-character-next-line",message:"Bad character - NEXT LINE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Hr(r){return{character:function(e,t){134===e.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-selected-area",message:"Bad character - START OF SELECTED AREA.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function $r(r){return{character:function(e,t){135===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-selected-area",message:"Bad character - END OF SELECTED AREA.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Gr(r){return{character:function(e,t){136===e.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation-set",message:"Bad character - CHARACTER TABULATION SET.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Wr(r){return{character:function(e,t){137===e.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation-with-justification",message:"Bad character - CHARACTER TABULATION WITH JUSTIFICATION.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ur(r){return{character:function(e,t){138===e.charCodeAt(0)&&r.report({ruleId:"bad-character-line-tabulation-set",message:"Bad character - LINE TABULATION SET.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Vr(r){return{character:function(e,t){139===e.charCodeAt(0)&&r.report({ruleId:"bad-character-partial-line-forward",message:"Bad character - PARTIAL LINE FORWARD.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function qr(r){return{character:function(e,t){140===e.charCodeAt(0)&&r.report({ruleId:"bad-character-partial-line-backward",message:"Bad character - PARTIAL LINE BACKWARD.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function zr(r){return{character:function(e,t){141===e.charCodeAt(0)&&r.report({ruleId:"bad-character-reverse-line-feed",message:"Bad character - REVERSE LINE FEED.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Kr(r){return{character:function(e,t){142===e.charCodeAt(0)&&r.report({ruleId:"bad-character-single-shift-two",message:"Bad character - SINGLE SHIFT TWO.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Jr(r){return{character:function(e,t){143===e.charCodeAt(0)&&r.report({ruleId:"bad-character-single-shift-three",message:"Bad character - SINGLE SHIFT THREE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Zr(r){return{character:function(e,t){144===e.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-string",message:"Bad character - DEVICE CONTROL STRING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Yr(r){return{character:function(e,t){145===e.charCodeAt(0)&&r.report({ruleId:"bad-character-private-use-1",message:"Bad character - PRIVATE USE ONE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Qr(r){return{character:function(e,t){146===e.charCodeAt(0)&&r.report({ruleId:"bad-character-private-use-2",message:"Bad character - PRIVATE USE TWO.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Xr(r){return{character:function(e,t){147===e.charCodeAt(0)&&r.report({ruleId:"bad-character-set-transmit-state",message:"Bad character - SET TRANSMIT STATE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function re(r){return{character:function(e,t){148===e.charCodeAt(0)&&r.report({ruleId:"bad-character-cancel-character",message:"Bad character - CANCEL CHARACTER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ee(r){return{character:function(e,t){149===e.charCodeAt(0)&&r.report({ruleId:"bad-character-message-waiting",message:"Bad character - MESSAGE WAITING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function te(r){return{character:function(e,t){150===e.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-protected-area",message:"Bad character - START OF PROTECTED AREA.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ne(r){return{character:function(e,t){151===e.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-protected-area",message:"Bad character - END OF PROTECTED AREA.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ae(r){return{character:function(e,t){152===e.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-string",message:"Bad character - START OF STRING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ce(r){return{character:function(e,t){153===e.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0099",message:"Bad character - CONTROL.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function oe(r){return{character:function(e,t){154===e.charCodeAt(0)&&r.report({ruleId:"bad-character-single-character-introducer",message:"Bad character - SINGLE CHARACTER INTRODUCER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ie(r){return{character:function(e,t){155===e.charCodeAt(0)&&r.report({ruleId:"bad-character-control-sequence-introducer",message:"Bad character - CONTROL SEQUENCE INTRODUCER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ue(r){return{character:function(e,t){156===e.charCodeAt(0)&&r.report({ruleId:"bad-character-string-terminator",message:"Bad character - STRING TERMINATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function se(r){return{character:function(e,t){157===e.charCodeAt(0)&&r.report({ruleId:"bad-character-operating-system-command",message:"Bad character - OPERATING SYSTEM COMMAND.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function fe(r){return{character:function(e,t){158===e.charCodeAt(0)&&r.report({ruleId:"bad-character-private-message",message:"Bad character - PRIVATE MESSAGE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function de(r){return{character:function(e,t){159===e.charCodeAt(0)&&r.report({ruleId:"bad-character-application-program-command",message:"Bad character - APPLICATION PROGRAM COMMAND.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function he(r){return{character:function(e,t){173===e.charCodeAt(0)&&r.report({ruleId:"bad-character-soft-hyphen",message:"Bad character - SOFT HYPHEN.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function le(r){return{character:function(e,t){160===e.charCodeAt(0)&&r.report({ruleId:"bad-character-non-breaking-space",message:"Bad character - NON-BREAKING SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function ge(r){return{character:function(e,t){5760===e.charCodeAt(0)&&r.report({ruleId:"bad-character-ogham-space-mark",message:"Bad character - OGHAM SPACE MARK.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function pe(r){return{character:function(e,t){8192===e.charCodeAt(0)&&r.report({ruleId:"bad-character-en-quad",message:"Bad character - EN QUAD.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function me(r){return{character:function(e,t){8193===e.charCodeAt(0)&&r.report({ruleId:"bad-character-em-quad",message:"Bad character - EM QUAD.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function be(r){return{character:function(e,t){8194===e.charCodeAt(0)&&r.report({ruleId:"bad-character-en-space",message:"Bad character - EN SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function xe(r){return{character:function(e,t){8195===e.charCodeAt(0)&&r.report({ruleId:"bad-character-em-space",message:"Bad character - EM SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Ae(r){return{character:function(e,t){8196===e.charCodeAt(0)&&r.report({ruleId:"bad-character-three-per-em-space",message:"Bad character - THREE-PER-EM SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Te(r){return{character:function(e,t){8197===e.charCodeAt(0)&&r.report({ruleId:"bad-character-four-per-em-space",message:"Bad character - FOUR-PER-EM SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function ye(r){return{character:function(e,t){8198===e.charCodeAt(0)&&r.report({ruleId:"bad-character-six-per-em-space",message:"Bad character - SIX-PER-EM SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Ie(r){return{character:function(e,t){8199===e.charCodeAt(0)&&r.report({ruleId:"bad-character-figure-space",message:"Bad character - FIGURE SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function ve(r){return{character:function(e,t){8200===e.charCodeAt(0)&&r.report({ruleId:"bad-character-punctuation-space",message:"Bad character - PUNCTUATION SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Ee(r){return{character:function(e,t){8201===e.charCodeAt(0)&&r.report({ruleId:"bad-character-thin-space",message:"Bad character - THIN SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Ce(r){return{character:function(e,t){8202===e.charCodeAt(0)&&r.report({ruleId:"bad-character-hair-space",message:"Bad character - HAIR SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function Oe(r){return{character:function(e,t){8203===e.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-space",message:"Bad character - ZERO WIDTH SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function we(r){return{character:function(e,t){8204===e.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-non-joiner",message:"Bad character - ZERO WIDTH NON-JOINER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Fe(r){return{character:function(e,t){8205===e.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-joiner",message:"Bad character - ZERO WIDTH JOINER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Re(r){return{character:function(e,t){8206===e.charCodeAt(0)&&r.report({ruleId:"bad-character-left-to-right-mark",message:"Bad character - LEFT-TO-RIGHT MARK.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function _e(r){return{character:function(e,t){8207===e.charCodeAt(0)&&r.report({ruleId:"bad-character-right-to-left-mark",message:"Bad character - RIGHT-TO-LEFT MARK.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ne(r){return{character:function(e,t){8234===e.charCodeAt(0)&&r.report({ruleId:"bad-character-left-to-right-embedding",message:"Bad character - LEFT-TO-RIGHT EMBEDDING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Be(r){return{character:function(e,t){8235===e.charCodeAt(0)&&r.report({ruleId:"bad-character-right-to-left-embedding",message:"Bad character - RIGHT-TO-LEFT EMBEDDING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Se(r){return{character:function(e,t){8236===e.charCodeAt(0)&&r.report({ruleId:"bad-character-pop-directional-formatting",message:"Bad character - POP DIRECTIONAL FORMATTING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Le(r){return{character:function(e,t){8237===e.charCodeAt(0)&&r.report({ruleId:"bad-character-left-to-right-override",message:"Bad character - LEFT-TO-RIGHT OVERRIDE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function je(r){return{character:function(e,t){8238===e.charCodeAt(0)&&r.report({ruleId:"bad-character-right-to-left-override",message:"Bad character - RIGHT-TO-LEFT OVERRIDE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Pe(r){return{character:function(e,t){8288===e.charCodeAt(0)&&r.report({ruleId:"bad-character-word-joiner",message:"Bad character - WORD JOINER.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Me(r){return{character:function(e,t){8289===e.charCodeAt(0)&&r.report({ruleId:"bad-character-function-application",message:"Bad character - FUNCTION APPLICATION.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ke(r){return{character:function(e,t){8290===e.charCodeAt(0)&&r.report({ruleId:"bad-character-invisible-times",message:"Bad character - INVISIBLE TIMES.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function De(r){return{character:function(e,t){8291===e.charCodeAt(0)&&r.report({ruleId:"bad-character-invisible-separator",message:"Bad character - INVISIBLE SEPARATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function He(r){return{character:function(e,t){8292===e.charCodeAt(0)&&r.report({ruleId:"bad-character-invisible-plus",message:"Bad character - INVISIBLE PLUS.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function $e(r){return{character:function(e,t){8294===e.charCodeAt(0)&&r.report({ruleId:"bad-character-left-to-right-isolate",message:"Bad character - LEFT-TO-RIGHT ISOLATE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ge(r){return{character:function(e,t){8295===e.charCodeAt(0)&&r.report({ruleId:"bad-character-right-to-left-isolate",message:"Bad character - RIGHT-TO-LEFT ISOLATE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function We(r){return{character:function(e,t){8296===e.charCodeAt(0)&&r.report({ruleId:"bad-character-first-strong-isolate",message:"Bad character - FIRST STRONG ISOLATE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ue(r){return{character:function(e,t){8297===e.charCodeAt(0)&&r.report({ruleId:"bad-character-pop-directional-isolate",message:"Bad character - FIRST STRONG ISOLATE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ve(r){return{character:function(e,t){8298===e.charCodeAt(0)&&r.report({ruleId:"bad-character-inhibit-symmetric-swapping",message:"Bad character - INHIBIT SYMMETRIC SWAPPING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function qe(r){return{character:function(e,t){8299===e.charCodeAt(0)&&r.report({ruleId:"bad-character-activate-symmetric-swapping",message:"Bad character - INHIBIT SYMMETRIC SWAPPING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function ze(r){return{character:function(e,t){8300===e.charCodeAt(0)&&r.report({ruleId:"bad-character-inhibit-arabic-form-shaping",message:"Bad character - INHIBIT ARABIC FORM SHAPING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ke(r){return{character:function(e,t){8301===e.charCodeAt(0)&&r.report({ruleId:"bad-character-activate-arabic-form-shaping",message:"Bad character - ACTIVATE ARABIC FORM SHAPING.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Je(r){return{character:function(e,t){8302===e.charCodeAt(0)&&r.report({ruleId:"bad-character-national-digit-shapes",message:"Bad character - NATIONAL DIGIT SHAPES.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ze(r){return{character:function(e,t){8303===e.charCodeAt(0)&&r.report({ruleId:"bad-character-nominal-digit-shapes",message:"Bad character - NOMINAL DIGIT SHAPES.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Ye(r){return{character:function(e,t){65279===e.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-no-break-space",message:"Bad character - ZERO WIDTH NO-BREAK SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Qe(r){return{character:function(e,t){65529===e.charCodeAt(0)&&r.report({ruleId:"bad-character-interlinear-annotation-anchor",message:"Bad character - INTERLINEAR ANNOTATION ANCHOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function Xe(r){return{character:function(e,t){65530===e.charCodeAt(0)&&r.report({ruleId:"bad-character-interlinear-annotation-separator",message:"Bad character - INTERLINEAR ANNOTATION SEPARATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function rt(r){return{character:function(e,t){65531===e.charCodeAt(0)&&r.report({ruleId:"bad-character-interlinear-annotation-terminator",message:"Bad character - INTERLINEAR ANNOTATION TERMINATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function et(r){return{character:function(e,t){8232===e.charCodeAt(0)&&r.report({ruleId:"bad-character-line-separator",message:"Bad character - LINE SEPARATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function tt(r){return{character:function(e,t){8233===e.charCodeAt(0)&&r.report({ruleId:"bad-character-paragraph-separator",message:"Bad character - PARAGRAPH SEPARATOR.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1]]}})}}}function nt(r){return{character:function(e,t){8239===e.charCodeAt(0)&&r.report({ruleId:"bad-character-narrow-no-break-space",message:"Bad character - NARROW NO-BREAK SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function at(r){return{character:function(e,t){8287===e.charCodeAt(0)&&r.report({ruleId:"bad-character-medium-mathematical-space",message:"Bad character - MEDIUM MATHEMATICAL SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function ct(r){return{character:function(e,t){12288===e.charCodeAt(0)&&r.report({ruleId:"bad-character-ideographic-space",message:"Bad character - IDEOGRAPHIC SPACE.",idxFrom:t,idxTo:t+1,fix:{ranges:[[t,t+1," "]]}})}}}function ot(r){return{html:function(e){var t=r.str.slice(e.start+1,e.tagNameStartAt);if(e.tagNameStartAt>e.start+1&&(!t.trim().length||"/"!==t&&"/"===t.trim())){var n=[];-1!==t.indexOf("/")?(e.start+1+t.indexOf("/")>e.start+1&&n.push([e.start+1,e.start+1+t.indexOf("/")]),e.start+1+t.indexOf("/")<e.tagNameStartAt-1&&n.push([e.start+1+t.indexOf("/")+1,e.tagNameStartAt])):n.push([e.start+1+t.indexOf("/")+1,e.tagNameStartAt]),r.report({ruleId:"tag-space-after-opening-bracket",message:"Bad whitespace.",idxFrom:n[0][0],idxTo:n[n.length-1][1],fix:{ranges:n}})}}}}function it(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return{html:function(e){r.str.slice(e.start+1,e.tagNameStartAt);var n="never";Array.isArray(t)&&["always","never"].includes(t[0])&&(n=t[0]);var a=e.end-1,c=q(r.str,a),o=q(r.str,c);"never"===n&&e.selfClosing&&"/"===r.str[c]&&o<c-1?r.report({ruleId:"tag-space-before-closing-slash",message:"Bad whitespace.",idxFrom:o+1,idxTo:c,fix:{ranges:[[o+1,c]]}}):"always"===n&&e.selfClosing&&"/"===r.str[c]&&o===c-1&&r.report({ruleId:"tag-space-before-closing-slash",message:"Missing space.",idxFrom:c,idxTo:c,fix:{ranges:[[c,c," "]]}})}}}var ut={};function st(r){return ut[r]}function ft(){}function dt(){dt.init.call(this)}function ht(r){return void 0===r._maxListeners?dt.defaultMaxListeners:r._maxListeners}function lt(r,e,t){if(e)r.call(t);else for(var n=r.length,a=yt(r,n),c=0;c<n;++c)a[c].call(t)}function gt(r,e,t,n){if(e)r.call(t,n);else for(var a=r.length,c=yt(r,a),o=0;o<a;++o)c[o].call(t,n)}function pt(r,e,t,n,a){if(e)r.call(t,n,a);else for(var c=r.length,o=yt(r,c),i=0;i<c;++i)o[i].call(t,n,a)}function mt(r,e,t,n,a,c){if(e)r.call(t,n,a,c);else for(var o=r.length,i=yt(r,o),u=0;u<o;++u)i[u].call(t,n,a,c)}function bt(r,e,t,n){if(e)r.apply(t,n);else for(var a=r.length,c=yt(r,a),o=0;o<a;++o)c[o].apply(t,n)}function xt(r,e,t,n){var a,c,o,i;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if((c=r._events)?(c.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),c=r._events),o=c[e]):(c=r._events=new ft,r._eventsCount=0),o){if("function"==typeof o?o=c[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),!o.warned&&(a=ht(r))&&a>0&&o.length>a){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=o.length,i=u,"function"==typeof console.warn?console.warn(i):console.log(i)}}else o=c[e]=t,++r._eventsCount;return r}function At(r,e,t){var n=!1;function a(){r.removeListener(e,a),n||(n=!0,t.apply(r,arguments))}return a.listener=t,a}function Tt(r){var e=this._events;if(e){var t=e[r];if("function"==typeof t)return 1;if(t)return t.length}return 0}function yt(r,e){for(var t=new Array(e);e--;)t[e]=r[e];return t}tr(ut,"bad-character-null",(function(){return nr})),tr(ut,"bad-character-start-of-heading",(function(){return ar})),tr(ut,"bad-character-start-of-text",(function(){return cr})),tr(ut,"bad-character-end-of-text",(function(){return or})),tr(ut,"bad-character-end-of-transmission",(function(){return ir})),tr(ut,"bad-character-enquiry",(function(){return ur})),tr(ut,"bad-character-acknowledge",(function(){return sr})),tr(ut,"bad-character-bell",(function(){return fr})),tr(ut,"bad-character-backspace",(function(){return dr})),tr(ut,"bad-character-character-tabulation",(function(){return hr})),tr(ut,"bad-character-line-tabulation",(function(){return lr})),tr(ut,"bad-character-form-feed",(function(){return gr})),tr(ut,"bad-character-shift-out",(function(){return pr})),tr(ut,"bad-character-shift-in",(function(){return mr})),tr(ut,"bad-character-data-link-escape",(function(){return br})),tr(ut,"bad-character-device-control-one",(function(){return xr})),tr(ut,"bad-character-device-control-two",(function(){return Ar})),tr(ut,"bad-character-device-control-three",(function(){return Tr})),tr(ut,"bad-character-device-control-four",(function(){return yr})),tr(ut,"bad-character-negative-acknowledge",(function(){return Ir})),tr(ut,"bad-character-synchronous-idle",(function(){return vr})),tr(ut,"bad-character-end-of-transmission-block",(function(){return Er})),tr(ut,"bad-character-cancel",(function(){return Cr})),tr(ut,"bad-character-end-of-medium",(function(){return Or})),tr(ut,"bad-character-substitute",(function(){return wr})),tr(ut,"bad-character-escape",(function(){return Fr})),tr(ut,"bad-character-information-separator-four",(function(){return Rr})),tr(ut,"bad-character-information-separator-three",(function(){return _r})),tr(ut,"bad-character-information-separator-two",(function(){return Nr})),tr(ut,"bad-character-information-separator-one",(function(){return Br})),tr(ut,"bad-character-delete",(function(){return Sr})),tr(ut,"bad-character-control-0080",(function(){return Lr})),tr(ut,"bad-character-control-0081",(function(){return jr})),tr(ut,"bad-character-break-permitted-here",(function(){return Pr})),tr(ut,"bad-character-no-break-here",(function(){return Mr})),tr(ut,"bad-character-control-0084",(function(){return kr})),tr(ut,"bad-character-next-line",(function(){return Dr})),tr(ut,"bad-character-start-of-selected-area",(function(){return Hr})),tr(ut,"bad-character-end-of-selected-area",(function(){return $r})),tr(ut,"bad-character-character-tabulation-set",(function(){return Gr})),tr(ut,"bad-character-character-tabulation-with-justification",(function(){return Wr})),tr(ut,"bad-character-line-tabulation-set",(function(){return Ur})),tr(ut,"bad-character-partial-line-forward",(function(){return Vr})),tr(ut,"bad-character-partial-line-backward",(function(){return qr})),tr(ut,"bad-character-reverse-line-feed",(function(){return zr})),tr(ut,"bad-character-single-shift-two",(function(){return Kr})),tr(ut,"bad-character-single-shift-three",(function(){return Jr})),tr(ut,"bad-character-device-control-string",(function(){return Zr})),tr(ut,"bad-character-private-use-1",(function(){return Yr})),tr(ut,"bad-character-private-use-2",(function(){return Qr})),tr(ut,"bad-character-set-transmit-state",(function(){return Xr})),tr(ut,"bad-character-cancel-character",(function(){return re})),tr(ut,"bad-character-message-waiting",(function(){return ee})),tr(ut,"bad-character-start-of-protected-area",(function(){return te})),tr(ut,"bad-character-end-of-protected-area",(function(){return ne})),tr(ut,"bad-character-start-of-string",(function(){return ae})),tr(ut,"bad-character-control-0099",(function(){return ce})),tr(ut,"bad-character-single-character-introducer",(function(){return oe})),tr(ut,"bad-character-control-sequence-introducer",(function(){return ie})),tr(ut,"bad-character-string-terminator",(function(){return ue})),tr(ut,"bad-character-operating-system-command",(function(){return se})),tr(ut,"bad-character-private-message",(function(){return fe})),tr(ut,"bad-character-application-program-command",(function(){return de})),tr(ut,"bad-character-soft-hyphen",(function(){return he})),tr(ut,"bad-character-non-breaking-space",(function(){return le})),tr(ut,"bad-character-ogham-space-mark",(function(){return ge})),tr(ut,"bad-character-en-quad",(function(){return pe})),tr(ut,"bad-character-em-quad",(function(){return me})),tr(ut,"bad-character-en-space",(function(){return be})),tr(ut,"bad-character-em-space",(function(){return xe})),tr(ut,"bad-character-three-per-em-space",(function(){return Ae})),tr(ut,"bad-character-four-per-em-space",(function(){return Te})),tr(ut,"bad-character-six-per-em-space",(function(){return ye})),tr(ut,"bad-character-figure-space",(function(){return Ie})),tr(ut,"bad-character-punctuation-space",(function(){return ve})),tr(ut,"bad-character-thin-space",(function(){return Ee})),tr(ut,"bad-character-hair-space",(function(){return Ce})),tr(ut,"bad-character-zero-width-space",(function(){return Oe})),tr(ut,"bad-character-zero-width-non-joiner",(function(){return we})),tr(ut,"bad-character-zero-width-joiner",(function(){return Fe})),tr(ut,"bad-character-left-to-right-mark",(function(){return Re})),tr(ut,"bad-character-right-to-left-mark",(function(){return _e})),tr(ut,"bad-character-left-to-right-embedding",(function(){return Ne})),tr(ut,"bad-character-right-to-left-embedding",(function(){return Be})),tr(ut,"bad-character-pop-directional-formatting",(function(){return Se})),tr(ut,"bad-character-left-to-right-override",(function(){return Le})),tr(ut,"bad-character-right-to-left-override",(function(){return je})),tr(ut,"bad-character-word-joiner",(function(){return Pe})),tr(ut,"bad-character-function-application",(function(){return Me})),tr(ut,"bad-character-invisible-times",(function(){return ke})),tr(ut,"bad-character-invisible-separator",(function(){return De})),tr(ut,"bad-character-invisible-plus",(function(){return He})),tr(ut,"bad-character-left-to-right-isolate",(function(){return $e})),tr(ut,"bad-character-right-to-left-isolate",(function(){return Ge})),tr(ut,"bad-character-first-strong-isolate",(function(){return We})),tr(ut,"bad-character-pop-directional-isolate",(function(){return Ue})),tr(ut,"bad-character-inhibit-symmetric-swapping",(function(){return Ve})),tr(ut,"bad-character-activate-symmetric-swapping",(function(){return qe})),tr(ut,"bad-character-inhibit-arabic-form-shaping",(function(){return ze})),tr(ut,"bad-character-activate-arabic-form-shaping",(function(){return Ke})),tr(ut,"bad-character-national-digit-shapes",(function(){return Je})),tr(ut,"bad-character-nominal-digit-shapes",(function(){return Ze})),tr(ut,"bad-character-zero-width-no-break-space",(function(){return Ye})),tr(ut,"bad-character-interlinear-annotation-anchor",(function(){return Qe})),tr(ut,"bad-character-interlinear-annotation-separator",(function(){return Xe})),tr(ut,"bad-character-interlinear-annotation-terminator",(function(){return rt})),tr(ut,"bad-character-line-separator",(function(){return et})),tr(ut,"bad-character-paragraph-separator",(function(){return tt})),tr(ut,"bad-character-narrow-no-break-space",(function(){return nt})),tr(ut,"bad-character-medium-mathematical-space",(function(){return at})),tr(ut,"bad-character-ideographic-space",(function(){return ct})),tr(ut,"tag-space-after-opening-bracket",(function(){return ot})),tr(ut,"tag-space-before-closing-slash",(function(){return it})),ft.prototype=Object.create(null),dt.EventEmitter=dt,dt.usingDomains=!1,dt.prototype.domain=void 0,dt.prototype._events=void 0,dt.prototype._maxListeners=void 0,dt.defaultMaxListeners=10,dt.init=function(){this.domain=null,dt.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ft,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},dt.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||isNaN(r))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=r,this},dt.prototype.getMaxListeners=function(){return ht(this)},dt.prototype.emit=function(r){var e,t,n,a,c,o,i,u="error"===r;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(i=this.domain,u){if(e=arguments[1],!i){if(e instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=i,e.domainThrown=!1,i.emit("error",e),!1}if(!(t=o[r]))return!1;var f="function"==typeof t;switch(n=arguments.length){case 1:lt(t,f,this);break;case 2:gt(t,f,this,arguments[1]);break;case 3:pt(t,f,this,arguments[1],arguments[2]);break;case 4:mt(t,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(n-1),c=1;c<n;c++)a[c-1]=arguments[c];bt(t,f,this,a)}return!0},dt.prototype.addListener=function(r,e){return xt(this,r,e,!1)},dt.prototype.on=dt.prototype.addListener,dt.prototype.prependListener=function(r,e){return xt(this,r,e,!0)},dt.prototype.once=function(r,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(r,At(this,r,e)),this},dt.prototype.prependOnceListener=function(r,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(r,At(this,r,e)),this},dt.prototype.removeListener=function(r,e){var t,n,a,c,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(t=n[r]))return this;if(t===e||t.listener&&t.listener===e)0==--this._eventsCount?this._events=new ft:(delete n[r],n.removeListener&&this.emit("removeListener",r,t.listener||e));else if("function"!=typeof t){for(a=-1,c=t.length;c-- >0;)if(t[c]===e||t[c].listener&&t[c].listener===e){o=t[c].listener,a=c;break}if(a<0)return this;if(1===t.length){if(t[0]=void 0,0==--this._eventsCount)return this._events=new ft,this;delete n[r]}else!function(r,e){for(var t=e,n=t+1,a=r.length;n<a;t+=1,n+=1)r[t]=r[n];r.pop()}(t,a);n.removeListener&&this.emit("removeListener",r,o||e)}return this},dt.prototype.removeAllListeners=function(r){var e,t;if(!(t=this._events))return this;if(!t.removeListener)return 0===arguments.length?(this._events=new ft,this._eventsCount=0):t[r]&&(0==--this._eventsCount?this._events=new ft:delete t[r]),this;if(0===arguments.length){for(var n,a=Object.keys(t),c=0;c<a.length;++c)"removeListener"!==(n=a[c])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new ft,this._eventsCount=0,this}if("function"==typeof(e=t[r]))this.removeListener(r,e);else if(e)do{this.removeListener(r,e[e.length-1])}while(e[0]);return this},dt.prototype.listeners=function(r){var e,t=this._events;return t&&(e=t[r])?"function"==typeof e?[e.listener||e]:function(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}(e):[]},dt.listenerCount=function(r,e){return"function"==typeof r.listenerCount?r.listenerCount(e):Tt.call(r,e)},dt.prototype.listenerCount=Tt,dt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var It={}.toString,vt=Array.isArray||function(r){return"[object Array]"==It.call(r)},Et=Ct;function Ct(r,e){if(!(this instanceof Ct))return"number"==typeof e?new Ct(r).fromIndex(e):new Ct(r,e);this.str=r||"",this.lineToIndex=function(r){for(var e=r.split("\n"),t=new Array(e.length),n=0,a=0,c=e.length;a<c;a++)t[a]=n,n+=e[a].length+1;return t}(this.str),e=e||{},this.origin=void 0===e.origin?1:e.origin}Ct.prototype.fromIndex=function(r){if(r<0||r>=this.str.length||isNaN(r))return null;var e=function(r,e){if(r>=e[e.length-1])return e.length-1;var t,n=0,a=e.length-2;for(;n<a;)if(r<e[t=n+(a-n>>1)])a=t-1;else{if(!(r>=e[t+1])){n=t;break}n=t+1}return n}(r,this.lineToIndex);return{line:e+this.origin,col:r-this.lineToIndex[e]+this.origin}},Ct.prototype.toIndex=function(r,e){if(void 0===e)return vt(r)&&r.length>=2?this.toIndex(r[0],r[1]):null!=(t=r)&&"object"==typeof t&&!1===vt(t)&&"line"in r&&("col"in r||"column"in r)?this.toIndex(r.line,"col"in r?r.col:r.column):-1;var t;if(isNaN(r)||isNaN(e))return-1;if(r-=this.origin,e-=this.origin,r>=0&&e>=0&&r<this.lineToIndex.length){var n=this.lineToIndex[r];if(e<(r===this.lineToIndex.length-1?this.str.length:this.lineToIndex[r+1])-n)return n+e}return-1};var Ot=function(r){function o(){return function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),a(this,t(o).apply(this,arguments))}var i,u,s;return function(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&n(r,e)}(o,r),i=o,(u=[{key:"verify",value:function(r,e){var t=this;this.messages=[],this.str=r,this.config=e,Object.keys(e.rules).filter((function(r){return"number"==typeof e.rules[r]?e.rules[r]>0:Array.isArray(e.rules[r])?e.rules[r][0]>0:void 0})).forEach((function(r){var n;n=Array.isArray(e.rules[r])&&e.rules[r].length>1?st(r).apply(void 0,[t].concat(c(e.rules[r].slice(1)))):st(r)(t),Object.keys(n).forEach((function(r){t.on(r,(function(){var e;(e=n)[r].apply(e,arguments)}))}))}));for(var n=r.length,a=0;a<n;a++)this.emit("character",r[a],a);return function(r,e,t){if(!Z(r))throw void 0===r?new Error("codsen-tokenizer: [THROW_ID_01] the first input argument is completely missing! It should be given as string."):new Error(`codsen-tokenizer: [THROW_ID_02] the first input argument must be string! It was given as "${typeof r}", equal to:\n${JSON.stringify(r,null,4)}`);if("function"!=typeof e)throw new Error(`codsen-tokenizer: [THROW_ID_03] the second input argument, callback function, should be a function but it was given as type ${typeof e}, equal to ${JSON.stringify(e,null,4)}`);if(t&&!b(t))throw new Error(`codsen-tokenizer: [THROW_ID_04] the third input argument, options object, should be a plain object but it was given as type ${typeof t}, equal to ${JSON.stringify(t,null,4)}`);const n=Object.assign({},rr,t);if(n.reportProgressFunc&&"function"!=typeof n.reportProgressFunc)throw new TypeError(`codsen-tokenizer: [THROW_ID_05] opts.reportProgressFunc should be a function but it was given as :\n${JSON.stringify(n.reportProgressFunc,null,4)} (${typeof n.reportProgressFunc})`);let a,c=0;const o=r.length,i=Math.floor(o/2);let u,s=!1,f={};const d={type:null,start:null,end:null,tail:null,kind:null};function h(){f=Object.assign({},d)}h();const l=[];function g(r,e){if(!l.length)return!1;if("simple"===l[l.length-1].type)return r[e]===l[l.length-1].value;if("esp"===l[l.length-1].type){if(!er.includes(r[e]))return!1;let t="";const n=r.length;for(let a=e;a<n&&er.includes(r[a]);a++)t+=r[a];return l[l.length-1].value.split("").every(r=>t.includes(r))}}function p(r){e(U(r)),h()}function m(e,t){"text"!==e.type&&null!==e.start&&r[t-1]&&!r[t-1].trim().length&&(e.end=q(r,t)+1,p(e),e.start=q(r,t)+1,e.type="text"),null!==e.start&&(e.end=t,p(e))}for(let e=0;e<o;e++){if(n.reportProgressFunc&&(o>1e3&&o<2e3?e===i&&n.reportProgressFunc(Math.floor((n.reportProgressFuncTo-n.reportProgressFuncFrom)/2)):o>=2e3&&(a=n.reportProgressFuncFrom+Math.floor(e/o*(n.reportProgressFuncTo-n.reportProgressFuncFrom)))!==c&&(c=a,n.reportProgressFunc(a))),Number.isInteger(u)&&e>=u&&(u=!1),f.end&&f.end===e&&("style"===f.kind&&(s=!0),m(f,e)),!u&&["html"].includes(f.type)&&['"',"'"].includes(r[e])&&(g(r,e)?l.pop():l.length&&"esp"===l[l.length-1].type||l.push({type:"simple",value:r[e]})),!u)if(l.length||"<"!==r[e]||!J(r,e)&&!W(r,e,["!--","!doctype","?xml"],{i:!0}))if("html"===f.type&&"comment"===f.kind||!er.includes(r[e])||!r[e+1]||!er.includes(r[e+1])||"-"===r[e]&&"-"===r[e+1])null!==f.start&&f.end!==e||(s?r[e].trim().length?(f.start=e,f.type="css"):(f.start=e,f.type="text",f.end=V(r,e)||r.length,p(f),V(r,e)&&(f.start=V(r,e),f.type="css",u=V(r,e))):(f.start=e,f.type="text"));else{let t="";for(let n=e;n<o&&er.includes(r[n]);n++)t+=r[n];["html","esp"].includes(f.type)?"html"===f.type&&(g(r,e)?l.pop():l.push({type:"esp",value:X(t)})):(m(f,e),f.start=e,f.type="esp",u=e+t.length,f.tail=X(t))}else f.type&&m(f,e),f.start=e,f.type="html",f=Object.assign({tagNameStartAt:null,tagNameEndAt:null,tagName:null,recognised:null,closing:!1,selfClosing:!1,pureHTML:!0,esp:[]},f),W(r,e,"!--")?f.kind="comment":W(r,e,"!doctype",{i:!0})?f.kind="doctype":W(r,e,"?xml",{i:!0})?f.kind="xml":W(r,e,"style",{i:!0,trimCharsBeforeMatching:"/"})&&(f.kind="style");if(!u)if("html"!==f.type||l.length||">"!==r[e]){if("esp"===f.type&&null===f.end&&Z(f.tail)&&f.tail.includes(r[e])){let t="";for(let n=e;n<o&&er.includes(r[n]);n++)t+=r[n];f.end=e+t.length,u=e+t.length}}else f.end=e+1,"html"===f.type&&"/"===r[q(r,e)]&&(f.selfClosing=!0);"html"===f.type&&Y(f.tagNameStartAt)&&!Y(f.tagNameEndAt)&&(Q(r[e])||(f.tagNameEndAt=e,f.tagName=r.slice(f.tagNameStartAt,e))),"html"===f.type&&!Y(f.tagNameStartAt)&&Y(f.start)&&f.start<e&&("/"===r[e]?f.closing=!0:Q(r[e])&&(f.tagNameStartAt=e,f.closing||(f.closing=!1))),r[e+1]||null===f.start||(f.end=e+1,p(f))}}(r,(function(r){t.emit(r.type,r)})),this.messages}},{key:"report",value:function(r){var e,t=Et(this.str,r.idxFrom),n=t.line,a=t.col;e="number"==typeof this.config.rules[r.ruleId]?this.config.rules[r.ruleId]:this.config.rules[r.ruleId][0],this.messages.push(Object.assign({},{line:n,column:a,severity:e},r))}}])&&e(i.prototype,u),s&&e(i,s),o}(dt);r.Linter=Ot,r.version="2.0.0",Object.defineProperty(r,"__esModule",{value:!0})}));
