/**
 * emlint
 * Pluggable email template code linter
 * Version: 2.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/emlint
 */

!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((r=r||self).emlint={})}(this,(function(r){"use strict";function t(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function e(r){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}function n(r,t){return(n=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,t)}function a(r,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r):t}var c=function(r,t){if(t){if("object"!=typeof t)throw new TypeError(String(t)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in t){if("boolean"!=typeof t.includeZero)throw new TypeError(String(t.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(t.includeZero&&0===r)return!0}}return Number.isSafeInteger(r)&&r>=1},o="[object Object]";var i,u,s=Function.prototype,f=Object.prototype,h=s.toString,d=f.hasOwnProperty,l=h.call(Object),g=f.toString,p=(i=Object.getPrototypeOf,u=Object,function(r){return i(u(r))});var m=function(r){if(!function(r){return!!r&&"object"==typeof r}(r)||g.call(r)!=o||function(r){var t=!1;if(null!=r&&"function"!=typeof r.toString)try{t=!!(r+"")}catch(r){}return t}(r))return!1;var t=p(r);if(null===t)return!0;var e=d.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&h.call(e)==l},b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var x="[object AsyncFunction]",y="[object Function]",A="[object GeneratorFunction]",T="[object Null]",v="[object Proxy]",E="[object Undefined]",I="object"==typeof b&&b&&b.Object===Object&&b,C="object"==typeof self&&self&&self.Object===Object&&self,O=I||C||Function("return this")(),w=Object.prototype,_=w.hasOwnProperty,F=w.toString,B=O.Symbol,R=B?B.toStringTag:void 0;function N(r){return null==r?void 0===r?E:T:R&&R in Object(r)?function(r){var t=_.call(r,R),e=r[R];try{r[R]=void 0;var n=!0}catch(r){}var a=F.call(r);n&&(t?r[R]=e:delete r[R]);return a}(r):function(r){return F.call(r)}(r)}var j=function(r){if(!function(r){var t=typeof r;return null!=r&&("object"==t||"function"==t)}(r))return!1;var t=N(r);return t==y||t==A||t==x||t==v};function S(r){if("string"==typeof r)return 0!==r.length&&(r.charCodeAt(0)>=55296&&r.charCodeAt(0)<=56319);if(void 0===r)return!1;throw new TypeError(`string-character-is-astral-surrogate/isHighSurrogate(): the input is not string but ${typeof r}`)}function L(r){if("string"==typeof r)return 0!==r.length&&(r.charCodeAt(0)>=56320&&r.charCodeAt(0)<=57343);if(void 0===r)return!1;throw new TypeError(`string-character-is-astral-surrogate/isLowSurrogate(): the input is not string but ${typeof r}`)}const P=Array.isArray;function M(r){return null!=r}function k(r){return"string"==typeof r}function D(r){return"string"==typeof r&&(r.charCodeAt(0)>=55296&&r.charCodeAt(0)<=57343)}function $(r,t,e,n,a){const c="function"==typeof e?e():e;if(t>=r.length&&a&&"EOL"===c)return c;if(!(t<=r.length)){if(n.relaxedApi)return!1;throw new Error(`string-match-left-right/marchForward(): [THROW_ID_102] second argument, fromIndexInclusive is ${t} beyond the input string length, ${r.length}.`)}{let o=a?1:e.length;for(let a=t,c=r.length;a<c;a++){let t=r[a];if(S(r[a])&&L(r[a+1])&&(t=r[a]+r[a+1]),L(r[a])&&S(r[a-1])&&(t=r[a-1]+r[a]),n.trimBeforeMatching&&""===r[a].trim())continue;if(!n.i&&n.trimCharsBeforeMatching.includes(t)||n.i&&n.trimCharsBeforeMatching.map(r=>r.toLowerCase()).includes(t.toLowerCase())){2===t.length&&(a+=1);continue}let c=e[e.length-o];if(S(c)&&M(e[e.length-o+1])&&L(e[e.length-o+1])&&(c=e[e.length-o]+e[e.length-o+1]),!(!n.i&&t===c||n.i&&t.toLowerCase()===c.toLowerCase()))return!1;if((o-=t.length)<1){let n=a-e.length+t.length;return n>=0&&L(r[n])&&M(r[n-1])&&S(r[n-1])&&(n-=1),n>=0?n:0}2===t.length&&S(r[a])&&(a+=1)}if(o>0)return!(!a||"EOL"!==c)}}function H(r,t,e,n,a){const c="function"==typeof e?e():e;if(t<0&&a&&"EOL"===c)return c;if(t>=r.length){if(n.relaxedApi)return!1;throw new Error(`string-match-left-right/marchBackward(): [THROW_ID_203] second argument, starting index, should not be beyond the last character of the input string! Currently the first argument's last character's index is ${r.length} but the second argument is beyond it:\n${JSON.stringify(t,null,4)}`)}let o=a?1:e.length;for(let c=t+1;c--;){if(n.trimBeforeMatching&&""===r[c].trim()){if(0===c&&a&&"EOL"===e)return!0;continue}let t=r[c];if(L(r[c])&&S(r[c-1])?t=r[c-1]+r[c]:S(r[c])&&L(r[c+1])&&(t=r[c]+r[c+1]),!n.i&&n.trimCharsBeforeMatching.includes(t)||n.i&&n.trimCharsBeforeMatching.map(r=>r.toLowerCase()).includes(t.toLowerCase())){if(2===t.length&&(c-=1),a&&"EOL"===e&&0===c)return!0;continue}let i=e[o-1];if(L(i)&&(i=`${e[o-2]}${e[o-1]}`,o-=1,c-=1),!(!n.i&&t===i||n.i&&t.toLowerCase()===i.toLowerCase()))return!1;if((o-=1)<1)return c>=0?c:0}return o>0?!(!a||"EOL"!==c):void 0}function W(r,t,e,n){return function(r,t,e,n,a){const o=Object.assign({},{i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],relaxedApi:!1},a);var i;let u,s,f,h;if(o.trimCharsBeforeMatching="string"==typeof(i=o.trimCharsBeforeMatching)?i.length>0?[i]:[]:i,o.trimCharsBeforeMatching=o.trimCharsBeforeMatching.map(r=>k(r)?r:String(r)),o.trimCharsBeforeMatching.some((r,t)=>r.length>1&&!D(r)&&(u=t,s=r,!0)))throw new Error(`string-match-left-right/${r}(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ${u} is longer than 1 character, ${s.length} (equals to ${s}). Please split it into separate characters and put into array as separate elements.`);if(!k(t)){if(o.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_01] the first argument should be a string. Currently it's of a type: ${typeof t}, equal to:\n${JSON.stringify(t,null,4)}`)}if(0===t.length){if(o.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_02] the first argument should be a non-empty string. Currently it's empty!`)}if(!c(e,{includeZero:!0})){if(o.relaxedApi)return!1;throw new Error(`string-match-left-right/${r}(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ${typeof e}, equal to:\n${JSON.stringify(e,null,4)}`)}if(k(n))f=[n];else if(P(n))f=n;else if(M(n)){if(!j(n))throw new Error(`string-match-left-right/${r}(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ${typeof n}, equal to:\n${JSON.stringify(n,null,4)}`);(f=[]).push(n)}else f=n;if(M(a)&&!m(a))throw new Error(`string-match-left-right/${r}(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type "${typeof a}", and equal to:\n${JSON.stringify(a,null,4)}`);if(!M(f)||!P(f)||P(f)&&!f.length||P(f)&&1===f.length&&k(f[0])&&0===f[0].trim().length){if("function"==typeof o.cb){let n,a=e;if("matchRight"===r&&S(t[e])&&L(t[e+1])&&(a+=1),"matchLeftIncl"!==r&&"matchRight"!==r||(a+=1),r.startsWith("matchLeft"))for(let r=a;r--;){if(L(t[r])&&S(t[r-1]))continue;let e=t[r];if(S(t[r])&&L(t[r+1])&&(e=t[r]+t[r+1]),(!o.trimBeforeMatching||o.trimBeforeMatching&&void 0!==e&&""!==e.trim())&&(0===o.trimCharsBeforeMatching.length||void 0!==e&&!o.trimCharsBeforeMatching.includes(e))){n=r;break}L(t[r-1])&&S(t[r-2])&&(r-=1)}else if(r.startsWith("matchRight"))for(let r=a;r<t.length;r++){let e=t[r];if(S(t[r])&&L(t[r+1])&&(e=t[r]+t[r+1]),(!o.trimBeforeMatching||o.trimBeforeMatching&&""!==e.trim())&&(0===o.trimCharsBeforeMatching.length||!o.trimCharsBeforeMatching.includes(e))){n=r;break}S(t[r])&&L(t[r+1])&&(r+=1)}if(void 0===n)return!1;let c=t[n];S(t[n])&&L(t[n+1])&&(c=t[n]+t[n+1]),L(t[n])&&S(t[n-1])&&(c=t[n-1]+t[n],n-=1);let i,u=n+1;return S(t[n])&&L(t[n+1])&&(u+=1),u&&u>0&&(i=t.slice(0,u)),r.startsWith("matchLeft")?o.cb(c,i,n):(n&&n>0&&(i=t.slice(n)),o.cb(c,i,n))}let n="";throw M(a)||(n=" More so, the whole options object, the fourth input argument, is missing!"),new Error(`string-match-left-right/${r}(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!${n}`)}if(r.startsWith("matchLeft")){for(let n=0,a=f.length;n<a;n++){h="function"==typeof f[n];const a=f[n];let c=e;"matchLeft"===r&&(D(t[n-1])&&D(t[n-2])?c-=2:c-=1);const i=H(t,c,a,o,h);if(i&&h&&"function"==typeof a&&"EOL"===a())return!(!a()||o.cb&&!o.cb(s,d,u))&&a();let u,s,d="";if(M(i)&&i>0&&(s=t[u=i-1],d=t.slice(0,i)),L(t[u])&&M(t[u-1])&&S(t[u-1])&&(s=t[(u-=1)-1]+t[u]),S(t[u])&&M(t[u+1])&&L(t[u+1])&&(s=t[u]+t[u+1],d=t.slice(0,u+2)),!1!==i&&(!o.cb||o.cb(s,d,u)))return a}return!1}for(let n=0,a=f.length;n<a;n++){h="function"==typeof f[n];const a=f[n];let c=e+("matchRight"===r?1:0);"matchRight"===r&&S(t[c-1])&&L(t[c])&&(c+=1);const i=$(t,c,a,o,h);if(i&&h&&"function"==typeof a&&"EOL"===a()){let r,t,e;return!(!a()||o.cb&&!o.cb(r,t,e))&&a()}let u,s,d;if(M(i)&&M(t[i+a.length-1])&&(s=t[u=i+a.length],S(t[u])&&L(t[u+1])&&(s=t[u]+t[u+1])),M(u)&&u>=0&&(d=t.slice(u)),!1!==i&&(!o.cb||o.cb(s,d,u)))return a}return!1}("matchRight",r,t,e,n)}var U=function(r,t){return r(t={exports:{}},t.exports),t.exports}((function(r,t){var e=200,n="__lodash_hash_undefined__",a=9007199254740991,c="[object Arguments]",o="[object Boolean]",i="[object Date]",u="[object Function]",s="[object GeneratorFunction]",f="[object Map]",h="[object Number]",d="[object Object]",l="[object RegExp]",g="[object Set]",p="[object String]",m="[object Symbol]",x="[object ArrayBuffer]",y="[object DataView]",A="[object Float32Array]",T="[object Float64Array]",v="[object Int8Array]",E="[object Int16Array]",I="[object Int32Array]",C="[object Uint8Array]",O="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",F=/\w*$/,B=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,N={};N[c]=N["[object Array]"]=N[x]=N[y]=N[o]=N[i]=N[A]=N[T]=N[v]=N[E]=N[I]=N[f]=N[h]=N[d]=N[l]=N[g]=N[p]=N[m]=N[C]=N[O]=N[w]=N[_]=!0,N["[object Error]"]=N[u]=N["[object WeakMap]"]=!1;var j="object"==typeof b&&b&&b.Object===Object&&b,S="object"==typeof self&&self&&self.Object===Object&&self,L=j||S||Function("return this")(),P=t&&!t.nodeType&&t,M=P&&r&&!r.nodeType&&r,k=M&&M.exports===P;function D(r,t){return r.set(t[0],t[1]),r}function $(r,t){return r.add(t),r}function H(r,t,e,n){var a=-1,c=r?r.length:0;for(n&&c&&(e=r[++a]);++a<c;)e=t(e,r[a],a,r);return e}function W(r){var t=!1;if(null!=r&&"function"!=typeof r.toString)try{t=!!(r+"")}catch(r){}return t}function U(r){var t=-1,e=Array(r.size);return r.forEach((function(r,n){e[++t]=[n,r]})),e}function G(r,t){return function(e){return r(t(e))}}function q(r){var t=-1,e=Array(r.size);return r.forEach((function(r){e[++t]=r})),e}var K,z=Array.prototype,J=Function.prototype,V=Object.prototype,Z=L["__core-js_shared__"],Q=(K=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",X=J.toString,Y=V.hasOwnProperty,rr=V.toString,tr=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=k?L.Buffer:void 0,nr=L.Symbol,ar=L.Uint8Array,cr=G(Object.getPrototypeOf,Object),or=Object.create,ir=V.propertyIsEnumerable,ur=z.splice,sr=Object.getOwnPropertySymbols,fr=er?er.isBuffer:void 0,hr=G(Object.keys,Object),dr=Mr(L,"DataView"),lr=Mr(L,"Map"),gr=Mr(L,"Promise"),pr=Mr(L,"Set"),mr=Mr(L,"WeakMap"),br=Mr(Object,"create"),xr=Wr(dr),yr=Wr(lr),Ar=Wr(gr),Tr=Wr(pr),vr=Wr(mr),Er=nr?nr.prototype:void 0,Ir=Er?Er.valueOf:void 0;function Cr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function Or(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function wr(r){var t=-1,e=r?r.length:0;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}function _r(r){this.__data__=new Or(r)}function Fr(r,t){var e=Gr(r)||function(r){return function(r){return function(r){return!!r&&"object"==typeof r}(r)&&qr(r)}(r)&&Y.call(r,"callee")&&(!ir.call(r,"callee")||rr.call(r)==c)}(r)?function(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}(r.length,String):[],n=e.length,a=!!n;for(var o in r)!t&&!Y.call(r,o)||a&&("length"==o||$r(o,n))||e.push(o);return e}function Br(r,t,e){var n=r[t];Y.call(r,t)&&Ur(n,e)&&(void 0!==e||t in r)||(r[t]=e)}function Rr(r,t){for(var e=r.length;e--;)if(Ur(r[e][0],t))return e;return-1}function Nr(r,t,e,n,a,b,B){var R;if(n&&(R=b?n(r,a,b,B):n(r)),void 0!==R)return R;if(!Jr(r))return r;var j=Gr(r);if(j){if(R=function(r){var t=r.length,e=r.constructor(t);t&&"string"==typeof r[0]&&Y.call(r,"index")&&(e.index=r.index,e.input=r.input);return e}(r),!t)return function(r,t){var e=-1,n=r.length;t||(t=Array(n));for(;++e<n;)t[e]=r[e];return t}(r,R)}else{var S=Dr(r),L=S==u||S==s;if(Kr(r))return function(r,t){if(t)return r.slice();var e=new r.constructor(r.length);return r.copy(e),e}(r,t);if(S==d||S==c||L&&!b){if(W(r))return b?r:{};if(R=function(r){return"function"!=typeof r.constructor||Hr(r)?{}:(t=cr(r),Jr(t)?or(t):{});var t}(L?{}:r),!t)return function(r,t){return Lr(r,kr(r),t)}(r,function(r,t){return r&&Lr(t,Vr(t),r)}(R,r))}else{if(!N[S])return b?r:{};R=function(r,t,e,n){var a=r.constructor;switch(t){case x:return Sr(r);case o:case i:return new a(+r);case y:return function(r,t){var e=t?Sr(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}(r,n);case A:case T:case v:case E:case I:case C:case O:case w:case _:return function(r,t){var e=t?Sr(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}(r,n);case f:return function(r,t,e){return H(t?e(U(r),!0):U(r),D,new r.constructor)}(r,n,e);case h:case p:return new a(r);case l:return(s=new(u=r).constructor(u.source,F.exec(u))).lastIndex=u.lastIndex,s;case g:return function(r,t,e){return H(t?e(q(r),!0):q(r),$,new r.constructor)}(r,n,e);case m:return c=r,Ir?Object(Ir.call(c)):{}}var c;var u,s}(r,S,Nr,t)}}B||(B=new _r);var P=B.get(r);if(P)return P;if(B.set(r,R),!j)var M=e?function(r){return function(r,t,e){var n=t(r);return Gr(r)?n:function(r,t){for(var e=-1,n=t.length,a=r.length;++e<n;)r[a+e]=t[e];return r}(n,e(r))}(r,Vr,kr)}(r):Vr(r);return function(r,t){for(var e=-1,n=r?r.length:0;++e<n&&!1!==t(r[e],e,r););}(M||r,(function(a,c){M&&(a=r[c=a]),Br(R,c,Nr(a,t,e,n,c,r,B))})),R}function jr(r){return!(!Jr(r)||function(r){return!!Q&&Q in r}(r))&&(zr(r)||W(r)?tr:B).test(Wr(r))}function Sr(r){var t=new r.constructor(r.byteLength);return new ar(t).set(new ar(r)),t}function Lr(r,t,e,n){e||(e={});for(var a=-1,c=t.length;++a<c;){var o=t[a],i=n?n(e[o],r[o],o,e,r):void 0;Br(e,o,void 0===i?r[o]:i)}return e}function Pr(r,t){var e,n,a=r.__data__;return("string"==(n=typeof(e=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?a["string"==typeof t?"string":"hash"]:a.map}function Mr(r,t){var e=function(r,t){return null==r?void 0:r[t]}(r,t);return jr(e)?e:void 0}Cr.prototype.clear=function(){this.__data__=br?br(null):{}},Cr.prototype.delete=function(r){return this.has(r)&&delete this.__data__[r]},Cr.prototype.get=function(r){var t=this.__data__;if(br){var e=t[r];return e===n?void 0:e}return Y.call(t,r)?t[r]:void 0},Cr.prototype.has=function(r){var t=this.__data__;return br?void 0!==t[r]:Y.call(t,r)},Cr.prototype.set=function(r,t){return this.__data__[r]=br&&void 0===t?n:t,this},Or.prototype.clear=function(){this.__data__=[]},Or.prototype.delete=function(r){var t=this.__data__,e=Rr(t,r);return!(e<0)&&(e==t.length-1?t.pop():ur.call(t,e,1),!0)},Or.prototype.get=function(r){var t=this.__data__,e=Rr(t,r);return e<0?void 0:t[e][1]},Or.prototype.has=function(r){return Rr(this.__data__,r)>-1},Or.prototype.set=function(r,t){var e=this.__data__,n=Rr(e,r);return n<0?e.push([r,t]):e[n][1]=t,this},wr.prototype.clear=function(){this.__data__={hash:new Cr,map:new(lr||Or),string:new Cr}},wr.prototype.delete=function(r){return Pr(this,r).delete(r)},wr.prototype.get=function(r){return Pr(this,r).get(r)},wr.prototype.has=function(r){return Pr(this,r).has(r)},wr.prototype.set=function(r,t){return Pr(this,r).set(r,t),this},_r.prototype.clear=function(){this.__data__=new Or},_r.prototype.delete=function(r){return this.__data__.delete(r)},_r.prototype.get=function(r){return this.__data__.get(r)},_r.prototype.has=function(r){return this.__data__.has(r)},_r.prototype.set=function(r,t){var n=this.__data__;if(n instanceof Or){var a=n.__data__;if(!lr||a.length<e-1)return a.push([r,t]),this;n=this.__data__=new wr(a)}return n.set(r,t),this};var kr=sr?G(sr,Object):function(){return[]},Dr=function(r){return rr.call(r)};function $r(r,t){return!!(t=null==t?a:t)&&("number"==typeof r||R.test(r))&&r>-1&&r%1==0&&r<t}function Hr(r){var t=r&&r.constructor;return r===("function"==typeof t&&t.prototype||V)}function Wr(r){if(null!=r){try{return X.call(r)}catch(r){}try{return r+""}catch(r){}}return""}function Ur(r,t){return r===t||r!=r&&t!=t}(dr&&Dr(new dr(new ArrayBuffer(1)))!=y||lr&&Dr(new lr)!=f||gr&&"[object Promise]"!=Dr(gr.resolve())||pr&&Dr(new pr)!=g||mr&&"[object WeakMap]"!=Dr(new mr))&&(Dr=function(r){var t=rr.call(r),e=t==d?r.constructor:void 0,n=e?Wr(e):void 0;if(n)switch(n){case xr:return y;case yr:return f;case Ar:return"[object Promise]";case Tr:return g;case vr:return"[object WeakMap]"}return t});var Gr=Array.isArray;function qr(r){return null!=r&&function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=a}(r.length)&&!zr(r)}var Kr=fr||function(){return!1};function zr(r){var t=Jr(r)?rr.call(r):"";return t==u||t==s}function Jr(r){var t=typeof r;return!!r&&("object"==t||"function"==t)}function Vr(r){return qr(r)?Fr(r):function(r){if(!Hr(r))return hr(r);var t=[];for(var e in Object(r))Y.call(r,e)&&"constructor"!=e&&t.push(e);return t}(r)}r.exports=function(r){return Nr(r,!0,!0)}}));function G(r,t){return function(r,t,e){if("string"!=typeof r||!r.length)return null;if(t&&"number"==typeof t||(t=0),!r[t+1])return null;if(r[t+1]&&(!e&&r[t+1].trim().length||e&&(r[t+1].trim().length||"\n\r".includes(r[t+1]))))return t+1;if(r[t+2]&&(!e&&r[t+2].trim().length||e&&(r[t+2].trim().length||"\n\r".includes(r[t+2]))))return t+2;for(let n=t+1,a=r.length;n<a;n++)if(r[n]&&(!e&&r[n].trim().length||e&&(r[n].trim().length||"\n\r".includes(r[n]))))return n;return null}(r,t,!1)}function q(r,t){return function(r,t,e){if("string"!=typeof r||!r.length)return null;if(t&&"number"==typeof t||(t=0),t<1)return null;if(r[t-1]&&(!e&&r[t-1].trim().length||e&&(r[t-1].trim().length||"\n\r".includes(r[t-1]))))return t-1;if(r[t-2]&&(!e&&r[t-2].trim().length||e&&(r[t-2].trim().length||"\n\r".includes(r[t-2]))))return t-2;for(let n=t;n--;)if(r[n]&&(!e&&r[n].trim().length||e&&(r[n].trim().length||"\n\r".includes(r[n]))))return n;return null}(r,t,!1)}const K=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"];function z(r){return void 0===r||"string"==typeof r&&""===r.trim()}function J(r,t=0){const e=t?r.slice(t):r;let n=!1;return/^<\s*\w+\s*\/?\s*>/g.test(e)?n=!0:/^<\s*\w+\s+\w+\s*=\s*['"]/g.test(e)?n=!0:/^<\s*\/?\s*\w+\s*\/?\s*>/g.test(e)?n=!0:/^<\s*\w+(?:\s*\w+)*\s*\w+=['"]/g.test(e)?n=!0:"<"===r[t]&&r[t+1]&&r[t+1].trim().length&&W(r,t,K,{cb:z})&&(n=!0),"string"==typeof r&&t<r.length&&n}function V(r){return"string"==typeof r}function Z(r){return"number"==typeof r}function Q(r){return V(r)&&1===r.length&&(r.charCodeAt(0)>64&&r.charCodeAt(0)<91||r.charCodeAt(0)>96&&r.charCodeAt(0)<123)}function X(r){let t="";for(let e=0,n=r.length;e<n;e++)t="{"===r[e]?`}${t}`:"("===r[e]?`)${t}`:`${r[e]}${t}`;return t}const Y={reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100},rr="{}%-$_()*|";var tr=(r,t,e)=>{const n=e=>Object.defineProperty(r,t,{value:e,enumerable:!0,writable:!0});return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get(){const r=e();return n(r),r},set(r){n(r)}}),r};function er(r){return{character:function(t,e){0===t.charCodeAt(0)&&r.report({ruleId:"bad-character-null",message:"Bad character - NULL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function nr(r){return{character:function(t,e){1===t.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-heading",message:"Bad character - START OF HEADING.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ar(r){return{character:function(t,e){2===t.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-text",message:"Bad character - START OF TEXT.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function cr(r){return{character:function(t,e){3===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-text",message:"Bad character - END OF TEXT.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1,"\n"]]}})}}}function or(r){return{character:function(t,e){4===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-transmission",message:"Bad character - END OF TRANSMISSION.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ir(r){return{character:function(t,e){5===t.charCodeAt(0)&&r.report({ruleId:"bad-character-enquiry",message:"Bad character - ENQUIRY.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ur(r){return{character:function(t,e){6===t.charCodeAt(0)&&r.report({ruleId:"bad-character-acknowledge",message:"Bad character - ACKNOWLEDGE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function sr(r){return{character:function(t,e){7===t.charCodeAt(0)&&r.report({ruleId:"bad-character-bell",message:"Bad character - BELL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function fr(r){return{character:function(t,e){8===t.charCodeAt(0)&&r.report({ruleId:"bad-character-backspace",message:"Bad character - BACKSPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function hr(r){return{character:function(t,e){9===t.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation",message:"Bad character - TABULATION.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function dr(r){return{character:function(t,e){11===t.charCodeAt(0)&&r.report({ruleId:"bad-character-line-tabulation",message:"Bad character - LINE TABULATION.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function lr(r){return{character:function(t,e){12===t.charCodeAt(0)&&r.report({ruleId:"bad-character-form-feed",message:"Bad character - FORM FEED.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function gr(r){return{character:function(t,e){14===t.charCodeAt(0)&&r.report({ruleId:"bad-character-shift-out",message:"Bad character - SHIFT OUT.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function pr(r){return{character:function(t,e){15===t.charCodeAt(0)&&r.report({ruleId:"bad-character-shift-in",message:"Bad character - SHIFT IN.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function mr(r){return{character:function(t,e){16===t.charCodeAt(0)&&r.report({ruleId:"bad-character-data-link-escape",message:"Bad character - DATA LINK ESCAPE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function br(r){return{character:function(t,e){17===t.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-one",message:"Bad character - DEVICE CONTROL ONE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function xr(r){return{character:function(t,e){18===t.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-two",message:"Bad character - DEVICE CONTROL TWO.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function yr(r){return{character:function(t,e){19===t.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-three",message:"Bad character - DEVICE CONTROL THREE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Ar(r){return{character:function(t,e){20===t.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-four",message:"Bad character - DEVICE CONTROL FOUR.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Tr(r){return{character:function(t,e){21===t.charCodeAt(0)&&r.report({ruleId:"bad-character-negative-acknowledge",message:"Bad character - NEGATIVE ACKNOWLEDGE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function vr(r){return{character:function(t,e){22===t.charCodeAt(0)&&r.report({ruleId:"bad-character-synchronous-idle",message:"Bad character - SYNCHRONOUS IDLE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Er(r){return{character:function(t,e){23===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-transmission-block",message:"Bad character - END OF TRANSMISSION BLOCK.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Ir(r){return{character:function(t,e){24===t.charCodeAt(0)&&r.report({ruleId:"bad-character-cancel",message:"Bad character - CANCEL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Cr(r){return{character:function(t,e){25===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-medium",message:"Bad character - END OF MEDIUM.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Or(r){return{character:function(t,e){26===t.charCodeAt(0)&&r.report({ruleId:"bad-character-substitute",message:"Bad character - SUBSTITUTE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function wr(r){return{character:function(t,e){27===t.charCodeAt(0)&&r.report({ruleId:"bad-character-escape",message:"Bad character - ESCAPE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function _r(r){return{character:function(t,e){28===t.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-four",message:"Bad character - INFORMATION SEPARATOR FOUR.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Fr(r){return{character:function(t,e){29===t.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-three",message:"Bad character - INFORMATION SEPARATOR THREE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Br(r){return{character:function(t,e){30===t.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-two",message:"Bad character - INFORMATION SEPARATOR TWO.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Rr(r){return{character:function(t,e){31===t.charCodeAt(0)&&r.report({ruleId:"bad-character-information-separator-one",message:"Bad character - INFORMATION SEPARATOR ONE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Nr(r){return{character:function(t,e){127===t.charCodeAt(0)&&r.report({ruleId:"bad-character-delete",message:"Bad character - DELETE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function jr(r){return{character:function(t,e){128===t.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0080",message:"Bad character - CONTROL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Sr(r){return{character:function(t,e){129===t.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0081",message:"Bad character - CONTROL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Lr(r){return{character:function(t,e){130===t.charCodeAt(0)&&r.report({ruleId:"bad-character-break-permitted-here",message:"Bad character - BREAK PERMITTED HERE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Pr(r){return{character:function(t,e){131===t.charCodeAt(0)&&r.report({ruleId:"bad-character-no-break-here",message:"Bad character - NO BREAK HERE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Mr(r){return{character:function(t,e){132===t.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0084",message:"Bad character - CONTROL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function kr(r){return{character:function(t,e){133===t.charCodeAt(0)&&r.report({ruleId:"bad-character-next-line",message:"Bad character - NEXT LINE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Dr(r){return{character:function(t,e){134===t.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-selected-area",message:"Bad character - START OF SELECTED AREA.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function $r(r){return{character:function(t,e){135===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-selected-area",message:"Bad character - END OF SELECTED AREA.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Hr(r){return{character:function(t,e){136===t.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation-set",message:"Bad character - CHARACTER TABULATION SET.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Wr(r){return{character:function(t,e){137===t.charCodeAt(0)&&r.report({ruleId:"bad-character-character-tabulation-with-justification",message:"Bad character - CHARACTER TABULATION WITH JUSTIFICATION.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Ur(r){return{character:function(t,e){138===t.charCodeAt(0)&&r.report({ruleId:"bad-character-line-tabulation-set",message:"Bad character - LINE TABULATION SET.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Gr(r){return{character:function(t,e){139===t.charCodeAt(0)&&r.report({ruleId:"bad-character-partial-line-forward",message:"Bad character - PARTIAL LINE FORWARD.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function qr(r){return{character:function(t,e){140===t.charCodeAt(0)&&r.report({ruleId:"bad-character-partial-line-backward",message:"Bad character - PARTIAL LINE BACKWARD.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Kr(r){return{character:function(t,e){141===t.charCodeAt(0)&&r.report({ruleId:"bad-character-reverse-line-feed",message:"Bad character - REVERSE LINE FEED.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function zr(r){return{character:function(t,e){142===t.charCodeAt(0)&&r.report({ruleId:"bad-character-single-shift-two",message:"Bad character - SINGLE SHIFT TWO.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Jr(r){return{character:function(t,e){143===t.charCodeAt(0)&&r.report({ruleId:"bad-character-single-shift-three",message:"Bad character - SINGLE SHIFT THREE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Vr(r){return{character:function(t,e){144===t.charCodeAt(0)&&r.report({ruleId:"bad-character-device-control-string",message:"Bad character - DEVICE CONTROL STRING.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Zr(r){return{character:function(t,e){145===t.charCodeAt(0)&&r.report({ruleId:"bad-character-private-use-1",message:"Bad character - PRIVATE USE ONE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Qr(r){return{character:function(t,e){146===t.charCodeAt(0)&&r.report({ruleId:"bad-character-private-use-2",message:"Bad character - PRIVATE USE TWO.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Xr(r){return{character:function(t,e){147===t.charCodeAt(0)&&r.report({ruleId:"bad-character-set-transmit-state",message:"Bad character - SET TRANSMIT STATE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Yr(r){return{character:function(t,e){148===t.charCodeAt(0)&&r.report({ruleId:"bad-character-cancel-character",message:"Bad character - CANCEL CHARACTER.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function rt(r){return{character:function(t,e){149===t.charCodeAt(0)&&r.report({ruleId:"bad-character-message-waiting",message:"Bad character - MESSAGE WAITING.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function tt(r){return{character:function(t,e){150===t.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-protected-area",message:"Bad character - START OF PROTECTED AREA.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function et(r){return{character:function(t,e){151===t.charCodeAt(0)&&r.report({ruleId:"bad-character-end-of-protected-area",message:"Bad character - END OF PROTECTED AREA.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function nt(r){return{character:function(t,e){152===t.charCodeAt(0)&&r.report({ruleId:"bad-character-start-of-string",message:"Bad character - START OF STRING.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function at(r){return{character:function(t,e){153===t.charCodeAt(0)&&r.report({ruleId:"bad-character-control-0099",message:"Bad character - CONTROL.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ct(r){return{character:function(t,e){154===t.charCodeAt(0)&&r.report({ruleId:"bad-character-single-character-introducer",message:"Bad character - SINGLE CHARACTER INTRODUCER.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ot(r){return{character:function(t,e){155===t.charCodeAt(0)&&r.report({ruleId:"bad-character-control-sequence-introducer",message:"Bad character - CONTROL SEQUENCE INTRODUCER.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function it(r){return{character:function(t,e){156===t.charCodeAt(0)&&r.report({ruleId:"bad-character-string-terminator",message:"Bad character - STRING TERMINATOR.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ut(r){return{character:function(t,e){157===t.charCodeAt(0)&&r.report({ruleId:"bad-character-operating-system-command",message:"Bad character - OPERATING SYSTEM COMMAND.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function st(r){return{character:function(t,e){158===t.charCodeAt(0)&&r.report({ruleId:"bad-character-private-message",message:"Bad character - PRIVATE MESSAGE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ft(r){return{character:function(t,e){159===t.charCodeAt(0)&&r.report({ruleId:"bad-character-application-program-command",message:"Bad character - APPLICATION PROGRAM COMMAND.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function ht(r){return{character:function(t,e){173===t.charCodeAt(0)&&r.report({ruleId:"bad-character-soft-hyphen",message:"Bad character - SOFT HYPHEN.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function dt(r){return{character:function(t,e){160===t.charCodeAt(0)&&r.report({ruleId:"bad-character-non-breaking-space",message:"Bad character - NON-BREAKING SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function lt(r){return{character:function(t,e){5760===t.charCodeAt(0)&&r.report({ruleId:"bad-character-ogham-space-mark",message:"Bad character - OGHAM SPACE MARK.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function gt(r){return{character:function(t,e){8192===t.charCodeAt(0)&&r.report({ruleId:"bad-character-en-quad",message:"Bad character - EN QUAD.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function pt(r){return{character:function(t,e){8193===t.charCodeAt(0)&&r.report({ruleId:"bad-character-em-quad",message:"Bad character - EM QUAD.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function mt(r){return{character:function(t,e){8194===t.charCodeAt(0)&&r.report({ruleId:"bad-character-en-space",message:"Bad character - EN SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function bt(r){return{character:function(t,e){8195===t.charCodeAt(0)&&r.report({ruleId:"bad-character-em-space",message:"Bad character - EM SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function xt(r){return{character:function(t,e){8196===t.charCodeAt(0)&&r.report({ruleId:"bad-character-three-per-em-space",message:"Bad character - THREE-PER-EM SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function yt(r){return{character:function(t,e){8197===t.charCodeAt(0)&&r.report({ruleId:"bad-character-four-per-em-space",message:"Bad character - FOUR-PER-EM SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function At(r){return{character:function(t,e){8198===t.charCodeAt(0)&&r.report({ruleId:"bad-character-six-per-em-space",message:"Bad character - SIX-PER-EM SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Tt(r){return{character:function(t,e){8199===t.charCodeAt(0)&&r.report({ruleId:"bad-character-figure-space",message:"Bad character - FIGURE SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function vt(r){return{character:function(t,e){8200===t.charCodeAt(0)&&r.report({ruleId:"bad-character-punctuation-space",message:"Bad character - PUNCTUATION SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Et(r){return{character:function(t,e){8201===t.charCodeAt(0)&&r.report({ruleId:"bad-character-thin-space",message:"Bad character - THIN SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function It(r){return{character:function(t,e){8202===t.charCodeAt(0)&&r.report({ruleId:"bad-character-hair-space",message:"Bad character - HAIR SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Ct(r){return{character:function(t,e){8203===t.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-space",message:"Bad character - ZERO WIDTH SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Ot(r){return{character:function(t,e){8204===t.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-non-joiner",message:"Bad character - ZERO WIDTH NON-JOINER.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function wt(r){return{character:function(t,e){8205===t.charCodeAt(0)&&r.report({ruleId:"bad-character-zero-width-joiner",message:"Bad character - ZERO WIDTH JOINER.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function _t(r){return{character:function(t,e){8206===t.charCodeAt(0)&&r.report({ruleId:"bad-character-left-to-right-mark",message:"Bad character - LEFT-TO-RIGHT MARK.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Ft(r){return{character:function(t,e){8207===t.charCodeAt(0)&&r.report({ruleId:"bad-character-right-to-left-mark",message:"Bad character - RIGHT-TO-LEFT MARK.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1]]}})}}}function Bt(r){return{character:function(t,e){8239===t.charCodeAt(0)&&r.report({ruleId:"bad-character-narrow-no-break-space",message:"Bad character - NARROW NO-BREAK SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Rt(r){return{character:function(t,e){8287===t.charCodeAt(0)&&r.report({ruleId:"bad-character-medium-mathematical-space",message:"Bad character - MEDIUM MATHEMATICAL SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function Nt(r){return{character:function(t,e){12288===t.charCodeAt(0)&&r.report({ruleId:"bad-character-ideographic-space",message:"Bad character - IDEOGRAPHIC SPACE.",idxFrom:e,idxTo:e+1,fix:{ranges:[[e,e+1," "]]}})}}}function jt(r){return{html:function(t){var e=r.str.slice(t.start+1,t.tagNameStartAt);if(t.tagNameStartAt>t.start+1&&(!e.trim().length||"/"!==e&&"/"===e.trim())){var n=[];-1!==e.indexOf("/")?(t.start+1+e.indexOf("/")>t.start+1&&n.push([t.start+1,t.start+1+e.indexOf("/")]),t.start+1+e.indexOf("/")<t.tagNameStartAt-1&&n.push([t.start+1+e.indexOf("/")+1,t.tagNameStartAt])):n.push([t.start+1+e.indexOf("/")+1,t.tagNameStartAt]),r.report({ruleId:"tag-space-after-opening-bracket",message:"Bad whitespace.",idxFrom:n[0][0],idxTo:n[n.length-1][1],fix:{ranges:n}})}}}}var St={};function Lt(){}function Pt(){Pt.init.call(this)}function Mt(r){return void 0===r._maxListeners?Pt.defaultMaxListeners:r._maxListeners}function kt(r,t,e){if(t)r.call(e);else for(var n=r.length,a=Kt(r,n),c=0;c<n;++c)a[c].call(e)}function Dt(r,t,e,n){if(t)r.call(e,n);else for(var a=r.length,c=Kt(r,a),o=0;o<a;++o)c[o].call(e,n)}function $t(r,t,e,n,a){if(t)r.call(e,n,a);else for(var c=r.length,o=Kt(r,c),i=0;i<c;++i)o[i].call(e,n,a)}function Ht(r,t,e,n,a,c){if(t)r.call(e,n,a,c);else for(var o=r.length,i=Kt(r,o),u=0;u<o;++u)i[u].call(e,n,a,c)}function Wt(r,t,e,n){if(t)r.apply(e,n);else for(var a=r.length,c=Kt(r,a),o=0;o<a;++o)c[o].apply(e,n)}function Ut(r,t,e,n){var a,c,o,i;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if((c=r._events)?(c.newListener&&(r.emit("newListener",t,e.listener?e.listener:e),c=r._events),o=c[t]):(c=r._events=new Lt,r._eventsCount=0),o){if("function"==typeof o?o=c[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),!o.warned&&(a=Mt(r))&&a>0&&o.length>a){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=t,u.count=o.length,i=u,"function"==typeof console.warn?console.warn(i):console.log(i)}}else o=c[t]=e,++r._eventsCount;return r}function Gt(r,t,e){var n=!1;function a(){r.removeListener(t,a),n||(n=!0,e.apply(r,arguments))}return a.listener=e,a}function qt(r){var t=this._events;if(t){var e=t[r];if("function"==typeof e)return 1;if(e)return e.length}return 0}function Kt(r,t){for(var e=new Array(t);t--;)e[t]=r[t];return e}tr(St,"bad-character-null",(function(){return er})),tr(St,"bad-character-start-of-heading",(function(){return nr})),tr(St,"bad-character-start-of-text",(function(){return ar})),tr(St,"bad-character-end-of-text",(function(){return cr})),tr(St,"bad-character-end-of-transmission",(function(){return or})),tr(St,"bad-character-enquiry",(function(){return ir})),tr(St,"bad-character-acknowledge",(function(){return ur})),tr(St,"bad-character-bell",(function(){return sr})),tr(St,"bad-character-backspace",(function(){return fr})),tr(St,"bad-character-character-tabulation",(function(){return hr})),tr(St,"bad-character-line-tabulation",(function(){return dr})),tr(St,"bad-character-form-feed",(function(){return lr})),tr(St,"bad-character-shift-out",(function(){return gr})),tr(St,"bad-character-shift-in",(function(){return pr})),tr(St,"bad-character-data-link-escape",(function(){return mr})),tr(St,"bad-character-device-control-one",(function(){return br})),tr(St,"bad-character-device-control-two",(function(){return xr})),tr(St,"bad-character-device-control-three",(function(){return yr})),tr(St,"bad-character-device-control-four",(function(){return Ar})),tr(St,"bad-character-negative-acknowledge",(function(){return Tr})),tr(St,"bad-character-synchronous-idle",(function(){return vr})),tr(St,"bad-character-end-of-transmission-block",(function(){return Er})),tr(St,"bad-character-cancel",(function(){return Ir})),tr(St,"bad-character-end-of-medium",(function(){return Cr})),tr(St,"bad-character-substitute",(function(){return Or})),tr(St,"bad-character-escape",(function(){return wr})),tr(St,"bad-character-information-separator-four",(function(){return _r})),tr(St,"bad-character-information-separator-three",(function(){return Fr})),tr(St,"bad-character-information-separator-two",(function(){return Br})),tr(St,"bad-character-information-separator-one",(function(){return Rr})),tr(St,"bad-character-delete",(function(){return Nr})),tr(St,"bad-character-control-0080",(function(){return jr})),tr(St,"bad-character-control-0081",(function(){return Sr})),tr(St,"bad-character-break-permitted-here",(function(){return Lr})),tr(St,"bad-character-no-break-here",(function(){return Pr})),tr(St,"bad-character-control-0084",(function(){return Mr})),tr(St,"bad-character-next-line",(function(){return kr})),tr(St,"bad-character-start-of-selected-area",(function(){return Dr})),tr(St,"bad-character-end-of-selected-area",(function(){return $r})),tr(St,"bad-character-character-tabulation-set",(function(){return Hr})),tr(St,"bad-character-character-tabulation-with-justification",(function(){return Wr})),tr(St,"bad-character-line-tabulation-set",(function(){return Ur})),tr(St,"bad-character-partial-line-forward",(function(){return Gr})),tr(St,"bad-character-partial-line-backward",(function(){return qr})),tr(St,"bad-character-reverse-line-feed",(function(){return Kr})),tr(St,"bad-character-single-shift-two",(function(){return zr})),tr(St,"bad-character-single-shift-three",(function(){return Jr})),tr(St,"bad-character-device-control-string",(function(){return Vr})),tr(St,"bad-character-private-use-1",(function(){return Zr})),tr(St,"bad-character-private-use-2",(function(){return Qr})),tr(St,"bad-character-set-transmit-state",(function(){return Xr})),tr(St,"bad-character-cancel-character",(function(){return Yr})),tr(St,"bad-character-message-waiting",(function(){return rt})),tr(St,"bad-character-start-of-protected-area",(function(){return tt})),tr(St,"bad-character-end-of-protected-area",(function(){return et})),tr(St,"bad-character-start-of-string",(function(){return nt})),tr(St,"bad-character-control-0099",(function(){return at})),tr(St,"bad-character-single-character-introducer",(function(){return ct})),tr(St,"bad-character-control-sequence-introducer",(function(){return ot})),tr(St,"bad-character-string-terminator",(function(){return it})),tr(St,"bad-character-operating-system-command",(function(){return ut})),tr(St,"bad-character-private-message",(function(){return st})),tr(St,"bad-character-application-program-command",(function(){return ft})),tr(St,"bad-character-soft-hyphen",(function(){return ht})),tr(St,"bad-character-non-breaking-space",(function(){return dt})),tr(St,"bad-character-ogham-space-mark",(function(){return lt})),tr(St,"bad-character-en-quad",(function(){return gt})),tr(St,"bad-character-em-quad",(function(){return pt})),tr(St,"bad-character-en-space",(function(){return mt})),tr(St,"bad-character-em-space",(function(){return bt})),tr(St,"bad-character-three-per-em-space",(function(){return xt})),tr(St,"bad-character-four-per-em-space",(function(){return yt})),tr(St,"bad-character-six-per-em-space",(function(){return At})),tr(St,"bad-character-figure-space",(function(){return Tt})),tr(St,"bad-character-punctuation-space",(function(){return vt})),tr(St,"bad-character-thin-space",(function(){return Et})),tr(St,"bad-character-hair-space",(function(){return It})),tr(St,"bad-character-zero-width-space",(function(){return Ct})),tr(St,"bad-character-zero-width-non-joiner",(function(){return Ot})),tr(St,"bad-character-zero-width-joiner",(function(){return wt})),tr(St,"bad-character-left-to-right-mark",(function(){return _t})),tr(St,"bad-character-right-to-left-mark",(function(){return Ft})),tr(St,"bad-character-narrow-no-break-space",(function(){return Bt})),tr(St,"bad-character-medium-mathematical-space",(function(){return Rt})),tr(St,"bad-character-ideographic-space",(function(){return Nt})),tr(St,"tag-space-after-opening-bracket",(function(){return jt})),Lt.prototype=Object.create(null),Pt.EventEmitter=Pt,Pt.usingDomains=!1,Pt.prototype.domain=void 0,Pt.prototype._events=void 0,Pt.prototype._maxListeners=void 0,Pt.defaultMaxListeners=10,Pt.init=function(){this.domain=null,Pt.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Lt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Pt.prototype.setMaxListeners=function(r){if("number"!=typeof r||r<0||isNaN(r))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=r,this},Pt.prototype.getMaxListeners=function(){return Mt(this)},Pt.prototype.emit=function(r){var t,e,n,a,c,o,i,u="error"===r;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(i=this.domain,u){if(t=arguments[1],!i){if(t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=i,t.domainThrown=!1,i.emit("error",t),!1}if(!(e=o[r]))return!1;var f="function"==typeof e;switch(n=arguments.length){case 1:kt(e,f,this);break;case 2:Dt(e,f,this,arguments[1]);break;case 3:$t(e,f,this,arguments[1],arguments[2]);break;case 4:Ht(e,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(n-1),c=1;c<n;c++)a[c-1]=arguments[c];Wt(e,f,this,a)}return!0},Pt.prototype.addListener=function(r,t){return Ut(this,r,t,!1)},Pt.prototype.on=Pt.prototype.addListener,Pt.prototype.prependListener=function(r,t){return Ut(this,r,t,!0)},Pt.prototype.once=function(r,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(r,Gt(this,r,t)),this},Pt.prototype.prependOnceListener=function(r,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(r,Gt(this,r,t)),this},Pt.prototype.removeListener=function(r,t){var e,n,a,c,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(e=n[r]))return this;if(e===t||e.listener&&e.listener===t)0==--this._eventsCount?this._events=new Lt:(delete n[r],n.removeListener&&this.emit("removeListener",r,e.listener||t));else if("function"!=typeof e){for(a=-1,c=e.length;c-- >0;)if(e[c]===t||e[c].listener&&e[c].listener===t){o=e[c].listener,a=c;break}if(a<0)return this;if(1===e.length){if(e[0]=void 0,0==--this._eventsCount)return this._events=new Lt,this;delete n[r]}else!function(r,t){for(var e=t,n=e+1,a=r.length;n<a;e+=1,n+=1)r[e]=r[n];r.pop()}(e,a);n.removeListener&&this.emit("removeListener",r,o||t)}return this},Pt.prototype.removeAllListeners=function(r){var t,e;if(!(e=this._events))return this;if(!e.removeListener)return 0===arguments.length?(this._events=new Lt,this._eventsCount=0):e[r]&&(0==--this._eventsCount?this._events=new Lt:delete e[r]),this;if(0===arguments.length){for(var n,a=Object.keys(e),c=0;c<a.length;++c)"removeListener"!==(n=a[c])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new Lt,this._eventsCount=0,this}if("function"==typeof(t=e[r]))this.removeListener(r,t);else if(t)do{this.removeListener(r,t[t.length-1])}while(t[0]);return this},Pt.prototype.listeners=function(r){var t,e=this._events;return e&&(t=e[r])?"function"==typeof t?[t.listener||t]:function(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}(t):[]},Pt.listenerCount=function(r,t){return"function"==typeof r.listenerCount?r.listenerCount(t):qt.call(r,t)},Pt.prototype.listenerCount=qt,Pt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var zt={}.toString,Jt=Array.isArray||function(r){return"[object Array]"==zt.call(r)},Vt=Zt;function Zt(r,t){if(!(this instanceof Zt))return"number"==typeof t?new Zt(r).fromIndex(t):new Zt(r,t);this.str=r||"",this.lineToIndex=function(r){for(var t=r.split("\n"),e=new Array(t.length),n=0,a=0,c=t.length;a<c;a++)e[a]=n,n+=t[a].length+1;return e}(this.str),t=t||{},this.origin=void 0===t.origin?1:t.origin}Zt.prototype.fromIndex=function(r){if(r<0||r>=this.str.length||isNaN(r))return null;var t=function(r,t){if(r>=t[t.length-1])return t.length-1;var e,n=0,a=t.length-2;for(;n<a;)if(r<t[e=n+(a-n>>1)])a=e-1;else{if(!(r>=t[e+1])){n=e;break}n=e+1}return n}(r,this.lineToIndex);return{line:t+this.origin,col:r-this.lineToIndex[t]+this.origin}},Zt.prototype.toIndex=function(r,t){if(void 0===t)return Jt(r)&&r.length>=2?this.toIndex(r[0],r[1]):null!=(e=r)&&"object"==typeof e&&!1===Jt(e)&&"line"in r&&("col"in r||"column"in r)?this.toIndex(r.line,"col"in r?r.col:r.column):-1;var e;if(isNaN(r)||isNaN(t))return-1;if(r-=this.origin,t-=this.origin,r>=0&&t>=0&&r<this.lineToIndex.length){var n=this.lineToIndex[r];if(t<(r===this.lineToIndex.length-1?this.str.length:this.lineToIndex[r+1])-n)return n+t}return-1};var Qt=function(r){function c(){return function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a(this,e(c).apply(this,arguments))}var o,i,u;return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&n(r,t)}(c,r),o=c,(i=[{key:"verify",value:function(r,t){var e=this;this.messages=[],this.str=r,this.config=t,Object.keys(t.rules).filter((function(r){return"number"==typeof t.rules[r]?t.rules[r]>0:Array.isArray(t.rules[r])?t.rules[r][0]>0:void 0})).forEach((function(r){var t=St[r](e);Object.keys(t).forEach((function(r){e.on(r,(function(){t[r].apply(t,arguments)}))}))}));for(var n=r.length,a=0;a<n;a++)this.emit("character",r[a],a);return function(r,t,e){if(!V(r))throw void 0===r?new Error("codsen-tokenizer: [THROW_ID_01] the first input argument is completely missing! It should be given as string."):new Error(`codsen-tokenizer: [THROW_ID_02] the first input argument must be string! It was given as "${typeof r}", equal to:\n${JSON.stringify(r,null,4)}`);if("function"!=typeof t)throw new Error(`codsen-tokenizer: [THROW_ID_03] the second input argument, callback function, should be a function but it was given as type ${typeof t}, equal to ${JSON.stringify(t,null,4)}`);if(e&&!m(e))throw new Error(`codsen-tokenizer: [THROW_ID_04] the third input argument, options object, should be a plain object but it was given as type ${typeof e}, equal to ${JSON.stringify(e,null,4)}`);const n=Object.assign({},Y,e);if(n.reportProgressFunc&&"function"!=typeof n.reportProgressFunc)throw new TypeError(`codsen-tokenizer: [THROW_ID_05] opts.reportProgressFunc should be a function but it was given as :\n${JSON.stringify(n.reportProgressFunc,null,4)} (${typeof n.reportProgressFunc})`);let a,c=0;const o=r.length,i=Math.floor(o/2);let u,s=!1,f={};const h={type:null,start:null,end:null,tail:null,kind:null};function d(){f=Object.assign({},h)}d();const l=[];function g(r,t){if(!l.length)return!1;if("simple"===l[l.length-1].type)return r[t]===l[l.length-1].value;if("esp"===l[l.length-1].type){if(!rr.includes(r[t]))return!1;let e="";const n=r.length;for(let a=t;a<n&&rr.includes(r[a]);a++)e+=r[a];return l[l.length-1].value.split("").every(r=>e.includes(r))}}function p(r){t(U(r)),d()}function b(t,e){"text"!==t.type&&null!==t.start&&r[e-1]&&!r[e-1].trim().length&&(t.end=q(r,e)+1,p(t),t.start=q(r,e)+1,t.type="text"),null!==t.start&&(t.end=e,p(t))}for(let t=0;t<o;t++){if(n.reportProgressFunc&&(o>1e3&&o<2e3?t===i&&n.reportProgressFunc(Math.floor((n.reportProgressFuncTo-n.reportProgressFuncFrom)/2)):o>=2e3&&(a=n.reportProgressFuncFrom+Math.floor(t/o*(n.reportProgressFuncTo-n.reportProgressFuncFrom)))!==c&&(c=a,n.reportProgressFunc(a))),Number.isInteger(u)&&t>=u&&(u=!1),f.end&&f.end===t&&("style"===f.kind&&(s=!0),b(f,t)),!u&&["html"].includes(f.type)&&['"',"'"].includes(r[t])&&(g(r,t)?l.pop():l.length&&"esp"===l[l.length-1].type||l.push({type:"simple",value:r[t]})),!u)if(l.length||"<"!==r[t]||!J(r,t)&&!W(r,t,["!--","!doctype","?xml"],{i:!0}))if("html"===f.type&&"comment"===f.kind||!rr.includes(r[t])||!r[t+1]||!rr.includes(r[t+1])||"-"===r[t]&&"-"===r[t+1])null!==f.start&&f.end!==t||(s?r[t].trim().length?(f.start=t,f.type="css"):(f.start=t,f.type="text",f.end=G(r,t)||r.length,p(f),G(r,t)&&(f.start=G(r,t),f.type="css",u=G(r,t))):(f.start=t,f.type="text"));else{let e="";for(let n=t;n<o&&rr.includes(r[n]);n++)e+=r[n];["html","esp"].includes(f.type)?"html"===f.type&&(g(r,t)?l.pop():l.push({type:"esp",value:X(e)})):(b(f,t),f.start=t,f.type="esp",u=t+e.length,f.tail=X(e))}else f.type&&b(f,t),f.start=t,f.type="html",f=Object.assign({tagNameStartAt:null,tagNameEndAt:null,tagName:null,recognised:null,closing:!1,selfClosing:!1,pureHTML:!0,esp:[]},f),W(r,t,"!--")?f.kind="comment":W(r,t,"!doctype",{i:!0})?f.kind="doctype":W(r,t,"?xml",{i:!0})?f.kind="xml":W(r,t,"style",{i:!0,trimCharsBeforeMatching:"/"})&&(f.kind="style");if(!u)if("html"!==f.type||l.length||">"!==r[t]){if("esp"===f.type&&null===f.end&&V(f.tail)&&f.tail.includes(r[t])){let e="";for(let n=t;n<o&&rr.includes(r[n]);n++)e+=r[n];f.end=t+e.length,u=t+e.length}}else f.end=t+1,"html"===f.type&&"/"===r[q(r,t)]&&(f.selfClosing=!0);"html"===f.type&&Z(f.tagNameStartAt)&&!Z(f.tagNameEndAt)&&(Q(r[t])||(f.tagNameEndAt=t,f.tagName=r.slice(f.tagNameStartAt,t))),"html"===f.type&&!Z(f.tagNameStartAt)&&Z(f.start)&&f.start<t&&("/"===r[t]?f.closing=!0:Q(r[t])&&(f.tagNameStartAt=t,f.closing||(f.closing=!1))),r[t+1]||null===f.start||(f.end=t+1,p(f))}}(r,(function(r){e.emit(r.type,r)})),this.messages}},{key:"report",value:function(r){var t,e=Vt(this.str,r.idxFrom),n=e.line,a=e.col;t="number"==typeof this.config.rules[r.ruleId]?this.config.rules[r.ruleId]:this.config.rules[r.ruleId][0],this.messages.push(Object.assign({},{line:n,column:a,severity:t},r))}}])&&t(o.prototype,i),u&&t(o,u),c}(Pt);r.Linter=Qt,r.version="2.0.0",Object.defineProperty(r,"__esModule",{value:!0})}));
