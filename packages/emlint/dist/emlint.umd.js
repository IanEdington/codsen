/**
 * emlint
 * Non-parsing, email template-oriented linter
 * Version: 1.0.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/emlint
 */

!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).emlint={})}(this,function(t){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=["async","autofocus","autoplay","checked","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","ismap","itemscope","loop","multiple","muted","nohref","nomodule","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","typemustmatch"],o="[object Object]";var a,r,c=Function.prototype,s=Object.prototype,l=c.toString,i=s.hasOwnProperty,u=l.call(Object),g=s.toString,m=(a=Object.getPrototypeOf,r=Object,function(t){return a(r(t))});var h=function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||g.call(t)!=o||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t))return!1;var n=m(t);if(null===n)return!0;var e=i.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&l.call(e)==u},p=function(t,n){if(n){if("object"!=typeof n)throw new TypeError(String(n)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in n){if("boolean"!=typeof n.includeZero)throw new TypeError(String(n.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(n.includeZero&&0===t)return!0}}return Number.isSafeInteger(t)&&t>=1},f="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t,n){return t(n={exports:{}},n.exports),n.exports}var y=d(function(t,n){(n=t.exports=function(t){return t+n.suffix(+t)}).suffix=function(t){return t%=100,1===Math.floor(t/10)?"th":t%10==1?"st":t%10==2?"nd":t%10==3?"rd":"th"}}),b=(y.suffix,d(function(t,n){var e,o,a,r,c,s,l,i,u,g,m,h,p,d,y,b,A,w,v,_;t.exports=(e="function"==typeof Promise,o="object"==typeof self?self:f,a="undefined"!=typeof Symbol,r="undefined"!=typeof Map,c="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,l="undefined"!=typeof WeakSet,i="undefined"!=typeof DataView,u=a&&void 0!==Symbol.iterator,g=a&&void 0!==Symbol.toStringTag,m=c&&"function"==typeof Set.prototype.entries,h=r&&"function"==typeof Map.prototype.entries,p=m&&Object.getPrototypeOf((new Set).entries()),d=h&&Object.getPrototypeOf((new Map).entries()),y=u&&"function"==typeof Array.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf([][Symbol.iterator]()),A=u&&"function"==typeof String.prototype[Symbol.iterator],w=A&&Object.getPrototypeOf(""[Symbol.iterator]()),v=8,_=-1,function(t){var n=typeof t;if("object"!==n)return n;if(null===t)return"null";if(t===o)return"global";if(Array.isArray(t)&&(!1===g||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var a=g&&t[Symbol.toStringTag];if("string"==typeof a)return a;var u=Object.getPrototypeOf(t);return u===RegExp.prototype?"RegExp":u===Date.prototype?"Date":e&&u===Promise.prototype?"Promise":c&&u===Set.prototype?"Set":r&&u===Map.prototype?"Map":l&&u===WeakSet.prototype?"WeakSet":s&&u===WeakMap.prototype?"WeakMap":i&&u===DataView.prototype?"DataView":r&&u===d?"Map Iterator":c&&u===p?"Set Iterator":y&&u===b?"Array Iterator":A&&u===w?"String Iterator":null===u?"Object":Object.prototype.toString.call(t).slice(v,_)})}));function A(t,n,e){if(n!=n)return function(t,n,e,o){for(var a=t.length,r=e+(o?1:-1);o?r--:++r<a;)if(n(t[r],r,t))return r;return-1}(t,v,e);for(var o=e-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}function w(t,n,e,o){for(var a=e-1,r=t.length;++a<r;)if(o(t[a],n))return a;return-1}function v(t){return t!=t}var _=Array.prototype.splice;function S(t,n,e,o){var a,r=o?w:A,c=-1,s=n.length,l=t;for(t===n&&(n=function(t,n){var e=-1,o=t.length;n||(n=Array(o));for(;++e<o;)n[e]=t[e];return n}(n)),e&&(l=function(t,n){for(var e=-1,o=t?t.length:0,a=Array(o);++e<o;)a[e]=n(t[e],e,t);return a}(t,(a=e,function(t){return a(t)})));++c<s;)for(var i=0,u=n[c],g=e?e(u):u;(i=r(l,g,i,o))>-1;)l!==t&&_.call(l,i,1),_.call(t,i,1);return t}var O=function(t,n){return t&&t.length&&n&&n.length?S(t,n):t},T=d(function(t,n){var e=200,o="__lodash_hash_undefined__",a=9007199254740991,r="[object Arguments]",c="[object Boolean]",s="[object Date]",l="[object Function]",i="[object GeneratorFunction]",u="[object Map]",g="[object Number]",m="[object Object]",h="[object RegExp]",p="[object Set]",d="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",A="[object DataView]",w="[object Float32Array]",v="[object Float64Array]",_="[object Int8Array]",S="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",E="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",R=/\w*$/,j=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,Q={};Q[r]=Q["[object Array]"]=Q[b]=Q[A]=Q[c]=Q[s]=Q[w]=Q[v]=Q[_]=Q[S]=Q[O]=Q[u]=Q[g]=Q[m]=Q[h]=Q[p]=Q[d]=Q[y]=Q[T]=Q[E]=Q[C]=Q[N]=!0,Q["[object Error]"]=Q[l]=Q["[object WeakMap]"]=!1;var I="object"==typeof f&&f&&f.Object===Object&&f,F="object"==typeof self&&self&&self.Object===Object&&self,k=I||F||Function("return this")(),$=n&&!n.nodeType&&n,V=$&&t&&!t.nodeType&&t,q=V&&V.exports===$;function x(t,n){return t.set(n[0],n[1]),t}function P(t,n){return t.add(n),t}function D(t,n,e,o){var a=-1,r=t?t.length:0;for(o&&r&&(e=t[++a]);++a<r;)e=n(e,t[a],a,t);return e}function J(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}function W(t){var n=-1,e=Array(t.size);return t.forEach(function(t,o){e[++n]=[o,t]}),e}function M(t,n){return function(e){return t(n(e))}}function H(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}var B,U=Array.prototype,K=Function.prototype,G=Object.prototype,Z=k["__core-js_shared__"],z=(B=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",X=K.toString,Y=G.hasOwnProperty,tt=G.toString,nt=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=q?k.Buffer:void 0,ot=k.Symbol,at=k.Uint8Array,rt=M(Object.getPrototypeOf,Object),ct=Object.create,st=G.propertyIsEnumerable,lt=U.splice,it=Object.getOwnPropertySymbols,ut=et?et.isBuffer:void 0,gt=M(Object.keys,Object),mt=Vt(k,"DataView"),ht=Vt(k,"Map"),pt=Vt(k,"Promise"),ft=Vt(k,"Set"),dt=Vt(k,"WeakMap"),yt=Vt(Object,"create"),bt=Jt(mt),At=Jt(ht),wt=Jt(pt),vt=Jt(ft),_t=Jt(dt),St=ot?ot.prototype:void 0,Ot=St?St.valueOf:void 0;function Tt(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function Et(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function Ct(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function Nt(t){this.__data__=new Et(t)}function Rt(t,n){var e=Mt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ht(t)}(t)&&Y.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==r)}(t)?function(t,n){for(var e=-1,o=Array(t);++e<t;)o[e]=n(e);return o}(t.length,String):[],o=e.length,a=!!o;for(var c in t)!n&&!Y.call(t,c)||a&&("length"==c||Pt(c,o))||e.push(c);return e}function jt(t,n,e){var o=t[n];Y.call(t,n)&&Wt(o,e)&&(void 0!==e||n in t)||(t[n]=e)}function Lt(t,n){for(var e=t.length;e--;)if(Wt(t[e][0],n))return e;return-1}function Qt(t,n,e,o,a,f,j){var L;if(o&&(L=f?o(t,a,f,j):o(t)),void 0!==L)return L;if(!Kt(t))return t;var I=Mt(t);if(I){if(L=function(t){var n=t.length,e=t.constructor(n);n&&"string"==typeof t[0]&&Y.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!n)return function(t,n){var e=-1,o=t.length;n||(n=Array(o));for(;++e<o;)n[e]=t[e];return n}(t,L)}else{var F=xt(t),k=F==l||F==i;if(Bt(t))return function(t,n){if(n)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}(t,n);if(F==m||F==r||k&&!f){if(J(t))return f?t:{};if(L=function(t){return"function"!=typeof t.constructor||Dt(t)?{}:(n=rt(t),Kt(n)?ct(n):{});var n}(k?{}:t),!n)return function(t,n){return kt(t,qt(t),n)}(t,function(t,n){return t&&kt(n,Gt(n),t)}(L,t))}else{if(!Q[F])return f?t:{};L=function(t,n,e,o){var a=t.constructor;switch(n){case b:return Ft(t);case c:case s:return new a(+t);case A:return function(t,n){var e=n?Ft(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,o);case w:case v:case _:case S:case O:case T:case E:case C:case N:return function(t,n){var e=n?Ft(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,o);case u:return function(t,n,e){return D(n?e(W(t),!0):W(t),x,new t.constructor)}(t,o,e);case g:case d:return new a(t);case h:return(i=new(l=t).constructor(l.source,R.exec(l))).lastIndex=l.lastIndex,i;case p:return function(t,n,e){return D(n?e(H(t),!0):H(t),P,new t.constructor)}(t,o,e);case y:return r=t,Ot?Object(Ot.call(r)):{}}var r;var l,i}(t,F,Qt,n)}}j||(j=new Nt);var $=j.get(t);if($)return $;if(j.set(t,L),!I)var V=e?function(t){return function(t,n,e){var o=n(t);return Mt(t)?o:function(t,n){for(var e=-1,o=n.length,a=t.length;++e<o;)t[a+e]=n[e];return t}(o,e(t))}(t,Gt,qt)}(t):Gt(t);return function(t,n){for(var e=-1,o=t?t.length:0;++e<o&&!1!==n(t[e],e,t););}(V||t,function(a,r){V&&(a=t[r=a]),jt(L,r,Qt(a,n,e,o,r,t,j))}),L}function It(t){return!(!Kt(t)||(n=t,z&&z in n))&&(Ut(t)||J(t)?nt:j).test(Jt(t));var n}function Ft(t){var n=new t.constructor(t.byteLength);return new at(n).set(new at(t)),n}function kt(t,n,e,o){e||(e={});for(var a=-1,r=n.length;++a<r;){var c=n[a],s=o?o(e[c],t[c],c,e,t):void 0;jt(e,c,void 0===s?t[c]:s)}return e}function $t(t,n){var e,o,a=t.__data__;return("string"==(o=typeof(e=n))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==e:null===e)?a["string"==typeof n?"string":"hash"]:a.map}function Vt(t,n){var e=function(t,n){return null==t?void 0:t[n]}(t,n);return It(e)?e:void 0}Tt.prototype.clear=function(){this.__data__=yt?yt(null):{}},Tt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Tt.prototype.get=function(t){var n=this.__data__;if(yt){var e=n[t];return e===o?void 0:e}return Y.call(n,t)?n[t]:void 0},Tt.prototype.has=function(t){var n=this.__data__;return yt?void 0!==n[t]:Y.call(n,t)},Tt.prototype.set=function(t,n){return this.__data__[t]=yt&&void 0===n?o:n,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(t){var n=this.__data__,e=Lt(n,t);return!(e<0||(e==n.length-1?n.pop():lt.call(n,e,1),0))},Et.prototype.get=function(t){var n=this.__data__,e=Lt(n,t);return e<0?void 0:n[e][1]},Et.prototype.has=function(t){return Lt(this.__data__,t)>-1},Et.prototype.set=function(t,n){var e=this.__data__,o=Lt(e,t);return o<0?e.push([t,n]):e[o][1]=n,this},Ct.prototype.clear=function(){this.__data__={hash:new Tt,map:new(ht||Et),string:new Tt}},Ct.prototype.delete=function(t){return $t(this,t).delete(t)},Ct.prototype.get=function(t){return $t(this,t).get(t)},Ct.prototype.has=function(t){return $t(this,t).has(t)},Ct.prototype.set=function(t,n){return $t(this,t).set(t,n),this},Nt.prototype.clear=function(){this.__data__=new Et},Nt.prototype.delete=function(t){return this.__data__.delete(t)},Nt.prototype.get=function(t){return this.__data__.get(t)},Nt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.set=function(t,n){var o=this.__data__;if(o instanceof Et){var a=o.__data__;if(!ht||a.length<e-1)return a.push([t,n]),this;o=this.__data__=new Ct(a)}return o.set(t,n),this};var qt=it?M(it,Object):function(){return[]},xt=function(t){return tt.call(t)};function Pt(t,n){return!!(n=null==n?a:n)&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<n}function Dt(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||G)}function Jt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Wt(t,n){return t===n||t!=t&&n!=n}(mt&&xt(new mt(new ArrayBuffer(1)))!=A||ht&&xt(new ht)!=u||pt&&"[object Promise]"!=xt(pt.resolve())||ft&&xt(new ft)!=p||dt&&"[object WeakMap]"!=xt(new dt))&&(xt=function(t){var n=tt.call(t),e=n==m?t.constructor:void 0,o=e?Jt(e):void 0;if(o)switch(o){case bt:return A;case At:return u;case wt:return"[object Promise]";case vt:return p;case _t:return"[object WeakMap]"}return n});var Mt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Ut(t)}var Bt=ut||function(){return!1};function Ut(t){var n=Kt(t)?tt.call(t):"";return n==l||n==i}function Kt(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function Gt(t){return Ht(t)?Rt(t):function(t){if(!Dt(t))return gt(t);var n=[];for(var e in Object(t))Y.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)}t.exports=function(t){return Qt(t,!0,!0)}});const E=Array.isArray;function C(t){return"string"==typeof t&&t.length>0&&"."===t[0]?t.slice(1):t}function N(t,n){return function t(n,e,o){const a=T(n);let r,c,s,l,i;if((o=Object.assign({depth:-1,path:""},o)).depth+=1,E(a))for(r=0,c=a.length;r<c;r++){const n=`${o.path}.${r}`;void 0!==a[r]?(o.parent=T(a),o.parentType="array",s=t(e(a[r],void 0,Object.assign({},o,{path:C(n)})),e,Object.assign({},o,{path:C(n)})),Number.isNaN(s)&&r<a.length?(a.splice(r,1),r-=1):a[r]=s):a.splice(r,1)}else if(h(a))for(r=0,c=(l=Object.keys(a)).length;r<c;r++){i=l[r];const n=`${o.path}.${i}`;0===o.depth&&null!=i&&(o.topmostKey=i),o.parent=T(a),o.parentType="object",s=t(e(i,a[i],Object.assign({},o,{path:C(n)})),e,Object.assign({},o,{path:C(n)})),Number.isNaN(s)?delete a[i]:a[i]=s}return a}(t,n,{})}var R="__lodash_hash_undefined__",j=9007199254740991,L="[object Function]",Q="[object GeneratorFunction]",I=/^\[object .+?Constructor\]$/,F="object"==typeof f&&f&&f.Object===Object&&f,k="object"==typeof self&&self&&self.Object===Object&&self,$=F||k||Function("return this")();function V(t,n){return!!(t?t.length:0)&&function(t,n,e){if(n!=n)return function(t,n,e,o){var a=t.length,r=e+(o?1:-1);for(;o?r--:++r<a;)if(n(t[r],r,t))return r;return-1}(t,P,e);var o=e-1,a=t.length;for(;++o<a;)if(t[o]===n)return o;return-1}(t,n,0)>-1}function q(t,n,e){for(var o=-1,a=t?t.length:0;++o<a;)if(e(n,t[o]))return!0;return!1}function x(t,n){for(var e=-1,o=t?t.length:0,a=Array(o);++e<o;)a[e]=n(t[e],e,t);return a}function P(t){return t!=t}function D(t){return function(n){return t(n)}}function J(t,n){return t.has(n)}var W,M=Array.prototype,H=Function.prototype,B=Object.prototype,U=$["__core-js_shared__"],K=(W=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",G=H.toString,Z=B.hasOwnProperty,z=B.toString,X=RegExp("^"+G.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=M.splice,tt=Math.max,nt=Math.min,et=mt($,"Map"),ot=mt(Object,"create");function at(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function rt(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function ct(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var o=t[n];this.set(o[0],o[1])}}function st(t){var n=-1,e=t?t.length:0;for(this.__data__=new ct;++n<e;)this.add(t[n])}function lt(t,n){for(var e,o,a=t.length;a--;)if((e=t[a][0])===(o=n)||e!=e&&o!=o)return a;return-1}function it(t){return!(!pt(t)||(n=t,K&&K in n))&&(ht(t)||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t)?X:I).test(function(t){if(null!=t){try{return G.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var n}function ut(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=j}(t.length)&&!ht(t)}(t)}(t)?t:[]}function gt(t,n){var e,o,a=t.__data__;return("string"==(o=typeof(e=n))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==e:null===e)?a["string"==typeof n?"string":"hash"]:a.map}function mt(t,n){var e=function(t,n){return null==t?void 0:t[n]}(t,n);return it(e)?e:void 0}function ht(t){var n=pt(t)?z.call(t):"";return n==L||n==Q}function pt(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}at.prototype.clear=function(){this.__data__=ot?ot(null):{}},at.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},at.prototype.get=function(t){var n=this.__data__;if(ot){var e=n[t];return e===R?void 0:e}return Z.call(n,t)?n[t]:void 0},at.prototype.has=function(t){var n=this.__data__;return ot?void 0!==n[t]:Z.call(n,t)},at.prototype.set=function(t,n){return this.__data__[t]=ot&&void 0===n?R:n,this},rt.prototype.clear=function(){this.__data__=[]},rt.prototype.delete=function(t){var n=this.__data__,e=lt(n,t);return!(e<0||(e==n.length-1?n.pop():Y.call(n,e,1),0))},rt.prototype.get=function(t){var n=this.__data__,e=lt(n,t);return e<0?void 0:n[e][1]},rt.prototype.has=function(t){return lt(this.__data__,t)>-1},rt.prototype.set=function(t,n){var e=this.__data__,o=lt(e,t);return o<0?e.push([t,n]):e[o][1]=n,this},ct.prototype.clear=function(){this.__data__={hash:new at,map:new(et||rt),string:new at}},ct.prototype.delete=function(t){return gt(this,t).delete(t)},ct.prototype.get=function(t){return gt(this,t).get(t)},ct.prototype.has=function(t){return gt(this,t).has(t)},ct.prototype.set=function(t,n){return gt(this,t).set(t,n),this},st.prototype.add=st.prototype.push=function(t){return this.__data__.set(t,R),this},st.prototype.has=function(t){return this.__data__.has(t)};var ft=function(t,n){return n=tt(void 0===n?t.length-1:n,0),function(){for(var e=arguments,o=-1,a=tt(e.length-n,0),r=Array(a);++o<a;)r[o]=e[n+o];o=-1;for(var c=Array(n+1);++o<n;)c[o]=e[o];return c[n]=r,function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}(t,this,c)}}(function(t){var n=x(t,ut);return n.length&&n[0]===t[0]?function(t,n,e){for(var o=e?q:V,a=t[0].length,r=t.length,c=r,s=Array(r),l=1/0,i=[];c--;){var u=t[c];c&&n&&(u=x(u,D(n))),l=nt(u.length,l),s[c]=!e&&(n||a>=120&&u.length>=120)?new st(c&&u):void 0}u=t[0];var g=-1,m=s[0];t:for(;++g<a&&i.length<l;){var h=u[g],p=n?n(h):h;if(h=e||0!==h?h:0,!(m?J(m,p):o(i,p,e))){for(c=r;--c;){var f=s[c];if(!(f?J(f,p):o(t[c],p,e)))continue t}m&&m.push(p),i.push(h)}}return i}(n):[]});function dt(t){return"string"==typeof t?t.length>0?[t]:[]:t}var yt=d(function(t){t.exports=function(){var t=Object.prototype.toString;function n(t,n){return null!=t&&Object.prototype.hasOwnProperty.call(t,n)}function e(t){if(!t)return!0;if(a(t)&&0===t.length)return!0;if("string"!=typeof t){for(var e in t)if(n(t,e))return!1;return!0}return!1}function o(n){return t.call(n)}var a=Array.isArray||function(n){return"[object Array]"===t.call(n)};function r(t){var n=parseInt(t);return n.toString()===t?n:t}function c(t){t=t||{};var c=function(t){return Object.keys(c).reduce(function(n,e){return"create"===e?n:("function"==typeof c[e]&&(n[e]=c[e].bind(c,t)),n)},{})};function s(e,o){return t.includeInheritedProps||"number"==typeof o&&Array.isArray(e)||n(e,o)}function l(t,n){if(s(t,n))return t[n]}function i(t,n,e,o){if("number"==typeof n&&(n=[n]),!n||0===n.length)return t;if("string"==typeof n)return i(t,n.split(".").map(r),e,o);var a=n[0],c=l(t,a);return 1===n.length?(void 0!==c&&o||(t[a]=e),c):(void 0===c&&("number"==typeof n[1]?t[a]=[]:t[a]={}),i(t[a],n.slice(1),e,o))}return c.has=function(e,o){if("number"==typeof o?o=[o]:"string"==typeof o&&(o=o.split(".")),!o||0===o.length)return!!e;for(var c=0;c<o.length;c++){var s=r(o[c]);if(!("number"==typeof s&&a(e)&&s<e.length||(t.includeInheritedProps?s in Object(e):n(e,s))))return!1;e=e[s]}return!0},c.ensureExists=function(t,n,e){return i(t,n,e,!0)},c.set=function(t,n,e,o){return i(t,n,e,o)},c.insert=function(t,n,e,o){var r=c.get(t,n);o=~~o,a(r)||(r=[],c.set(t,n,r)),r.splice(o,0,e)},c.empty=function(t,n){var r,l;if(!e(n)&&null!=t&&(r=c.get(t,n))){if("string"==typeof r)return c.set(t,n,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===o(t)}(r))return c.set(t,n,!1);if("number"==typeof r)return c.set(t,n,0);if(a(r))r.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===o(t)}(r))return c.set(t,n,null);for(l in r)s(r,l)&&delete r[l]}}},c.push=function(t,n){var e=c.get(t,n);a(e)||(e=[],c.set(t,n,e)),e.push.apply(e,Array.prototype.slice.call(arguments,2))},c.coalesce=function(t,n,e){for(var o,a=0,r=n.length;a<r;a++)if(void 0!==(o=c.get(t,n[a])))return o;return e},c.get=function(t,n,e){if("number"==typeof n&&(n=[n]),!n||0===n.length)return t;if(null==t)return e;if("string"==typeof n)return c.get(t,n.split("."),e);var o=r(n[0]),a=l(t,o);return void 0===a?e:1===n.length?a:c.get(t[o],n.slice(1),e)},c.del=function(t,n){if("number"==typeof n&&(n=[n]),null==t)return t;if(e(n))return t;if("string"==typeof n)return c.del(t,n.split("."));var o=r(n[0]);return s(t,o)?1!==n.length?c.del(t[o],n.slice(1)):(a(t)?t.splice(o,1):delete t[o],t):t},c}var s=c();return s.create=c,s.withInheritedProps=c({includeInheritedProps:!0}),s}()}),bt=function(t){var n=t%100;if(n>=10&&n<=20)return"th";var e=t%10;return 1===e?"st":2===e?"nd":3===e?"rd":"th"};function At(t){if("number"!=typeof t)throw new TypeError("Expected Number, got "+typeof t+" "+t);return t+bt(t)}At.indicator=bt;var wt=At,vt=/[|\\{}()[\]^$+*?.]/g,_t=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(vt,"\\$&")};const St=new Map;function Ot(t,n){const e=Object.assign({caseSensitive:!1},n),o=t+JSON.stringify(e);if(St.has(o))return St.get(o);const a="!"===t[0];a&&(t=t.slice(1)),t=_t(t).replace(/\\\*/g,".*");const r=new RegExp(`^${t}$`,e.caseSensitive?"":"i");return r.negated=a,St.set(o,r),r}var Tt=(t,n,e)=>{if(!Array.isArray(t)||!Array.isArray(n))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof n}`);if(0===n.length)return t;const o="!"===n[0][0];n=n.map(t=>Ot(t,e));const a=[];for(const e of t){let t=o;for(const o of n)o.test(e)&&(t=!o.negated);t&&a.push(e)}return a};function Et(t,n,e){return function t(n,e,o,a=!0){const r=Object.prototype.hasOwnProperty;function c(t){return null!=t}function s(t){return"Object"===b(t)}function l(t,n){return n=dt(n),Array.from(t).filter(t=>!n.some(n=>Tt.isMatch(t,n,{caseSensitive:!0})))}const i=["any","anything","every","everything","all","whatever","whatevs"],u=Array.isArray;if(!c(n))throw new Error("check-types-mini: [THROW_ID_01] First argument is missing!");const g={ignoreKeys:[],ignorePaths:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini",optsVarName:"opts"};let m;if(m=c(o)&&s(o)?Object.assign({},g,o):Object.assign({},g),c(m.ignoreKeys)&&m.ignoreKeys?m.ignoreKeys=dt(m.ignoreKeys):m.ignoreKeys=[],c(m.ignorePaths)&&m.ignorePaths?m.ignorePaths=dt(m.ignorePaths):m.ignorePaths=[],c(m.acceptArraysIgnore)&&m.acceptArraysIgnore?m.acceptArraysIgnore=dt(m.acceptArraysIgnore):m.acceptArraysIgnore=[],m.msg="string"==typeof m.msg?m.msg.trim():m.msg,":"===m.msg[m.msg.length-1]&&(m.msg=m.msg.slice(0,m.msg.length-1).trim()),m.schema&&(Object.keys(m.schema).forEach(t=>{if(s(m.schema[t])){const n={};N(m.schema[t],(e,o,a)=>{const r=void 0!==o?o:e;return u(r)||s(r)||(n[`${t}.${a.path}`]=r),r}),delete m.schema[t],m.schema=Object.assign(m.schema,n)}}),Object.keys(m.schema).forEach(t=>{u(m.schema[t])||(m.schema[t]=[m.schema[t]]),m.schema[t]=m.schema[t].map(String).map(t=>t.toLowerCase()).map(t=>t.trim())})),c(e)||(e={}),a&&t(m,g,{enforceStrictKeyset:!1},!1),m.enforceStrictKeyset)if(c(m.schema)&&Object.keys(m.schema).length>0){if(0!==l(O(Object.keys(n),Object.keys(e).concat(Object.keys(m.schema))),m.ignoreKeys).length){const t=O(Object.keys(n),Object.keys(e).concat(Object.keys(m.schema)));throw new TypeError(`${m.msg}: ${m.optsVarName}.enforceStrictKeyset is on and the following key${t.length>1?"s":""} ${t.length>1?"are":"is"} not covered by schema and/or reference objects: ${t.join(", ")}`)}}else{if(!(c(e)&&Object.keys(e).length>0))throw new TypeError(`${m.msg}: Both ${m.optsVarName}.schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!`);if(0!==l(O(Object.keys(n),Object.keys(e)),m.ignoreKeys).length){const t=O(Object.keys(n),Object.keys(e));throw new TypeError(`${m.msg}: The input object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not covered by the reference object: ${t.join(", ")}`)}if(0!==l(O(Object.keys(e),Object.keys(n)),m.ignoreKeys).length){const t=O(Object.keys(e),Object.keys(n));throw new TypeError(`${m.msg}: The reference object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not present in the input object: ${t.join(", ")}`)}}const h=[];N(n,(t,o,a)=>{let c=o,l=t;if("array"===a.parentType&&(l=void 0,c=t),u(h)&&h.length&&h.some(t=>a.path.startsWith(t)))return c;if(l&&m.ignoreKeys.some(t=>Tt.isMatch(l,t)))return c;if(m.ignorePaths.some(t=>Tt.isMatch(a.path,t)))return c;const g=!(!s(c)&&!u(c)&&u(a.parent));let p=!1;s(m.schema)&&r.call(m.schema,yt.get(a.path))&&(p=!0);let f=!1;if(s(e)&&yt.has(e,yt.get(a.path))&&(f=!0),m.enforceStrictKeyset&&g&&!p&&!f)throw new TypeError(`${m.msg}: ${m.optsVarName}.${a.path} is neither covered by reference object (second input argument), nor ${m.optsVarName}.schema! To stop this error, turn off ${m.optsVarName}.enforceStrictKeyset or provide some type reference (2nd argument or ${m.optsVarName}.schema).\n\nDebug info:\n\nobj = ${JSON.stringify(n,null,4)}\n\nref = ${JSON.stringify(e,null,4)}\n\ninnerObj = ${JSON.stringify(a,null,4)}\n\nopts = ${JSON.stringify(m,null,4)}\n\ncurrent = ${JSON.stringify(c,null,4)}\n\n`);if(p){const t=dt(m.schema[a.path]).map(String).map(t=>t.toLowerCase());if(yt.set(m.schema,a.path,t),ft(t,i).length)h.push(a.path);else if(!0!==c&&!1!==c&&!t.includes(b(c).toLowerCase())||(!0===c||!1===c)&&!t.includes(String(c))&&!t.includes("boolean")){if(!u(c)||!m.acceptArrays)throw new TypeError(`${m.msg}: ${m.optsVarName}.${a.path} was customised to ${"string"!==b(c)?'"':""}${JSON.stringify(c,null,0)}${"string"!==b(c)?'"':""} (type: ${b(c).toLowerCase()}) which is not among the allowed types in schema (which is equal to ${JSON.stringify(t,null,0)})`);for(let n=0,e=c.length;n<e;n++)if(!t.includes(b(c[n]).toLowerCase()))throw new TypeError(`${m.msg}: ${m.optsVarName}.${a.path}.${n}, the ${wt(n+1)} element (equal to ${JSON.stringify(c[n],null,0)}) is of a type ${b(c[n]).toLowerCase()}, but only the following are allowed by the ${m.optsVarName}.schema: ${t.join(", ")}`)}}else if(f){const n=yt.get(e,a.path);if(m.acceptArrays&&u(c)&&!m.acceptArraysIgnore.includes(t)){if(!c.every(n=>b(n).toLowerCase()===b(e[t]).toLowerCase()))throw new TypeError(`${m.msg}: ${m.optsVarName}.${a.path} was customised to be array, but not all of its elements are ${b(e[t]).toLowerCase()}-type`)}else if(b(c)!==b(n))throw new TypeError(`${m.msg}: ${m.optsVarName}.${a.path} was customised to ${"string"===b(c).toLowerCase()?"":'"'}${JSON.stringify(c,null,0)}${"string"===b(c).toLowerCase()?"":'"'} which is not ${b(n).toLowerCase()} but ${b(c).toLowerCase()}`)}return c})}(t,n,e)}Tt.isMatch=((t,n,e)=>{const o=Ot(n,e),a=o.test(t);return o.negated?!a:a});const Ct=Array.isArray;function Nt(t,n){if(!Ct(t))throw new TypeError(`ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(0===t.length)return t;const e={strictlyTwoElementsInRangeArrays:!1,progressFn:null},o=Object.assign({},e,n);let a,r;if(Et(o,e,{msg:"ranges-sort: [THROW_ID_02*]",schema:{progressFn:["function","false","null"]}}),o.strictlyTwoElementsInRangeArrays&&!t.every((t,n)=>2===t.length||(a=n,r=t.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${y(a)} range (${JSON.stringify(t[a],null,4)}) has not two but ${r} elements!`);if(!t.every((t,n)=>!(!p(t[0],{includeZero:!0})||!p(t[1],{includeZero:!0}))||(a=n,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${y(a)} range (${JSON.stringify(t[a],null,4)}) does not consist of only natural numbers!`);const c=t.length*t.length;let s=0;return Array.from(t).sort((t,n)=>(o.progressFn&&(s++,o.progressFn(Math.floor(100*s/c))),t[0]===n[0]?t[1]<n[1]?-1:t[1]>n[1]?1:0:t[0]<n[0]?-1:1))}function Rt(t,n){function e(t){return"string"==typeof t}if(!Array.isArray(t))return t;const o={mergeType:1,progressFn:null};let a;if(n){if(!h(n))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(n,null,4)} (type ${typeof n})`);if((a=Object.assign({},o,n)).progressFn&&"function"!=typeof a.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] the second input argument must be a function! It was given of a type: "${typeof a.progressFn}", equal to ${JSON.stringify(a.progressFn,null,4)}`);if(a.mergeType&&1!==a.mergeType&&2!==a.mergeType)if(e(a.mergeType)&&"1"===a.mergeType.trim())a.mergeType=1;else{if(!e(a.mergeType)||"2"!==a.mergeType.trim())throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof a.mergeType}", equal to ${JSON.stringify(a.progressFn,null,4)}`);a.mergeType=2}}else a=T(o);const r=T(t).filter(t=>void 0!==t[2]||t[0]!==t[1]);let c,s,l;const i=(c=a.progressFn?Nt(r,{progressFn:t=>{(l=Math.floor(t/5))!==s&&(s=l,a.progressFn(l))}}):Nt(r)).length-1;for(let t=i;t>0;t--)a.progressFn&&(l=Math.floor(78*(1-t/i))+21)!==s&&l>s&&(s=l,a.progressFn(l)),(c[t][0]<=c[t-1][0]||c[t][0]<=c[t-1][1])&&(c[t-1][0]=Math.min(c[t][0],c[t-1][0]),c[t-1][1]=Math.max(c[t][1],c[t-1][1]),void 0!==c[t][2]&&(c[t-1][0]>=c[t][0]||c[t-1][1]<=c[t][1])&&null!==c[t-1][2]&&(null===c[t][2]&&null!==c[t-1][2]?c[t-1][2]=null:void 0!==c[t-1][2]?2===a.mergeType&&c[t-1][0]===c[t][0]?c[t-1][2]=c[t][2]:c[t-1][2]+=c[t][2]:c[t-1][2]=c[t][2]),c.splice(t,1),t=c.length);return c}var jt=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"];function Lt(t,n){if("string"!=typeof t||!t.length)return null;if(n&&"number"==typeof n||(n=0),!t[n+1])return null;if(t[n+1]&&t[n+1].trim().length)return n+1;if(t[n+2]&&t[n+2].trim().length)return n+2;for(let e=n+1,o=t.length;e<o;e++)if(t[e].trim().length)return e;return null}function Qt(t,n){if("string"!=typeof t||!t.length)return null;if(n&&"number"==typeof n||(n=0),n<1)return null;if(t[n-1]&&t[n-1].trim().length)return n-1;if(t[n-2]&&t[n-2].trim().length)return n-2;for(let e=n;e--;)if(t[e]&&t[e].trim().length)return e;return null}var It=["null","start-of-heading","start-of-text","end-of-text","end-of-transmission","enquiry","acknowledge","bell","backspace","character-tabulation","line-feed","line-tabulation","form-feed","carriage-return","shift-out","shift-in","data-link-escape","device-control-one","device-control-two","device-control-three","device-control-four","negative-acknowledge","synchronous-idle","end-of-transmission-block","cancel","end-of-medium","substitute","escape","information-separator-four","information-separator-three","information-separator-two","information-separator-one","space","exclamation-mark"],Ft=["delete","padding","high-octet-preset","break-permitted-here","no-break-here","index","next-line","start-of-selected-area","end-of-selected-area","character-tabulation-set","character-tabulation-with-justification","line-tabulation-set","partial-line-forward","partial-line-backward","reverse-line-feed","single-shift-two","single-shift-three","device-control-string","private-use-1","private-use-2","set-transmit-state","cancel-character","message-waiting","start-of-protected-area","end-of-protected-area","start-of-string","single-graphic-character-introducer","single-character-intro-introducer","control-sequence-introducer","string-terminator","operating-system-command","private-message","application-program-command"];function kt(t){return!"\"'><=".includes(t)}function $t(t){return function(t){var e=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"function"==typeof e&&(e=[e]),"function"==typeof o&&(o=[o]),"function"==typeof a&&(a=[a]);for(var r=!1,c=function(n,c){if(console.log("129 str[".concat(n,"] = ").concat(t[n])),o.some(function(e){return e(t[n],n)})){if(!a)return console.log("135 util/onlyTheseLeadToThat: ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(31,"m","return ".concat(n),"[",39,"m"))),{v:n};r=n}return null!==a&&r&&a.some(function(e){return e(t[n],n)})?(console.log("150 util/onlyTheseLeadToThat: ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(31,"m","return ".concat(r),"[",39,"m"))),{v:r}):e.some(function(e){return e(t[n],n)})||o.some(function(e){return e(t[n],n)})?void 0:(console.log("161 util/onlyTheseLeadToThat: ".concat("[".concat(31,"m","██","[",39,"m")," return ","[".concat(31,"m","false","[",39,"m"))),{v:!1})},s=0,l=t.length;s<l;s++){var i=c(s);if("object"===n(i))return i.v}}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,kt,function(t){return"="===t})}function Vt(t){return"\"'`‘’“”".includes(t)}function qt(t){if("string"!=typeof t||t.length>1)throw new Error("emlint/util/charNotTag(): input is not a single string character!");return!"><=".includes(t)}function xt(t){return"string"==typeof t}function Pt(t){return xt(t)&&1===t.length&&(t.charCodeAt(0)>64&&t.charCodeAt(0)<91||t.charCodeAt(0)>96&&t.charCodeAt(0)<123)}function Dt(t){return function(t){return xt(t)&&1===t.length&&t.charCodeAt(0)>96&&t.charCodeAt(0)<123}(t)}function Jt(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.reduce(function(t,n,e,o){return 0===e&&"string"==typeof n?"[".concat(32,"m",n.toUpperCase(),"[",39,"m"):e%2!=0?"".concat(t," [",33,"m").concat(n,"[",39,"m"):"".concat(t," = ").concat(JSON.stringify(n,null,4)).concat(o[e+1]?";":"")},"")}function Wt(t,e,o){if(console.log("\n\n\n\n\n"),console.log("285 withinTagInnerspace() called, idx = ".concat(e)),"number"!=typeof e){if(null!=e)throw new Error("emlint/util.js/withinTagInnerspace(): second argument is of a type ".concat(n(e)));e=0}for(var a={at:null,last:!1,precedes:!1,within:!1},r=!0,c=!1,s=!1,l=!1,i=!1,u=!1,g=!1,m=!1,h=!1,p=!1,f=!1,d=!1,y=!1,b=!1,A=!1,w=!1,v=!1,_=!1,S=e,O=t.length;S<O;S++){var T=t[S].charCodeAt(0);if(console.log("".concat("[".concat(null!=o?35:36,"m","=","[",39,"m[").concat(null!=o?33:34,"m","=","[",39,"m").repeat(15)," [",31,"m","str[ ".concat(S," ] = ").concat(t[S].trim().length?t[S]:JSON.stringify(t[S],null,0)),"[",39,"m ","[".concat(90,"m#",T,"[",39,"m")," ").concat("[".concat(null!=o?35:36,"m","=","[",39,"m[").concat(null!=o?33:34,"m","=","[",39,"m").repeat(15)).concat(null!=o?" RECURSION":"")),t[S].trim().length||a.last&&(a.precedes=!0),t[S],t[S],t[S],Vt(t[S])?(null===a.at?(a.within=!0,a.at=S):t[S]!==t[a.at]&&S!==o||(a.within=!1),a.last=!0):a.last?(a.precedes=!0,a.last=!1):a.precedes=!1,a.at&&!a.within&&a.precedes&&t[S]!==t[a.at]&&(a.at=null),!a.within&&r&&"/"===t[S]&&">".includes(t[Lt(t,S)]))return console.log("566 ".concat("[".concat(32,"m","██ R1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;if(a.within||!r||">"!==t[S]||u)if(u&&!g&&t[S].trim().length&&!qt(t[S]))"<"===t[S]?(g=!0,console.log("630 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_2",g)))):(u=!1,console.log("639 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r3_1",u))));else if(g&&!m&&t[S].trim().length)Dt(t[S])||"/"===t[S]?(m=!0,console.log("653 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_3",m)))):(u=!1,g=!1,console.log("663 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r3_1",u,"r3_2",g))));else if(m&&!h&&t[S].trim().length&&!Dt(t[S])){if("<>".includes(t[S])||"/"===t[S]&&"<>".includes(Lt(t,S)))return console.log("688 ".concat("[".concat(32,"m","██ R3","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;"='\"".includes(t[S])&&(u=!1,g=!1,m=!1,console.log("701 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r3_1",u,"r3_2",g,"r3_3",m))))}else if(!m||h||t[S].trim().length){if(h&&!p&&t[S].trim().length)kt(t[S])?(p=!0,console.log("732 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_5",p)))):(u=!1,g=!1,m=!1,h=!1,console.log("744 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r3_1",u,"r3_2",g,"r3_3",m,"r3_4",h))));else if(p&&(!t[S].trim().length||"="===t[S]||Vt(t[S])))return console.log("764 ".concat("[".concat(32,"m","██ R3","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0}else h=!0,console.log("718 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_4",h)));else{if(u=!0,console.log("586 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_1",u))),!t[S+1]||!Lt(t,S)||!t.slice(S).includes("'")&&!t.slice(S).includes('"'))return console.log("605 EOF detected ".concat("[".concat(32,"m","██ R3.2","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;if("<"===t[Lt(t,S)])return console.log("615 ".concat("[".concat(32,"m","██ R3.3","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0}if(a.within||!r||!kt(t[S])||c||"="===t[Qt(t,S)]&&!$t(t,S)){if(!s&&c&&t[S].trim().length&&!kt(t[S]))if("="===t[S])s=!0,console.log("813 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_2",s)));else if(">"===t[S]||"/"===t[S]&&">"===t[Lt(t,S)]){var E=S;if("/"===t[S]&&(E=t[Lt(t,S)]),!Lt(t,E))return console.log("845 ".concat("[".concat(32,"m","██ R2.1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;u=!0,c=!1,console.log("835 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_1",c,"r3_1",u)))}else c=!1,console.log("856 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r2_1",c)));else if(!l&&s&&t[S].trim().length)"'\"".includes(t[S])?(l=!0,console.log("870 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_3",l)))):(c=!1,s=!1,console.log("880 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r2_1",c,"r2_2",s))));else if(l&&Vt(t[S]))t[S]===t[a.at]?(i=!0,console.log("896 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_4",i)))):null!=o&&o===S?(console.log("906 recursion, this is the index the future indicated"),xt(t[a.at])&&"\"'".includes(t[a.at])&&"\"'".includes(t[S])?(i=!0,console.log("928 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_4",i)))):xt(t[a.at])&&"‘’".includes(t[a.at])&&"‘’".includes(t[S])?(i=!0,console.log("942 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_4",i)))):xt(t[a.at])&&"“”".includes(t[a.at])&&"“”".includes(t[S])&&(i=!0,console.log("956 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_4",i))))):null==o&&Wt(t,null,S)&&(console.log("                        ██"),console.log("                        ██"),console.log("                        ██"),console.log("                        ██"),console.log("  OUTSIDE OF RECURSION, WITHIN MAIN LOOP AGAIN"),console.log("                        ██"),console.log("                        ██"),console.log("                        ██"),console.log("                        ██"),console.log("977 not a recursion, but result from one came positive"),a.within&&(a.within=!1),i=!0,console.log("987 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_4",i))));else if(i&&!a.within&&t[S].trim().length&&"/"!==t[S]){if(">"===t[S])return console.log("1001 ".concat("[".concat(32,"m","██ R2/1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;if(kt(t[S]))return console.log("1010 ".concat("[".concat(32,"m","██ R2/2","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0}}else c=!0,console.log("794 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r2_1",c)));if(a.within||!r||f||!kt(t[S])||"="===t[Qt(t,S)]&&!$t(t,S)){if(f&&t[S].trim().length&&(!kt(t[S])||"/"===t[S])){if("/"===t[S]&&">"===t[Lt(t,S)])return console.log("1050 ".concat("[".concat(32,"m","██ R4","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;f=!1,console.log("1060 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r4_1",f)))}}else f=!0,console.log("1033 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r4_1",f)));if(r&&!a.within&&!d&&t[S].trim().length&&kt(t[S])?(d=!0,console.log("1082 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r5_1",d)))):d&&!y&&t[S].trim().length&&!kt(t[S])?"="===t[S]?(y=!0,console.log("1100 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r5_2",y)))):(d=!1,console.log("1109 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r5_1",d)))):y&&!b&&t[S].trim().length?">"===t[S]?(b=!0,console.log("1123 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r5_3",b)))):(d=!1,y=!1,console.log("1133 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r5_1",d,"r5_2",y)))):b&&t[S].trim().length&&!qt(t[S])&&("<"===t[S]?(g=!0,console.log("1150 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r3_2",g)))):(d=!1,y=!1,b=!1,console.log("1161 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r5_1",d,"r5_2",y,"r5_3",b))))),a.within||A||!kt(t[S])&&t[S].trim().length||kt(t[S-1])||"="===t[S-1]||(A=!0,console.log("1200 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r6_1",A)))),a.within||!A||w||!t[S].trim().length||kt(t[S])){if(!v&&w&&t[S].trim().length)Vt(t[S])?(v=!0,console.log("1242 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r6_3",v)))):(A=!1,w=!1,console.log("1252 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r6_1",A,"r6_2",w))));else if(v&&Vt(t[S])){if(t[S]===t[a.at])return console.log("1268 ".concat("[".concat(32,"m","██ R6/1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;if(t[S+1]&&"/>".includes(t[Lt(t,S)]))return console.log("1281 ".concat("[".concat(32,"m","██ R6/1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0}}else"="===t[S]?(w=!0,console.log("1219 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r6_2",w)))):(A=!1,console.log("1228 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r6_1",A))));if(r&&t[S].trim().length&&kt(t[S])&&!_&&(_=!0,console.log("1305 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("set","r7_1",_)))),_&&!t[S].trim().length&&t[S+1]&&kt(t[S+1])&&(console.log("1328 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r7_1",_))),_=!1),!a.within&&t[S].trim().length&&!kt(t[S])&&_){if("="===t[S])return console.log("1356 ".concat("[".concat(32,"m","██ R7/1","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("return","true"))),console.log("\n\n\n\n\n\n"),!0;_=!1,console.log("1367 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Jt("reset","r7_1",_)))}r&&t[S].trim().length&&(r=!1)}return console.log("1496 withinTagInnerspace(): FIN. RETURN FALSE."),console.log("\n\n\n\n\n\n"),!1}function Mt(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("1512 util/tagOnTheRight() called, ".concat("[".concat(33,"m","idx","[",39,"m")," = ","[".concat(31,"m",n,"[",39,"m"))),console.log("1514 tagOnTheRight() called, idx = ".concat(n));var e=n?t.slice(n):t,o=!1;/^<\s*\w+\s*\/?\s*>/g.test(e)?(console.log("1533 util/tagOnTheRight(): ".concat("[".concat(31,"m","R1","[",39,"m")," passed")),o=!0):/^<\s*\w+\s+\w+\s*=\s*['"]/g.test(e)?(console.log("1538 util/tagOnTheRight(): ".concat("[".concat(31,"m","R2","[",39,"m")," passed")),o=!0):/^<\s*\/?\s*\w+\s*\/?\s*>/g.test(e)?(console.log("1543 util/tagOnTheRight(): ".concat("[".concat(31,"m","R3","[",39,"m")," passed")),o=!0):/^<\s*\w+(?:\s*\w+)*\s*\w+=['"]/g.test(e)&&(console.log("1548 util/tagOnTheRight(): ".concat("[".concat(31,"m","R4","[",39,"m")," passed")),o=!0);var a=xt(t)&&n<t.length&&o;return console.log("1554 util/tagOnTheRight(): return ".concat("[".concat(36,"m",a,"[",39,"m"))),a}var Ht=Array.isArray,Bt=function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ","[".concat(32,"m","██\n","[",39,"m"))),console.log("closingQuoteAt = ".concat(JSON.stringify(o,null,4)));var a=n[e];if("'"!==a&&'"'!==a)throw new Error("1 emlint/util/attributeOnTheRight(): first character is not a single/double quote!\nstartingQuoteVal = ".concat(JSON.stringify(a,null,0),"\nstr = ").concat(JSON.stringify(n,null,4),"\nidx = ").concat(JSON.stringify(e,null,0)));for(var r=!1,c=null,s=null,l=null,i=null,u=e,g=n.length;u<g;u++){var m=n[u].charCodeAt(0);if(console.log("[".concat(null===o?36:32,"m","===============================","[",39,"m [").concat(null===o?34:31,"m","str[ ".concat(u," ] = ").concat(n[u].trim().length?n[u]:JSON.stringify(n[u],null,0)),"[",39,"m ","[".concat(90,"m#",m,"[",39,"m")," [").concat(null===o?36:32,"m","===============================","[",39,"m")),(u===o&&u>e||null===o&&u>e&&n[u]===a)&&(o=u,console.log("1647 (util/attributeOnTheRight) ".concat(Jt("set","closingQuoteAt",o))),r||(r=!0,console.log("1656 (util/attributeOnTheRight) ".concat(Jt("set","closingQuoteMatched",r))))),">"===n[u]&&(c=u,console.log("1668 (util/attributeOnTheRight) ".concat(Jt("set","lastClosingBracket",c)))),"<"===n[u]&&(s=u,console.log("1678 (util/attributeOnTheRight) ".concat(Jt("set","lastOpeningBracket",s)))),"="===n[u]&&(i=u,console.log("1688 (util/attributeOnTheRight) ".concat(Jt("set","lastEqual",i)))),"'"!==n[u]&&'"'!==n[u]||(l=u,console.log("1694 (util/attributeOnTheRight) ".concat(Jt("set","lastSomeQuote",l)))),"="===n[u]&&("'"===n[u+1]||'"'===n[u+1]))if(console.log("1710 (util/attributeOnTheRight) within pattern check: equal-quote"),r){if(!c||c<o)return console.log("1718 (util/attributeOnTheRight) ".concat(Jt("return","closingQuoteAt",o))),o}else{if(o)return console.log("1733 (util/attributeOnTheRight) STOP",'recursive check ends, it\'s actually messed up. We are already within a recursion. Return "false".'),!1;if(console.log("1740 (util/attributeOnTheRight) ".concat(Jt(" ███████████████████████████████████████ correction!\n","true"))),0!==l&&n[u+1]!==l&&t(n,e,l))return console.log("1755 (util/attributeOnTheRight) CORRECTION #1 PASSED - so it was mismatching quote"),console.log("1758 (util/attributeOnTheRight) ".concat(Jt("return","lastSomeQuote",l))),l;if(t(n,u+1))return console.log("1774 (util/attributeOnTheRight) CORRECTION #2 PASSED - healthy attributes follow"),console.log("1777 (util/attributeOnTheRight) ".concat(Jt("return","false"))),!1}if(r&&c&&c>r)return console.log("1791 (util/attributeOnTheRight) ".concat(Jt("return","closingQuoteAt",o))),o;if(r&&null===c&&null===s&&(null===l||l&&o>=l)&&null===i)return console.log("1815 (util/attributeOnTheRight) ".concat(Jt("return","closingQuoteAt",o))),o;n[u+1]||console.log('1838 (util) "EOL reached"'),console.log(r?"closingQuoteMatched":"")}if(l&&null===o&&(console.log("1856 (util) last chance, run correction 3"),console.log("".concat("[".concat(33,"m","lastSomeQuote","[",39,"m")," = ",JSON.stringify(l,null,4))),t(n,e,l)))return console.log("1868 (util) CORRECTION #3 PASSED - mismatched quotes confirmed"),console.log("1870 (util) ".concat(Jt("return",!0))),l;return console.log("1875 (util) ".concat(Jt("bottom - return","false"))),!1},Ut=Wt,Kt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("1895 util/findClosingQuote() called, ".concat("[".concat(33,"m","idx","[",39,"m")," = ","[".concat(31,"m",n,"[",39,"m")));for(var e=null,o=null,a="\"'".includes(t[n])?t[n]:null,r=null,c=n,s=t.length;c<s;c++){var l=t[c].charCodeAt(0);if(console.log("[".concat(36,"m","===============================","[",39,"m [",34,"m","str[ ".concat(c," ] = ").concat(t[c].trim().length?t[c]:JSON.stringify(t[c],null,0)),"[",39,"m ","[".concat(90,"m#",l,"[",39,"m")," [",36,"m","===============================","[",39,"m")),34===l||39===l){if(t[c]===a&&c>n)return console.log("1926 (util/findClosingQuote) quick ending, ".concat(c," is the matching quote")),c;if(e=c,o=c,console.log("1934 (util/findClosingQuote) ".concat(Jt("set","lastNonWhitespaceCharWasQuoteAt",e))),c>n&&("'"===t[c]||'"'===t[c])&&Wt(t,c+1))return console.log("1948 (util/findClosingQuote) ".concat(Jt("return",c))),c;if(console.log("1951 (util/findClosingQuote) didn't pass"),Mt(t,c+1))return console.log("1955 [".concat(35,"m","██","[",39,"m (util/findClosingQuote) tag on the right - return i=",c)),c;console.log("1960 [".concat(35,"m","██","[",39,"m (util/findClosingQuote) NOT tag on the right"))}else if(t[c].trim().length)if(console.log("1966 (util/findClosingQuote)"),">"===t[c]){if(r=c,null!==e){console.log("1973 (util/findClosingQuote) ".concat(Jt("!","suitable candidate found")));var i=Wt(t,c);if(console.log("1982 (util/findClosingQuote) withinTagInnerspace() result: ".concat(i)),i)return e===n?(console.log("2005 (util/findClosingQuote) ".concat(Jt("return","lastNonWhitespaceCharWasQuoteAt + 1",e+1))),e+1):(console.log("2014 (util/findClosingQuote) ".concat(Jt("return","lastNonWhitespaceCharWasQuoteAt",e))),e)}}else if("="===t[c]){var u=Lt(t,c);if(console.log("2035 (util/findClosingQuote) ".concat(Jt("set","whatFollowsEq",u))),u&&Vt(t[u])){if(console.log("2045 (util/findClosingQuote)"),console.log("".concat("[".concat(33,"m","lastNonWhitespaceCharWasQuoteAt","[",39,"m")," = ",JSON.stringify(e,null,4))),o&&Wt(t,o+1))return console.log("2057 (util/findClosingQuote) ".concat(Jt("return","lastQuoteAt + 1",o+1))),o+1;if(!o){console.log("2065 we don't have lastQuoteAt");var g=t[c-1].trim().length?c-1:Qt(t,c),m=void 0;console.log("2082 ".concat("[".concat(33,"m","startingPoint","[",39,"m")," = ",JSON.stringify(g,null,4)));for(var h=g;h--;)if(console.log("2090 [".concat(36,"m","str[".concat(h,"] = ").concat(t[h]),"[",39,"m")),!t[h].trim().length){console.log("2093 [".concat(36,"m","break","[",39,"m")),m=Qt(t,h)+1;break}return console.log("2099 ".concat("[".concat(33,"m","RETURN","[",39,"m"),": ",JSON.stringify(m,null,4))),m}console.log("2108 recursive cycle didn't pass")}else if(t[c+1].trim().length){console.log(""),console.log("2113 it's not the expected quote but ".concat(t[u]," at index ").concat(u));for(var p=void 0,f=c;f--;)if(console.log("2126 [".concat(36,"m","str[".concat(f,"] = ").concat(t[f]),"[",39,"m")),!t[f].trim().length){p=Qt(t,f),console.log("2131 (util/findClosingQuote) ".concat(Jt("set","temp",p),", then BREAK"));break}return Vt(p)?(console.log("2142 (util/findClosingQuote) ".concat(Jt("return","temp",p))),p):(console.log("2147 (util/findClosingQuote) ".concat(Jt("return","temp + 1",p+1))),p+1)}}else if("/"!==t[c]){if("<"===t[c]&&Mt(t,c)&&(console.log("2158 ██ tag on the right"),null!==r))return console.log("2161 (util/findClosingQuote) ".concat(Jt("return","lastClosingBracketAt",r))),r;null!==e&&(e=null,console.log("2175 (util/findClosingQuote) ".concat(Jt("set","lastNonWhitespaceCharWasQuoteAt",e))))}console.log("2187 (util/findClosingQuote) ".concat(Jt("END","lastNonWhitespaceCharWasQuoteAt",e)))}return null},Gt=Mt,Zt=Vt,zt=function(t,n){return"&"!==t[n]||t[n+1]&&"a"===t[n+1]||t[n+2]&&"m"===t[n+2]||t[n+3]&&"p"===t[n+3]||t[n+3]&&";"===t[n+3]?"<"===t[n]?{name:"bad-character-unencoded-opening-bracket",position:[[n,n+1,"&lt;"]]}:">"===t[n]?{name:"bad-character-unencoded-closing-bracket",position:[[n,n+1,"&gt;"]]}:'"'===t[n]?{name:"bad-character-unencoded-double-quotes",position:[[n,n+1,"&quot;"]]}:"`"===t[n]?{name:"bad-character-grave-accent",position:[[n,n+1,"&#x60;"]]}:"£"===t[n]?{name:"bad-character-unencoded-pound",position:[[n,n+1,"&pound;"]]}:"€"===t[n]?{name:"bad-character-unencoded-euro",position:[[n,n+1,"&euro;"]]}:"¢"===t[n]?{name:"bad-character-unencoded-cent",position:[[n,n+1,"&cent;"]]}:null:{name:"bad-character-unencoded-ampersand",position:[[n,n+1,"&amp;"]]}},Xt=xt,Yt=Jt;t.lint=function(t,o){if(!Xt(t))throw new Error("emlint: [THROW_ID_01] the first input argument must be a string. It was given as:\n".concat(JSON.stringify(t,null,4)," (type ").concat(n(t),")"));var a,r,c={rules:"recommended",style:{line_endings_CR_LF_CRLF:null}};if(o){if(!h(o))throw new Error("emlint: [THROW_ID_02] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(o,null,4)," (type ").concat(n(o),")"));if(Et(a=Object.assign({},c,o),c,{msg:"emlint: [THROW_ID_03*]",schema:{rules:["string","object","false","null","undefined"],style:["object","null","undefined"],"style.line_endings_CR_LF_CRLF":["string","null","undefined"]}}),a.style&&Xt(a.style.line_endings_CR_LF_CRLF))if("cr"===a.style.line_endings_CR_LF_CRLF.toLowerCase())"CR"!==a.style.line_endings_CR_LF_CRLF&&a.style.line_endings_CR_LF_CRLF;else if("lf"===a.style.line_endings_CR_LF_CRLF.toLowerCase())"LF"!==a.style.line_endings_CR_LF_CRLF&&a.style.line_endings_CR_LF_CRLF;else{if("crlf"!==a.style.line_endings_CR_LF_CRLF.toLowerCase())throw new Error('emlint: [THROW_ID_04] opts.style.line_endings_CR_LF_CRLF should be either falsey or string "CR" or "LF" or "CRLF". It was given as:\n'.concat(JSON.stringify(a.style.line_endings_CR_LF_CRLF,null,4)," (type is string)"));"CRLF"!==a.style.line_endings_CR_LF_CRLF&&a.style.line_endings_CR_LF_CRLF}}else a=T(c);console.log("112 USING ".concat("[".concat(33,"m","opts","[",39,"m")," = ",JSON.stringify(a,null,4))),a.style&&Xt(a.style.line_endings_CR_LF_CRLF)&&(r="cr"===a.style.line_endings_CR_LF_CRLF.toLowerCase()?"\r":"crlf"===a.style.line_endings_CR_LF_CRLF.toLowerCase()?"\r\n":"\n");var s,l,i=null,u=null,g={tagStartAt:null,tagEndAt:null,tagNameStartAt:null,tagNameEndAt:null,tagName:null,recognised:null,closing:null,pureHTML:!0,attributes:[]};function m(){s=T(g)}m();var p,f,d={attrStartAt:null,attrEndAt:null,attrNameStartAt:null,attrNameEndAt:null,attrName:null,attrValue:null,attrValueStartAt:null,attrValueEndAt:null,attrEqualAt:null,attrOpeningQuote:{pos:null,val:null},attrClosingQuote:{pos:null,val:null},recognised:null,pureHTML:!0};function y(){l=T(d)}y(),p=T({headStartAt:null,headEndAt:null,tailStartAt:null,tailEndAt:null,startAt:null,endAt:null});var b={startAt:null,includesLinebreaks:!1,lastLinebreakAt:null};function A(){f=T(b)}A();var w={issues:[]},v=[],_=[],S={cr:[],lf:[],crlf:[]},O=null,E=null;0===t.length&&(w.issues.push({name:"file-empty",position:[[0,0]]}),console.log("286 ".concat(Yt("push","file-empty"))));for(var C=function(n,o){var c,g=t[n].charCodeAt(0);if(console.log("[".concat(36,"m","===============================","[",39,"m [",35,"m","str[ ".concat(n," ] = ").concat(t[n].trim().length?t[n]:JSON.stringify(t[n],null,0)),"[",39,"m ","[".concat(90,"m#",g,"[",39,"m")," [",36,"m","===============================","[",39,"m ","[".concat(31,"m",i&&i!==n?"██ doNothingUntil ".concat(i," (reason: ").concat(u,")"):"","[",39,"m"))),i&&!0!==i&&n>=i&&(i=null,console.log("332 ".concat(Yt("RESET","doNothingUntil",i))),u=null),(null===i||null!==i&&"script tag"!==u||"script tag"===u&&("\\"!==t[n-1]||"\\"===t[n-2]))&&(null===O&&"\"'`".includes(t[n])?(O=n,console.log("351 ".concat(Yt("set","withinQuotes",O)))):null===O||t[O]!==t[n]||E&&E!==n||(console.log("357 withinQuotes was ".concat(O,", resetting to null")),O=null,E=null,console.log("360 ".concat(Yt("set","withinQuotes",O))))),E&&E===n&&(O=null,E=null,console.log("368 ".concat(Yt("reset","withinQuotes",O,"withinQuotesEndAt",E)))),"{}%-$_()".includes(t[n])&&t[n+1]&&"{}%-$_()".includes(t[n+1])&&null===p.headStartAt&&null===p.startAt&&(p.headStartAt=n,p.startAt=n,console.log("410 ".concat(Yt("SET","logEspTag.headStartAt",p.headStartAt,"logEspTag.startAt",p.startAt)))),!i&&null!==s.tagNameEndAt){if(console.log("432 ".concat("[".concat(90,"m","above catching the ending of an attribute's name","[",39,"m"))),null===l.attrNameStartAt||null!==l.attrNameEndAt||null!==l.attrName||Pt(t[n])||(l.attrNameEndAt=n,l.attrName=t.slice(l.attrNameStartAt,l.attrNameEndAt),console.log("447 ".concat(Yt("SET","logAttr.attrNameEndAt",l.attrNameEndAt,"logAttr.attrName",l.attrName))),"="!==t[n]&&("="===t[Lt(t,n)]?console.log("462 equal to the right though"):console.log("465 not equal, so terminate attr"))),console.log("471 ".concat("[".concat(90,"m","above catching what follows the attribute's name","[",39,"m"))),null!==l.attrNameEndAt&&null===l.attrEqualAt&&n>=l.attrNameEndAt&&t[n].trim().length){var h;if("'"!==t[n]&&'"'!==t[n]||(h=Bt(t,n)),console.log("485 ".concat("[".concat(90,"m","inside catch what follows the attribute's name","[",39,"m"))),"="===t[n]){if(l.attrEqualAt=n,console.log("490 ".concat(Yt("SET","logAttr.attrEqualAt",l.attrEqualAt))),t[n+1]){var d=Lt(t,n);if("="===t[d]){console.log("509 REPEATED EQUAL DETECTED");var b=n+1,C=d+1;for(i=C,u="repeated equals",console.log("520 ".concat(Yt("set","doNothingUntil",i))),console.log("524 SET ".concat("[".concat(36,"m",'nextEqualStartAt = "'.concat(b,'"; nextEqualEndAt = "').concat(C,';"'),"[",39,"m")));b&&C;){console.log("       ".concat("[".concat(35,"m","*","[",39,"m"))),w.issues.push({name:"tag-attribute-repeated-equal",position:[[b,C]]}),console.log("533 ".concat(Yt("push","tag-attribute-repeated-equal","".concat("[[".concat(b,", ").concat(C,"]]")))));var R=Lt(t,C-1);console.log("541 ".concat(Yt("set","temp",R))),"="===t[R]?(console.log("544 ".concat("[".concat(36,"m",'yes, there\'s "=" on the right',"[",39,"m"))),b=C,C=R+1,console.log("549 SET ".concat("[".concat(36,"m",'nextEqualStartAt = "'.concat(b,'"; nextEqualEndAt = "').concat(C,';"'),"[",39,"m"))),i=C,u="already processed equals",console.log("557 ".concat(Yt("set","doNothingUntil",i)))):(b=null,console.log("562 ".concat(Yt("set","nextEqualStartAt",b))))}console.log("       ".concat("[".concat(35,"m","*","[",39,"m")))}}}else h?(console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ENDED ","[".concat(32,"m","██\n","[",39,"m"))),console.log("574 quoted attribute's value on the right, equal is indeed missing"),w.issues.push({name:"tag-attribute-missing-equal",position:[[n,n,"="]]}),console.log("582 ".concat(Yt("push","tag-attribute-missing-equal","".concat("[[".concat(n,", ").concat(n,', "="]]'))))),l.attrEqualAt=n,console.log("591 ".concat(Yt("SET","logAttr.attrEqualAt",l.attrEqualAt))),l.attrValueStartAt=n+1,console.log("596 ".concat(Yt("SET","logAttr.attrValueStartAt",l.attrValueStartAt))),l.attrValueEndAt=h,console.log("605 ".concat(Yt("SET","logAttr.attrValueEndAt",l.attrValueEndAt))),l.attrOpeningQuote.pos=n,l.attrOpeningQuote.val=t[n],l.attrClosingQuote.pos=h,l.attrClosingQuote.val=t[h],console.log("617 ".concat(Yt("SET","logAttr.attrOpeningQuote",l.attrOpeningQuote,"logAttr.attrClosingQuote",l.attrClosingQuote))),l.attrValue=t.slice(n+1,h),console.log("628 ".concat(Yt("SET","logAttr.attrValue",l.attrValue)))):(console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ENDED ","[".concat(32,"m","██\n","[",39,"m"))),s.attributes.push(T(l)),console.log("640 ".concat(Yt("PUSH, then RESET","logAttr"))),y());null!==f.startAt&&("="===t[n]?(w.issues.push({name:"tag-attribute-space-between-name-and-equals",position:[[f.startAt,n]]}),console.log("655 ".concat(Yt("push","tag-attribute-space-between-name-and-equals","".concat("[[".concat(f.startAt,", ").concat(n,"]]"))))),A()):Pt(t[n])&&(s.attributes.push(T(l)),console.log("668 ".concat(Yt("PUSH, then RESET","logAttr"))),y(),null!==f.startAt&&(" "===t[f.startAt]?(f.startAt+1<n&&(w.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[f.startAt+1,n]]}),console.log("683 ".concat(Yt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(f.startAt+1,", ").concat(n,"]]")))))),console.log("690 dead end of excessive whitespace check")):(w.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[f.startAt,n," "]]}),console.log("698 ".concat(Yt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(f.startAt,", ").concat(n,', " "]]')))))))))}if(console.log("713 ".concat("[".concat(90,"m","above catching the begining of an attribute's name","[",39,"m"))),null===l.attrStartAt&&Pt(t[n])&&(console.log("718 ".concat("[".concat(90,"m","inside catching the begining of an attribute's name","[",39,"m"))),l.attrStartAt=n,l.attrNameStartAt=n,console.log("723 ".concat(Yt("SET","logAttr.attrStartAt",l.attrStartAt,"logAttr.attrNameStartAt",l.attrNameStartAt))),null!==f.startAt&&f.startAt<n-1&&(" "===t[f.startAt]?(w.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[f.startAt+1,n]]}),console.log("745 ".concat(Yt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(f.startAt+1,", ").concat(n,"]]")))))):(w.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[f.startAt,n," "]]}),console.log("758 ".concat(Yt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(f.startAt,", ").concat(n,', " "]]'))))))),t[n-1]&&Zt(t[n-1])))for(var j=n-1;j--;)if(!Zt(t[j])){t[j].trim().length||(w.issues.push({name:"tag-stray-character",position:[[j+1,n]]}),console.log("779 ".concat(Yt("push","tag-stray-character","".concat(JSON.stringify([[j+1,n]],null,0))))));break}if(console.log("794 ".concat("[".concat(90,"m","above catching what follows attribute's equal","[",39,"m"))),null!==l.attrEqualAt&&null===l.attrOpeningQuote.pos)if(console.log("802 ".concat("[".concat(90,"m","inside catching what follows attribute's equal","[",39,"m"))),l.attrEqualAt<n&&t[n].trim().length){if(console.log("805 catching what follows equal"),34===g||39===g){f.startAt&&f.startAt<n&&(w.issues.push({name:"tag-attribute-space-between-equals-and-opening-quotes",position:[[f.startAt,n]]}),console.log("816 ".concat(Yt("push","tag-attribute-space-between-equals-and-opening-quotes","".concat(JSON.stringify([[f.startAt,n]],null,0)))))),A(),l.attrOpeningQuote.pos=n,l.attrOpeningQuote.val=t[n];var L=Kt(t,n);if(console.log("830 ".concat(Yt("set","closingQuotePeek",L))),L){if(t[L]!==t[n])if("'"===t[L]||'"'===t[L]){var Q='"'===t[L],I="tag-attribute-mismatching-quotes-is-".concat(Q?"double":"single");w.issues.push({name:I,position:[[L,L+1,"".concat(Q?"'":'"')]]}),console.log("861 ".concat(Yt("push",I,"".concat("[[".concat(L,", ").concat(L+1,", ").concat(Q?"'":'"',"]]")))))}else{var F=t[L-1].trim().length?L:Qt(t,L)+1;console.log("894 ".concat(Yt("set","fromPositionToInsertAt",F)));var k=L;console.log("902 ".concat(Yt("set","toPositionToInsertAt",k))),"/"===t[Qt(t,L)]&&(console.log("910 SLASH ON THE LEFT"),(k=Qt(t,L))+1<L&&(w.issues.push({name:"tag-whitespace-closing-slash-and-bracket",position:[[k+1,L]]}),console.log("919 ".concat(Yt("push","tag-whitespace-closing-slash-and-bracket","".concat("[[".concat(k+1,", ").concat(L,"]]")))))),F=Qt(t,k)+1,console.log("932 ".concat(Yt("set","toPositionToInsertAt",k,"fromPositionToInsertAt",F)))),w.issues.push({name:"tag-attribute-closing-quotation-mark-missing",position:[[F,k,"".concat(t[n]).concat("")]]}),console.log("953 ".concat(Yt("push","tag-attribute-closing-quotation-mark-missing","".concat("[[".concat(L,", ").concat(L,", ","".concat(t[n]).concat(""),"]]")))))}l.attrClosingQuote.pos=L,l.attrClosingQuote.val=t[n],l.attrValue=t.slice(n+1,L),l.attrValueStartAt=n+1,l.attrValueEndAt=L,l.attrEndAt=L,console.log("971 ".concat(Yt("set","logAttr.attrClosingQuote",l.attrClosingQuote,"logAttr.attrValue",l.attrValue,"logAttr.attrValueStartAt",l.attrValueStartAt,"logAttr.attrValueEndAt",l.attrValueEndAt,"logAttr.attrEndAt",l.attrEndAt)));for(var $=n+1;$<L;$++){var V=zt(t,$);V&&(v.push(V),console.log("997 ".concat(Yt("push tagIssueStaging","newIssue",V))))}return _.length&&console.log("1006 ".concat("[".concat(31,"m","██","[",39,"m")," raw stage present!")),l.attrNameStartAt&&t[l.attrNameStartAt-1].trim().length&&!w.issues.some(function(t){return N=n,("tag-stray-quotes"===t.name||"tag-stray-character"===t.name)&&t.position[0][1]===l.attrNameStartAt})&&(w.issues.push({name:"tag-missing-space-before-attribute",position:[[l.attrNameStartAt,l.attrNameStartAt," "]]}),console.log("1034 ".concat(Yt("push","tag-missing-space-before-attribute","".concat("[[".concat(l.attrNameStartAt,", ").concat(l.attrNameStartAt,', " "]]')))))),s.attributes.push(T(l)),console.log("1046 ".concat(Yt("PUSH, then RESET","logAttr"))),i=t[L].trim().length?L-(Zt(t[L])?0:1)+1:Qt(t,L)+1,u="closing quote looked up",null!==O&&(E=l.attrClosingQuote.pos),console.log("1072 ".concat(Yt("set","doNothingUntil",i,"withinQuotesEndAt",E))),y(),n===o-1&&null!==s.tagStartAt&&(null!==l.attrEqualAt&&null!==l.attrOpeningQuote.pos||s.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote.pos}))&&(w.issues.push({name:"tag-missing-closing-bracket",position:[[n+1,n+1,">"]]}),console.log("1102 ".concat(Yt("push","tag-missing-closing-bracket","".concat("[[".concat(n+1,", ").concat(n+1,', ">"]]')))))),console.log("1110 ".concat(Yt("continue"))),N=n,"continue"}}else if(8220===g||8221===g){l.attrOpeningQuote.pos=n,l.attrOpeningQuote.val='"',console.log("1121 ".concat(Yt("set","logAttr.attrOpeningQuote",l.attrOpeningQuote)));var q=8220===g?"tag-attribute-left-double-quotation-mark":"tag-attribute-right-double-quotation-mark";w.issues.push({name:q,position:[[n,n+1,'"']]}),console.log("1138 ".concat(Yt("push",q,"".concat("[[".concat(n,", ").concat(n+1,", '\"']]"))))),l.attrValueStartAt=n+1,console.log("1143 ".concat(Yt("set","logAttr.attrValueStartAt",l.attrValueStartAt))),O=n,console.log("1152 ".concat(Yt("set","withinQuotes",O)))}else{if(8216!==g&&8217!==g){if(Ut(t,n)){console.log("1764 [".concat(33,"m","██","[",39,"m - withinTagInnerspace() ","[".concat(32,"m","true","[",39,"m")));var x=l.attrStartAt,P=Lt(t,n);if(console.log("1778 ".concat(Yt("set","start",x,"temp",P))),"/"===t[n]&&P&&">"===t[P]||">"===t[n])for(var D=l.attrStartAt;D--;)if(t[D].trim().length){x=D+1;break}return w.issues.push({name:"tag-attribute-quote-and-onwards-missing",position:[[x,n]]}),console.log("1797 ".concat(Yt("push","tag-attribute-quote-and-onwards-missing","".concat("[[".concat(x,", ").concat(n,"]]"))))),console.log("1804 ".concat(Yt("reset","logWhitespace"))),A(),console.log("1806 ".concat(Yt("reset","logAttr"))),y(),console.log("1811 ".concat(Yt("offset the index","i--; then continue"))),N=--n,"continue"}console.log("1195 [".concat(33,"m","██","[",39,"m - withinTagInnerspace() ","[".concat(32,"m","false","[",39,"m")));var J=Kt(t,n);console.log("1201 ███████████████████████████████████████"),console.log("1203 ".concat(Yt("set","closingQuotePeek",J)));var W=Zt(t[J])?t[J]:'"';w.issues.push({name:"tag-attribute-opening-quotation-mark-missing",position:[[Qt(t,n)+1,n,W]]}),console.log("1216 ".concat(Yt("push","tag-attribute-opening-quotation-mark-missing","".concat("[[".concat(Qt(t,n)+1,", ").concat(n,", ").concat(W,"]]"))))),l.attrOpeningQuote={pos:n,val:W},l.attrValueStartAt=n,console.log("1230 mark opening quote: ".concat(Yt("set","logAttr.attrOpeningQuote",l.attrOpeningQuote,"logAttr.attrValueStartAt",l.attrValueStartAt))),O=n,console.log("1240 ".concat(Yt("set","withinQuotes",O))),console.log("1245 traverse forward\n\n\n");for(var M,H=null,B=null,U=n;U<o;U++){if(console.log("1272 [".concat(36,"m","str[".concat(U,'] = "').concat(t[U],'"'),"[",39,"m")),">"===t[U]&&("/"!==t[Qt(t,U)]&&Ut(t,U)||"/"===t[Qt(t,U)])){var K=Qt(t,U);H=U,console.log("1282 ".concat(Yt("set","leftAt",K,"closingBracketIsAt",H))),B=U,"/"===t[K]&&(B=K,console.log("1294 ".concat(Yt("set","innerTagEndsAt",B))))}if(null!==B&&"=<".includes(t[U])){console.log("1306 [".concat(36,"m",'break ("'.concat(t[U],'" is a bad character)'),"[",39,"m"));break}}console.log("1314 ".concat(Yt("set","closingBracketIsAt",H,"innerTagEndsAt",B))),M=n<B?t.slice(n,B):"",console.log("1330 ".concat(Yt("set","innerTagContents",M)));var G,Z=B;if(M.includes("=")){console.log("1345 inner tag contents include an equal character");var z=M.split("=")[0];if(console.log("1358 ".concat(Yt("set","temp1",z))),z.split("").some(function(t){return!t.trim().length})){console.log("1363 traverse backwards to find beginning of the attr on the right\n\n\n");for(var X=n+z.length;X--;){if(console.log("1368 [".concat(35,"m","str[".concat(X,"] = ").concat(t[X]),"[",39,"m")),!t[X].trim().length){G=X+1,console.log("1376 ".concat(Yt("set","attributeOnTheRightBeginsAt",G,"then BREAK")));break}if(X===n)break}console.log("\n\n\n"),console.log("1393 ".concat(Yt("log","attributeOnTheRightBeginsAt",G)));var Y=Qt(t,G);Zt(Y)||(Z=Y+1)}}else console.log("1409 inner tag contents don't include an equal character");var tt=null,nt=null,et=null,ot=!1;console.log("\n\n\n\n\n\n"),console.log("1425 ".concat("[".concat(31,"m","TRAVERSE BACKWARDS","[",39,"m"),"; startingPoint=",Z));for(var at=Z;at--;at>n){if(console.log("1430 ".concat("[".concat(36,"m","str[".concat(at,"] = ").concat(t[at]),"[",39,"m"))),"="===t[at]){console.log("1434 ".concat(Yt("break")));break}if(null===tt&&t[at].trim().length&&(tt=at+1,console.log("1442 ".concat(Yt("set","caughtAttrEnd",tt))),ot&&(et=tt,console.log("1449 ".concat(Yt("set","finalClosingQuotesShouldBeAt",et))),ot=!1,console.log("1458 ".concat(Yt("set","boolAttrFound",ot))))),!t[at].trim().length&&tt){if(nt=at+1,console.log("1466 ".concat("[".concat(35,"m","ATTR","[",39,"m"),": ",t.slice(nt,tt)," (").concat(nt,"-").concat(tt,")")),"="===t[Lt(t,tt)]){var rt=Qt(t,nt);Zt(t[rt])||(G=Lt(t,rt+1),console.log("1540 ".concat(Yt("set","attributeOnTheRightBeginsAt",G))));break}if(!e.includes(t.slice(nt,tt))){console.log("1563 ".concat(Yt("break")));break}ot=!0,console.log("1559 ".concat(Yt("set","boolAttrFound",ot))),tt=null,nt=null,console.log("1572 ".concat(Yt("reset","caughtAttrEnd",tt,"caughtAttrStart",nt)))}}if(console.log("1583 ".concat("[".concat(31,"m","TRAVERSE ENDED","[",39,"m"))),console.log("1592 ".concat(Yt("log","finalClosingQuotesShouldBeAt",et,"attributeOnTheRightBeginsAt",G))),!et&&G&&(et=Qt(t,G)+1,console.log("1606 ".concat(Yt("log","attributeOnTheRightBeginsAt",G))),console.log("1613 ".concat(Yt("set","finalClosingQuotesShouldBeAt",et)))),console.log("1622 ██ ".concat(Yt("log","caughtAttrEnd",tt,"left(str, caughtAttrEnd)",Qt(t,tt)))),tt&&l.attrOpeningQuote&&!et&&t[Qt(t,tt)]!==l.attrOpeningQuote.val&&(et=tt,console.log("1639 ".concat(Yt("set","finalClosingQuotesShouldBeAt",et)))),console.log("1648 ".concat("[".concat(32,"m","██"," [",39,"m")," ","[".concat(33,"m","finalClosingQuotesShouldBeAt","[",39,"m")," = ",JSON.stringify(et,null,4))),et?(w.issues.push({name:"tag-attribute-closing-quotation-mark-missing",position:[[et,et,l.attrOpeningQuote.val]]}),console.log("1670 ".concat(Yt("push","tag-attribute-closing-quotation-mark-missing","".concat("[[".concat(et,", ").concat(et,", ").concat(l.attrOpeningQuote.val,"]]"))))),l.attrClosingQuote.pos=et,l.attrValueEndAt=et,l.attrEndAt=et+1):(l.attrClosingQuote.pos=Qt(t,tt),l.attrValueEndAt=l.attrClosingQuote.pos,l.attrEndAt=tt),l.attrClosingQuote.val=l.attrOpeningQuote.val,l.attrValue=t.slice(l.attrOpeningQuote.pos,l.attrClosingQuote.pos),console.log("1698 ".concat(Yt("set","logAttr.attrClosingQuote.pos",l.attrClosingQuote.pos,"logAttr.attrClosingQuote.val",l.attrClosingQuote.val,"logAttr.attrValueEndAt",l.attrValueEndAt,"logAttr.attrEndAt",l.attrEndAt,"logAttr.attrValue",l.attrValue))),l.attrValueStartAt<l.attrValueEndAt)for(var ct=l.attrValueStartAt;ct<l.attrValueEndAt;ct++){console.log("1721 [".concat(36,"m","str[".concat(ct,"] = ").concat(t[ct]),"[",39,"m"));var st=zt(t,ct);st&&(w.issues.push(st),console.log("1727 ".concat(Yt("push","unencoded character",st))))}return i||(i=l.attrClosingQuote.pos,u="missing opening quotes",f.startAt=null,console.log("1740 ".concat(Yt("set","doNothingUntil",i,"logWhitespace.startAt",f.startAt)))),console.log("1751 ".concat(Yt("about to push","logAttr",l))),s.attributes.push(T(l)),console.log("1754 ".concat(Yt("PUSH, then RESET","logAttr","then CONTINUE"))),y(),N=n,"continue"}l.attrOpeningQuote.pos=n,l.attrOpeningQuote.val="'",console.log("1161 ".concat(Yt("set","logAttr.attrOpeningQuote",l.attrOpeningQuote)));var lt=8216===g?"tag-attribute-left-single-quotation-mark":"tag-attribute-right-single-quotation-mark";w.issues.push({name:lt,position:[[n,n+1,"'"]]}),console.log("1178 ".concat(Yt("push",lt,"".concat("[[".concat(n,", ").concat(n+1,", '\"']]"))))),l.attrValueStartAt=n+1,console.log("1183 ".concat(Yt("set","logAttr.attrValueStartAt",l.attrValueStartAt))),O=n,console.log("1192 ".concat(Yt("set","withinQuotes",O)))}console.log("1818 ".concat(Yt("SET","logAttr.attrOpeningQuote.pos",l.attrOpeningQuote.pos,"logAttr.attrOpeningQuote.val",l.attrOpeningQuote.val))),null!==f.startAt&&("'"===t[n]||'"'===t[n]?(w.issues.push({name:"tag-attribute-space-between-equals-and-opening-quotes",position:[[f.startAt,n]]}),console.log("1836 ".concat(Yt("push","tag-attribute-space-between-equals-and-opening-quotes","".concat("[[".concat(f.startAt,", ").concat(n,"]]")))))):Ut(t,n+1)&&(w.issues.push({name:"tag-attribute-quote-and-onwards-missing",position:[[l.attrStartAt,n]]}),console.log("1851 ".concat(Yt("push","tag-attribute-quote-and-onwards-missing","".concat("[[".concat(l.attrStartAt,", ").concat(n,"]]"))))),console.log("1857 ".concat(Yt("reset","logAttr"))),y()))}else t[n+1]&&Lt(t,n)||(console.log("1862"),w.issues.push({name:"file-missing-ending",position:[[n+1,n+1]]}),console.log("1868 ".concat(Yt("push","tag-attribute-quote-and-onwards-missing","".concat("[[".concat(n+1,", ").concat(n+1,"]]"))))));if(console.log("1878 ".concat("[".concat(90,"m","above catching closing quote (single or double)","[",39,"m"))),null!==l.attrEqualAt&&null!==l.attrOpeningQuote.pos&&(null===l.attrClosingQuote.pos||n===l.attrClosingQuote.pos)&&n>l.attrOpeningQuote.pos&&Zt(t[n]))if(console.log("1890 ".concat("[".concat(90,"m","inside catching closing quote (single or double)","[",39,"m"))),34===g||39===g){var it="tag-attribute-mismatching-quotes-is-".concat(34===g?"double":"single");t[n]===l.attrOpeningQuote.val||w.issues.length&&w.issues.some(function(t){return N=n,t.name===it&&1===t.position.length&&t.position[0][0]===n&&t.position[0][1]===n+1})?console.log("1926 ".concat("[".concat(31,"m","didn't push an issue","[",39,"m"))):(w.issues.push({name:it,position:[[n,n+1,"".concat(34===g?"'":'"')]]}),console.log("1918 ".concat(Yt("push",it,"".concat("[[".concat(n,", ").concat(n+1,", ").concat(34===g?"'":'"',"]]")))))),l.attrClosingQuote.pos=n,l.attrClosingQuote.val=t[n],console.log("1937 ".concat(Yt("SET","logAttr.attrClosingQuote.pos",l.attrClosingQuote.pos,"logAttr.attrClosingQuote.val",l.attrClosingQuote.val))),null===l.attrValue&&(l.attrOpeningQuote.pos&&l.attrClosingQuote.pos&&l.attrOpeningQuote.pos+1<l.attrClosingQuote.pos?l.attrValue=t.slice(l.attrValueStartAt,n):l.attrValue="",console.log("1962 ".concat(Yt("SET","logAttr.attrValue",l.attrValue)))),l.attrEndAt=n,l.attrValueEndAt=n,console.log("1970 ".concat(Yt("SET","logAttr.attrEndAt",l.attrEndAt,"logAttr.attrValueEndAt",l.attrValueEndAt))),O&&(O=null,console.log("1982 ".concat(Yt("SET","withinQuotes",O)))),s.attributes.push(T(l)),console.log("1987 ".concat(Yt("PUSH, then RESET","logAttr"))),y()}else if(!Xt(l.attrOpeningQuote.val)||8220!==g&&8221!==g){if(Xt(l.attrOpeningQuote.val)&&(8216===g||8217===g)&&(null!==Lt(t,n)&&(">"===t[Lt(t,n)]||"/"===t[Lt(t,n)])||Ut(t,n+1))){var ut=8216===g?"tag-attribute-left-single-quotation-mark":"tag-attribute-right-single-quotation-mark";w.issues.push({name:ut,position:[[n,n+1,"'"]]}),console.log("2045 ".concat(Yt("push",ut,"".concat("[[".concat(n,", ").concat(n+1,', "\'"]]'))))),l.attrEndAt=n,l.attrClosingQuote.pos=n,l.attrClosingQuote.val="'",console.log("2053 ".concat(Yt("SET","logAttr.attrEndAt",l.attrEndAt,"logAttr.attrClosingQuote",l.attrClosingQuote))),O=null,E=null,console.log("2066 ".concat(Yt("reset","withinQuotes & withinQuotesEndAt"))),s.attributes.push(T(l)),console.log("2071 ".concat(Yt("PUSH, then RESET","logAttr"))),y()}}else{var gt=8220===g?"tag-attribute-left-double-quotation-mark":"tag-attribute-right-double-quotation-mark";w.issues.push({name:gt,position:[[n,n+1,'"']]}),console.log("2005 ".concat(Yt("push",gt,"".concat("[[".concat(n,", ").concat(n+1,", '\"']]"))))),l.attrEndAt=n,l.attrClosingQuote.pos=n,l.attrClosingQuote.val='"',console.log("2013 ".concat(Yt("SET","logAttr.attrEndAt",l.attrEndAt,"logAttr.attrClosingQuote",l.attrClosingQuote))),s.attributes.push(T(l)),console.log("2024 ".concat(Yt("PUSH, then RESET","logAttr"))),y()}console.log("2079 ".concat("[".concat(90,"m","error clauses","[",39,"m"))),l.attrOpeningQuote.val&&l.attrOpeningQuote.pos<n&&null===l.attrClosingQuote.pos&&("/"===t[n]&&Lt(t,n)&&">"===t[Lt(t,n)]||">"===t[n])&&(console.log("2090 inside error catch clauses"),w.issues.push({name:"tag-attribute-closing-quotation-mark-missing",position:[[n,n,l.attrOpeningQuote.val]]}),console.log("2097 ".concat(Yt("push","tag-attribute-closing-quotation-mark-missing","".concat("[[".concat(n,", ").concat(n,", ").concat(l.attrOpeningQuote.val,"]]"))))),l.attrClosingQuote.pos=n,l.attrClosingQuote.val=l.attrOpeningQuote.val,console.log("2107 ".concat(Yt("set","logAttr.attrClosingQuote",l.attrClosingQuote))),s.attributes.push(T(l)),console.log("2115 ".concat(Yt("PUSH, then RESET","logAttr"))),y())}if(!i)if(g<32){var mt="bad-character-".concat(It[g]);if(9===g)w.issues.push({name:mt,position:[[n,n+1,"  "]]}),console.log('2144 PUSH "'.concat(mt,'", [[').concat(n,", ").concat(n+1,', "  "]]'));else if(13===g)Xt(t[n+1])&&10===t[n+1].charCodeAt(0)?a.style&&a.style.line_endings_CR_LF_CRLF&&"CRLF"!==a.style.line_endings_CR_LF_CRLF?(w.issues.push({name:"file-wrong-type-line-ending-CRLF",position:[[n,n+2,r]]}),console.log("2163 ".concat(Yt("push","file-wrong-type-line-ending-CRLF","".concat("[[".concat(n,", ").concat(n+2,", ").concat(JSON.stringify(r,null,0),"]]")))))):(S.crlf.push([n,n+2]),console.log("2177 ".concat(Yt("logLineEndings.crlf push","[".concat(n,", ").concat(n+2,"]"))))):a.style&&a.style.line_endings_CR_LF_CRLF&&"CR"!==a.style.line_endings_CR_LF_CRLF?(w.issues.push({name:"file-wrong-type-line-ending-CR",position:[[n,n+1,r]]}),console.log("2193 ".concat(Yt("push","file-wrong-type-line-ending-CR","".concat("[[".concat(n,", ").concat(n+1,", ").concat(JSON.stringify(r,null,0),"]]")))))):(S.cr.push([n,n+1]),console.log("2207 ".concat(Yt("logLineEndings.cr push","[".concat(n,", ").concat(n+1,"]")))));else if(10===g)Xt(t[n-1])&&13===t[n-1].charCodeAt(0)||(a.style&&a.style.line_endings_CR_LF_CRLF&&"LF"!==a.style.line_endings_CR_LF_CRLF?(w.issues.push({name:"file-wrong-type-line-ending-LF",position:[[n,n+1,r]]}),console.log("2227 ".concat(Yt("push","file-wrong-type-line-ending-LF","".concat("[[".concat(n,", ").concat(n+1,", ").concat(JSON.stringify(r,null,0),"]]")))))):(S.lf.push([n,n+1]),console.log("2241 ".concat(Yt("logLineEndings.lf push","[".concat(n,", ").concat(n+1,"]"))))));else{var ht,pt=Qt(t,n),ft=Lt(t,n);if(pt<n-1&&(ft>n+1||null===ft&&t[n+1]&&"\n"!==t[n+1]&&"\r"!==t[n+1]&&!t[n+1].trim().length)){var dt=t.slice(pt+1,ft);ht=dt.includes("\n")||dt.includes("\r")?a.style&&a.style.line_endings_CR_LF_CRLF?a.style.line_endings_CR_LF_CRLF:"\n":" "}console.log("2280 ".concat(Yt("log","addThis",ht))),ht?(w.issues.push({name:mt,position:[[pt+1,ft,ht]]}),console.log("2294 ".concat(Yt("push",mt,"".concat("[[".concat(pt+1,", ").concat(ft,", ").concat(ht,"]]")))))):(w.issues.push({name:mt,position:[[n,n+1]]}),console.log("2306 ".concat(Yt("push",mt,"".concat("[[".concat(n,", ").concat(n+1,"]]"))))))}}else if(g>126&&g<160){var yt="bad-character-".concat(Ft[g-127]);w.issues.push({name:yt,position:[[n,n+1]]}),console.log("2317 ".concat(Yt("push",yt,"".concat("[[".concat(n,", ").concat(n+1,"]]")))))}else if(160===g){var bt="bad-character-unencoded-non-breaking-space";w.issues.push({name:bt,position:[[n,n+1,"&nbsp;"]]}),console.log("2328 ".concat(Yt("push",bt,"".concat("[[".concat(n,", ").concat(n+1,', "&nbsp;"]]')))))}else if(8203===g){var At="bad-character-zero-width-space";w.issues.push({name:At,position:[[n,n+1]]}),console.log("2339 ".concat(Yt("push",At,"".concat("[[".concat(n,", ").concat(n+1,"]]")))))}else if(8232===g){var wt="bad-character-line-separator";w.issues.push({name:wt,position:[[n,n+1]]}),console.log("2348 ".concat(Yt("push",wt,"".concat("[[".concat(n,", ").concat(n+1,"]]")))))}else if(zt(t,n)){var vt=zt(t,n);console.log("2352 ".concat("[".concat(31,"m","██","[",39,"m")," new issue: ",JSON.stringify(vt,null,0))),_.push(vt),console.log("2360 push above issue to ".concat("[".concat(36,"m","rawIssueStaging","[",39,"m")))}if(!i&&null!==f.startAt&&t[n].trim().length&&(console.log("2373 ".concat("[".concat(90,"m","inside whitespace chunks ending clauses","[",39,"m"))),null!==s.tagNameStartAt&&null===l.attrStartAt&&(!l.attrClosingQuote.pos||l.attrClosingQuote.pos<=n)&&(">"===t[n]||"/"===t[n]&&"<>".includes(t[Lt(t,n)])))){console.log("2382");var _t="tag-excessive-whitespace-inside-tag";"/"===t[f.startAt-1]&&(_t="tag-whitespace-closing-slash-and-bracket"),w.issues.push({name:_t,position:[[f.startAt,n]]}),console.log("2395 ".concat(Yt("push",_t,"".concat("[[".concat(f.startAt,", ").concat(n,"]]")))))}if(i||t[n].trim().length||null!==f.startAt||(f.startAt=n,console.log("2408 ".concat(Yt("set","logWhitespace.startAt",f.startAt)))),(!i&&"\n"===t[n]||"\r"===t[n])&&(null===f.startAt||f.includesLinebreaks||(f.includesLinebreaks=!0,console.log("2417 ".concat(Yt("set","logWhitespace.includesLinebreaks",f.includesLinebreaks)))),f.lastLinebreakAt=n,console.log("2426 ".concat(Yt("set","logWhitespace.lastLinebreakAt",f.lastLinebreakAt)))),console.log("2434"),!i&&null!==s.tagNameStartAt&&null===s.tagNameEndAt&&!Pt(t[n])&&"<"!==t[n]&&"/"!==t[n]&&(console.log("2446 not a latin letter, thus we assume tag name ends here"),s.tagNameEndAt=n,s.tagName=t.slice(s.tagNameStartAt,n),s.recognised=jt.includes(s.tagName.toLowerCase()),console.log("2451 ".concat(Yt("set","logTag.tagNameEndAt",s.tagNameEndAt,"logTag.tagName",s.tagName,"logTag.recognised",s.recognised))),Zt(t[n])||"="===t[n])){var St;console.log("2464 stray quote clauses");var Ot=n+1;if(t[n+1].trim().length)if(Zt(t[n+1])||"="===t[n+1]){console.log("[".concat(36,"m","2473 traverse forward","[",39,"m"));for(var Tt=n+1;Tt<o;Tt++)if(console.log("[".concat(36,"m","2476 str[".concat(Tt,"] = str[y]"),"[",39,"m")),!Zt(t[Tt])&&"="!==t[Tt]){t[Tt].trim().length&&(St=!0,Ot=Tt);break}}else St=!0;St?(w.issues.push({name:"tag-stray-character",position:[[n,Ot," "]]}),console.log("2498 ".concat(Yt("push","tag-stray-character","".concat("[[".concat(n,", ").concat(Ot,', " "]]')))))):(w.issues.push({name:"tag-stray-character",position:[[n,Ot]]}),console.log("2510 ".concat(Yt("push","tag-stray-character","".concat("[[".concat(n,", ").concat(Ot,"]]"))))))}if(!i&&null!==s.tagStartAt&&null===s.tagNameStartAt&&Pt(t[n])&&s.tagStartAt<n&&(console.log("2528 within catching the start of the tag name clauses"),s.tagNameStartAt=n,console.log("2531 ".concat(Yt("set","logTag.tagNameStartAt",s.tagNameStartAt))),null===s.closing&&(s.closing=!1,console.log("2536 ".concat(Yt("set","logTag.closing",s.closing)))),s.tagStartAt<n-1&&null!==f.startAt&&(v.push({name:"tag-space-after-opening-bracket",position:[[s.tagStartAt+1,n]]}),console.log("2546 ".concat(Yt("stage","tag-space-after-opening-bracket","".concat("[[".concat(s.tagStartAt+1,", ").concat(n,"]]"))))))),!i&&null!==s.tagNameStartAt&&null===s.tagNameEndAt&&xt(c=t[n])&&1===c.length&&c.charCodeAt(0)>64&&c.charCodeAt(0)<91&&!t.slice(s.tagNameStartAt).toLowerCase().startsWith("doctype")&&(w.issues.push({name:"tag-name-lowercase",position:[[n,n+1,t[n].toLowerCase()]]}),console.log("2571 ".concat(Yt("push","tag-name-lowercase","".concat("[[".concat(n,", ").concat(n+1,", ").concat(JSON.stringify(t[n].toLowerCase(),null,4),"]]")))))),i||"/"!==t[n]||null===s.tagStartAt||null!==s.tagNameStartAt||null===s.closing&&(s.closing=!0),!i&&"<"===t[n])if(console.log("2602 catch the beginning of a tag ".concat("[".concat(31,"m","███████████████████████████████████████","[",39,"m"))),null===s.tagStartAt)s.tagStartAt=n,console.log("2608 ".concat(Yt("set","logTag.tagStartAt",s.tagStartAt)));else if(Gt(t,n))if(console.log("2614 ".concat("[".concat(32,"m","██","[",39,"m")," new tag starts")),null!==s.tagStartAt&&s.attributes.length&&s.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote.pos})){console.log("2630 TAG ON THE LEFT, WE CAN ADD CLOSING BRACKET (IF MISSING)");var Et=Qt(t,n);console.log("2644 ".concat(Yt("set","lastNonWhitespaceOnLeft",Et))),">"===t[Et]?(s.tagEndAt=Et+1,console.log("2657 ".concat(Yt("set","logTag.tagEndAt",s.tagEndAt)))):(w.issues.push({name:"tag-missing-closing-bracket",position:[[Et+1,n,">"]]}),console.log("2667 ".concat(Yt("push","tag-missing-closing-bracket","".concat("[[".concat(Et+1,", ").concat(n,', ">"]]')))))),_.length&&(console.log("2677 let's process all ".concat(_.length," raw character issues at staging")),_.forEach(function(t){t.position[0][0]<s.tagStartAt?(w.issues.push(t),console.log("2684 ".concat(Yt("push","issueObj",t)))):console.log("2687 discarding ".concat(JSON.stringify(t,null,4)))})),function(t){console.log("031 pingTag(): ".concat(JSON.stringify(t,null,4)))}(T(s)),m(),y(),_=[],console.log("2701 ".concat(Yt("reset","logTag & logAttr && rawIssueStaging"))),s.tagStartAt=n,console.log("2707 ".concat(Yt("set","logTag.tagStartAt",s.tagStartAt)))}else console.log("2710 NOT TAG ON THE LEFT, WE CAN ADD ENCODE BRACKETS"),_.length&&(console.log("2715 ".concat(Yt("processing","rawIssueStaging",_))),console.log("2718 ".concat(Yt("log","logTag.tagStartAt",s.tagStartAt))),console.log("2721 ".concat("[".concat(31,"m",JSON.stringify(l,null,4),"[",39,"m"))),_.forEach(function(t){t.position[0][0]<n?(w.issues.push(t),console.log("2734 ".concat(Yt("push","issueObj",t)))):(console.log(""),console.log("2738 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(s.tagStartAt)))}),console.log("2750 wipe rawIssueStaging"),_=[]),v.length&&(console.log("2756 ".concat(Yt("wipe","tagIssueStaging"))),v=[]);if(i||62!==g||null===s.tagStartAt||l.attrClosingQuote&&!(l.attrClosingQuote.pos<n)||(console.log("2771 within catching a closing bracket of a tag, >, clauses"),v.length&&(console.log("2776 concat ".concat("[".concat(33,"m","tagIssueStaging","[",39,"m")," then wipe")),w.issues=w.issues.concat(v),v=[]),_.length&&(console.log("2784 ".concat(Yt("processing","rawIssueStaging",_))),console.log("".concat("[".concat(33,"m","logTag","[",39,"m")," = ",JSON.stringify(s,null,4))),_.forEach(function(t){t.position[0][0]<s.tagStartAt||s.attributes.some(function(e){return N=n,e.attrValueStartAt<t.position[0][0]&&e.attrValueEndAt>t.position[0][0]})&&!w.issues.some(function(e){return N=n,e.position[0][0]===t.position[0][0]&&e.position[0][1]===t.position[0][1]})?(w.issues.push(t),console.log("2810 ".concat(Yt("push","issueObj",t)))):(console.log(""),console.log("2814 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(s.tagStartAt)))}),console.log("2826 wipe rawIssueStaging"),_=[]),"script"===s.tagName&&(i=!0,u="script tag",console.log("2836 ".concat(Yt("set","doNothingUntil",i),", then reset logTag and rawIssueStaging"))),m(),y(),console.log("2847 ".concat(Yt("reset","logTag & logAttr")))),i&&"script tag"===u&&"t"===t[n]&&"p"===t[n-1]&&"i"===t[n-2]&&"r"===t[n-3]&&"c"===t[n-4]&&"s"===t[n-5]&&null===O){var Ct=Lt(t,n),Nt=Qt(t,n-5);if(console.log("2890 ".concat(Yt("set","charOnTheRight",Ct,"charOnTheLeft",Nt,"str[charOnTheRight]",t[Ct],"str[charOnTheLeft]",t[Nt]))),"/"===t[Nt]){var Rt=Qt(t,Nt);console.log("2907 ".concat(Yt("set","charFurtherOnTheLeft",Rt,"str[charFurtherOnTheLeft]",t[Rt])))}else"<"===t[Nt]&&console.log("2917 opening <script> tag!");i=Ct+1,console.log("2921 ".concat(Yt("set","doNothingUntil",i)))}!i&&t[n].trim().length&&(A(),console.log("2927 ".concat(Yt("reset","logWhitespace")))),t[n+1]||(console.log("2933"),_.length&&(console.log("2936"),null!==s.tagStartAt&&s.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote})?(console.log("2947"),_.forEach(function(t){t.position[0][0]<s.tagStartAt?(w.issues.push(t),console.log("2952 ".concat(Yt("push","issueObj",t)))):console.log("\n1519 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(s.tagStartAt))}),console.log("2967 wipe rawIssueStaging"),_=[],w.issues.push({name:"tag-missing-closing-bracket",position:[[f.startAt?f.startAt:n+1,n+1,">"]]}),console.log("2982 ".concat(Yt("push","tag-missing-closing-bracket","".concat("[[".concat(f.startAt?f.startAt:n+1,", ").concat(n+1,', ">"]]')))))):w.issues.some(function(t){return"file-missing-ending"===t.name})||(w.issues=w.issues.concat(_),console.log("3000 concat, then wipe ".concat("[".concat(33,"m","rawIssueStaging","[",39,"m"))),_=[])));var kt={logTag:!1,logAttr:!0,logEspTag:!1,logWhitespace:!1,logLineEndings:!1,retObj:!1,tagIssueStaging:!1,rawIssueStaging:!1,withinQuotes:!0};console.log("".concat(Object.keys(kt).some(function(t){return kt[t]})?"".concat("[".concat(31,"m","█ ","[",39,"m")):"").concat(kt.logTag&&s.tagStartAt&&null!==s.tagStartAt?"".concat("[".concat(33,"m","logTag","[",39,"m")," ",JSON.stringify(s,null,4),"; "):"").concat(kt.logAttr&&l.attrStartAt&&null!==l.attrStartAt?"".concat("[".concat(33,"m","logAttr","[",39,"m")," ",JSON.stringify(l,null,4),"; "):"").concat(kt.logEspTag&&p.headStartAt&&null!==p.headStartAt?"".concat("[".concat(33,"m","logEspTag","[",39,"m")," ",JSON.stringify(p,null,4),"; "):"").concat(kt.logWhitespace&&f.startAt&&null!==f.startAt?"".concat("[".concat(33,"m","logWhitespace","[",39,"m")," ",JSON.stringify(f,null,0),"; "):"").concat(kt.logLineEndings?"".concat("[".concat(33,"m","logLineEndings","[",39,"m")," ",JSON.stringify(S,null,0),"; "):"").concat(kt.retObj?"".concat("[".concat(33,"m","retObj","[",39,"m")," ",JSON.stringify(w,null,4),"; "):"").concat(kt.tagIssueStaging&&v.length?"\n".concat("[".concat(33,"m","tagIssueStaging","[",39,"m")," ",JSON.stringify(v,null,4),"; "):"").concat(kt.rawIssueStaging&&_.length?"\n".concat("[".concat(33,"m","rawIssueStaging","[",39,"m")," ",JSON.stringify(_,null,4),"; "):"").concat(kt.withinQuotes&&O?"\n".concat("[".concat(33,"m","withinQuotes","[",39,"m")," ",JSON.stringify(O,null,4),"; ","[".concat(33,"m","withinQuotesEndAt","[",39,"m")," = ").concat(E,"; "):"")),N=n},N=0,R=t.length;N<R;N++)C(N,R);a.style&&a.style.line_endings_CR_LF_CRLF||!(S.cr.length&&S.lf.length||S.lf.length&&S.crlf.length||S.cr.length&&S.crlf.length)||(S.cr.length>S.crlf.length&&S.cr.length>S.lf.length?(console.log("3153 CR clearly prevalent"),S.crlf.length&&S.crlf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CR-mainly",position:[[t[0],t[1],"\r"]]})}),S.lf.length&&S.lf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CR-mainly",position:[[t[0],t[1],"\r"]]})})):S.lf.length>S.crlf.length&&S.lf.length>S.cr.length?(console.log("3175 LF clearly prevalent"),S.crlf.length&&S.crlf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),S.cr.length&&S.cr.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})})):S.crlf.length>S.lf.length&&S.crlf.length>S.cr.length?(console.log("3197 CRLF clearly prevalent"),S.cr.length&&S.cr.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})}),S.lf.length&&S.lf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})})):S.crlf.length===S.lf.length&&S.lf.length===S.cr.length?(console.log("3219 same amount of each type of EOL"),S.crlf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),S.cr.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})})):S.cr.length===S.crlf.length&&S.cr.length>S.lf.length?(console.log("3238 CR & CRLF are prevalent over LF"),S.cr.length&&S.cr.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})}),S.lf.length&&S.lf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})})):(S.lf.length===S.crlf.length&&S.lf.length>S.cr.length||S.cr.length===S.lf.length&&S.cr.length>S.crlf.length)&&(console.log("3263 LF && CRLF are prevalent over CR or CR & LF are prevalent over CRLF"),S.cr.length&&S.cr.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),S.crlf.length&&S.crlf.forEach(function(t){w.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})})));var j=function(t,n){function e(t){return!("string"==typeof t&&1===t.length&&t.toUpperCase()!==t.toLowerCase())}if("string"!=typeof t)throw new Error(`string-fix-broken-named-entities: [THROW_ID_01] the first input argument must be string! It was given as:\n${JSON.stringify(t,null,4)} (${typeof t}-type)`);const o={decode:!1,cb:null,progressFn:null};let a;if(null!=n){if(!h(n))throw new Error(`string-fix-broken-named-entities: [THROW_ID_02] the second input argument must be a plain object! I was given as:\n${JSON.stringify(n,null,4)} (${typeof n}-type)`);a=Object.assign({},o,n)}else a=o;if(a.cb&&"function"!=typeof a.cb)throw new TypeError(`string-fix-broken-named-entities: [THROW_ID_03] opts.cb must be a function (or falsey)! Currently it's: ${typeof a.cb}, equal to: ${JSON.stringify(a.cb,null,4)}`);if(a.progressFn&&"function"!=typeof a.progressFn)throw new TypeError(`string-fix-broken-named-entities: [THROW_ID_04] opts.progressFn must be a function (or falsey)! Currently it's: ${typeof a.progressFn}, equal to: ${JSON.stringify(a.progressFn,null,4)}`);let r=!1;const c={nameStartsAt:null,ampersandNecessary:null,patience:2,matchedN:null,matchedB:null,matchedS:null,matchedP:null,matchedSemicol:null};let s=T(c);const l=()=>{s=T(c)},i=[];let u,g,m,p,f,d;const y=t.length+1;let b=0;t:for(let n=0;n<y;n++)if(a.progressFn&&(f=Math.floor(b/y*100))!==d&&(d=f,a.progressFn(f)),m=(null!==s.matchedN?1:0)+(null!==s.matchedB?1:0)+(null!==s.matchedS?1:0)+(null!==s.matchedP?1:0),p=[s.matchedN,s.matchedB,s.matchedS,s.matchedP].filter(t=>null!==t),u=Math.min(...p),g=Math.max(...p),null!==s.nameStartsAt&&m>2&&(null!==s.matchedSemicol||!s.ampersandNecessary||e(t[s.nameStartsAt-1])&&e(t[n])||(e(t[s.nameStartsAt-1])||e(t[n]))&&g-u<=4||null!==s.matchedN&&null!==s.matchedB&&null!==s.matchedS&&null!==s.matchedP&&s.matchedN+1===s.matchedB&&s.matchedB+1===s.matchedS&&s.matchedS+1===s.matchedP)&&(!t[n]||null!==s.matchedN&&null!==s.matchedB&&null!==s.matchedS&&null!==s.matchedP&&t[n]!==t[n-1]||"n"!==t[n].toLowerCase()&&"b"!==t[n].toLowerCase()&&"s"!==t[n].toLowerCase()&&"p"!==t[n].toLowerCase()||";"===t[n-1])&&";"!==t[n]&&(void 0===t[n+1]||";"!==t[n+1]))"&nbsp;"!==t.slice(s.nameStartsAt,n)&&(null==s.nameStartsAt||n-s.nameStartsAt!=5||"&nbsp"!==t.slice(s.nameStartsAt,n)||a.decode?a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-malformed-nbsp",entityName:"nbsp",rangeFrom:s.nameStartsAt,rangeTo:n,rangeValEncoded:"&nbsp;",rangeValDecoded:" "})):i.push([s.nameStartsAt,n,a.decode?" ":"&nbsp;"]):a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"nbsp",rangeFrom:n,rangeTo:n,rangeValEncoded:";",rangeValDecoded:";"})):i.push([n,n,";"])),l();else if(t[n]&&";"===t[n-1]&&";"!==t[n]&&m>0)l();else{if("&"===t[n]){if("a"===t[n+1]&&"m"===t[n+2]&&"p"===t[n+3]&&";"===t[n+4]){null===s.nameStartsAt&&(s.nameStartsAt=n),r=!0;let e=n+5;for(;"a"===t[e]&&"m"===t[e+1]&&"p"===t[e+2]&&";"===t[e+3];)e+=4;a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-amp-repetitions",entityName:"amp",rangeFrom:n+1,rangeTo:e,rangeValEncoded:null,rangeValDecoded:null})):i.push([n+1,e]),n=e-1;continue t}if(null===s.nameStartsAt&&null===s.ampersandNecessary&&(s.nameStartsAt=n,s.ampersandNecessary=!1),"a"===t[n+1]&&"n"===t[n+2]&&"g"===t[n+3]){if("s"!==t[n+4]&&";"!==t[n+4]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"ang",rangeFrom:n+4,rangeTo:n+4,rangeValEncoded:"&ang;",rangeValDecoded:"∠"})):i.push([n,n+4,a.decode?"∠":"&ang;"]),n+=3;continue t}if("s"===t[n+4]&&"t"===t[n+5]&&";"!==t[n+6]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"angst",rangeFrom:n+6,rangeTo:n+6,rangeValEncoded:"&angst;",rangeValDecoded:"Å"})):i.push([n,n+6,a.decode?"Å":"&angst;"]),n+=5;continue t}}else if("p"===t[n+1]&&"i"===t[n+2]){if("v"!==t[n+3]&&";"!==t[n+3]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"pi",rangeFrom:n+3,rangeTo:n+3,rangeValEncoded:"&pi;",rangeValDecoded:"π"})):i.push([n,n+3,a.decode?"π":"&pi;"]),n+=3;continue t}if("v"===t[n+3]&&";"!==t[n+4]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"piv",rangeFrom:n+4,rangeTo:n+4,rangeValEncoded:"&piv;",rangeValDecoded:"ϖ"})):i.push([n,n+4,a.decode?"ϖ":"&piv;"]),n+=3;continue t}}else{if("P"===t[n+1]&&"i"===t[n+2]&&";"!==t[n+3]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"Pi",rangeFrom:n+3,rangeTo:n+3,rangeValEncoded:"&Pi;",rangeValDecoded:"Π"})):i.push([n,n+3,a.decode?"Π":"&Pi;"]),n+=2;continue t}if("s"===t[n+1]){if("i"===t[n+2]&&"g"===t[n+3]&&"m"===t[n+4]&&"a"===t[n+5]&&";"!==t[n+6]&&"f"!==t[n+6]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sigma",rangeFrom:n+6,rangeTo:n+6,rangeValEncoded:"&sigma;",rangeValDecoded:"σ"})):i.push([n,n+6,a.decode?"σ":"&sigma;"]),n+=5;continue t}if("u"===t[n+2]&&"b"===t[n+3]&&";"!==t[n+4]&&"e"!==t[n+4]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sub",rangeFrom:n+4,rangeTo:n+4,rangeValEncoded:"&sub;",rangeValDecoded:"⊂"})):i.push([n,n+4,a.decode?"⊂":"&sub;"]),n+=3;continue t}if("u"===t[n+2]&&"p"===t[n+3]&&"f"!==t[n+4]&&"e"!==t[n+4]&&"1"!==t[n+4]&&"2"!==t[n+4]&&"3"!==t[n+4]&&";"!==t[n+4]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sup",rangeFrom:n+4,rangeTo:n+4,rangeValEncoded:"&sup;",rangeValDecoded:"⊃"})):i.push([n,n+4,a.decode?"⊃":"&sup;"]),n+=3;continue t}}else if("t"===t[n+1]){if("h"===t[n+2]&&"e"===t[n+3]&&"t"===t[n+4]&&"a"===t[n+5]&&"s"!==t[n+6]&&";"!==t[n+6]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"theta",rangeFrom:n+6,rangeTo:n+6,rangeValEncoded:"&theta;",rangeValDecoded:"θ"})):i.push([n,n+6,a.decode?"θ":"&theta;"]),n+=5;continue t}if("h"===t[n+2]&&"i"===t[n+3]&&"n"===t[n+4]&&"s"===t[n+5]&&"p"===t[n+6]&&";"!==t[n+7]){a.cb?i.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"thinsp",rangeFrom:n+7,rangeTo:n+7,rangeValEncoded:"&thinsp;",rangeValDecoded:" "})):i.push([n,n+7,a.decode?" ":"&thinsp;"]),n+=6;continue t}}}}if(t[n]&&"n"===t[n].toLowerCase()){if("i"===t[n-1]&&"s"===t[n+1]){l();continue t}s.matchedN=n,null===s.nameStartsAt&&(s.nameStartsAt=n,null!==s.ampersandNecessary||r?!0!==s.ampersandNecessary&&(s.ampersandNecessary=!1):s.ampersandNecessary=!0)}if(t[n]&&"b"===t[n].toLowerCase())if(null!==s.nameStartsAt)s.matchedB=n;else{if(!s.patience){l();continue t}s.patience--,s.nameStartsAt=n,s.matchedB=n,null!==s.ampersandNecessary||r?!0!==s.ampersandNecessary&&(s.ampersandNecessary=!1):s.ampersandNecessary=!0}if(t[n]&&"s"===t[n].toLowerCase())if(null!==s.nameStartsAt)s.matchedS=n;else{if(!s.patience){l();continue t}s.patience--,s.nameStartsAt=n,s.matchedS=n,null!==s.ampersandNecessary||r?!0!==s.ampersandNecessary&&(s.ampersandNecessary=!1):s.ampersandNecessary=!0}if(t[n]&&"p"===t[n].toLowerCase())if(null!==s.nameStartsAt)s.matchedP=n;else{if(!s.patience){l();continue t}s.patience--,s.nameStartsAt=n,s.matchedP=n,null!==s.ampersandNecessary||r?!0!==s.ampersandNecessary&&(s.ampersandNecessary=!1):s.ampersandNecessary=!0}if(";"===t[n]&&null!==s.nameStartsAt&&(s.matchedSemicol=n),t[n]&&0===t[n].trim().length&&null!==s.nameStartsAt&&l(),r&&(r=!1),null!==s.nameStartsAt&&n>s.nameStartsAt&&t[n]&&"n"!==t[n].toLowerCase()&&"b"!==t[n].toLowerCase()&&"s"!==t[n].toLowerCase()&&"p"!==t[n].toLowerCase()&&"&"!==t[n]&&";"!==t[n]){if(!s.patience){l();continue t}s.patience=s.patience-1}b++}return i.length?a.cb?i:Rt(i):null}(t,{cb:function(t){return{name:t.ruleName,position:[null!=t.rangeValEncoded?[t.rangeFrom,t.rangeTo,t.rangeValEncoded]:[t.rangeFrom,t.rangeTo]]}}});return console.log("3325 [".concat(33,"m","█","[",39,"m[",31,"m","█","[",39,"m[",34,"m","█","[",39,"m ",Yt("log","htmlEntityFixes",j))),Ht(j)&&j.length&&(w.issues=w.issues.filter(function(t){return"bad-character-unencoded-ampersand"!==t.name||j.every(function(n){return t.position[0][0]!==n.position[0][0]})}).concat(j||[])),console.log("3359 BEFORE FIX"),console.log("3360 ".concat(Yt("log","retObj.issues",w.issues))),w.fix=Ht(w.issues)&&w.issues.length?Rt(w.issues.reduce(function(t,n){return t.concat(n.position)},[])):null,console.log("3370 ".concat(Yt("log","retObj.fix",w.fix))),w},t.version="1.0.0",Object.defineProperty(t,"__esModule",{value:!0})});
