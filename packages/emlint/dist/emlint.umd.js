/**
 * emlint
 * Detects errors in HTML/CSS, proposes fixes, email-template friendly
 * Version: 0.7.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/emlint
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).emlint={})}(this,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var r=o(function(t,e){var o,r,a,c,s,i,l,u,g,f,p,h,m,d,y,b,A,v,_,w;t.exports=(o="function"==typeof Promise,r="object"==typeof self?self:n,a="undefined"!=typeof Symbol,c="undefined"!=typeof Map,s="undefined"!=typeof Set,i="undefined"!=typeof WeakMap,l="undefined"!=typeof WeakSet,u="undefined"!=typeof DataView,g=a&&void 0!==Symbol.iterator,f=a&&void 0!==Symbol.toStringTag,p=s&&"function"==typeof Set.prototype.entries,h=c&&"function"==typeof Map.prototype.entries,m=p&&Object.getPrototypeOf((new Set).entries()),d=h&&Object.getPrototypeOf((new Map).entries()),y=g&&"function"==typeof Array.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf([][Symbol.iterator]()),A=g&&"function"==typeof String.prototype[Symbol.iterator],v=A&&Object.getPrototypeOf(""[Symbol.iterator]()),_=8,w=-1,function(t){var e=typeof t;if("object"!==e)return e;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(!1===f||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var n=f&&t[Symbol.toStringTag];if("string"==typeof n)return n;var a=Object.getPrototypeOf(t);return a===RegExp.prototype?"RegExp":a===Date.prototype?"Date":o&&a===Promise.prototype?"Promise":s&&a===Set.prototype?"Set":c&&a===Map.prototype?"Map":l&&a===WeakSet.prototype?"WeakSet":i&&a===WeakMap.prototype?"WeakMap":u&&a===DataView.prototype?"DataView":c&&a===d?"Map Iterator":s&&a===m?"Set Iterator":y&&a===b?"Array Iterator":A&&a===v?"String Iterator":null===a?"Object":Object.prototype.toString.call(t).slice(_,w)})});function a(t,e,n){if(e!=e)return function(t,e,n,o){for(var r=t.length,a=n+(o?1:-1);o?a--:++a<r;)if(e(t[a],a,t))return a;return-1}(t,s,n);for(var o=n-1,r=t.length;++o<r;)if(t[o]===e)return o;return-1}function c(t,e,n,o){for(var r=n-1,a=t.length;++r<a;)if(o(t[r],e))return r;return-1}function s(t){return t!=t}var i=Array.prototype.splice;function l(t,e,n,o){var r,s=o?c:a,l=-1,u=e.length,g=t;for(t===e&&(e=function(t,e){var n=-1,o=t.length;e||(e=Array(o));for(;++n<o;)e[n]=t[n];return e}(e)),n&&(g=function(t,e){for(var n=-1,o=t?t.length:0,r=Array(o);++n<o;)r[n]=e(t[n],n,t);return r}(t,(r=n,function(t){return r(t)})));++l<u;)for(var f=0,p=e[l],h=n?n(p):p;(f=s(g,h,f,o))>-1;)g!==t&&i.call(g,f,1),i.call(t,f,1);return t}var u=function(t,e){return t&&t.length&&e&&e.length?l(t,e):t},g=o(function(t,e){var o=200,r="__lodash_hash_undefined__",a=9007199254740991,c="[object Arguments]",s="[object Boolean]",i="[object Date]",l="[object Function]",u="[object GeneratorFunction]",g="[object Map]",f="[object Number]",p="[object Object]",h="[object RegExp]",m="[object Set]",d="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",A="[object DataView]",v="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",O="[object Int16Array]",S="[object Int32Array]",C="[object Uint8Array]",E="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]",N=/\w*$/,R=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,Q={};Q[c]=Q["[object Array]"]=Q[b]=Q[A]=Q[s]=Q[i]=Q[v]=Q[_]=Q[w]=Q[O]=Q[S]=Q[g]=Q[f]=Q[p]=Q[h]=Q[m]=Q[d]=Q[y]=Q[C]=Q[E]=Q[j]=Q[T]=!0,Q["[object Error]"]=Q[l]=Q["[object WeakMap]"]=!1;var F="object"==typeof n&&n&&n.Object===Object&&n,k="object"==typeof self&&self&&self.Object===Object&&self,$=F||k||Function("return this")(),I=e&&!e.nodeType&&e,q=I&&t&&!t.nodeType&&t,x=q&&q.exports===I;function J(t,e){return t.set(e[0],e[1]),t}function V(t,e){return t.add(e),t}function P(t,e,n,o){var r=-1,a=t?t.length:0;for(o&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function W(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function M(t){var e=-1,n=Array(t.size);return t.forEach(function(t,o){n[++e]=[o,t]}),n}function D(t,e){return function(n){return t(e(n))}}function H(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}var K,U=Array.prototype,B=Function.prototype,Z=Object.prototype,G=$["__core-js_shared__"],z=(K=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",X=B.toString,Y=Z.hasOwnProperty,tt=Z.toString,et=RegExp("^"+X.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=x?$.Buffer:void 0,ot=$.Symbol,rt=$.Uint8Array,at=D(Object.getPrototypeOf,Object),ct=Object.create,st=Z.propertyIsEnumerable,it=U.splice,lt=Object.getOwnPropertySymbols,ut=nt?nt.isBuffer:void 0,gt=D(Object.keys,Object),ft=qt($,"DataView"),pt=qt($,"Map"),ht=qt($,"Promise"),mt=qt($,"Set"),dt=qt($,"WeakMap"),yt=qt(Object,"create"),bt=Wt(ft),At=Wt(pt),vt=Wt(ht),_t=Wt(mt),wt=Wt(dt),Ot=ot?ot.prototype:void 0,St=Ot?Ot.valueOf:void 0;function Ct(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function jt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Tt(t){this.__data__=new Et(t)}function Nt(t,e){var n=Dt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ht(t)}(t)&&Y.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==c)}(t)?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],o=n.length,r=!!o;for(var a in t)!e&&!Y.call(t,a)||r&&("length"==a||Vt(a,o))||n.push(a);return n}function Rt(t,e,n){var o=t[e];Y.call(t,e)&&Mt(o,n)&&(void 0!==n||e in t)||(t[e]=n)}function Lt(t,e){for(var n=t.length;n--;)if(Mt(t[n][0],e))return n;return-1}function Qt(t,e,n,o,r,a,R){var L;if(o&&(L=a?o(t,r,a,R):o(t)),void 0!==L)return L;if(!Bt(t))return t;var F=Dt(t);if(F){if(L=function(t){var e=t.length,n=t.constructor(e);e&&"string"==typeof t[0]&&Y.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!e)return function(t,e){var n=-1,o=t.length;e||(e=Array(o));for(;++n<o;)e[n]=t[n];return e}(t,L)}else{var k=Jt(t),$=k==l||k==u;if(Kt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(k==p||k==c||$&&!a){if(W(t))return a?t:{};if(L=function(t){return"function"!=typeof t.constructor||Pt(t)?{}:(e=at(t),Bt(e)?ct(e):{});var e}($?{}:t),!e)return function(t,e){return $t(t,xt(t),e)}(t,function(t,e){return t&&$t(e,Zt(e),t)}(L,t))}else{if(!Q[k])return a?t:{};L=function(t,e,n,o){var r=t.constructor;switch(e){case b:return kt(t);case s:case i:return new r(+t);case A:return function(t,e){var n=e?kt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,o);case v:case _:case w:case O:case S:case C:case E:case j:case T:return function(t,e){var n=e?kt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,o);case g:return function(t,e,n){return P(e?n(M(t),!0):M(t),J,new t.constructor)}(t,o,n);case f:case d:return new r(t);case h:return(l=new(c=t).constructor(c.source,N.exec(c))).lastIndex=c.lastIndex,l;case m:return function(t,e,n){return P(e?n(H(t),!0):H(t),V,new t.constructor)}(t,o,n);case y:return a=t,St?Object(St.call(a)):{}}var a;var c,l}(t,k,Qt,e)}}R||(R=new Tt);var I=R.get(t);if(I)return I;if(R.set(t,L),!F)var q=n?function(t){return function(t,e,n){var o=e(t);return Dt(t)?o:function(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}(o,n(t))}(t,Zt,xt)}(t):Zt(t);return function(t,e){for(var n=-1,o=t?t.length:0;++n<o&&!1!==e(t[n],n,t););}(q||t,function(r,a){q&&(r=t[a=r]),Rt(L,a,Qt(r,e,n,o,a,t,R))}),L}function Ft(t){return!(!Bt(t)||(e=t,z&&z in e))&&(Ut(t)||W(t)?et:R).test(Wt(t));var e}function kt(t){var e=new t.constructor(t.byteLength);return new rt(e).set(new rt(t)),e}function $t(t,e,n,o){n||(n={});for(var r=-1,a=e.length;++r<a;){var c=e[r],s=o?o(n[c],t[c],c,n,t):void 0;Rt(n,c,void 0===s?t[c]:s)}return n}function It(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function qt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Ft(n)?n:void 0}Ct.prototype.clear=function(){this.__data__=yt?yt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(yt){var n=e[t];return n===r?void 0:n}return Y.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return yt?void 0!==e[t]:Y.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=yt&&void 0===e?r:e,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(t){var e=this.__data__,n=Lt(e,t);return!(n<0||(n==e.length-1?e.pop():it.call(e,n,1),0))},Et.prototype.get=function(t){var e=this.__data__,n=Lt(e,t);return n<0?void 0:e[n][1]},Et.prototype.has=function(t){return Lt(this.__data__,t)>-1},Et.prototype.set=function(t,e){var n=this.__data__,o=Lt(n,t);return o<0?n.push([t,e]):n[o][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new Ct,map:new(pt||Et),string:new Ct}},jt.prototype.delete=function(t){return It(this,t).delete(t)},jt.prototype.get=function(t){return It(this,t).get(t)},jt.prototype.has=function(t){return It(this,t).has(t)},jt.prototype.set=function(t,e){return It(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new Et},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Et){var r=n.__data__;if(!pt||r.length<o-1)return r.push([t,e]),this;n=this.__data__=new jt(r)}return n.set(t,e),this};var xt=lt?D(lt,Object):function(){return[]},Jt=function(t){return tt.call(t)};function Vt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||L.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Z)}function Wt(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Mt(t,e){return t===e||t!=t&&e!=e}(ft&&Jt(new ft(new ArrayBuffer(1)))!=A||pt&&Jt(new pt)!=g||ht&&"[object Promise]"!=Jt(ht.resolve())||mt&&Jt(new mt)!=m||dt&&"[object WeakMap]"!=Jt(new dt))&&(Jt=function(t){var e=tt.call(t),n=e==p?t.constructor:void 0,o=n?Wt(n):void 0;if(o)switch(o){case bt:return A;case At:return g;case vt:return"[object Promise]";case _t:return m;case wt:return"[object WeakMap]"}return e});var Dt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Ut(t)}var Kt=ut||function(){return!1};function Ut(t){var e=Bt(t)?tt.call(t):"";return e==l||e==u}function Bt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Zt(t){return Ht(t)?Nt(t):function(t){if(!Pt(t))return gt(t);var e=[];for(var n in Object(t))Y.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return Qt(t,!0,!0)}}),f="[object Object]";var p,h,m=Function.prototype,d=Object.prototype,y=m.toString,b=d.hasOwnProperty,A=y.call(Object),v=d.toString,_=(p=Object.getPrototypeOf,h=Object,function(t){return p(h(t))});var w=function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||v.call(t)!=f||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=_(t);if(null===e)return!0;var n=b.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&y.call(n)==A};const O=Array.isArray;function S(t){return"string"==typeof t&&t.length>0&&"."===t[0]?t.slice(1):t}function C(t,e){return function t(e,n,o){const r=g(e);let a,c,s,i,l;if((o=Object.assign({depth:-1,path:""},o)).depth+=1,O(r))for(a=0,c=r.length;a<c;a++){const e=`${o.path}.${a}`;void 0!==r[a]?(o.parent=g(r),o.parentType="array",s=t(n(r[a],void 0,Object.assign({},o,{path:S(e)})),n,Object.assign({},o,{path:S(e)})),Number.isNaN(s)&&a<r.length?(r.splice(a,1),a-=1):r[a]=s):r.splice(a,1)}else if(w(r))for(a=0,c=(i=Object.keys(r)).length;a<c;a++){l=i[a];const e=`${o.path}.${l}`;0===o.depth&&null!=l&&(o.topmostKey=l),o.parent=g(r),o.parentType="object",s=t(n(l,r[l],Object.assign({},o,{path:S(e)})),n,Object.assign({},o,{path:S(e)})),Number.isNaN(s)?delete r[l]:r[l]=s}return r}(t,e,{})}var E="__lodash_hash_undefined__",j=9007199254740991,T="[object Function]",N="[object GeneratorFunction]",R=/^\[object .+?Constructor\]$/,L="object"==typeof n&&n&&n.Object===Object&&n,Q="object"==typeof self&&self&&self.Object===Object&&self,F=L||Q||Function("return this")();function k(t,e){return!!(t?t.length:0)&&function(t,e,n){if(e!=e)return function(t,e,n,o){var r=t.length,a=n+(o?1:-1);for(;o?a--:++a<r;)if(e(t[a],a,t))return a;return-1}(t,q,n);var o=n-1,r=t.length;for(;++o<r;)if(t[o]===e)return o;return-1}(t,e,0)>-1}function $(t,e,n){for(var o=-1,r=t?t.length:0;++o<r;)if(n(e,t[o]))return!0;return!1}function I(t,e){for(var n=-1,o=t?t.length:0,r=Array(o);++n<o;)r[n]=e(t[n],n,t);return r}function q(t){return t!=t}function x(t){return function(e){return t(e)}}function J(t,e){return t.has(e)}var V,P=Array.prototype,W=Function.prototype,M=Object.prototype,D=F["__core-js_shared__"],H=(V=/[^.]+$/.exec(D&&D.keys&&D.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"",K=W.toString,U=M.hasOwnProperty,B=M.toString,Z=RegExp("^"+K.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=P.splice,z=Math.max,X=Math.min,Y=lt(F,"Map"),tt=lt(Object,"create");function et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function ot(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function rt(t){var e=-1,n=t?t.length:0;for(this.__data__=new ot;++e<n;)this.add(t[e])}function at(t,e){for(var n,o,r=t.length;r--;)if((n=t[r][0])===(o=e)||n!=n&&o!=o)return r;return-1}function ct(t){return!(!gt(t)||(e=t,H&&H in e))&&(ut(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?Z:R).test(function(t){if(null!=t){try{return K.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}function st(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=j}(t.length)&&!ut(t)}(t)}(t)?t:[]}function it(t,e){var n,o,r=t.__data__;return("string"==(o=typeof(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ct(n)?n:void 0}function ut(t){var e=gt(t)?B.call(t):"";return e==T||e==N}function gt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}et.prototype.clear=function(){this.__data__=tt?tt(null):{}},et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},et.prototype.get=function(t){var e=this.__data__;if(tt){var n=e[t];return n===E?void 0:n}return U.call(e,t)?e[t]:void 0},et.prototype.has=function(t){var e=this.__data__;return tt?void 0!==e[t]:U.call(e,t)},et.prototype.set=function(t,e){return this.__data__[t]=tt&&void 0===e?E:e,this},nt.prototype.clear=function(){this.__data__=[]},nt.prototype.delete=function(t){var e=this.__data__,n=at(e,t);return!(n<0||(n==e.length-1?e.pop():G.call(e,n,1),0))},nt.prototype.get=function(t){var e=this.__data__,n=at(e,t);return n<0?void 0:e[n][1]},nt.prototype.has=function(t){return at(this.__data__,t)>-1},nt.prototype.set=function(t,e){var n=this.__data__,o=at(n,t);return o<0?n.push([t,e]):n[o][1]=e,this},ot.prototype.clear=function(){this.__data__={hash:new et,map:new(Y||nt),string:new et}},ot.prototype.delete=function(t){return it(this,t).delete(t)},ot.prototype.get=function(t){return it(this,t).get(t)},ot.prototype.has=function(t){return it(this,t).has(t)},ot.prototype.set=function(t,e){return it(this,t).set(t,e),this},rt.prototype.add=rt.prototype.push=function(t){return this.__data__.set(t,E),this},rt.prototype.has=function(t){return this.__data__.has(t)};var ft=function(t,e){return e=z(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,r=z(n.length-e,0),a=Array(r);++o<r;)a[o]=n[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=n[o];return c[e]=a,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,c)}}(function(t){var e=I(t,st);return e.length&&e[0]===t[0]?function(t,e,n){for(var o=n?$:k,r=t[0].length,a=t.length,c=a,s=Array(a),i=1/0,l=[];c--;){var u=t[c];c&&e&&(u=I(u,x(e))),i=X(u.length,i),s[c]=!n&&(e||r>=120&&u.length>=120)?new rt(c&&u):void 0}u=t[0];var g=-1,f=s[0];t:for(;++g<r&&l.length<i;){var p=u[g],h=e?e(p):p;if(p=n||0!==p?p:0,!(f?J(f,h):o(l,h,n))){for(c=a;--c;){var m=s[c];if(!(m?J(m,h):o(t[c],h,n)))continue t}f&&f.push(h),l.push(p)}}return l}(e):[]});function pt(t){return"string"==typeof t?t.length>0?[t]:[]:t}var ht=o(function(t){t.exports=function(){var t=Object.prototype.toString;function e(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(r(t)&&0===t.length)return!0;if("string"!=typeof t){for(var n in t)if(e(t,n))return!1;return!0}return!1}function o(e){return t.call(e)}var r=Array.isArray||function(e){return"[object Array]"===t.call(e)};function a(t){var e=parseInt(t);return e.toString()===t?e:t}function c(t){t=t||{};var c=function(t){return Object.keys(c).reduce(function(e,n){return"create"===n?e:("function"==typeof c[n]&&(e[n]=c[n].bind(c,t)),e)},{})};function s(n,o){return t.includeInheritedProps||"number"==typeof o&&Array.isArray(n)||e(n,o)}function i(t,e){if(s(t,e))return t[e]}function l(t,e,n,o){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return l(t,e.split(".").map(a),n,o);var r=e[0],c=i(t,r);return 1===e.length?(void 0!==c&&o||(t[r]=n),c):(void 0===c&&("number"==typeof e[1]?t[r]=[]:t[r]={}),l(t[r],e.slice(1),n,o))}return c.has=function(n,o){if("number"==typeof o?o=[o]:"string"==typeof o&&(o=o.split(".")),!o||0===o.length)return!!n;for(var c=0;c<o.length;c++){var s=a(o[c]);if(!("number"==typeof s&&r(n)&&s<n.length||(t.includeInheritedProps?s in Object(n):e(n,s))))return!1;n=n[s]}return!0},c.ensureExists=function(t,e,n){return l(t,e,n,!0)},c.set=function(t,e,n,o){return l(t,e,n,o)},c.insert=function(t,e,n,o){var a=c.get(t,e);o=~~o,r(a)||(a=[],c.set(t,e,a)),a.splice(o,0,n)},c.empty=function(t,e){var a,i;if(!n(e)&&null!=t&&(a=c.get(t,e))){if("string"==typeof a)return c.set(t,e,"");if(function(t){return"boolean"==typeof t||"[object Boolean]"===o(t)}(a))return c.set(t,e,!1);if("number"==typeof a)return c.set(t,e,0);if(r(a))a.length=0;else{if(!function(t){return"object"==typeof t&&"[object Object]"===o(t)}(a))return c.set(t,e,null);for(i in a)s(a,i)&&delete a[i]}}},c.push=function(t,e){var n=c.get(t,e);r(n)||(n=[],c.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},c.coalesce=function(t,e,n){for(var o,r=0,a=e.length;r<a;r++)if(void 0!==(o=c.get(t,e[r])))return o;return n},c.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return c.get(t,e.split("."),n);var o=a(e[0]),r=i(t,o);return void 0===r?n:1===e.length?r:c.get(t[o],e.slice(1),n)},c.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(n(e))return t;if("string"==typeof e)return c.del(t,e.split("."));var o=a(e[0]);return s(t,o)?1!==e.length?c.del(t[o],e.slice(1)):(r(t)?t.splice(o,1):delete t[o],t):t},c}var s=c();return s.create=c,s.withInheritedProps=c({includeInheritedProps:!0}),s}()}),mt=function(t){var e=t%100;if(e>=10&&e<=20)return"th";var n=t%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"};function dt(t){if("number"!=typeof t)throw new TypeError("Expected Number, got "+typeof t+" "+t);return t+mt(t)}dt.indicator=mt;var yt=dt,bt=/[|\\{}()[\]^$+*?.]/g,At=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(bt,"\\$&")};const vt=new Map;function _t(t,e){const n=Object.assign({caseSensitive:!1},e),o=t+JSON.stringify(n);if(vt.has(o))return vt.get(o);const r="!"===t[0];r&&(t=t.slice(1)),t=At(t).replace(/\\\*/g,".*");const a=new RegExp(`^${t}$`,n.caseSensitive?"":"i");return a.negated=r,vt.set(o,a),a}var wt=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof e}`);if(0===e.length)return t;const o="!"===e[0][0];e=e.map(t=>_t(t,n));const r=[];for(const n of t){let t=o;for(const o of e)o.test(n)&&(t=!o.negated);t&&r.push(n)}return r};function Ot(t,e,n){return function t(e,n,o,a=!0){const c=Object.prototype.hasOwnProperty;function s(t){return null!=t}function i(t){return"Object"===r(t)}function l(t,e){return e=pt(e),Array.from(t).filter(t=>!e.some(e=>wt.isMatch(t,e,{caseSensitive:!0})))}const g=["any","anything","every","everything","all","whatever","whatevs"],f=Array.isArray;if(!s(e))throw new Error("check-types-mini: [THROW_ID_01] First argument is missing!");const p={ignoreKeys:[],ignorePaths:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini",optsVarName:"opts"};let h;if(h=s(o)&&i(o)?Object.assign({},p,o):Object.assign({},p),s(h.ignoreKeys)&&h.ignoreKeys?h.ignoreKeys=pt(h.ignoreKeys):h.ignoreKeys=[],s(h.ignorePaths)&&h.ignorePaths?h.ignorePaths=pt(h.ignorePaths):h.ignorePaths=[],s(h.acceptArraysIgnore)&&h.acceptArraysIgnore?h.acceptArraysIgnore=pt(h.acceptArraysIgnore):h.acceptArraysIgnore=[],h.msg="string"==typeof h.msg?h.msg.trim():h.msg,":"===h.msg[h.msg.length-1]&&(h.msg=h.msg.slice(0,h.msg.length-1).trim()),h.schema&&(Object.keys(h.schema).forEach(t=>{if(i(h.schema[t])){const e={};C(h.schema[t],(n,o,r)=>{const a=void 0!==o?o:n;return f(a)||i(a)||(e[`${t}.${r.path}`]=a),a}),delete h.schema[t],h.schema=Object.assign(h.schema,e)}}),Object.keys(h.schema).forEach(t=>{f(h.schema[t])||(h.schema[t]=[h.schema[t]]),h.schema[t]=h.schema[t].map(String).map(t=>t.toLowerCase()).map(t=>t.trim())})),s(n)||(n={}),a&&t(h,p,{enforceStrictKeyset:!1},!1),h.enforceStrictKeyset)if(s(h.schema)&&Object.keys(h.schema).length>0){if(0!==l(u(Object.keys(e),Object.keys(n).concat(Object.keys(h.schema))),h.ignoreKeys).length){const t=u(Object.keys(e),Object.keys(n).concat(Object.keys(h.schema)));throw new TypeError(`${h.msg}: ${h.optsVarName}.enforceStrictKeyset is on and the following key${t.length>1?"s":""} ${t.length>1?"are":"is"} not covered by schema and/or reference objects: ${t.join(", ")}`)}}else{if(!(s(n)&&Object.keys(n).length>0))throw new TypeError(`${h.msg}: Both ${h.optsVarName}.schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!`);if(0!==l(u(Object.keys(e),Object.keys(n)),h.ignoreKeys).length){const t=u(Object.keys(e),Object.keys(n));throw new TypeError(`${h.msg}: The input object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not covered by the reference object: ${t.join(", ")}`)}if(0!==l(u(Object.keys(n),Object.keys(e)),h.ignoreKeys).length){const t=u(Object.keys(n),Object.keys(e));throw new TypeError(`${h.msg}: The reference object has key${t.length>1?"s":""} which ${t.length>1?"are":"is"} not present in the input object: ${t.join(", ")}`)}}const m=[];C(e,(t,o,a)=>{let s=o,l=t;if("array"===a.parentType&&(l=void 0,s=t),f(m)&&m.length&&m.some(t=>a.path.startsWith(t)))return s;if(l&&h.ignoreKeys.some(t=>wt.isMatch(l,t)))return s;if(h.ignorePaths.some(t=>wt.isMatch(a.path,t)))return s;const u=!(!i(s)&&!f(s)&&f(a.parent));let p=!1;i(h.schema)&&c.call(h.schema,ht.get(a.path))&&(p=!0);let d=!1;if(i(n)&&ht.has(n,ht.get(a.path))&&(d=!0),h.enforceStrictKeyset&&u&&!p&&!d)throw new TypeError(`${h.msg}: ${h.optsVarName}.${a.path} is neither covered by reference object (second input argument), nor ${h.optsVarName}.schema! To stop this error, turn off ${h.optsVarName}.enforceStrictKeyset or provide some type reference (2nd argument or ${h.optsVarName}.schema).\n\nDebug info:\n\nobj = ${JSON.stringify(e,null,4)}\n\nref = ${JSON.stringify(n,null,4)}\n\ninnerObj = ${JSON.stringify(a,null,4)}\n\nopts = ${JSON.stringify(h,null,4)}\n\ncurrent = ${JSON.stringify(s,null,4)}\n\n`);if(p){const t=pt(h.schema[a.path]).map(String).map(t=>t.toLowerCase());if(ht.set(h.schema,a.path,t),ft(t,g).length)m.push(a.path);else if(!0!==s&&!1!==s&&!t.includes(r(s).toLowerCase())||(!0===s||!1===s)&&!t.includes(String(s))&&!t.includes("boolean")){if(!f(s)||!h.acceptArrays)throw new TypeError(`${h.msg}: ${h.optsVarName}.${a.path} was customised to ${"string"!==r(s)?'"':""}${JSON.stringify(s,null,0)}${"string"!==r(s)?'"':""} (type: ${r(s).toLowerCase()}) which is not among the allowed types in schema (which is equal to ${JSON.stringify(t,null,0)})`);for(let e=0,n=s.length;e<n;e++)if(!t.includes(r(s[e]).toLowerCase()))throw new TypeError(`${h.msg}: ${h.optsVarName}.${a.path}.${e}, the ${yt(e+1)} element (equal to ${JSON.stringify(s[e],null,0)}) is of a type ${r(s[e]).toLowerCase()}, but only the following are allowed by the ${h.optsVarName}.schema: ${t.join(", ")}`)}}else if(d){const e=ht.get(n,a.path);if(h.acceptArrays&&f(s)&&!h.acceptArraysIgnore.includes(t)){if(!s.every(e=>r(e).toLowerCase()===r(n[t]).toLowerCase()))throw new TypeError(`${h.msg}: ${h.optsVarName}.${a.path} was customised to be array, but not all of its elements are ${r(n[t]).toLowerCase()}-type`)}else if(r(s)!==r(e))throw new TypeError(`${h.msg}: ${h.optsVarName}.${a.path} was customised to ${"string"===r(s).toLowerCase()?"":'"'}${JSON.stringify(s,null,0)}${"string"===r(s).toLowerCase()?"":'"'} which is not ${r(e).toLowerCase()} but ${r(s).toLowerCase()}`)}return s})}(t,e,n)}wt.isMatch=((t,e,n)=>{const o=_t(e,n),r=o.test(t);return o.negated?!r:r});var St=function(t,e){if(e){if("object"!=typeof e)throw new TypeError(String(e)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in e){if("boolean"!=typeof e.includeZero)throw new TypeError(String(e.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(e.includeZero&&0===t)return!0}}return Number.isSafeInteger(t)&&t>=1},Ct=o(function(t,e){(e=t.exports=function(t){return t+e.suffix(+t)}).suffix=function(t){return t%=100,1===Math.floor(t/10)?"th":t%10==1?"st":t%10==2?"nd":t%10==3?"rd":"th"}});Ct.suffix;const Et=Array.isArray;function jt(t,e){if(!Et(t))throw new TypeError(`ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(0===t.length)return t;const n={strictlyTwoElementsInRangeArrays:!1,progressFn:null},o=Object.assign({},n,e);let r,a;if(Ot(o,n,{msg:"ranges-sort: [THROW_ID_02*]",schema:{progressFn:["function","false","null"]}}),o.strictlyTwoElementsInRangeArrays&&!t.every((t,e)=>2===t.length||(r=e,a=t.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${Ct(r)} range (${JSON.stringify(t[r],null,4)}) has not two but ${a} elements!`);if(!t.every((t,e)=>!(!St(t[0],{includeZero:!0})||!St(t[1],{includeZero:!0}))||(r=e,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${Ct(r)} range (${JSON.stringify(t[r],null,4)}) does not consist of only natural numbers!`);const c=t.length*t.length;let s=0;return Array.from(t).sort((t,e)=>(o.progressFn&&(s++,o.progressFn(Math.floor(100*s/c))),t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1))}var Tt=["null","start-of-heading","start-of-text","end-of-text","end-of-transmission","enquiry","acknowledge","bell","backspace","character-tabulation","line-feed","line-tabulation","form-feed","carriage-return","shift-out","shift-in","data-link-escape","device-control-one","device-control-two","device-control-three","device-control-four","negative-acknowledge","synchronous-idle","end-of-transmission-block","cancel","end-of-medium","substitute","escape","information-separator-four","information-separator-three","information-separator-two","information-separator-one","space","exclamation-mark"],Nt=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"];function Rt(t){if("string"!=typeof t||t.length>1)throw new Error("emlint/util/charSuitableForAttrName(): input is not a single string character!");var e=!"\"'><=".includes(t);return console.log("162 emlint/util/charSuitableForAttrName(): return ".concat(e)),e}function Lt(t){return"string"==typeof t}function Qt(t){return Lt(t)&&1===t.length&&(t.charCodeAt(0)>64&&t.charCodeAt(0)<91||t.charCodeAt(0)>96&&t.charCodeAt(0)<123)}function Ft(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e,n,o){return 0===n&&"string"==typeof e?"[".concat(32,"m",e.toUpperCase(),"[",39,"m"):n%2!=0?"".concat(t," [",33,"m").concat(e,"[",39,"m"):"".concat(t," = ").concat(JSON.stringify(e,null,4)).concat(o[n+1]?";":"")},"")}function kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("238 withinTagInnerspace() called, idx = ".concat(e));for(var n=null,o={at:null,last:!1,precedes:!1},r={at:null,last:!1,precedes:!1},a={at:null,last:!1,precedes:!1,within:!1},c=!1,s=!1,i=!1,l=!1,u=e,g=t.length;u<g;u++){var f=t[u].charCodeAt(0);if(console.log("".concat("[".concat(36,"m","=","[",39,"m[",34,"m","=","[",39,"m").repeat(15)," [",31,"m","str[ ".concat(u," ] = ").concat(t[u].trim().length?t[u]:JSON.stringify(t[u],null,0)),"[",39,"m ","[".concat(90,"m#",f,"[",39,"m")," ").concat("[".concat(36,"m","=","[",39,"m[",34,"m","=","[",39,"m").repeat(15))),t[u].trim().length){if(">"===t[u]?(o.at=u,o.last=!0):o.last?(o.precedes=!0,o.last=!1):o.precedes=!1,"/"===t[u]?(r.at=u,r.last=!0):r.last?(r.precedes=!0,r.last=!1):r.precedes=!1,t[u],"'\"".includes(t[u])?(null===a.at?(a.within=!0,a.at=u):t[u]===t[a.at]&&(a.within=!1),a.last=!0):a.last?(a.precedes=!0,a.last=!1):a.precedes=!1,a.at&&!a.within&&a.precedes&&t[u]!==t[a.at]&&(a.at=null,console.log("405 ".concat("[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","quotes.at",a.at)))),!a.within&&o.last&&r.precedes)return console.log("436 ".concat("[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ","[".concat(31,"m","R1","[",39,"m")," ",Ft("return","true"))),!0;if(a.within||!Rt(t[u])||c){if(!s&&c&&t[u].trim().length&&!Rt(t[u]))"="===t[u]?(s=!0,console.log("477 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_2",s)))):(c=!1,console.log("486 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_1",c))));else if(!i&&s&&t[u].trim().length)"'\"".includes(t[u])?(i=!0,console.log("500 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_3",i)))):(c=!1,s=!1,console.log("510 ".concat("[".concat(31,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_1",c,"r2_2",s))));else if(i&&t[u]===t[a.at])l=!0,console.log("525 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_4",l)));else if(l&&!a.within&&">"===t[u])return console.log("536 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("return","true"))),!0}else c=!0,console.log("458 ".concat("[".concat(32,"m","██","[",39,"m")," ","[".concat(90,"m","withinTagInnerspace()","[",39,"m")," ",Ft("set","r2_1",c)));null!==n&&(n=null)}else null===n&&(n=u),o.last&&(o.precedes=!0),r.last&&(r.precedes=!0),a.last&&(a.precedes=!0);console.log("".concat("[".concat(33,"m","whitespaceStartAt","[",39,"m")," = ",JSON.stringify(n,null,0))),console.log("".concat("[".concat(33,"m","closingBracket","[",39,"m")," = ",JSON.stringify(o,null,0))),console.log("".concat("[".concat(33,"m","slash","[",39,"m")," = ",JSON.stringify(r,null,0))),console.log("".concat("[".concat(33,"m","quotes","[",39,"m")," = ",JSON.stringify(a,null,0))),console.log("".concat("[".concat(33,"m","r2_1","[",39,"m")," = ",JSON.stringify(c,null,0))),console.log("".concat("[".concat(33,"m","r2_2","[",39,"m")," = ",JSON.stringify(s,null,0))),console.log("".concat("[".concat(33,"m","r2_3","[",39,"m")," = ",JSON.stringify(i,null,0))),console.log("".concat("[".concat(33,"m","r2_4","[",39,"m")," = ",JSON.stringify(l,null,0)))}return!1}function $t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("661 util/tagOnTheRight() called, ".concat("[".concat(33,"m","idx","[",39,"m")," = ","[".concat(31,"m",e,"[",39,"m"))),console.log("663 tagOnTheRight() called, idx = ".concat(e));var n=e?t.slice(e):t,o=!1;/^<\s*\w+\s*\/?\s*>/g.test(n)?(console.log("682 util/tagOnTheRight(): ".concat("[".concat(31,"m","R1","[",39,"m")," passed")),o=!0):/^<\s*\w+\s+\w+\s*=\s*['"]/g.test(n)?(console.log("687 util/tagOnTheRight(): ".concat("[".concat(31,"m","R2","[",39,"m")," passed")),o=!0):/^<\s*\/?\s*\w+\s*\/?\s*>/g.test(n)?(console.log("692 util/tagOnTheRight(): ".concat("[".concat(31,"m","R3","[",39,"m")," passed")),o=!0):/^<\s*\w+(?:\s*\w+)*\s*\w+=['"]/g.test(n)&&(console.log("697 util/tagOnTheRight(): ".concat("[".concat(31,"m","R4","[",39,"m")," passed")),o=!0);var r=Lt(t)&&e<t.length&&o;return console.log("703 util/tagOnTheRight(): return ".concat("[".concat(36,"m",r,"[",39,"m"))),r}function It(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t[e+1])return null;if(t[e+1]&&t[e+1].trim().length)return e+1;if(t[e+2]&&t[e+2].trim().length)return e+2;for(var n=e+1,o=t.length;n<o;n++)if(t[n].trim().length)return n;return null}var qt=Array.isArray,xt=Lt,Jt=Ft,Vt=kt,Pt=It,Wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<1)return null;if(t[e-1]&&t[e-1].trim().length)return e-1;if(t[e-2]&&t[e-2].trim().length)return e-2;for(var n=e;n--;)if(t[n]&&t[n].trim().length)return n;return null},Mt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ","[".concat(32,"m","██\n","[",39,"m"))),console.log("closingQuoteAt = ".concat(JSON.stringify(o,null,4)));var r=e[n];if("'"!==r&&'"'!==r)throw new Error("1 emlint/util/attributeOnTheRight(): first character is not a single/double quote!\nstartingQuoteVal = ".concat(JSON.stringify(r,null,0),"\nstr = ").concat(JSON.stringify(e,null,4),"\nidx = ").concat(JSON.stringify(n,null,0)));for(var a=!1,c=null,s=null,i=null,l=null,u=n,g=e.length;u<g;u++){var f=e[u].charCodeAt(0);if(console.log("[".concat(null===o?36:32,"m","===============================","[",39,"m [").concat(null===o?34:31,"m","str[ ".concat(u," ] = ").concat(e[u].trim().length?e[u]:JSON.stringify(e[u],null,0)),"[",39,"m ","[".concat(90,"m#",f,"[",39,"m")," [").concat(null===o?36:32,"m","===============================","[",39,"m")),(u===o&&u>n||null===o&&u>n&&e[u]===r)&&(o=u,console.log("837 (util/attributeOnTheRight) ".concat(Ft("set","closingQuoteAt",o))),a||(a=!0,console.log("846 (util/attributeOnTheRight) ".concat(Ft("set","closingQuoteMatched",a))))),">"===e[u]&&(c=u,console.log("858 (util/attributeOnTheRight) ".concat(Ft("set","lastClosingBracket",c)))),"<"===e[u]&&(s=u,console.log("868 (util/attributeOnTheRight) ".concat(Ft("set","lastOpeningBracket",s)))),"="===e[u]&&(l=u,console.log("878 (util/attributeOnTheRight) ".concat(Ft("set","lastEqual",l)))),"'"!==e[u]&&'"'!==e[u]||(i=u,console.log("884 (util/attributeOnTheRight) ".concat(Ft("set","lastSomeQuote",i)))),"="===e[u]&&("'"===e[u+1]||'"'===e[u+1]))if(console.log("900 (util/attributeOnTheRight) within pattern check: equal-quote"),a){if(!c||c<o)return console.log("908 (util/attributeOnTheRight) ".concat(Ft("return","closingQuoteAt",o))),o}else{if(o)return console.log("923 (util/attributeOnTheRight) STOP",'recursive check ends, it\'s actually messed up. We are already within a recursion. Return "false".'),!1;if(console.log("930 (util/attributeOnTheRight) ".concat(Ft(" ███████████████████████████████████████ correction!\n","true"))),0!==i&&e[u+1]!==i&&t(e,n,i))return console.log("945 (util/attributeOnTheRight) CORRECTION #1 PASSED - so it was mismatching quote"),console.log("948 (util/attributeOnTheRight) ".concat(Ft("return","lastSomeQuote",i))),i;if(t(e,u+1))return console.log("964 (util/attributeOnTheRight) CORRECTION #2 PASSED - healthy attributes follow"),console.log("967 (util/attributeOnTheRight) ".concat(Ft("return","false"))),!1}if(a&&c&&c>a)return console.log("981 (util/attributeOnTheRight) ".concat(Ft("return","closingQuoteAt",o))),o;if(a&&null===c&&null===s&&(null===i||i&&o>=i)&&null===l)return console.log("1005 (util/attributeOnTheRight) ".concat(Ft("return","closingQuoteAt",o))),o;e[u+1]||console.log('1028 (util) "EOL reached"'),console.log(a?"closingQuoteMatched":"")}if(i&&null===o&&(console.log("1046 (util) last chance, run correction 3"),console.log("".concat("[".concat(33,"m","lastSomeQuote","[",39,"m")," = ",JSON.stringify(i,null,4))),t(e,n,i)))return console.log("1058 (util) CORRECTION #3 PASSED - mismatched quotes confirmed"),console.log("1060 (util) ".concat(Ft("return",!0))),i;return console.log("1065 (util) ".concat(Ft("bottom - return","false"))),!1},Dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;console.log("1085 util/findClosingQuote() called, ".concat("[".concat(33,"m","idx","[",39,"m")," = ","[".concat(31,"m",e,"[",39,"m")));for(var n=null,o=null,r="\"'".includes(t[e])?t[e]:null,a=null,c=e,s=t.length;c<s;c++){var i=t[c].charCodeAt(0);if(console.log("[".concat(36,"m","===============================","[",39,"m [",34,"m","str[ ".concat(c," ] = ").concat(t[c].trim().length?t[c]:JSON.stringify(t[c],null,0)),"[",39,"m ","[".concat(90,"m#",i,"[",39,"m")," [",36,"m","===============================","[",39,"m")),34===i||39===i){if(t[c]===r&&c>e)return console.log("1116 (util/findClosingQuote) quick ending, ".concat(c," is the matching quote")),c;if(n=c,o=c,console.log("1124 (util/findClosingQuote) ".concat(Ft("set","lastNonWhitespaceCharWasQuoteAt",n))),c>e&&("'"===t[c]||'"'===t[c])&&kt(t,c+1))return console.log("1138 (util/findClosingQuote) ".concat(Ft("return",c))),c;if(console.log("1141 (util/findClosingQuote) didn't pass"),$t(t,c+1))return console.log("1145 [".concat(35,"m","██","[",39,"m (util/findClosingQuote) tag on the right - return i=",c)),c;console.log("1150 [".concat(35,"m","██","[",39,"m (util/findClosingQuote) NOT tag on the right"))}else if(t[c].trim().length)if(console.log("1156 (util/findClosingQuote)"),">"===t[c]){if(a=c,null!==n){console.log("1163 (util/findClosingQuote) ".concat(Ft("!","suitable candidate found")));var l=kt(t,c);if(console.log("1172 (util/findClosingQuote) withinTagInnerspace() result: ".concat(l)),l)return n===e?(console.log("1195 (util/findClosingQuote) ".concat(Ft("return","lastNonWhitespaceCharWasQuoteAt + 1",n+1))),n+1):(console.log("1204 (util/findClosingQuote) ".concat(Ft("return","lastNonWhitespaceCharWasQuoteAt",n))),n)}}else if("="===t[c]){var u=It(t,c);if(console.log("1219 (util/findClosingQuote) ".concat(Ft("set","whatFollowsEq",u))),u&&("'"===t[u]||'"'===t[u])){if(console.log("1229 (util/findClosingQuote)"),console.log("".concat("[".concat(33,"m","lastNonWhitespaceCharWasQuoteAt","[",39,"m")," = ",JSON.stringify(n,null,4))),kt(t,o+1))return console.log("1241 (util/findClosingQuote) ".concat(Ft("return","lastQuoteAt + 1",o+1))),o+1;console.log("1249 didn't pass")}}else if("/"!==t[c]){if("<"===t[c]&&$t(t,c)&&(console.log("1254 ██ tag on the right"),null!==a))return console.log("1257 (util/findClosingQuote) ".concat(Ft("return","lastClosingBracketAt",a))),a;null!==n&&(n=null,console.log("1271 (util/findClosingQuote) ".concat(Ft("set","lastNonWhitespaceCharWasQuoteAt",n))))}console.log("1283 (util/findClosingQuote) ".concat(Ft("END","lastNonWhitespaceCharWasQuoteAt",n)))}return null},Ht=function(t,e){return"&"!==t[e]||t[e+1]&&"a"===t[e+1]||t[e+2]&&"m"===t[e+2]||t[e+3]&&"p"===t[e+3]||t[e+3]&&";"===t[e+3]?"<"===t[e]?{name:"bad-character-unencoded-opening-bracket",position:[[e,e+1,"&lt;"]]}:">"===t[e]?{name:"bad-character-unencoded-closing-bracket",position:[[e,e+1,"&gt;"]]}:'"'===t[e]?{name:"bad-character-unencoded-double-quotes",position:[[e,e+1,"&quot;"]]}:null:{name:"bad-character-unencoded-ampersand",position:[[e,e+1,"&amp;"]]}},Kt=$t;t.lint=function(t,n){if(!xt(t))throw new Error("emlint: [THROW_ID_01] the first input argument must be a string. It was given as:\n".concat(JSON.stringify(t,null,4)," (type ").concat(e(t),")"));var o,r,a,c={rules:"recommended",style:{line_endings_CR_LF_CRLF:null}};if(n){if(!w(n))throw new Error("emlint: [THROW_ID_02] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(n,null,4)," (type ").concat(e(n),")"));if(Ot(o=Object.assign({},c,n),c,{msg:"emlint: [THROW_ID_03*]",schema:{rules:["string","object","false","null","undefined"],style:["object","null","undefined"],"style.line_endings_CR_LF_CRLF":["string","null","undefined"]}}),o.style&&xt(o.style.line_endings_CR_LF_CRLF))if("cr"===o.style.line_endings_CR_LF_CRLF.toLowerCase())"CR"!==o.style.line_endings_CR_LF_CRLF&&o.style.line_endings_CR_LF_CRLF;else if("lf"===o.style.line_endings_CR_LF_CRLF.toLowerCase())"LF"!==o.style.line_endings_CR_LF_CRLF&&o.style.line_endings_CR_LF_CRLF;else{if("crlf"!==o.style.line_endings_CR_LF_CRLF.toLowerCase())throw new Error('emlint: [THROW_ID_04] opts.style.line_endings_CR_LF_CRLF should be either falsey or string "CR" or "LF" or "CRLF". It was given as:\n'.concat(JSON.stringify(o.style.line_endings_CR_LF_CRLF,null,4)," (type is string)"));"CRLF"!==o.style.line_endings_CR_LF_CRLF&&o.style.line_endings_CR_LF_CRLF}}else o=g(c);console.log("109 USING ".concat("[".concat(33,"m","opts","[",39,"m")," = ",JSON.stringify(o,null,4))),o.style&&xt(o.style.line_endings_CR_LF_CRLF)&&(r="cr"===o.style.line_endings_CR_LF_CRLF.toLowerCase()?"\r":"crlf"===o.style.line_endings_CR_LF_CRLF.toLowerCase()?"\r\n":"\n");var s,i={tagStartAt:null,tagEndAt:null,tagNameStartAt:null,tagNameEndAt:null,tagName:null,recognised:null,pureHTML:!0,attributes:[]};function l(){a=g(i)}l();var u,f={attrStartAt:null,attrEndAt:null,attrNameStartAt:null,attrNameEndAt:null,attrName:null,attrValue:null,attrValueStartAt:null,attrValueEndAt:null,attrEqualAt:null,attrOpeningQuote:{pos:null,val:null},attrClosingQuote:{pos:null,val:null},recognised:null,pureHTML:!0};function p(){s=g(f)}p();var h={startAt:null,includesLinebreaks:!1,lastLinebreakAt:null};function m(){u=g(h)}m();for(var d={issues:[]},y=[],b=[],A={cr:[],lf:[],crlf:[]},v=function(e,n){var c,i=t[e].charCodeAt(0);if(console.log("[".concat(36,"m","===============================","[",39,"m [",35,"m","str[ ".concat(e," ] = ").concat(t[e].trim().length?t[e]:JSON.stringify(t[e],null,0)),"[",39,"m ","[".concat(90,"m#",i,"[",39,"m")," [",36,"m","===============================","[",39,"m")),null!==a.tagNameEndAt){var f;if(null===s.attrNameStartAt||null!==s.attrNameEndAt||null!==s.attrName||Qt(t[e])||(s.attrNameEndAt=e,s.attrName=t.slice(s.attrNameStartAt,s.attrNameEndAt),console.log("305 ".concat(Jt("SET","logAttr.attrNameEndAt",s.attrNameEndAt,"logAttr.attrName",s.attrName))),"="!==t[e]&&("="===t[Pt(t,e)]?console.log("320 equal to the right though"):console.log("323 not equal, so terminate attr"))),null!==s.attrNameEndAt&&null===s.attrEqualAt&&e>=s.attrNameEndAt&&t[e].trim().length&&("'"!==t[e]&&'"'!==t[e]||(f=Mt(t,e)),console.log("339 catch what follows the attribute's name"),"="===t[e]?(s.attrEqualAt=e,console.log("343 ".concat(Jt("SET","logAttr.attrEqualAt",s.attrEqualAt)))):f?(console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ENDED ","[".concat(32,"m","██\n","[",39,"m"))),console.log("350 quoted attribute's value on the right, equal is indeed missing"),d.issues.push({name:"tag-attribute-missing-equal",position:[[e,e,"="]]}),console.log("358 ".concat(Jt("push","tag-attribute-missing-equal","".concat("[[".concat(e,", ").concat(e,', "="]]'))))),s.attrEqualAt=e,console.log("367 ".concat(Jt("SET","logAttr.attrEqualAt",s.attrEqualAt))),s.attrValueStartAt=e+1,console.log("372 ".concat(Jt("SET","logAttr.attrValueStartAt",s.attrValueStartAt))),s.attrValueEndAt=f,console.log("381 ".concat(Jt("SET","logAttr.attrValueEndAt",s.attrValueEndAt))),s.attrOpeningQuote.pos=e,s.attrOpeningQuote.val=t[e],s.attrClosingQuote.pos=f,s.attrClosingQuote.val=t[f],console.log("393 ".concat(Jt("SET","logAttr.attrOpeningQuote",s.attrOpeningQuote,"logAttr.attrClosingQuote",s.attrClosingQuote))),s.attrValue=t.slice(e+1,f),console.log("404 ".concat(Jt("SET","logAttr.attrValue",s.attrValue)))):(console.log("".concat("[".concat(32,"m","\n██","[",39,"m")," util/attributeOnTheRight() ENDED ","[".concat(32,"m","██\n","[",39,"m"))),a.attributes.push(g(s)),console.log("416 ".concat(Jt("PUSH, then RESET","logAttr"))),p()),null!==u.startAt&&("="===t[e]?(d.issues.push({name:"tag-attribute-space-between-name-and-equals",position:[[u.startAt,e]]}),console.log("431 ".concat(Jt("push","tag-attribute-space-between-name-and-equals","".concat("[[".concat(u.startAt,", ").concat(e,"]]")))))):Qt(t[e])&&(a.attributes.push(g(s)),console.log("440 ".concat(Jt("PUSH, then RESET","logAttr"))),p(),null!==u.startAt&&(" "===t[u.startAt]?(u.startAt+1<e&&(d.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[u.startAt+1,e]]}),console.log("455 ".concat(Jt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(u.startAt+1,", ").concat(e,"]]")))))),console.log("462 dead end of excessive whitespace check")):(d.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[u.startAt,e," "]]}),console.log("470 ".concat(Jt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(u.startAt,", ").concat(e,', " "]]')))))))))),null===s.attrStartAt&&Qt(t[e])&&(console.log("486 above catching the begining of an attribute's name"),s.attrStartAt=e,s.attrNameStartAt=e,console.log("490 ".concat(Jt("SET","logAttr.attrStartAt",s.attrStartAt))),null!==u.startAt&&u.startAt<e-1&&(" "===t[u.startAt]?(d.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[u.startAt+1,e]]}),console.log("506 ".concat(Jt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(u.startAt+1,", ").concat(e,"]]")))))):(d.issues.push({name:"tag-excessive-whitespace-inside-tag",position:[[u.startAt,e," "]]}),console.log("519 ".concat(Jt("push","tag-excessive-whitespace-inside-tag","".concat("[[".concat(u.startAt,", ").concat(e,', " "]]')))))))),null!==s.attrEqualAt&&s.attrEqualAt<e&&null===s.attrOpeningQuote.pos&&t[e].trim().length){if(console.log("536 rules above catching what follows attribute's equal"),34===i||39===i){u.startAt&&u.startAt<e&&(d.issues.push({name:"tag-attribute-space-between-equals-and-opening-quotes",position:[[u.startAt,e]]}),console.log("547 ".concat(Jt("push","tag-attribute-space-between-equals-and-opening-quotes","".concat(JSON.stringify([[u.startAt,e]],null,0)))))),m(),s.attrOpeningQuote.pos=e,s.attrOpeningQuote.val=t[e];var h=Dt(t,e);if(console.log("561 ".concat(Jt("set","closingQuotePeek",h))),h){if(t[h]!==t[e])if("'"===t[h]||'"'===t[h]){var v='"'===t[h],w="tag-attribute-mismatching-quotes-is-".concat(v?"double":"single");d.issues.push({name:w,position:[[h,h+1,"".concat(v?"'":'"')]]}),console.log("592 ".concat(Jt("push",w,"".concat("[[".concat(h,", ").concat(h+1,", ").concat(v?"'":'"',"]]")))))}else{var O="";t[h-1]&&t[h]&&t[h-1].trim().length&&t[h].trim().length&&"/"!==t[h]&&">"!==t[h]&&(O=" ");var S=t[h-1].trim().length?h:Wt(t,h)+1;console.log("625 ".concat(Jt("set","fromPositionToInsertAt",S)));var C=h;console.log("633 ".concat(Jt("set","toPositionToInsertAt",C))),"/"===t[Wt(t,h)]&&(console.log("641 SLASH ON THE LEFT"),(C=Wt(t,h))+1<h&&(d.issues.push({name:"tag-whitespace-closing-slash-and-bracket",position:[[C+1,h]]}),console.log("650 ".concat(Jt("push","tag-whitespace-closing-slash-and-bracket","".concat("[[".concat(C+1,", ").concat(h,"]]")))))),S=Wt(t,C)+1,console.log("663 ".concat(Jt("set","toPositionToInsertAt",C,"fromPositionToInsertAt",S)))),d.issues.push({name:"tag-attribute-closing-quotation-mark-missing",position:[[S,C,"".concat(t[e]).concat(O)]]}),console.log("684 ".concat(Jt("push","tag-attribute-closing-quotation-mark-missing","".concat("[[".concat(h,", ").concat(h,", ","".concat(t[e]).concat(O),"]]")))))}s.attrClosingQuote.pos=h,s.attrClosingQuote.val=t[e],s.attrValue=t.slice(e+1,h),s.attrValueStartAt=e+1,s.attrValueEndAt=h,s.attrEndAt=h,console.log("702 ".concat(Jt("set","logAttr.attrClosingQuote",s.attrClosingQuote,"logAttr.attrValue",s.attrValue,"logAttr.attrValueStartAt",s.attrValueStartAt,"logAttr.attrValueEndAt",s.attrValueEndAt,"logAttr.attrEndAt",s.attrEndAt)));for(var E=e+1;E<h;E++){var j=Ht(t,E);j&&(y.push(j),console.log("728 ".concat(Jt("push tagIssueStaging","newIssue",j))))}return b.length&&console.log("737 ".concat("[".concat(31,"m","██","[",39,"m")," raw stage present!")),a.attributes.push(g(s)),console.log("743 ".concat(Jt("PUSH, then RESET","logAttr"))),p(),e=t[h].trim().length?h:Wt(t,h),console.log("758 ".concat(Jt("set","i",e,"then CONTINUE"))),e===n-1&&null!==a.tagStartAt&&(null!==s.attrEqualAt&&null!==s.attrOpeningQuote.pos||a.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote.pos}))&&(d.issues.push({name:"tag-missing-closing-bracket",position:[[e+1,e+1,">"]]}),console.log("778 ".concat(Jt("push","tag-missing-closing-bracket","".concat("[[".concat(e+1,", ").concat(e+1,', ">"]]')))))),_=e,"continue"}}else if(8220===i||8221===i){s.attrOpeningQuote.pos=e,s.attrOpeningQuote.val='"',console.log("796 ".concat(Jt("set","logAttr.attrOpeningQuote",s.attrOpeningQuote)));var T=8220===i?"tag-attribute-left-double-quotation-mark":"tag-attribute-right-double-quotation-mark";d.issues.push({name:T,position:[[e,e+1,'"']]}),console.log("813 ".concat(Jt("push",T,"".concat("[[".concat(e,", ").concat(e+1,", '\"']]")))))}else if(8216===i||8217===i){s.attrOpeningQuote.pos=e,s.attrOpeningQuote.val="'",console.log("823 ".concat(Jt("set","logAttr.attrOpeningQuote",s.attrOpeningQuote)));var N=8216===i?"tag-attribute-left-single-quotation-mark":"tag-attribute-right-single-quotation-mark";d.issues.push({name:N,position:[[e,e+1,"'"]]}),console.log("840 ".concat(Jt("push",N,"".concat("[[".concat(e,", ").concat(e+1,", '\"']]"))))),s.attrValueStartAt=e+1,console.log("845 ".concat(Jt("set","logAttr.attrValueStartAt",s.attrValueStartAt)))}else if(Vt(t,e)){console.log("853 withinTagInnerspace() ".concat("[".concat(32,"m","positive","[",39,"m")));var R=s.attrStartAt;if("/"===t[e]||">"===t[e])for(var L=s.attrStartAt;L--;)if(t[L].trim().length){R=L+1;break}d.issues.push({name:"tag-attribute-quote-and-onwards-missing",position:[[R,e]]}),console.log("871 ".concat(Jt("push","tag-attribute-quote-and-onwards-missing","".concat("[[".concat(R,", ").concat(e,"]]"))))),console.log("878 ".concat(Jt("reset","logWhitespace"))),m(),console.log("880 ".concat(Jt("reset","logAttr"))),p()}else{console.log("884 withinTagInnerspace() ".concat("[".concat(31,"m","negative","[",39,"m")," - final ELSE clauses"));var Q=Dt(t,e);if(null!==Q){console.log("892 ending quote found: ".concat(Jt("set","endingQuotesPos",Q))),d.issues.push({name:"tag-attribute-opening-quotation-mark-missing",position:[[e,e,t[Q]]]}),console.log("904 ".concat(Jt("push","tag-attribute-space-between-equals-and-opening-quotes","".concat("[[".concat(e,", ").concat(e,", ").concat(JSON.stringify(t[Q],null,0),"]]"))))),s.attrOpeningQuote.pos=e,s.attrOpeningQuote.val=t[Q],s.attrValueStartAt=e,s.attrClosingQuote.pos=Q,s.attrClosingQuote.val=t[Q],s.attrValue=t.slice(e,Q),console.log("923 ".concat(Jt("SET","logAttr.attrOpeningQuote",s.attrOpeningQuote,"logAttr.attrClosingQuote",s.attrClosingQuote,"logAttr.attrValueStartAt",s.attrValueStartAt,"logAttr.attrValue",s.attrValue)));for(var F=e;F<Q;F++){var k=Ht(t,F);k&&(y.push(k),console.log("943 ".concat(Jt("push tagIssueStaging","newIssue",k))))}}else console.log("949 ".concat(Jt("set","endingQuotesPos",Q)))}console.log("956 ".concat(Jt("SET","logAttr.attrOpeningQuote.pos",s.attrOpeningQuote.pos,"logAttr.attrOpeningQuote.val",s.attrOpeningQuote.val))),null!==u.startAt&&("'"===t[e]||'"'===t[e]?(d.issues.push({name:"tag-attribute-space-between-equals-and-opening-quotes",position:[[u.startAt,e]]}),console.log("974 ".concat(Jt("push","tag-attribute-space-between-equals-and-opening-quotes","".concat("[[".concat(u.startAt,", ").concat(e,"]]")))))):Vt(t,e+1)&&(d.issues.push({name:"tag-attribute-quote-and-onwards-missing",position:[[s.attrStartAt,e]]}),console.log("989 ".concat(Jt("push","tag-attribute-quote-and-onwards-missing","".concat("[[".concat(s.attrStartAt,", ").concat(e,"]]"))))),console.log("995 ".concat(Jt("reset","logAttr"))),p()))}if(null!==s.attrEqualAt&&null!==s.attrOpeningQuote.pos&&e>s.attrOpeningQuote.pos&&(t[e]===s.attrOpeningQuote.val||Vt(t,e+1)))if(console.log("1009 above catching closing quote (single or double)"),34===i||39===i){var $="tag-attribute-mismatching-quotes-is-".concat(34===i?"double":"single");t[e]===s.attrOpeningQuote.val||d.issues.length&&d.issues.some(function(t){return _=e,t.name===$&&1===t.position.length&&t.position[0][0]===e&&t.position[0][1]===e+1})?console.log("1043 ".concat("[".concat(31,"m","didn't push an issue","[",39,"m"))):(d.issues.push({name:$,position:[[e,e+1,"".concat(34===i?"'":'"')]]}),console.log("1035 ".concat(Jt("push",$,"".concat("[[".concat(e,", ").concat(e+1,", ").concat(34===i?"'":'"',"]]")))))),s.attrClosingQuote.pos=e,s.attrClosingQuote.val=t[e],console.log("1054 ".concat(Jt("SET","logAttr.attrClosingQuote.pos",s.attrClosingQuote.pos,"logAttr.attrClosingQuote.val",s.attrClosingQuote.val))),null===s.attrValue&&(s.attrOpeningQuote.pos&&s.attrClosingQuote.pos&&s.attrOpeningQuote.pos+1<s.attrClosingQuote.pos?s.attrValue=t.slice(s.attrOpeningQuote.pos,s.attrClosingQuote.pos):s.attrValue="",console.log("1082 ".concat(Jt("SET","logAttr.attrValue",s.attrValue)))),s.attrEndAt=e,s.attrValueEndAt=e,console.log("1090 ".concat(Jt("SET","logAttr.attrEndAt",s.attrEndAt,"logAttr.attrValueEndAt",s.attrValueEndAt))),a.attributes.push(g(s)),console.log("1101 ".concat(Jt("PUSH, then RESET","logAttr"))),p()}else if(!xt(s.attrOpeningQuote.val)||8220!==i&&8221!==i)if(!xt(s.attrOpeningQuote.val)||8216!==i&&8217!==i||(null===Pt(t,e)||">"!==t[Pt(t,e)]&&"/"!==t[Pt(t,e)])&&!Vt(t,e+1)){if(Vt(t,e)){var I=" ",q=t[Pt(t,e-1)];console.log("1193 ".concat("[".concat(33,"m","whatsOnTheRight","[",39,"m")," = ",JSON.stringify(q,null,4))),t[e].trim().length&&q&&">"!==q&&"/"!==q||(I="",console.log("1206 no compensation space")),console.log("1210 compensationSpace.length = ".concat(I.length));var x="tag-attribute-closing-quotation-mark-missing";!s.attrOpeningQuote.val||s.attrClosingQuote&&s.attrClosingQuote.pos!==e||(console.log("1219"),d.issues.some(function(t){return _=e,t.name===x&&1===t.position.length&&t.position[0][0]===e&&t.position[0][1]===e})?console.log("1248 ".concat("[".concat(31,"m","didn't push a duplicate issue","[",39,"m"))):(d.issues.push({name:x,position:[[e,e,"".concat(s.attrOpeningQuote.val).concat(I)]]}),console.log("1238 ".concat(Jt("push",x,"".concat("[[".concat(e,", ").concat(e,", ","".concat(s.attrOpeningQuote.val).concat(I),"]]"))))))),s.attrClosingQuote.pos||(s.attrEndAt=e,s.attrClosingQuote.pos=e,s.attrClosingQuote.val=s.attrOpeningQuote.val,console.log("1259 ".concat(Jt("set","logAttr.attrClosingQuote",s.attrClosingQuote,"logAttr.attrEndAt",s.attrEndAt))),a.attributes.push(g(s)),console.log("1269 ".concat(Jt("PUSH, then RESET","logAttr"))),p())}}else{var J=8216===i?"tag-attribute-left-single-quotation-mark":"tag-attribute-right-single-quotation-mark";d.issues.push({name:J,position:[[e,e+1,"'"]]}),console.log("1164 ".concat(Jt("push",J,"".concat("[[".concat(e,", ").concat(e+1,', "\'"]]'))))),s.attrEndAt=e,s.attrClosingQuote.pos=e,s.attrClosingQuote.val="'",console.log("1172 ".concat(Jt("SET","logAttr.attrEndAt",s.attrEndAt,"logAttr.attrClosingQuote",s.attrClosingQuote))),a.attributes.push(g(s)),console.log("1183 ".concat(Jt("PUSH, then RESET","logAttr"))),p()}else{var V=8220===i?"tag-attribute-left-double-quotation-mark":"tag-attribute-right-double-quotation-mark";d.issues.push({name:V,position:[[e,e+1,'"']]}),console.log("1123 ".concat(Jt("push",V,"".concat("[[".concat(e,", ").concat(e+1,", '\"']]"))))),s.attrEndAt=e,s.attrClosingQuote.pos=e,s.attrClosingQuote.val='"',console.log("1131 ".concat(Jt("SET","logAttr.attrEndAt",s.attrEndAt,"logAttr.attrClosingQuote",s.attrClosingQuote))),a.attributes.push(g(s)),console.log("1142 ".concat(Jt("PUSH, then RESET","logAttr"))),p()}s.attrOpeningQuote.val&&s.attrOpeningQuote.pos<e&&null===s.attrClosingQuote.pos&&("/"===t[e]&&Pt(t,e)&&">"===t[Pt(t,e)]||">"===t[e])&&(console.log("1289 inside error catch clauses"),d.issues.push({name:"tag-attribute-closing-quotation-mark-missing",position:[[e,e,s.attrOpeningQuote.val]]}),console.log("1296 ".concat(Jt("push","tag-attribute-closing-quotation-mark-missing","".concat("[[".concat(e,", ").concat(e,", ").concat(s.attrOpeningQuote.val,"]]"))))),s.attrClosingQuote.pos=e,s.attrClosingQuote.val=s.attrOpeningQuote.val,console.log("1306 ".concat(Jt("set","logAttr.attrClosingQuote",s.attrClosingQuote))),a.attributes.push(g(s)),console.log("1314 ".concat(Jt("PUSH, then RESET","logAttr"))),p())}if(i<32){var P="bad-character-".concat(Tt[i]);9===i?(d.issues.push({name:P,position:[[e,e+1,"  "]]}),console.log('1342 PUSH "'.concat(P,'", [[').concat(e,", ").concat(e+1,', "  "]]'))):13===i?xt(t[e+1])&&10===t[e+1].charCodeAt(0)?o.style&&o.style.line_endings_CR_LF_CRLF&&"CRLF"!==o.style.line_endings_CR_LF_CRLF?(d.issues.push({name:"file-wrong-type-line-ending-CRLF",position:[[e,e+2,r]]}),console.log("1361 ".concat(Jt("push","file-wrong-type-line-ending-CRLF","".concat("[[".concat(e,", ").concat(e+2,", ").concat(JSON.stringify(r,null,0),"]]")))))):(A.crlf.push([e,e+2]),console.log("1375 ".concat(Jt("logLineEndings.crlf push","[".concat(e,", ").concat(e+2,"]"))))):o.style&&o.style.line_endings_CR_LF_CRLF&&"CR"!==o.style.line_endings_CR_LF_CRLF?(d.issues.push({name:"file-wrong-type-line-ending-CR",position:[[e,e+1,r]]}),console.log("1391 ".concat(Jt("push","file-wrong-type-line-ending-CR","".concat("[[".concat(e,", ").concat(e+1,", ").concat(JSON.stringify(r,null,0),"]]")))))):(A.cr.push([e,e+1]),console.log("1405 ".concat(Jt("logLineEndings.cr push","[".concat(e,", ").concat(e+1,"]"))))):10===i?xt(t[e-1])&&13===t[e-1].charCodeAt(0)||(o.style&&o.style.line_endings_CR_LF_CRLF&&"LF"!==o.style.line_endings_CR_LF_CRLF?(d.issues.push({name:"file-wrong-type-line-ending-LF",position:[[e,e+1,r]]}),console.log("1425 ".concat(Jt("push","file-wrong-type-line-ending-LF","".concat("[[".concat(e,", ").concat(e+1,", ").concat(JSON.stringify(r,null,0),"]]")))))):(A.lf.push([e,e+1]),console.log("1439 ".concat(Jt("logLineEndings.lf push","[".concat(e,", ").concat(e+1,"]")))))):(d.issues.push({name:P,position:[[e,e+1]]}),console.log("1449 ".concat(Jt("push",P,"".concat("[[".concat(e,", ").concat(e+1,"]]"))))))}else if(Ht(t,e)){var W=Ht(t,e);console.log("1454 ".concat("[".concat(31,"m","██","[",39,"m")," new issue: ",JSON.stringify(W,null,0))),b.push(W),console.log("1462 push above issue to ".concat("[".concat(36,"m","rawIssueStaging","[",39,"m")))}if(null!==u.startAt&&t[e].trim().length&&(console.log("1469 - inside whitespace chunks ending clauses"),null!==a.tagNameStartAt&&null===s.attrStartAt&&(!s.attrClosingQuote.pos||s.attrClosingQuote.pos<=e)&&(">"===t[e]||"/"===t[e]&&"<>".includes(t[Pt(t,e)])))){console.log("1477");var M="tag-excessive-whitespace-inside-tag";"/"===t[u.startAt-1]&&(M="tag-whitespace-closing-slash-and-bracket"),d.issues.push({name:M,position:[[u.startAt,e]]}),console.log("1490 ".concat(Jt("push",M,"".concat("[[".concat(u.startAt,", ").concat(e,"]]")))))}if(t[e].trim().length||null!==u.startAt||(u.startAt=e,console.log("1499 ".concat(Jt("set","logWhitespace.startAt",u.startAt)))),"\n"!==t[e]&&"\r"!==t[e]||(null===u.startAt||u.includesLinebreaks||(u.includesLinebreaks=!0,console.log("1508 ".concat(Jt("set","logWhitespace.includesLinebreaks",u.includesLinebreaks)))),u.lastLinebreakAt=e,console.log("1517 ".concat(Jt("set","logWhitespace.lastLinebreakAt",u.lastLinebreakAt)))),null===a.tagNameStartAt||null!==a.tagNameEndAt||Qt(t[e])||"<"===t[e]||"/"===t[e]||(console.log("1535 not a latin letter, thus we assume tag name ends here"),a.tagNameEndAt=e,a.tagName=t.slice(a.tagNameStartAt,e),a.recognised=Nt.includes(a.tagName.toLowerCase()),console.log("1542 ".concat(Jt("set","logTag.tagNameEndAt",a.tagNameEndAt,"logTag.tagName",a.tagName,"logTag.recognised",a.recognised)))),null!==a.tagStartAt&&null===a.tagNameStartAt&&Qt(t[e])&&a.tagStartAt<e&&(a.tagNameStartAt=e,console.log("1563 ".concat(Jt("set","logTag.tagNameStartAt",a.tagNameStartAt))),a.tagStartAt<e-1&&null!==u.startAt&&(y.push({name:"tag-space-after-opening-bracket",position:[[a.tagStartAt+1,e]]}),console.log("1573 ".concat(Jt("stage","tag-space-after-opening-bracket","".concat("[[".concat(a.tagStartAt+1,", ").concat(e,"]]"))))))),null!==a.tagNameStartAt&&null===a.tagNameEndAt&&Lt(c=t[e])&&1===c.length&&c.charCodeAt(0)>64&&c.charCodeAt(0)<91&&(d.issues.push({name:"tag-name-lowercase",position:[[e,e+1,t[e].toLowerCase()]]}),console.log("1593 ".concat(Jt("push","tag-name-lowercase","".concat("[[".concat(e,", ").concat(e+1,", ").concat(JSON.stringify(t[e].toLowerCase(),null,4),"]]")))))),"<"===t[e])if(console.log("1608 catch the beginning of a tag ".concat("[".concat(31,"m","███████████████████████████████████████","[",39,"m"))),null===a.tagStartAt)a.tagStartAt=e,console.log("1614 ".concat(Jt("set","logTag.tagStartAt",a.tagStartAt)));else if(Kt(t,e))if(console.log("1620 ".concat("[".concat(32,"m","██","[",39,"m")," new tag starts")),null!==a.tagStartAt&&a.attributes.length&&a.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote.pos})){console.log("1636 TAG ON THE LEFT, WE CAN ADD CLOSING BRACKET (IF MISSING)");var D=Wt(t,e);console.log("1650 ".concat(Jt("set","lastNonWhitespaceOnLeft",D))),">"===t[D]?(a.tagEndAt=D+1,console.log("1663 ".concat(Jt("set","logTag.tagEndAt",a.tagEndAt)))):(d.issues.push({name:"tag-missing-closing-bracket",position:[[D+1,e,">"]]}),console.log("1673 ".concat(Jt("push","tag-missing-closing-bracket","".concat("[[".concat(D+1,", ").concat(e,', ">"]]')))))),b.length&&(console.log("1683 let's process all ".concat(b.length," raw character issues at staging")),b.forEach(function(t){t.position[0][0]<a.tagStartAt?(d.issues.push(t),console.log("1690 ".concat(Jt("push","issueObj",t)))):console.log("1693 discarding ".concat(JSON.stringify(t,null,4)))})),function(t){console.log("027 pingTag(): ".concat(JSON.stringify(t,null,4)))}(g(a)),l(),p(),b=[],console.log("1707 ".concat(Jt("reset","logTag & logAttr && rawIssueStaging"))),a.tagStartAt=e,console.log("1713 ".concat(Jt("set","logTag.tagStartAt",a.tagStartAt)))}else console.log("1716 NOT TAG ON THE LEFT, WE CAN ADD ENCODE BRACKETS"),b.length&&(console.log("1721 ".concat(Jt("processing","rawIssueStaging",b))),console.log("1724 ".concat(Jt("log","logTag.tagStartAt",a.tagStartAt))),console.log("1727 ".concat("[".concat(31,"m",JSON.stringify(s,null,4),"[",39,"m"))),b.forEach(function(t){t.position[0][0]<e?(d.issues.push(t),console.log("1740 ".concat(Jt("push","issueObj",t)))):(console.log(""),console.log("1744 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(a.tagStartAt)))}),console.log("1756 wipe rawIssueStaging"),b=[]),y.length&&(console.log("1762 ".concat(Jt("wipe","tagIssueStaging"))),y=[]);62===i&&null!==a.tagStartAt&&(!s.attrClosingQuote||s.attrClosingQuote.pos<e)&&(y.length&&(console.log("1778 concat ".concat("[".concat(33,"m","tagIssueStaging","[",39,"m")," then wipe")),d.issues=d.issues.concat(y),y=[]),b.length&&(console.log("1786 ".concat(Jt("processing","rawIssueStaging",b))),console.log("".concat("[".concat(33,"m","logTag","[",39,"m")," = ",JSON.stringify(a,null,4))),b.forEach(function(t){t.position[0][0]<a.tagStartAt||a.attributes.some(function(n){return _=e,n.attrValueStartAt<t.position[0][0]&&n.attrValueEndAt>t.position[0][0]})&&!d.issues.some(function(n){return _=e,n.position[0][0]===t.position[0][0]&&n.position[0][1]===t.position[0][1]})?(d.issues.push(t),console.log("1812 ".concat(Jt("push","issueObj",t)))):(console.log(""),console.log("1816 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(a.tagStartAt)))}),console.log("1828 wipe rawIssueStaging"),b=[]),l(),p(),console.log("1835 ".concat(Jt("reset","logTag & logAttr")))),t[e].trim().length&&(m(),console.log("1861 ".concat(Jt("reset","logWhitespace")))),t[e+1]||(console.log("1866"),b.length&&(console.log("1869"),null!==a.tagStartAt&&a.attributes.some(function(t){return null!==t.attrEqualAt&&null!==t.attrOpeningQuote})?(console.log("1880"),b.forEach(function(t){t.position[0][0]<a.tagStartAt?(d.issues.push(t),console.log("1885 ".concat(Jt("push","issueObj",t)))):console.log("\n1519 ".concat("[".concat(31,"m","not pushed","[",39,"m")," ","[".concat(33,"m","issueObj","[",39,"m")," = ",JSON.stringify(t,null,4),"\nbecause ","[".concat(33,"m","issueObj.position[0][0]","[",39,"m"),"=").concat(t.position[0][0]," not < ","[".concat(33,"m","logTag.tagStartAt","[",39,"m"),"=").concat(a.tagStartAt))}),console.log("1900 wipe rawIssueStaging"),b=[],d.issues.push({name:"tag-missing-closing-bracket",position:[[u.startAt?u.startAt:e+1,e+1,">"]]}),console.log("1915 ".concat(Jt("push","tag-missing-closing-bracket","".concat("[[".concat(u.startAt?u.startAt:e+1,", ").concat(e+1,', ">"]]')))))):(d.issues=d.issues.concat(b),console.log("1929 concat, then wipe ".concat("[".concat(33,"m","rawIssueStaging","[",39,"m"))),b=[])));var H={logTag:!0,logAttr:!0,logWhitespace:!0,logLineEndings:!1,retObj:!1,tagIssueStaging:!0,rawIssueStaging:!0};console.log("".concat(Object.keys(H).some(function(t){return H[t]})?"".concat("[".concat(31,"m","█ ","[",39,"m")):"").concat(H.logTag&&null!==a.tagStartAt?"".concat("[".concat(33,"m","logTag","[",39,"m")," ",JSON.stringify(a,null,4),"; "):"").concat(H.logAttr&&null!==s.attrStartAt?"".concat("[".concat(33,"m","logAttr","[",39,"m")," ",JSON.stringify(s,null,4),"; "):"").concat(H.logWhitespace&&null!==u.startAt?"".concat("[".concat(33,"m","logWhitespace","[",39,"m")," ",JSON.stringify(u,null,0),"; "):"").concat(H.logLineEndings?"".concat("[".concat(33,"m","logLineEndings","[",39,"m")," ",JSON.stringify(A,null,0),"; "):"").concat(H.retObj?"".concat("[".concat(33,"m","retObj","[",39,"m")," ",JSON.stringify(d,null,4),"; "):"").concat(H.tagIssueStaging&&y.length?"\n".concat("[".concat(33,"m","tagIssueStaging","[",39,"m")," ",JSON.stringify(y,null,4),"; "):"").concat(H.rawIssueStaging&&b.length?"\n".concat("[".concat(33,"m","rawIssueStaging","[",39,"m")," ",JSON.stringify(b,null,4),"; "):"")),_=e},_=0,O=t.length;_<O;_++)v(_,O);return o.style&&o.style.line_endings_CR_LF_CRLF||!(A.cr.length&&A.lf.length||A.lf.length&&A.crlf.length||A.cr.length&&A.crlf.length)||(A.cr.length>A.crlf.length&&A.cr.length>A.lf.length?(console.log("2042 CR clearly prevalent"),A.crlf.length&&A.crlf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CR-mainly",position:[[t[0],t[1],"\r"]]})}),A.lf.length&&A.lf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CR-mainly",position:[[t[0],t[1],"\r"]]})})):A.lf.length>A.crlf.length&&A.lf.length>A.cr.length?(console.log("2064 LF clearly prevalent"),A.crlf.length&&A.crlf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),A.cr.length&&A.cr.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})})):A.crlf.length>A.lf.length&&A.crlf.length>A.cr.length?(console.log("2086 CRLF clearly prevalent"),A.cr.length&&A.cr.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})}),A.lf.length&&A.lf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})})):A.crlf.length===A.lf.length&&A.lf.length===A.cr.length?(console.log("2108 same amount of each type of EOL"),A.crlf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),A.cr.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})})):A.cr.length===A.crlf.length&&A.cr.length>A.lf.length?(console.log("2127 CR & CRLF are prevalent over LF"),A.cr.length&&A.cr.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})}),A.lf.length&&A.lf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-CRLF-mainly",position:[[t[0],t[1],"\r\n"]]})})):(A.lf.length===A.crlf.length&&A.lf.length>A.cr.length||A.cr.length===A.lf.length&&A.cr.length>A.crlf.length)&&(console.log("2152 LF && CRLF are prevalent over CR or CR & LF are prevalent over CRLF"),A.cr.length&&A.cr.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}),A.crlf.length&&A.crlf.forEach(function(t){d.issues.push({name:"file-mixed-line-endings-file-is-LF-mainly",position:[[t[0],t[1],"\n"]]})}))),console.log("2175 BEFORE FIX"),console.log("2177 ".concat("[".concat(33,"m","retObj.issues","[",39,"m")," = ",JSON.stringify(d.issues,null,4))),d.fix=qt(d.issues)&&d.issues.length?function(t,e){if(!Array.isArray(t))return t;if(e&&"function"!=typeof e)throw new Error(`ranges-merge: [THROW_ID_01] the second input argument must be a function! It was given of a type: "${typeof e}", equal to ${JSON.stringify(e,null,4)}`);const n=g(t).filter(t=>void 0!==t[2]||t[0]!==t[1]);let o,r,a;const c=(o=e?jt(n,{progressFn:t=>{(a=Math.floor(t/5))!==r&&(r=a,e(a))}}):jt(n)).length-1;for(let t=c;t>0;t--)e&&(a=Math.floor(78*(1-t/c))+21)!==r&&a>r&&(r=a,e(a)),(o[t][0]<=o[t-1][0]||o[t][0]<=o[t-1][1])&&(o[t-1][0]=Math.min(o[t][0],o[t-1][0]),o[t-1][1]=Math.max(o[t][1],o[t-1][1]),void 0!==o[t][2]&&(o[t-1][0]>=o[t][0]||o[t-1][1]<=o[t][1])&&null!==o[t-1][2]&&(null===o[t][2]&&null!==o[t-1][2]?o[t-1][2]=null:void 0!==o[t-1][2]?o[t-1][2]+=o[t][2]:o[t-1][2]=o[t][2]),o.splice(t,1),t=o.length);return o}(d.issues.reduce(function(t,e){return t.concat(e.position)},[])):null,d},t.version="0.7.0",t.errors="./errors.json",Object.defineProperty(t,"__esModule",{value:!0})});
