/**
 * string-process-comma-separated
 * Extracts chunks from possibly comma or whatever-separated string
 * Version: 1.3.0
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/string-process-comma-separated/
 */

var e="1.3.0";function t(e,t){if("string"!=typeof e)throw Error(`string-process-comma-separated: [THROW_ID_01] input must be string! It was given as ${typeof e}, equal to:\n${JSON.stringify(e,null,4)}`);if(!e.length||!t||!t.cb&&!t.errCb)return;const r={...{from:0,to:e.length,offset:0,leadingWhitespaceOK:!1,trailingWhitespaceOK:!1,oneSpaceAfterCommaOK:!1,innerWhitespaceAllowed:!1,separator:",",cb:null,errCb:null},...t};Number.isInteger(t.from)||(r.from=0),Number.isInteger(t.to)||(r.to=e.length),Number.isInteger(t.offset)||(r.offset=0);let o=null,a=null,f=!1,s=[],i=null,n=!0;for(let t=r.from;r.to>t;t++){if(e[t].trim()&&e[t]!==r.separator&&(i=t),null!==o||!e[t].trim()||r.separator&&e[t]===r.separator||(f||(f=!0),s.length&&(s.length>1&&s.forEach(((e,t)=>{t&&r.errCb([[e+r.offset,e+1+r.offset]],"Remove separator.",n)})),s=[]),o=t),Number.isInteger(o)&&(t>o&&r.separator&&e[t]===r.separator||t+1===r.to)){e.slice(o,t+1===r.to&&e[t]!==r.separator&&e[t].trim()?t+1:t);"function"==typeof r.cb&&r.cb(o+r.offset,(t+1===r.to&&e[t]!==r.separator&&e[t].trim()?t+1:i+1)+r.offset),o=null}if(e[t].trim()||null!==a||(a=t),null!==a&&(e[t].trim()||t+1===r.to)){if(a===r.from)r.leadingWhitespaceOK||"function"!=typeof r.errCb||r.errCb([[a+r.offset,(t+1===r.to?t+1:t)+r.offset]],"Remove whitespace.",n);else if(e[t].trim()||t+1!==r.to){if(!(r.oneSpaceAfterCommaOK&&e[t].trim()&&t>r.from+1&&" "===e[t-1]&&","===e[t-2]||r.innerWhitespaceAllowed&&f&&e[a-1]&&e[t].trim()&&e[t]!==r.separator&&e[a-1]!==r.separator)){let o=a,s=t;t+1!==r.to||e[t]===r.separator||e[t].trim()||(s+=1);let i="";r.oneSpaceAfterCommaOK&&(" "===e[a]&&e[a-1]===r.separator?o+=1:" "!==e[a]&&(i=" "));let l="Remove whitespace.";!r.innerWhitespaceAllowed&&f&&e[a-1]&&e[t].trim()&&e[t]!==r.separator&&e[a-1]!==r.separator&&(n=!1,l="Bad whitespace."),r.errCb(i.length?[[o+r.offset,s+r.offset,i]]:[[o+r.offset,s+r.offset]],l,n),n=!0}}else r.trailingWhitespaceOK||"function"!=typeof r.errCb||r.errCb([[a+r.offset,t+1+r.offset]],"Remove whitespace.",n);a=null}e[t]===r.separator&&(f?s.push(t):r.errCb([[t+r.offset,t+1+r.offset]],"Remove separator.",n)),t+1===r.to&&s.forEach((e=>{r.errCb([[e+r.offset,e+1+r.offset]],"Remove separator.",n)}))}}export{t as processCommaSep,e as version};
