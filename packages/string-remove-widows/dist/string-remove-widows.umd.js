/**
 * string-remove-widows
 * Helps to prevent widow words in a text
 * Version: 1.6.10
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/string-remove-widows
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).stringRemoveWidows={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t){return"string"==typeof t?t.length>0?[t]:[]:t}function u(t){return t&&"object"===e(t)&&!Array.isArray(t)}function l(t){return"string"==typeof t}function f(t,e,r,n,o,i){var a="function"==typeof r?r():r;if(e<0&&o&&"EOL"===a)return a;if(e>=t.length&&!o)return!1;for(var s=o?1:r.length,c=!1,u=!1,l=n.maxMismatches,f=e,h=!1,g=!1,p=!1;t[f];){var y=i(f);if(n.trimBeforeMatching&&""===t[f].trim()){if(!t[y]&&o&&"EOL"===r)return!0;f=i(f)}else if(!n.i&&n.trimCharsBeforeMatching.includes(t[f])||n.i&&n.trimCharsBeforeMatching.map((function(t){return t.toLowerCase()})).includes(t[f].toLowerCase())){if(o&&"EOL"===r&&!t[y])return!0;f=i(f)}else{var m=y>f?r[r.length-s]:r[s-1];if(!n.i&&t[f]===m||n.i&&t[f].toLowerCase()===m.toLowerCase()){if(h||(h=!0),u||(u=!0),s===r.length?g=!0:1===s&&(p=!0),(s-=1)<1)return f}else{if(!(n.maxMismatches&&l&&f))return!(0!==f||1!==s||n.lastMustMatch||!u)&&0;l-=1;for(var d=0;d<=l;d++){var b=y>f?r[r.length-s+1+d]:r[s-2-d],v=t[i(f)];if(b&&(!n.i&&t[f]===b||n.i&&t[f].toLowerCase()===b.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=2,h=!0;break}if(v&&b&&(!n.i&&v===b||n.i&&v.toLowerCase()===b.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=1,h=!0;break}if(void 0===b&&l>=0&&h&&(!n.firstMustMatch||g)&&(!n.lastMustMatch||p))return f}h||(c=f)}if(!1!==c&&c!==f&&(c=!1),s<1)return f;f=i(f)}}return s>0?!(!o||"EOL"!==a)||!!(n.maxMismatches>=s&&u)&&(c||0):void 0}function h(t,r,n,o){return function(t,r,n,o,a){if(u(a)&&Object.prototype.hasOwnProperty.call(a,"trimBeforeMatching")&&"boolean"!=typeof a.trimBeforeMatching)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!").concat(Array.isArray(a.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var s,h,g,p,y=i(i({},{i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1}),a);if(y.trimCharsBeforeMatching=c(y.trimCharsBeforeMatching),y.trimCharsBeforeMatching=y.trimCharsBeforeMatching.map((function(t){return l(t)?t:String(t)})),!l(r))return!1;if(!r.length)return!1;if(!Number.isInteger(n)||n<0)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ").concat(e(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(l(o))s=[o];else if(Array.isArray(o))s=o;else if(o){if("function"!=typeof o)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ").concat(e(o),", equal to:\n").concat(JSON.stringify(o,null,4)));(s=[]).push(o)}else s=o;if(a&&!u(a))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \"").concat(e(a),'", and equal to:\n').concat(JSON.stringify(a,null,4)));if(y.trimCharsBeforeMatching.some((function(t,e){return t.length>1&&(g=e,p=t,!0)})))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ").concat(g," is longer than 1 character, ").concat(p.length," (equals to ").concat(p,"). Please split it into separate characters and put into array as separate elements."));if(!s||!Array.isArray(s)||Array.isArray(s)&&!s.length||Array.isArray(s)&&1===s.length&&l(s[0])&&!s[0].trim()){if("function"==typeof y.cb){var m,d=n;if("matchLeftIncl"!==t&&"matchRight"!==t||(d+=1),"L"===t[5])for(var b=d;b--;){var v=r[b];if((!y.trimBeforeMatching||y.trimBeforeMatching&&void 0!==v&&v.trim())&&(!y.trimCharsBeforeMatching.length||void 0!==v&&!y.trimCharsBeforeMatching.includes(v))){m=b;break}}else if(t.startsWith("matchRight"))for(var w=d;w<r.length;w++){var _=r[w];if((!y.trimBeforeMatching||y.trimBeforeMatching&&_.trim())&&(!y.trimCharsBeforeMatching.length||!y.trimCharsBeforeMatching.includes(_))){m=w;break}}if(void 0===m)return!1;var j=r[m],O=m+1,T="";return O&&O>0&&(T=r.slice(0,O)),"L"===t[5]?y.cb(j,T,m):(m&&m>0&&(T=r.slice(m)),y.cb(j,T,m))}var A="";throw a||(A=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/".concat(t,'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!').concat(A))}for(var I=0,E=s.length;I<E;I++){h="function"==typeof s[I];var W=s[I],M=void 0,R=void 0,S="",C=n;"matchRight"===t?C+=1:"matchLeft"===t&&(C-=1);var F=f(r,C,W,y,h,(function(e){return"L"===t[5]?e-1:e+1}));if(F&&h&&"function"==typeof W&&"EOL"===W())return!(!W()||y.cb&&!y.cb(M,S,R))&&W();if(Number.isInteger(F)&&(R=t.startsWith("matchLeft")?F-1:F+1,S="L"===t[5]?r.slice(0,F):r.slice(R)),R<0&&(R=void 0),r[R]&&(M=r[R]),Number.isInteger(F)&&(!y.cb||y.cb(M,S,R)))return W}return!1}("matchRightIncl",t,r,n,o)}var g,p,y=Function.prototype,m=Object.prototype,d=y.toString,b=m.hasOwnProperty,v=d.call(Object),w=m.toString,_=(g=Object.getPrototypeOf,p=Object,function(t){return g(p(t))});var j=function(t){if(!function(t){return!!t&&"object"==e(t)}(t)||"[object Object]"!=w.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var r=_(t);if(null===r)return!0;var n=b.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==v},O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t,e,r){t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}((function(t,r){var n="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",a="[object Map]",s="[object Set]",c=/\w*$/,u=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[n]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[a]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[s]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[o]=f["[object WeakMap]"]=!1;var h="object"==e(O)&&O&&O.Object===Object&&O,g="object"==("undefined"==typeof self?"undefined":e(self))&&self&&self.Object===Object&&self,p=h||g||Function("return this")(),y=r&&!r.nodeType&&r,m=y&&t&&!t.nodeType&&t,d=m&&m.exports===y;function b(t,e){return t.set(e[0],e[1]),t}function v(t,e){return t.add(e),t}function w(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function _(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function j(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function T(t,e){return function(r){return t(e(r))}}function A(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var I,E=Array.prototype,W=Function.prototype,M=Object.prototype,R=p["__core-js_shared__"],S=(I=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",C=W.toString,F=M.hasOwnProperty,L=M.toString,D=RegExp("^"+C.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=d?p.Buffer:void 0,N=p.Symbol,k=p.Uint8Array,B=T(Object.getPrototypeOf,Object),x=Object.create,H=M.propertyIsEnumerable,J=E.splice,q=Object.getOwnPropertySymbols,$=P?P.isBuffer:void 0,U=T(Object.keys,Object),V=dt(p,"DataView"),z=dt(p,"Map"),Z=dt(p,"Promise"),K=dt(p,"Set"),G=dt(p,"WeakMap"),Q=dt(Object,"create"),X=jt(V),Y=jt(z),tt=jt(Z),et=jt(K),rt=jt(G),nt=N?N.prototype:void 0,ot=nt?nt.valueOf:void 0;function it(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function at(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function st(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ct(t){this.__data__=new at(t)}function ut(t,r){var o=Tt(t)||function(t){return function(t){return function(t){return!!t&&"object"==e(t)}(t)&&At(t)}(t)&&F.call(t,"callee")&&(!H.call(t,"callee")||L.call(t)==n)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],i=o.length,a=!!i;for(var s in t)!r&&!F.call(t,s)||a&&("length"==s||wt(s,i))||o.push(s);return o}function lt(t,e,r){var n=t[e];F.call(t,e)&&Ot(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function ft(t,e){for(var r=t.length;r--;)if(Ot(t[r][0],e))return r;return-1}function ht(t,e,r,u,l,h,g){var p;if(u&&(p=h?u(t,l,h,g):u(t)),void 0!==p)return p;if(!Wt(t))return t;var y=Tt(t);if(y){if(p=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&F.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,p)}else{var m=vt(t),d=m==o||m==i;if(It(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if("[object Object]"==m||m==n||d&&!h){if(_(t))return h?t:{};if(p=function(t){return"function"!=typeof t.constructor||_t(t)?{}:(e=B(t),Wt(e)?x(e):{});var e}(d?{}:t),!e)return function(t,e){return yt(t,bt(t),e)}(t,function(t,e){return t&&yt(e,Mt(e),t)}(p,t))}else{if(!f[m])return h?t:{};p=function(t,e,r,n){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return pt(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var r=e?pt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?pt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case a:return function(t,e,r){return w(e?r(j(t),!0):j(t),b,new t.constructor)}(t,n,r);case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return function(t){var e=new t.constructor(t.source,c.exec(t));return e.lastIndex=t.lastIndex,e}(t);case s:return function(t,e,r){return w(e?r(A(t),!0):A(t),v,new t.constructor)}(t,n,r);case"[object Symbol]":return i=t,ot?Object(ot.call(i)):{}}var i}(t,m,ht,e)}}g||(g=new ct);var O=g.get(t);if(O)return O;if(g.set(t,p),!y)var T=r?function(t){return function(t,e,r){var n=e(t);return Tt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Mt,bt)}(t):Mt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(T||t,(function(n,o){T&&(n=t[o=n]),lt(p,o,ht(n,e,r,u,o,t,g))})),p}function gt(t){return!(!Wt(t)||function(t){return!!S&&S in t}(t))&&(Et(t)||_(t)?D:u).test(jt(t))}function pt(t){var e=new t.constructor(t.byteLength);return new k(e).set(new k(t)),e}function yt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;lt(r,a,void 0===s?t[a]:s)}return r}function mt(t,r){var n,o,i=t.__data__;return("string"==(o=e(n=r))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof r?"string":"hash"]:i.map}function dt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return gt(r)?r:void 0}it.prototype.clear=function(){this.__data__=Q?Q(null):{}},it.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},it.prototype.get=function(t){var e=this.__data__;if(Q){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return F.call(e,t)?e[t]:void 0},it.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:F.call(e,t)},it.prototype.set=function(t,e){return this.__data__[t]=Q&&void 0===e?"__lodash_hash_undefined__":e,this},at.prototype.clear=function(){this.__data__=[]},at.prototype.delete=function(t){var e=this.__data__,r=ft(e,t);return!(r<0)&&(r==e.length-1?e.pop():J.call(e,r,1),!0)},at.prototype.get=function(t){var e=this.__data__,r=ft(e,t);return r<0?void 0:e[r][1]},at.prototype.has=function(t){return ft(this.__data__,t)>-1},at.prototype.set=function(t,e){var r=this.__data__,n=ft(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},st.prototype.clear=function(){this.__data__={hash:new it,map:new(z||at),string:new it}},st.prototype.delete=function(t){return mt(this,t).delete(t)},st.prototype.get=function(t){return mt(this,t).get(t)},st.prototype.has=function(t){return mt(this,t).has(t)},st.prototype.set=function(t,e){return mt(this,t).set(t,e),this},ct.prototype.clear=function(){this.__data__=new at},ct.prototype.delete=function(t){return this.__data__.delete(t)},ct.prototype.get=function(t){return this.__data__.get(t)},ct.prototype.has=function(t){return this.__data__.has(t)},ct.prototype.set=function(t,e){var r=this.__data__;if(r instanceof at){var n=r.__data__;if(!z||n.length<199)return n.push([t,e]),this;r=this.__data__=new st(n)}return r.set(t,e),this};var bt=q?T(q,Object):function(){return[]},vt=function(t){return L.call(t)};function wt(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||l.test(t))&&t>-1&&t%1==0&&t<e}function _t(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||M)}function jt(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ot(t,e){return t===e||t!=t&&e!=e}(V&&"[object DataView]"!=vt(new V(new ArrayBuffer(1)))||z&&vt(new z)!=a||Z&&"[object Promise]"!=vt(Z.resolve())||K&&vt(new K)!=s||G&&"[object WeakMap]"!=vt(new G))&&(vt=function(t){var e=L.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?jt(r):void 0;if(n)switch(n){case X:return"[object DataView]";case Y:return a;case tt:return"[object Promise]";case et:return s;case rt:return"[object WeakMap]"}return e});var Tt=Array.isArray;function At(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!Et(t)}var It=$||function(){return!1};function Et(t){var e=Wt(t)?L.call(t):"";return e==o||e==i}function Wt(t){var r=e(t);return!!t&&("object"==r||"function"==r)}function Mt(t){return At(t)?ut(t):function(t){if(!_t(t))return U(t);var e=[];for(var r in Object(t))F.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return ht(t,!0,!0)}}));function T(t,e){return function(t,e,r){if("string"!=typeof t||!t.length)return null;if(e&&"number"==typeof e||(e=0),!t[e+1])return null;if(t[e+1]&&(!r&&t[e+1].trim()||r&&(t[e+1].trim()||"\n\r".includes(t[e+1]))))return e+1;if(t[e+2]&&(!r&&t[e+2].trim()||r&&(t[e+2].trim()||"\n\r".includes(t[e+2]))))return e+2;for(var n=e+1,o=t.length;n<o;n++)if(t[n]&&(!r&&t[n].trim()||r&&(t[n].trim()||"\n\r".includes(t[n]))))return n;return null}(t,e,!1)}function A(t,e){return function(t,e,r){if("string"!=typeof t||!t.length)return null;if(e&&"number"==typeof e||(e=0),e<1)return null;if(t[~-e]&&(!r&&t[~-e].trim()||r&&(t[~-e].trim()||"\n\r".includes(t[~-e]))))return~-e;if(t[e-2]&&(!r&&t[e-2].trim()||r&&(t[e-2].trim()||"\n\r".includes(t[e-2]))))return e-2;for(var n=e;n--;)if(t[n]&&(!r&&t[n].trim()||r&&(t[n].trim()||"\n\r".includes(t[n]))))return n;return null}(t,e,!1)}function I(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;if(!(r.trim()||t.length&&"\n"!==r&&" "!==r&&" "===(e?t[t.length-1]:t[0])||t.length&&"\n"===(e?t[t.length-1]:t[0])&&"\n"!==r&&" "!==r))if(e){if(("\n"===r||" "===r)&&t.length&&" "===t[t.length-1])for(;t.length&&" "===t[t.length-1];)t.pop();t.push(" "===r||"\n"===r?r:" ")}else{if(("\n"===r||" "===r)&&t.length&&" "===t[0])for(;t.length&&" "===t[0];)t.shift();t.unshift(" "===r||"\n"===r?r:" ")}}function E(t,e){if("string"==typeof t&&t.length){var r,n,o=!1;if(t.includes("\r\n")&&(o=!0),r=e&&"number"==typeof e?e:1,""===t.trim()){var i=[];for(n=r,Array.from(t).forEach((function(t){("\n"!==t||n)&&("\n"===t&&(n-=1),I(i,!0,t))}));i.length>1&&" "===i[i.length-1];)i.pop();return i.join("")}var a=[];if(n=r,""===t[0].trim())for(var s=0,c=t.length;s<c&&!t[s].trim();s++)("\n"!==t[s]||n)&&("\n"===t[s]&&(n-=1),I(a,!0,t[s]));var u=[];if(n=r,""===t.slice(-1).trim())for(var l=t.length;l--&&!t[l].trim();)("\n"!==t[l]||n)&&("\n"===t[l]&&(n-=1),I(u,!1,t[l]));return o?"".concat(a.join("")).concat(t.trim()).concat(u.join("")).replace(/\n/g,"\r\n"):a.join("")+t.trim()+u.join("")}return t}function W(t,e){if(!Array.isArray(t)||!t.length)return t;var r,n,o=i(i({},{strictlyTwoElementsInRangeArrays:!1,progressFn:null}),e);if(o.strictlyTwoElementsInRangeArrays&&!t.every((function(t,e){return 2===t.length||(r=e,n=t.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") has not two but ").concat(n," elements!"));if(!t.every((function(t,e){return!(!Number.isInteger(t[0])||t[0]<0||!Number.isInteger(t[1])||t[1]<0)||(r=e,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") does not consist of only natural numbers!"));var a=t.length*t.length,s=0;return Array.from(t).sort((function(t,e){return o.progressFn&&(s+=1,o.progressFn(Math.floor(100*s/a))),t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1}))}function M(t,r){function n(t){return"string"==typeof t}function o(t){return t&&"object"===e(t)&&!Array.isArray(t)}if(!Array.isArray(t)||!t.length)return t;var s,c={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};if(r){if(!o(r))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(r,null,4)," (type ").concat(e(r),")"));if((s=i(i({},c),r)).progressFn&&o(s.progressFn)&&!Object.keys(s.progressFn).length)s.progressFn=null;else if(s.progressFn&&"function"!=typeof s.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'.concat(e(s.progressFn),'", equal to ').concat(JSON.stringify(s.progressFn,null,4)));if(s.mergeType&&1!==s.mergeType&&2!==s.mergeType)if(n(s.mergeType)&&"1"===s.mergeType.trim())s.mergeType=1;else{if(!n(s.mergeType)||"2"!==s.mergeType.trim())throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(e(s.mergeType),'", equal to ').concat(JSON.stringify(s.mergeType,null,4)));s.mergeType=2}if("boolean"!=typeof s.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'.concat(e(s.joinRangesThatTouchEdges),'", equal to ').concat(JSON.stringify(s.joinRangesThatTouchEdges,null,4)))}else s=i({},c);for(var u,l,f,h=t.map((function(t){return a(t)})).filter((function(t){return void 0!==t[2]||t[0]!==t[1]})),g=(u=s.progressFn?W(h,{progressFn:function(t){(f=Math.floor(t/5))!==l&&(l=f,s.progressFn(f))}}):W(h)).length-1,p=g;p>0;p--)s.progressFn&&(f=Math.floor(78*(1-p/g))+21)!==l&&f>l&&(l=f,s.progressFn(f)),(u[p][0]<=u[p-1][0]||!s.joinRangesThatTouchEdges&&u[p][0]<u[p-1][1]||s.joinRangesThatTouchEdges&&u[p][0]<=u[p-1][1])&&(u[p-1][0]=Math.min(u[p][0],u[p-1][0]),u[p-1][1]=Math.max(u[p][1],u[p-1][1]),void 0!==u[p][2]&&(u[p-1][0]>=u[p][0]||u[p-1][1]<=u[p][1])&&null!==u[p-1][2]&&(null===u[p][2]&&null!==u[p-1][2]?u[p-1][2]=null:void 0!==u[p-1][2]?2===s.mergeType&&u[p-1][0]===u[p][0]?u[p-1][2]=u[p][2]:u[p-1][2]+=u[p][2]:u[p-1][2]=u[p][2]),u.splice(p,1),p=u.length);return u}function R(t){return null!=t}function S(t){return Number.isInteger(t)&&t>=0}function C(t){return"string"==typeof t}function F(t){return/^\d*$/.test(t)?parseInt(t,10):t}var L=function(){function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=i(i({},{limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1}),r);if(n.mergeType&&1!==n.mergeType&&2!==n.mergeType)if(C(n.mergeType)&&"1"===n.mergeType.trim())n.mergeType=1;else{if(!C(n.mergeType)||"2"!==n.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(e(n.mergeType),'", equal to ').concat(JSON.stringify(n.mergeType,null,4)));n.mergeType=2}this.opts=n}var n,o,s;return n=t,(o=[{key:"add",value:function(t,r,n){for(var o=this,i=arguments.length,s=new Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];if(s.length>0)throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_03] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: ".concat(JSON.stringify(s,null,4)));if(R(t)||R(r)){if(R(t)&&!R(r)){if(Array.isArray(t)){if(t.length){if(t.some((function(t){return Array.isArray(t)})))return void t.forEach((function(t){Array.isArray(t)&&o.add.apply(o,a(t))}));t.length>1&&S(F(t[0]))&&S(F(t[1]))&&this.add.apply(this,a(t))}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('.concat(JSON.stringify(t,null,0),') but second-one, "to" is not (').concat(JSON.stringify(r,null,0),")"))}if(!R(t)&&R(r))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('.concat(JSON.stringify(r,null,0),') but first-one, "from" is not (').concat(JSON.stringify(t,null,0),")"));var u=/^\d*$/.test(t)?parseInt(t,10):t,l=/^\d*$/.test(r)?parseInt(r,10):r;if(S(n)&&(n=String(n)),!S(u)||!S(l))throw S(u)&&u>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(e(l),'" equal to: ').concat(JSON.stringify(l,null,4))):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(e(u),'" equal to: ').concat(JSON.stringify(u,null,4)));if(R(n)&&!C(n)&&!S(n))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ".concat(e(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(R(this.slices)&&Array.isArray(this.last())&&u===this.last()[1]){if(this.last()[1]=l,this.last()[2],null!==this.last()[2]&&R(n)){var f=!(R(this.last()[2])&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?n:this.last()[2]+n;this.opts.limitToBeAddedWhitespace&&(f=E(f,this.opts.limitLinebreaksCount)),C(f)&&!f.length||(this.last()[2]=f)}}else{this.slices||(this.slices=[]);var h=void 0===n||C(n)&&!n.length?[u,l]:[u,l,this.opts.limitToBeAddedWhitespace?E(n,this.opts.limitLinebreaksCount):n];this.slices.push(h)}}}},{key:"push",value:function(t,e,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];this.add.apply(this,[t,e,r].concat(o))}},{key:"current",value:function(){var t=this;return null!=this.slices?(this.slices=M(this.slices,{mergeType:this.opts.mergeType}),this.opts.limitToBeAddedWhitespace?this.slices.map((function(e){return R(e[2])?[e[0],e[1],E(e[2],t.opts.limitLinebreaksCount)]:e})):this.slices):null}},{key:"wipe",value:function(){this.slices=void 0}},{key:"replace",value:function(t){if(Array.isArray(t)&&t.length){if(!Array.isArray(t[0])||!S(t[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ".concat(JSON.stringify(t[0],null,4)," should be an array and its first element should be an integer, a string index."));this.slices=Array.from(t)}else this.slices=void 0}},{key:"last",value:function(){return void 0!==this.slices&&Array.isArray(this.slices)?this.slices[this.slices.length-1]:null}}])&&r(n.prototype,o),s&&r(n,s),t}();function D(t){return null!=t}function P(t){return"string"==typeof t}function N(t,r,n){var o,i=0,a=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if(!P(t))throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ".concat(e(t),", equal to: ").concat(JSON.stringify(t,null,4)));if(null===r)return t;if(!Array.isArray(r))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ".concat(e(r),", equal to: ").concat(JSON.stringify(r,null,4)));if(n&&"function"!=typeof n)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: ".concat(e(n),", equal to: ").concat(JSON.stringify(n,null,4)));var s=(o=Array.isArray(r)&&(Number.isInteger(r[0])&&r[0]>=0||/^\d*$/.test(r[0]))&&(Number.isInteger(r[1])&&r[1]>=0||/^\d*$/.test(r[1]))?[Array.from(r)]:Array.from(r)).length,c=0;o.forEach((function(t,r){if(n&&(i=Math.floor(c/s*10))!==a&&(a=i,n(i)),!Array.isArray(t))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has ".concat(r,"th element not an array: ").concat(JSON.stringify(t,null,4),", which is ").concat(e(t)));if(!Number.isInteger(t[0])||t[0]<0){if(!/^\d*$/.test(t[0]))throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has ".concat(r,"th element, array [").concat(t[0],",").concat(t[1],"]. That array has first element not an integer, but ").concat(e(t[0]),", equal to: ").concat(JSON.stringify(t[0],null,4),". Computer doesn't like this."));o[r][0]=Number.parseInt(o[r][0],10)}if(!Number.isInteger(t[1])){if(!/^\d*$/.test(t[1]))throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has ".concat(r,"th element, array [").concat(t[0],",").concat(t[1],"]. That array has second element not an integer, but ").concat(e(t[1]),", equal to: ").concat(JSON.stringify(t[1],null,4),". Computer doesn't like this."));o[r][1]=Number.parseInt(o[r][1],10)}c+=1}));var u=M(o,{progressFn:function(t){n&&(i=10+Math.floor(t/10))!==a&&(a=i,n(i))}}),l=u.length;if(l>0){var f=t.slice(u[l-1][1]);t=u.reduce((function(e,r,o,s){n&&(i=20+Math.floor(o/l*80))!==a&&(a=i,n(i));var c=0===o?0:s[o-1][1],u=s[o][0];return e+t.slice(c,u)+(D(s[o][2])?s[o][2]:"")}),""),t+=f}return t}var k=[{heads:"{{",tails:"}}"},{heads:["{% if","{%- if"],tails:["{% endif","{%- endif"]},{heads:["{% for","{%- for"],tails:["{% endfor","{%- endfor"]},{heads:["{%","{%-"],tails:["%}","-%}"]},{heads:"{#",tails:"#}"}],B=[{heads:"{{",tails:"}}"}],x=[{heads:["<%","<%=","<%-"],tails:["%>","=%>","-%>"]}],H=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"],J={removeWidowPreventionMeasures:!1,convertEntities:!0,targetLanguage:"html",UKPostcodes:!1,hyphens:!0,minWordCount:4,minCharCount:5,ignore:[],reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100,tagRanges:[]};t.defaultOpts=J,t.removeWidows=function(t,r){function n(t){return"string"==typeof t}var o=Date.now();if(!n(t))throw void 0===t?new Error("string-remove-widows: [THROW_ID_01] the first input argument is completely missing! It should be given as string."):new Error('string-remove-widows: [THROW_ID_02] the first input argument must be string! It was given as "'.concat(e(t),'", equal to:\n').concat(JSON.stringify(t,null,4)));if(r&&!j(r))throw new Error("string-remove-widows: [THROW_ID_03] the second input argument, options object, should be a plain object but it was given as type ".concat(e(r),", equal to ").concat(JSON.stringify(r,null,4)));var a,s,u,l,f,g,p,y,m,d,b,v,w=Array.isArray,_=t.length,O=new L({mergeType:2}),I=["."],E=/[A-Z]{1,2}[0-9][0-9A-Z]?$/,W=/^[0-9][A-Z]{2}/,M=0,R=i(i({},J),r),S={removeWidows:!1,convertEntities:!1};if(R.dashes&&(R.hyphens=!0,delete R.dashes),R.ignore&&(w(R.ignore)||n(R.ignore))){if(R.ignore=c(R.ignore),R.ignore.includes("all"))R.ignore=R.ignore.concat(k.concat(x));else if(R.ignore.some((function(t){return n(t)}))){var C=[];R.ignore=R.ignore.filter((function(t){return n(t)&&t.length?(["nunjucks","jinja","liquid"].includes(t.trim().toLowerCase())?C=C.concat(k):["hugo"].includes(t.trim().toLowerCase())?C=C.concat(B):["hexo"].includes(t.trim().toLowerCase())&&(C=C.concat(x)),!1):"object"===e(t)||void 0})),C.length&&(R.ignore=R.ignore.concat(C))}}else R.ignore=[];function F(e,r){var o=" ";R.removeWidowPreventionMeasures?o=" ":R.convertEntities&&(o="&nbsp;",n(R.targetLanguage)&&("css"===R.targetLanguage.trim().toLowerCase()?o="\\00A0":"js"===R.targetLanguage.trim().toLowerCase()&&(o="\\u00A0"))),t.slice(e,r)!==o&&O.push(e,r,o)}function D(){s=0,u=0,l=void 0,f=void 0,g=void 0,p=void 0,y=void 0,m=void 0}R.reportProgressFunc&&(v=Math.floor(R.reportProgressFuncTo-.06*(R.reportProgressFuncTo-R.reportProgressFuncFrom)-R.reportProgressFuncFrom)),D();for(var P=function(e){if(!d&&w(R.ignore)&&R.ignore.length&&R.ignore.some((function(r,o){if(w(r.heads)&&r.heads.some((function(r){return t.startsWith(r,e)}))||n(r.heads)&&t.startsWith(r.heads,e))return s+=1,d=R.ignore[o].tails,q=e,!0})),!d&&b&&b===e&&(s+=1,b=void 0),"function"==typeof R.reportProgressFunc&&(a=R.reportProgressFuncFrom+Math.floor(e/_*v))!==M&&(M=a,R.reportProgressFunc(a)),!d&&e&&t[e]&&t[e].trim()&&(!t[e-1]||t[e-1]&&!t[e-1].trim())&&(p=e),!d&&t[e]&&t[e].trim()&&(u+=1),d||!R.hyphens||!("-".concat("—").concat("–").includes(t[e])||t.startsWith("&ndash;",e)||t.startsWith("\\2013",e)||t.startsWith("\\u2013",e)||t.startsWith("&mdash;",e)||t.startsWith("\\2014",e)||t.startsWith("\\u2014",e))||!t[e+1]||t[e+1].trim()&&"&"!==t[e]||t[e-1]&&!t[e-1].trim()&&t[A(t,e)]&&(F(A(t,e)+1,e),S.removeWidows=!0),d||!t.startsWith("&nbsp;",e)&&!t.startsWith("&#160;",e)||(y=e,m=e+6,t[e+6]&&t[e+6].trim()&&(b=e+6),R.convertEntities?"css"!==R.targetLanguage&&"js"!==R.targetLanguage||(O.push(e,e+6,"css"===R.targetLanguage?"\\00A0":"\\u00A0"),S.convertEntities=!0):(O.push(e,e+6," "),S.convertEntities=!0)),!d&&t[e+4]&&"\\"===t[e]&&"0"===t[e+1]&&"0"===t[e+2]&&"A"===t[e+3].toUpperCase()&&"0"===t[e+4]&&(y=e,m=e+5,t[e+5]&&t[e+5].trim()&&(b=e+5),R.convertEntities?"html"!==R.targetLanguage&&"js"!==R.targetLanguage||(O.push(e,e+5,"html"===R.targetLanguage?"&nbsp;":"\\u00A0"),S.convertEntities=!0):(O.push(e,e+5," "),S.convertEntities=!0)),!d&&"\\"===t[e]&&t[e+1]&&"u"===t[e+1].toLowerCase()&&"0"===t[e+2]&&"0"===t[e+3]&&t[e+4]&&"A"===t[e+4].toUpperCase()&&"0"===t[e+5]&&(y=e,m=e+6,t[e+6]&&t[e+6].trim()&&(b=e+6),R.convertEntities?"html"!==R.targetLanguage&&"css"!==R.targetLanguage||O.push(e,e+6,"html"===R.targetLanguage?"&nbsp;":"\\00A0"):O.push(e,e+6," ")),d||" "!==t[e]||(y=e,m=e+1,t[e+2]&&t[e+2].trim()&&(b=e+2),R.convertEntities&&O.push(e,e+1,"css"===R.targetLanguage?"\\00A0":"js"===R.targetLanguage?"\\u00A0":"&nbsp;")),d||!t[e]||!t[e].trim()||t[e-1]&&t[e-1].trim()||(s+=1),!d&&(!t[e]||"\r\n".includes(t[e])||("\n"===t[e]||"\r"===t[e]||"\r"===t[e]&&"\n"===t[e+1])&&t[e-1]&&I.includes(t[A(t,e)]))){var r,o;if((!R.minWordCount||s>=R.minWordCount)&&(!R.minCharCount||u>=R.minCharCount))void 0!==g&&void 0!==p&&void 0!==y&&void 0!==m?g>y?(r=g,o=p):(r=y,o=m):void 0!==g&&void 0!==p?(r=g,o=p):void 0!==y&&void 0!==m&&(r=y,o=m),r&&o||!l||!f||(r=l,o=f),r&&o&&(F(r,o),S.removeWidows=!0);D()}R.UKPostcodes&&t[e]&&!t[e].trim()&&t[e-1]&&t[e-1].trim()&&E.test(t.slice(0,e))&&t[T(t,e)]&&W.test(t.slice(T(t,e)))&&(F(e,T(t,e)),S.removeWidows=!0),d||!t[e]||t[e].trim()||!t[e-1]||!t[e-1].trim()||!(void 0===g||t[g-1]&&t[g-1].trim())||"/>".includes(t[T(t,e)])||t.slice(0,e).trim().endsWith("br")||t.slice(0,e).trim().endsWith("hr")||t.slice(0,e).endsWith("<")&&H.some((function(r){return t.startsWith(r,T(t,e))}))||(l=g,f=p,g=e,p=void 0,void 0===y&&void 0===m||(y=void 0,m=void 0));var i=void 0;d&&(!n(d)||d.length&&!t.startsWith(d,e)?!w(d)||d.length&&!d.some((function(r){if(t.startsWith(r,e))return i=r,q=e,!0}))||(d=void 0,e+=i.length,w(R.ignore)&&R.ignore.length&&t[e+1]&&R.ignore.some((function(r){return q=e,h(t,e,r.tails,{trimBeforeMatching:!0,cb:function(r,n,o){return o&&t[(e=o-1)+1]&&t[e+1].trim()&&(s+=1),q=e,!0}})}))):d=void 0),t[e]&&"\r\n".includes(t[e])&&(s=0,u=0),w(R.tagRanges)&&R.tagRanges.length&&R.tagRanges.some((function(t){if(e>=t[0]&&e<=t[1]&&t[1]-1>e)return e=t[1]-1,q=e,!0})),q=e},q=0;q<=_;q++)P(q);return{res:N(t,O.current(),R.reportProgressFunc?function(t){(a=Math.floor(.94*(R.reportProgressFuncTo-R.reportProgressFuncFrom)+t/100*(R.reportProgressFuncTo-R.reportProgressFuncFrom)*.06))!==M&&(M=a,R.reportProgressFunc(a))}:null),ranges:O.current(),log:{timeTakenInMiliseconds:Date.now()-o},whatWasDone:S}},t.version="1.6.10",Object.defineProperty(t,"__esModule",{value:!0})}));
