/**
 * string-remove-widows
 * Helps to prevent widow words in a text
 * Version: 1.6.11
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/string-remove-widows
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((t="undefined"!=typeof globalThis?globalThis:t||self).stringRemoveWidows={})}(this,(function(t){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function o(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function i(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?o(Object(e),!0).forEach((function(r){n(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return s(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function c(t){return"string"==typeof t?t.length>0?[t]:[]:t}function u(t){return t&&"object"===r(t)&&!Array.isArray(t)}function l(t){return"string"==typeof t}function f(t,r,e,n,o,i){var a="function"==typeof e?e():e;if(r<0&&o&&"EOL"===a)return a;if(r>=t.length&&!o)return!1;for(var s=o?1:e.length,c=!1,u=!1,l=n.maxMismatches,f=r,g=!1,h=!1,p=!1;t[f];){var y=i(f);if(n.trimBeforeMatching&&""===t[f].trim()){if(!t[y]&&o&&"EOL"===e)return!0;f=i(f)}else if(!n.i&&n.trimCharsBeforeMatching.includes(t[f])||n.i&&n.trimCharsBeforeMatching.map((function(t){return t.toLowerCase()})).includes(t[f].toLowerCase())){if(o&&"EOL"===e&&!t[y])return!0;f=i(f)}else{var m=y>f?e[e.length-s]:e[s-1];if(!n.i&&t[f]===m||n.i&&t[f].toLowerCase()===m.toLowerCase()){if(g||(g=!0),u||(u=!0),s===e.length?h=!0:1===s&&(p=!0),(s-=1)<1)return f}else{if(!(n.maxMismatches&&l&&f))return!(0!==f||1!==s||n.lastMustMatch||!u)&&0;l-=1;for(var d=0;d<=l;d++){var b=y>f?e[e.length-s+1+d]:e[s-2-d],v=t[i(f)];if(b&&(!n.i&&t[f]===b||n.i&&t[f].toLowerCase()===b.toLowerCase())&&(!n.firstMustMatch||s!==e.length)){s-=2,g=!0;break}if(v&&b&&(!n.i&&v===b||n.i&&v.toLowerCase()===b.toLowerCase())&&(!n.firstMustMatch||s!==e.length)){s-=1,g=!0;break}if(void 0===b&&l>=0&&g&&(!n.firstMustMatch||h)&&(!n.lastMustMatch||p))return f}g||(c=f)}if(!1!==c&&c!==f&&(c=!1),s<1)return f;f=i(f)}}return s>0?!(!o||"EOL"!==a)||!!(n.maxMismatches>=s&&u)&&(c||0):void 0}function g(t,e,n,o){return function(t,e,n,o,a){if(u(a)&&Object.prototype.hasOwnProperty.call(a,"trimBeforeMatching")&&"boolean"!=typeof a.trimBeforeMatching)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!").concat(Array.isArray(a.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var s,g,h,p,y=i(i({},{i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1}),a);if(y.trimCharsBeforeMatching=c(y.trimCharsBeforeMatching),y.trimCharsBeforeMatching=y.trimCharsBeforeMatching.map((function(t){return l(t)?t:String(t)})),!l(e))return!1;if(!e.length)return!1;if(!Number.isInteger(n)||n<0)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ").concat(r(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(l(o))s=[o];else if(Array.isArray(o))s=o;else if(o){if("function"!=typeof o)throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ").concat(r(o),", equal to:\n").concat(JSON.stringify(o,null,4)));(s=[]).push(o)}else s=o;if(a&&!u(a))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \"").concat(r(a),'", and equal to:\n').concat(JSON.stringify(a,null,4)));if(y.trimCharsBeforeMatching.some((function(t,r){return t.length>1&&(h=r,p=t,!0)})))throw new Error("string-match-left-right/".concat(t,"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ").concat(h," is longer than 1 character, ").concat(p.length," (equals to ").concat(p,"). Please split it into separate characters and put into array as separate elements."));if(!s||!Array.isArray(s)||Array.isArray(s)&&!s.length||Array.isArray(s)&&1===s.length&&l(s[0])&&!s[0].trim()){if("function"==typeof y.cb){var m,d=n;if("matchLeftIncl"!==t&&"matchRight"!==t||(d+=1),"L"===t[5])for(var b=d;b--;){var v=e[b];if((!y.trimBeforeMatching||y.trimBeforeMatching&&void 0!==v&&v.trim())&&(!y.trimCharsBeforeMatching.length||void 0!==v&&!y.trimCharsBeforeMatching.includes(v))){m=b;break}}else if(t.startsWith("matchRight"))for(var w=d;w<e.length;w++){var _=e[w];if((!y.trimBeforeMatching||y.trimBeforeMatching&&_.trim())&&(!y.trimCharsBeforeMatching.length||!y.trimCharsBeforeMatching.includes(_))){m=w;break}}if(void 0===m)return!1;var j=e[m],O=m+1,T="";return O&&O>0&&(T=e.slice(0,O)),"L"===t[5]||m&&m>0&&(T=e.slice(m)),y.cb(j,T,m)}var A="";throw a||(A=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/".concat(t,'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!').concat(A))}for(var I=0,E=s.length;I<E;I++){g="function"==typeof s[I];var W=s[I],M=void 0,R=void 0,S="",C=n;"matchRight"===t?C+=1:"matchLeft"===t&&(C-=1);var F=f(e,C,W,y,g,(function(r){return"L"===t[5]?r-1:r+1}));if(F&&g&&"function"==typeof W&&"EOL"===W())return!(!W()||y.cb&&!y.cb(M,S,R))&&W();if(Number.isInteger(F)&&(R=t.startsWith("matchLeft")?F-1:F+1,S="L"===t[5]?e.slice(0,F):e.slice(R)),R<0&&(R=void 0),e[R]&&(M=e[R]),Number.isInteger(F)&&(!y.cb||y.cb(M,S,R)))return W}return!1}("matchRightIncl",t,e,n,o)}var h,p,y=Function.prototype,m=Object.prototype,d=y.toString,b=m.hasOwnProperty,v=d.call(Object),w=m.toString,_=(h=Object.getPrototypeOf,p=Object,function(t){return h(p(t))});var j=function(t){if(!function(t){return!!t&&"object"==r(t)}(t)||"[object Object]"!=w.call(t)||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t))return!1;var e=_(t);if(null===e)return!0;var n=b.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&d.call(n)==v},O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t,r,e){t(e={path:r,exports:{},require:function(t,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==r&&e.path)}},e.exports),e.exports}((function(t,e){var n="[object Arguments]",o="[object Boolean]",i="[object Function]",a="[object GeneratorFunction]",s="[object Map]",c="[object Set]",u="[object DataView]",l="[object Float32Array]",f="[object Float64Array]",g="[object Int8Array]",h="[object Int16Array]",p="[object Int32Array]",y="[object Uint8Array]",m="[object Uint16Array]",d="[object Uint32Array]",b=/\w*$/,v=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,_={};_[n]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_[s]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_[c]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_[i]=_["[object WeakMap]"]=!1;var j="object"==r(O)&&O&&O.Object===Object&&O,T="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,A=j||T||Function("return this")(),I=e&&!e.nodeType&&e,E=I&&t&&!t.nodeType&&t,W=E&&E.exports===I;function M(t,r){return t.set(r[0],r[1]),t}function R(t,r){return t.add(r),t}function S(t,r,e,n){var o=-1,i=t?t.length:0;for(n&&i&&(e=t[++o]);++o<i;)e=r(e,t[o],o,t);return e}function C(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}function F(t){var r=-1,e=Array(t.size);return t.forEach((function(t,n){e[++r]=[n,t]})),e}function L(t,r){return function(e){return t(r(e))}}function P(t){var r=-1,e=Array(t.size);return t.forEach((function(t){e[++r]=t})),e}var D,N=Array.prototype,k=Function.prototype,B=Object.prototype,x=A["__core-js_shared__"],H=(D=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",J=k.toString,q=B.hasOwnProperty,$=B.toString,U=RegExp("^"+J.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=W?A.Buffer:void 0,V=A.Symbol,Z=A.Uint8Array,K=L(Object.getPrototypeOf,Object),G=Object.create,Q=B.propertyIsEnumerable,X=N.splice,Y=Object.getOwnPropertySymbols,tt=z?z.isBuffer:void 0,rt=L(Object.keys,Object),et=Et(A,"DataView"),nt=Et(A,"Map"),ot=Et(A,"Promise"),it=Et(A,"Set"),at=Et(A,"WeakMap"),st=Et(Object,"create"),ct=Ct(et),ut=Ct(nt),lt=Ct(ot),ft=Ct(it),gt=Ct(at),ht=V?V.prototype:void 0,pt=ht?ht.valueOf:void 0;function yt(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function mt(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function dt(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function bt(t){this.__data__=new mt(t)}function vt(t,e){var o=Lt(t)||function(t){return function(t){return function(t){return!!t&&"object"==r(t)}(t)&&Pt(t)}(t)&&q.call(t,"callee")&&(!Q.call(t,"callee")||$.call(t)==n)}(t)?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],i=o.length,a=!!i;for(var s in t)!e&&!q.call(t,s)||a&&("length"==s||Rt(s,i))||o.push(s);return o}function wt(t,r,e){var n=t[r];q.call(t,r)&&Ft(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function _t(t,r){for(var e=t.length;e--;)if(Ft(t[e][0],r))return e;return-1}function jt(t,r,e,v,w,j,O){var T;if(v&&(T=j?v(t,w,j,O):v(t)),void 0!==T)return T;if(!kt(t))return t;var A=Lt(t);if(A){if(T=function(t){var r=t.length,e=t.constructor(r);r&&"string"==typeof t[0]&&q.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!r)return function(t,r){var e=-1,n=t.length;r||(r=Array(n));for(;++e<n;)r[e]=t[e];return r}(t,T)}else{var I=Mt(t),E=I==i||I==a;if(Dt(t))return function(t,r){if(r)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}(t,r);if("[object Object]"==I||I==n||E&&!j){if(C(t))return j?t:{};if(T=function(t){return"function"!=typeof t.constructor||St(t)?{}:(r=K(t),kt(r)?G(r):{});var r}(E?{}:t),!r)return function(t,r){return At(t,Wt(t),r)}(t,function(t,r){return t&&At(r,Bt(r),t)}(T,t))}else{if(!_[I])return j?t:{};T=function(t,r,e,n){var i=t.constructor;switch(r){case"[object ArrayBuffer]":return Tt(t);case o:case"[object Date]":return new i(+t);case u:return function(t,r){var e=r?Tt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,n);case l:case f:case g:case h:case p:case y:case"[object Uint8ClampedArray]":case m:case d:return function(t,r){var e=r?Tt(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,n);case s:return function(t,r,e){return S(r?e(F(t),!0):F(t),M,new t.constructor)}(t,n,e);case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return function(t){var r=new t.constructor(t.source,b.exec(t));return r.lastIndex=t.lastIndex,r}(t);case c:return function(t,r,e){return S(r?e(P(t),!0):P(t),R,new t.constructor)}(t,n,e);case"[object Symbol]":return a=t,pt?Object(pt.call(a)):{}}var a}(t,I,jt,r)}}O||(O=new bt);var W=O.get(t);if(W)return W;if(O.set(t,T),!A)var L=e?function(t){return function(t,r,e){var n=r(t);return Lt(t)?n:function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}(n,e(t))}(t,Bt,Wt)}(t):Bt(t);return function(t,r){for(var e=-1,n=t?t.length:0;++e<n&&!1!==r(t[e],e,t););}(L||t,(function(n,o){L&&(n=t[o=n]),wt(T,o,jt(n,r,e,v,o,t,O))})),T}function Ot(t){return!(!kt(t)||function(t){return!!H&&H in t}(t))&&(Nt(t)||C(t)?U:v).test(Ct(t))}function Tt(t){var r=new t.constructor(t.byteLength);return new Z(r).set(new Z(t)),r}function At(t,r,e,n){e||(e={});for(var o=-1,i=r.length;++o<i;){var a=r[o],s=n?n(e[a],t[a],a,e,t):void 0;wt(e,a,void 0===s?t[a]:s)}return e}function It(t,e){var n,o,i=t.__data__;return("string"==(o=r(n=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Et(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return Ot(e)?e:void 0}yt.prototype.clear=function(){this.__data__=st?st(null):{}},yt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},yt.prototype.get=function(t){var r=this.__data__;if(st){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return q.call(r,t)?r[t]:void 0},yt.prototype.has=function(t){var r=this.__data__;return st?void 0!==r[t]:q.call(r,t)},yt.prototype.set=function(t,r){return this.__data__[t]=st&&void 0===r?"__lodash_hash_undefined__":r,this},mt.prototype.clear=function(){this.__data__=[]},mt.prototype.delete=function(t){var r=this.__data__,e=_t(r,t);return!(e<0)&&(e==r.length-1?r.pop():X.call(r,e,1),!0)},mt.prototype.get=function(t){var r=this.__data__,e=_t(r,t);return e<0?void 0:r[e][1]},mt.prototype.has=function(t){return _t(this.__data__,t)>-1},mt.prototype.set=function(t,r){var e=this.__data__,n=_t(e,t);return n<0?e.push([t,r]):e[n][1]=r,this},dt.prototype.clear=function(){this.__data__={hash:new yt,map:new(nt||mt),string:new yt}},dt.prototype.delete=function(t){return It(this,t).delete(t)},dt.prototype.get=function(t){return It(this,t).get(t)},dt.prototype.has=function(t){return It(this,t).has(t)},dt.prototype.set=function(t,r){return It(this,t).set(t,r),this},bt.prototype.clear=function(){this.__data__=new mt},bt.prototype.delete=function(t){return this.__data__.delete(t)},bt.prototype.get=function(t){return this.__data__.get(t)},bt.prototype.has=function(t){return this.__data__.has(t)},bt.prototype.set=function(t,r){var e=this.__data__;if(e instanceof mt){var n=e.__data__;if(!nt||n.length<199)return n.push([t,r]),this;e=this.__data__=new dt(n)}return e.set(t,r),this};var Wt=Y?L(Y,Object):function(){return[]},Mt=function(t){return $.call(t)};function Rt(t,r){return!!(r=null==r?9007199254740991:r)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<r}function St(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||B)}function Ct(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ft(t,r){return t===r||t!=t&&r!=r}(et&&Mt(new et(new ArrayBuffer(1)))!=u||nt&&Mt(new nt)!=s||ot&&"[object Promise]"!=Mt(ot.resolve())||it&&Mt(new it)!=c||at&&"[object WeakMap]"!=Mt(new at))&&(Mt=function(t){var r=$.call(t),e="[object Object]"==r?t.constructor:void 0,n=e?Ct(e):void 0;if(n)switch(n){case ct:return u;case ut:return s;case lt:return"[object Promise]";case ft:return c;case gt:return"[object WeakMap]"}return r});var Lt=Array.isArray;function Pt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!Nt(t)}var Dt=tt||function(){return!1};function Nt(t){var r=kt(t)?$.call(t):"";return r==i||r==a}function kt(t){var e=r(t);return!!t&&("object"==e||"function"==e)}function Bt(t){return Pt(t)?vt(t):function(t){if(!St(t))return rt(t);var r=[];for(var e in Object(t))q.call(t,e)&&"constructor"!=e&&r.push(e);return r}(t)}t.exports=function(t){return jt(t,!0,!0)}}));function T(t,r){return function(t,r,e){if("string"!=typeof t||!t.length)return null;if(r&&"number"==typeof r||(r=0),!t[r+1])return null;if(t[r+1]&&(!e&&t[r+1].trim()||e&&(t[r+1].trim()||"\n\r".includes(t[r+1]))))return r+1;if(t[r+2]&&(!e&&t[r+2].trim()||e&&(t[r+2].trim()||"\n\r".includes(t[r+2]))))return r+2;for(var n=r+1,o=t.length;n<o;n++)if(t[n]&&(!e&&t[n].trim()||e&&(t[n].trim()||"\n\r".includes(t[n]))))return n;return null}(t,r,!1)}function A(t,r){return function(t,r,e){if("string"!=typeof t||!t.length)return null;if(r&&"number"==typeof r||(r=0),r<1)return null;if(t[~-r]&&(!e&&t[~-r].trim()||e&&(t[~-r].trim()||"\n\r".includes(t[~-r]))))return~-r;if(t[r-2]&&(!e&&t[r-2].trim()||e&&(t[r-2].trim()||"\n\r".includes(t[r-2]))))return r-2;for(var n=r;n--;)if(t[n]&&(!e&&t[n].trim()||e&&(t[n].trim()||"\n\r".includes(t[n]))))return n;return null}(t,r,!1)}function I(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2?arguments[2]:void 0;if(!(e.trim()||t.length&&"\n"!==e&&" "!==e&&" "===(r?t[t.length-1]:t[0])||t.length&&"\n"===(r?t[t.length-1]:t[0])&&"\n"!==e&&" "!==e))if(r){if(("\n"===e||" "===e)&&t.length&&" "===t[t.length-1])for(;t.length&&" "===t[t.length-1];)t.pop();t.push(" "===e||"\n"===e?e:" ")}else{if(("\n"===e||" "===e)&&t.length&&" "===t[0])for(;t.length&&" "===t[0];)t.shift();t.unshift(" "===e||"\n"===e?e:" ")}}function E(t,r){if("string"==typeof t&&t.length){var e,n,o=!1;if(t.includes("\r\n")&&(o=!0),e=r&&"number"==typeof r?r:1,""===t.trim()){var i=[];for(n=e,Array.from(t).forEach((function(t){("\n"!==t||n)&&("\n"===t&&(n-=1),I(i,!0,t))}));i.length>1&&" "===i[i.length-1];)i.pop();return i.join("")}var a=[];if(n=e,""===t[0].trim())for(var s=0,c=t.length;s<c&&!t[s].trim();s++)("\n"!==t[s]||n)&&("\n"===t[s]&&(n-=1),I(a,!0,t[s]));var u=[];if(n=e,""===t.slice(-1).trim())for(var l=t.length;l--&&!t[l].trim();)("\n"!==t[l]||n)&&("\n"===t[l]&&(n-=1),I(u,!1,t[l]));return o?"".concat(a.join("")).concat(t.trim()).concat(u.join("")).replace(/\n/g,"\r\n"):a.join("")+t.trim()+u.join("")}return t}function W(t,r){if(!Array.isArray(t)||!t.length)return t;var e,n,o=i(i({},{strictlyTwoElementsInRangeArrays:!1,progressFn:null}),r);if(o.strictlyTwoElementsInRangeArrays&&!t.every((function(t,r){return 2===t.length||(e=r,n=t.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ".concat(e,"th range (").concat(JSON.stringify(t[e],null,4),") has not two but ").concat(n," elements!"));if(!t.every((function(t,r){return!(!Number.isInteger(t[0])||t[0]<0||!Number.isInteger(t[1])||t[1]<0)||(e=r,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ".concat(e,"th range (").concat(JSON.stringify(t[e],null,4),") does not consist of only natural numbers!"));var a=t.length*t.length,s=0;return Array.from(t).sort((function(t,r){return o.progressFn&&(s+=1,o.progressFn(Math.floor(100*s/a))),t[0]===r[0]?t[1]<r[1]?-1:t[1]>r[1]?1:0:t[0]<r[0]?-1:1}))}function M(t,e){function n(t){return"string"==typeof t}function o(t){return t&&"object"===r(t)&&!Array.isArray(t)}if(!Array.isArray(t)||!t.length)return t;var s,c={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};if(e){if(!o(e))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(e,null,4)," (type ").concat(r(e),")"));if((s=i(i({},c),e)).progressFn&&o(s.progressFn)&&!Object.keys(s.progressFn).length)s.progressFn=null;else if(s.progressFn&&"function"!=typeof s.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'.concat(r(s.progressFn),'", equal to ').concat(JSON.stringify(s.progressFn,null,4)));if(s.mergeType&&1!==s.mergeType&&2!==s.mergeType)if(n(s.mergeType)&&"1"===s.mergeType.trim())s.mergeType=1;else{if(!n(s.mergeType)||"2"!==s.mergeType.trim())throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(r(s.mergeType),'", equal to ').concat(JSON.stringify(s.mergeType,null,4)));s.mergeType=2}if("boolean"!=typeof s.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'.concat(r(s.joinRangesThatTouchEdges),'", equal to ').concat(JSON.stringify(s.joinRangesThatTouchEdges,null,4)))}else s=i({},c);for(var u,l,f,g=t.map((function(t){return a(t)})).filter((function(t){return void 0!==t[2]||t[0]!==t[1]})),h=(u=s.progressFn?W(g,{progressFn:function(t){(f=Math.floor(t/5))!==l&&(l=f,s.progressFn(f))}}):W(g)).length-1,p=h;p>0;p--)s.progressFn&&(f=Math.floor(78*(1-p/h))+21)!==l&&f>l&&(l=f,s.progressFn(f)),(u[p][0]<=u[p-1][0]||!s.joinRangesThatTouchEdges&&u[p][0]<u[p-1][1]||s.joinRangesThatTouchEdges&&u[p][0]<=u[p-1][1])&&(u[p-1][0]=Math.min(u[p][0],u[p-1][0]),u[p-1][1]=Math.max(u[p][1],u[p-1][1]),void 0!==u[p][2]&&(u[p-1][0]>=u[p][0]||u[p-1][1]<=u[p][1])&&null!==u[p-1][2]&&(null===u[p][2]&&null!==u[p-1][2]?u[p-1][2]=null:void 0!==u[p-1][2]?2===s.mergeType&&u[p-1][0]===u[p][0]?u[p-1][2]=u[p][2]:u[p-1][2]+=u[p][2]:u[p-1][2]=u[p][2]),u.splice(p,1),p=u.length);return u}function R(t){return null!=t}function S(t){return Number.isInteger(t)&&t>=0}function C(t){return"string"==typeof t}function F(t){return/^\d*$/.test(t)?parseInt(t,10):t}var L=function(){function t(e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t);var n=i(i({},{limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1}),e);if(n.mergeType&&1!==n.mergeType&&2!==n.mergeType)if(C(n.mergeType)&&"1"===n.mergeType.trim())n.mergeType=1;else{if(!C(n.mergeType)||"2"!==n.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(r(n.mergeType),'", equal to ').concat(JSON.stringify(n.mergeType,null,4)));n.mergeType=2}this.opts=n}var n,o,s;return n=t,(o=[{key:"add",value:function(t,e,n){for(var o=this,i=arguments.length,s=new Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];if(s.length>0)throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_03] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: ".concat(JSON.stringify(s,null,4)));if(R(t)||R(e)){if(R(t)&&!R(e)){if(Array.isArray(t)){if(t.length){if(t.some((function(t){return Array.isArray(t)})))return void t.forEach((function(t){Array.isArray(t)&&o.add.apply(o,a(t))}));t.length>1&&S(F(t[0]))&&S(F(t[1]))&&this.add.apply(this,a(t))}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('.concat(JSON.stringify(t,null,0),') but second-one, "to" is not (').concat(JSON.stringify(e,null,0),")"))}if(!R(t)&&R(e))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('.concat(JSON.stringify(e,null,0),') but first-one, "from" is not (').concat(JSON.stringify(t,null,0),")"));var u=/^\d*$/.test(t)?parseInt(t,10):t,l=/^\d*$/.test(e)?parseInt(e,10):e;if(S(n)&&(n=String(n)),!S(u)||!S(l))throw S(u)&&u>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(r(l),'" equal to: ').concat(JSON.stringify(l,null,4))):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(r(u),'" equal to: ').concat(JSON.stringify(u,null,4)));if(R(n)&&!C(n)&&!S(n))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ".concat(r(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(R(this.ranges)&&Array.isArray(this.last())&&u===this.last()[1]){if(this.last()[1]=l,this.last()[2],null!==this.last()[2]&&R(n)){var f=!(R(this.last()[2])&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?n:this.last()[2]+n;this.opts.limitToBeAddedWhitespace&&(f=E(f,this.opts.limitLinebreaksCount)),C(f)&&!f.length||(this.last()[2]=f)}}else{this.ranges||(this.ranges=[]);var g=void 0===n||C(n)&&!n.length?[u,l]:[u,l,this.opts.limitToBeAddedWhitespace?E(n,this.opts.limitLinebreaksCount):n];this.ranges.push(g)}}}},{key:"push",value:function(t,r,e){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];this.add.apply(this,[t,r,e].concat(o))}},{key:"current",value:function(){var t=this;return null!=this.ranges?(this.ranges=M(this.ranges,{mergeType:this.opts.mergeType}),this.opts.limitToBeAddedWhitespace?this.ranges.map((function(r){return R(r[2])?[r[0],r[1],E(r[2],t.opts.limitLinebreaksCount)]:r})):this.ranges):null}},{key:"wipe",value:function(){this.ranges=void 0}},{key:"replace",value:function(t){if(Array.isArray(t)&&t.length){if(!Array.isArray(t[0])||!S(t[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ".concat(JSON.stringify(t[0],null,4)," should be an array and its first element should be an integer, a string index."));this.ranges=Array.from(t)}else this.ranges=void 0}},{key:"last",value:function(){return void 0!==this.ranges&&Array.isArray(this.ranges)?this.ranges[this.ranges.length-1]:null}}])&&e(n.prototype,o),s&&e(n,s),t}();function P(t){return null!=t}function D(t){return"string"==typeof t}function N(t,e,n){var o,i=0,a=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if(!D(t))throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ".concat(r(t),", equal to: ").concat(JSON.stringify(t,null,4)));if(null===e)return t;if(!Array.isArray(e))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ".concat(r(e),", equal to: ").concat(JSON.stringify(e,null,4)));if(n&&"function"!=typeof n)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: ".concat(r(n),", equal to: ").concat(JSON.stringify(n,null,4)));var s=(o=Array.isArray(e)&&(Number.isInteger(e[0])&&e[0]>=0||/^\d*$/.test(e[0]))&&(Number.isInteger(e[1])&&e[1]>=0||/^\d*$/.test(e[1]))?[Array.from(e)]:Array.from(e)).length,c=0;o.forEach((function(t,e){if(n&&(i=Math.floor(c/s*10))!==a&&(a=i,n(i)),!Array.isArray(t))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has ".concat(e,"th element not an array: ").concat(JSON.stringify(t,null,4),", which is ").concat(r(t)));if(!Number.isInteger(t[0])||t[0]<0){if(!/^\d*$/.test(t[0]))throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has ".concat(e,"th element, array [").concat(t[0],",").concat(t[1],"]. That array has first element not an integer, but ").concat(r(t[0]),", equal to: ").concat(JSON.stringify(t[0],null,4),". Computer doesn't like this."));o[e][0]=Number.parseInt(o[e][0],10)}if(!Number.isInteger(t[1])){if(!/^\d*$/.test(t[1]))throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has ".concat(e,"th element, array [").concat(t[0],",").concat(t[1],"]. That array has second element not an integer, but ").concat(r(t[1]),", equal to: ").concat(JSON.stringify(t[1],null,4),". Computer doesn't like this."));o[e][1]=Number.parseInt(o[e][1],10)}c+=1}));var u=M(o,{progressFn:function(t){n&&(i=10+Math.floor(t/10))!==a&&(a=i,n(i))}}),l=u.length;if(l>0){var f=t.slice(u[l-1][1]);t=u.reduce((function(r,e,o,s){n&&(i=20+Math.floor(o/l*80))!==a&&(a=i,n(i));var c=0===o?0:s[o-1][1],u=s[o][0];return r+t.slice(c,u)+(P(s[o][2])?s[o][2]:"")}),""),t+=f}return t}var k=[{heads:"{{",tails:"}}"},{heads:["{% if","{%- if"],tails:["{% endif","{%- endif"]},{heads:["{% for","{%- for"],tails:["{% endfor","{%- endfor"]},{heads:["{%","{%-"],tails:["%}","-%}"]},{heads:"{#",tails:"#}"}],B=[{heads:"{{",tails:"}}"}],x=[{heads:["<%","<%=","<%-"],tails:["%>","=%>","-%>"]}],H=["abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"],J={removeWidowPreventionMeasures:!1,convertEntities:!0,targetLanguage:"html",UKPostcodes:!1,hyphens:!0,minWordCount:4,minCharCount:5,ignore:[],reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100,tagRanges:[]};t.defaultOpts=J,t.removeWidows=function(t,e){function n(t){return"string"==typeof t}var o=Date.now();if(!n(t))throw void 0===t?new Error("string-remove-widows: [THROW_ID_01] the first input argument is completely missing! It should be given as string."):new Error('string-remove-widows: [THROW_ID_02] the first input argument must be string! It was given as "'.concat(r(t),'", equal to:\n').concat(JSON.stringify(t,null,4)));if(e&&!j(e))throw new Error("string-remove-widows: [THROW_ID_03] the second input argument, options object, should be a plain object but it was given as type ".concat(r(e),", equal to ").concat(JSON.stringify(e,null,4)));var a,s,u,l,f,h,p,y,m,d,b,v,w=Array.isArray,_=t.length,O=new L({mergeType:2}),I=["."],E=/[A-Z]{1,2}[0-9][0-9A-Z]?$/,W=/^[0-9][A-Z]{2}/,M=0,R=i(i({},J),e),S={removeWidows:!1,convertEntities:!1};if(R.dashes&&(R.hyphens=!0,delete R.dashes),R.ignore&&(w(R.ignore)||n(R.ignore))){if(R.ignore=c(R.ignore),R.ignore.includes("all"))R.ignore=R.ignore.concat(k.concat(x));else if(R.ignore.some((function(t){return n(t)}))){var C=[];R.ignore=R.ignore.filter((function(t){return n(t)&&t.length?(["nunjucks","jinja","liquid"].includes(t.trim().toLowerCase())?C=C.concat(k):["hugo"].includes(t.trim().toLowerCase())?C=C.concat(B):["hexo"].includes(t.trim().toLowerCase())&&(C=C.concat(x)),!1):"object"===r(t)||void 0})),C.length&&(R.ignore=R.ignore.concat(C))}}else R.ignore=[];function F(r,e){var o=" ";R.removeWidowPreventionMeasures?o=" ":R.convertEntities&&(o="&nbsp;",n(R.targetLanguage)&&("css"===R.targetLanguage.trim().toLowerCase()?o="\\00A0":"js"===R.targetLanguage.trim().toLowerCase()&&(o="\\u00A0"))),t.slice(r,e)!==o&&O.push(r,e,o)}function P(){s=0,u=0,l=void 0,f=void 0,h=void 0,p=void 0,y=void 0,m=void 0}R.reportProgressFunc&&(v=Math.floor(R.reportProgressFuncTo-.06*(R.reportProgressFuncTo-R.reportProgressFuncFrom)-R.reportProgressFuncFrom)),P();for(var D=function(r){if(!d&&w(R.ignore)&&R.ignore.length&&R.ignore.some((function(e,o){if(w(e.heads)&&e.heads.some((function(e){return t.startsWith(e,r)}))||n(e.heads)&&t.startsWith(e.heads,r))return s+=1,d=R.ignore[o].tails,q=r,!0})),!d&&b&&b===r&&(s+=1,b=void 0),"function"==typeof R.reportProgressFunc&&(a=R.reportProgressFuncFrom+Math.floor(r/_*v))!==M&&(M=a,R.reportProgressFunc(a)),!d&&r&&t[r]&&t[r].trim()&&(!t[r-1]||t[r-1]&&!t[r-1].trim())&&(p=r),!d&&t[r]&&t[r].trim()&&(u+=1),d||!R.hyphens||!("-".concat("—").concat("–").includes(t[r])||t.startsWith("&ndash;",r)||t.startsWith("\\2013",r)||t.startsWith("\\u2013",r)||t.startsWith("&mdash;",r)||t.startsWith("\\2014",r)||t.startsWith("\\u2014",r))||!t[r+1]||t[r+1].trim()&&"&"!==t[r]||t[r-1]&&!t[r-1].trim()&&t[A(t,r)]&&(F(A(t,r)+1,r),S.removeWidows=!0),d||!t.startsWith("&nbsp;",r)&&!t.startsWith("&#160;",r)||(y=r,m=r+6,t[r+6]&&t[r+6].trim()&&(b=r+6),R.convertEntities?"css"!==R.targetLanguage&&"js"!==R.targetLanguage||(O.push(r,r+6,"css"===R.targetLanguage?"\\00A0":"\\u00A0"),S.convertEntities=!0):(O.push(r,r+6," "),S.convertEntities=!0)),!d&&t[r+4]&&"\\"===t[r]&&"0"===t[r+1]&&"0"===t[r+2]&&"A"===t[r+3].toUpperCase()&&"0"===t[r+4]&&(y=r,m=r+5,t[r+5]&&t[r+5].trim()&&(b=r+5),R.convertEntities?"html"!==R.targetLanguage&&"js"!==R.targetLanguage||(O.push(r,r+5,"html"===R.targetLanguage?"&nbsp;":"\\u00A0"),S.convertEntities=!0):(O.push(r,r+5," "),S.convertEntities=!0)),!d&&"\\"===t[r]&&t[r+1]&&"u"===t[r+1].toLowerCase()&&"0"===t[r+2]&&"0"===t[r+3]&&t[r+4]&&"A"===t[r+4].toUpperCase()&&"0"===t[r+5]&&(y=r,m=r+6,t[r+6]&&t[r+6].trim()&&(b=r+6),R.convertEntities?"html"!==R.targetLanguage&&"css"!==R.targetLanguage||O.push(r,r+6,"html"===R.targetLanguage?"&nbsp;":"\\00A0"):O.push(r,r+6," ")),d||" "!==t[r]||(y=r,m=r+1,t[r+2]&&t[r+2].trim()&&(b=r+2),R.convertEntities&&O.push(r,r+1,"css"===R.targetLanguage?"\\00A0":"js"===R.targetLanguage?"\\u00A0":"&nbsp;")),d||!t[r]||!t[r].trim()||t[r-1]&&t[r-1].trim()||(s+=1),!d&&(!t[r]||"\r\n".includes(t[r])||("\n"===t[r]||"\r"===t[r]||"\r"===t[r]&&"\n"===t[r+1])&&t[r-1]&&I.includes(t[A(t,r)]))){var e,o;if((!R.minWordCount||s>=R.minWordCount)&&(!R.minCharCount||u>=R.minCharCount))void 0!==h&&void 0!==p&&void 0!==y&&void 0!==m?h>y?(e=h,o=p):(e=y,o=m):void 0!==h&&void 0!==p?(e=h,o=p):void 0!==y&&void 0!==m&&(e=y,o=m),e&&o||!l||!f||(e=l,o=f),e&&o&&(F(e,o),S.removeWidows=!0);P()}R.UKPostcodes&&t[r]&&!t[r].trim()&&t[r-1]&&t[r-1].trim()&&E.test(t.slice(0,r))&&t[T(t,r)]&&W.test(t.slice(T(t,r)))&&(F(r,T(t,r)),S.removeWidows=!0),d||!t[r]||t[r].trim()||!t[r-1]||!t[r-1].trim()||!(void 0===h||t[h-1]&&t[h-1].trim())||"/>".includes(t[T(t,r)])||t.slice(0,r).trim().endsWith("br")||t.slice(0,r).trim().endsWith("hr")||t.slice(0,r).endsWith("<")&&H.some((function(e){return t.startsWith(e,T(t,r))}))||(l=h,f=p,h=r,p=void 0,void 0===y&&void 0===m||(y=void 0,m=void 0));var i=void 0;d&&(!n(d)||d.length&&!t.startsWith(d,r)?!w(d)||d.length&&!d.some((function(e){if(t.startsWith(e,r))return i=e,q=r,!0}))||(d=void 0,r+=i.length,w(R.ignore)&&R.ignore.length&&t[r+1]&&R.ignore.some((function(e){return q=r,g(t,r,e.tails,{trimBeforeMatching:!0,cb:function(e,n,o){return o&&t[(r=o-1)+1]&&t[r+1].trim()&&(s+=1),q=r,!0}})}))):d=void 0),t[r]&&"\r\n".includes(t[r])&&(s=0,u=0),w(R.tagRanges)&&R.tagRanges.length&&R.tagRanges.some((function(t){if(r>=t[0]&&r<=t[1]&&t[1]-1>r)return r=t[1]-1,q=r,!0})),q=r},q=0;q<=_;q++)D(q);return{res:N(t,O.current(),R.reportProgressFunc?function(t){(a=Math.floor(.94*(R.reportProgressFuncTo-R.reportProgressFuncFrom)+t/100*(R.reportProgressFuncTo-R.reportProgressFuncFrom)*.06))!==M&&(M=a,R.reportProgressFunc(a))}:null),ranges:O.current(),log:{timeTakenInMiliseconds:Date.now()-o},whatWasDone:S}},t.version="1.6.11",Object.defineProperty(t,"__esModule",{value:!0})}));
